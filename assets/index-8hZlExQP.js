(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function jS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jp={exports:{}},eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function WR(){if(M0)return eu;M0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return eu.Fragment=e,eu.jsx=t,eu.jsxs=t,eu}var D0;function ZR(){return D0||(D0=1,Jp.exports=WR()),Jp.exports}var I=ZR(),$p={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function jR(){if(P0)return be;P0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=E&&q[E]||q["@@iterator"],typeof q=="function"?q:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function K(q,ie,ce){this.props=q,this.context=ie,this.refs=P,this.updater=ce||V}K.prototype.isReactComponent={},K.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},K.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function Z(){}Z.prototype=K.prototype;function Q(q,ie,ce){this.props=q,this.context=ie,this.refs=P,this.updater=ce||V}var oe=Q.prototype=new Z;oe.constructor=Q,k(oe,K.prototype),oe.isPureReactComponent=!0;var le=Array.isArray;function re(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function x(q,ie,ce){var me=ce.ref;return{$$typeof:n,type:q,key:ie,ref:me!==void 0?me:null,props:ce}}function O(q,ie){return x(q.type,ie,q.props)}function U(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function B(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ce){return ie[ce]})}var N=/\/+/g;function Te(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):ie.toString(36)}function De(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(re,re):(q.status="pending",q.then(function(ie){q.status==="pending"&&(q.status="fulfilled",q.value=ie)},function(ie){q.status==="pending"&&(q.status="rejected",q.reason=ie)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function J(q,ie,ce,me,Ie){var Pe=typeof q;(Pe==="undefined"||Pe==="boolean")&&(q=null);var Ge=!1;if(q===null)Ge=!0;else switch(Pe){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(q.$$typeof){case n:case e:Ge=!0;break;case _:return Ge=q._init,J(Ge(q._payload),ie,ce,me,Ie)}}if(Ge)return Ie=Ie(q),Ge=me===""?"."+Te(q,0):me,le(Ie)?(ce="",Ge!=null&&(ce=Ge.replace(N,"$&/")+"/"),J(Ie,ie,ce,"",function(Mr){return Mr})):Ie!=null&&(U(Ie)&&(Ie=O(Ie,ce+(Ie.key==null||q&&q.key===Ie.key?"":(""+Ie.key).replace(N,"$&/")+"/")+Ge)),ie.push(Ie)),1;Ge=0;var Ot=me===""?".":me+":";if(le(q))for(var dt=0;dt<q.length;dt++)me=q[dt],Pe=Ot+Te(me,dt),Ge+=J(me,ie,ce,Pe,Ie);else if(dt=w(q),typeof dt=="function")for(q=dt.call(q),dt=0;!(me=q.next()).done;)me=me.value,Pe=Ot+Te(me,dt++),Ge+=J(me,ie,ce,Pe,Ie);else if(Pe==="object"){if(typeof q.then=="function")return J(De(q),ie,ce,me,Ie);throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function ae(q,ie,ce){if(q==null)return q;var me=[],Ie=0;return J(q,me,"","",function(Pe){return ie.call(ce,Pe,Ie++)}),me}function Ee(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=ce)},function(ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=ce)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var Ke=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Ze={map:ae,forEach:function(q,ie,ce){ae(q,function(){ie.apply(this,arguments)},ce)},count:function(q){var ie=0;return ae(q,function(){ie++}),ie},toArray:function(q){return ae(q,function(ie){return ie})||[]},only:function(q){if(!U(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return be.Activity=T,be.Children=Ze,be.Component=K,be.Fragment=t,be.Profiler=o,be.PureComponent=Q,be.StrictMode=i,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,be.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},be.cache=function(q){return function(){return q.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(q,ie,ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=k({},q.props),Ie=q.key;if(ie!=null)for(Pe in ie.key!==void 0&&(Ie=""+ie.key),ie)!D.call(ie,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&ie.ref===void 0||(me[Pe]=ie[Pe]);var Pe=arguments.length-2;if(Pe===1)me.children=ce;else if(1<Pe){for(var Ge=Array(Pe),Ot=0;Ot<Pe;Ot++)Ge[Ot]=arguments[Ot+2];me.children=Ge}return x(q.type,Ie,me)},be.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},be.createElement=function(q,ie,ce){var me,Ie={},Pe=null;if(ie!=null)for(me in ie.key!==void 0&&(Pe=""+ie.key),ie)D.call(ie,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=ie[me]);var Ge=arguments.length-2;if(Ge===1)Ie.children=ce;else if(1<Ge){for(var Ot=Array(Ge),dt=0;dt<Ge;dt++)Ot[dt]=arguments[dt+2];Ie.children=Ot}if(q&&q.defaultProps)for(me in Ge=q.defaultProps,Ge)Ie[me]===void 0&&(Ie[me]=Ge[me]);return x(q,Pe,Ie)},be.createRef=function(){return{current:null}},be.forwardRef=function(q){return{$$typeof:f,render:q}},be.isValidElement=U,be.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:Ee}},be.memo=function(q,ie){return{$$typeof:h,type:q,compare:ie===void 0?null:ie}},be.startTransition=function(q){var ie=M.T,ce={};M.T=ce;try{var me=q(),Ie=M.S;Ie!==null&&Ie(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(re,Ke)}catch(Pe){Ke(Pe)}finally{ie!==null&&ce.types!==null&&(ie.types=ce.types),M.T=ie}},be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},be.use=function(q){return M.H.use(q)},be.useActionState=function(q,ie,ce){return M.H.useActionState(q,ie,ce)},be.useCallback=function(q,ie){return M.H.useCallback(q,ie)},be.useContext=function(q){return M.H.useContext(q)},be.useDebugValue=function(){},be.useDeferredValue=function(q,ie){return M.H.useDeferredValue(q,ie)},be.useEffect=function(q,ie){return M.H.useEffect(q,ie)},be.useEffectEvent=function(q){return M.H.useEffectEvent(q)},be.useId=function(){return M.H.useId()},be.useImperativeHandle=function(q,ie,ce){return M.H.useImperativeHandle(q,ie,ce)},be.useInsertionEffect=function(q,ie){return M.H.useInsertionEffect(q,ie)},be.useLayoutEffect=function(q,ie){return M.H.useLayoutEffect(q,ie)},be.useMemo=function(q,ie){return M.H.useMemo(q,ie)},be.useOptimistic=function(q,ie){return M.H.useOptimistic(q,ie)},be.useReducer=function(q,ie,ce){return M.H.useReducer(q,ie,ce)},be.useRef=function(q){return M.H.useRef(q)},be.useState=function(q){return M.H.useState(q)},be.useSyncExternalStore=function(q,ie,ce){return M.H.useSyncExternalStore(q,ie,ce)},be.useTransition=function(){return M.H.useTransition()},be.version="19.2.3",be}var V0;function ng(){return V0||(V0=1,$p.exports=jR()),$p.exports}var he=ng();const eb=jS(he);var Qp={exports:{}},tu={},Xp={exports:{}},Wp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function tb(){return k0||(k0=1,(function(n){function e(J,ae){var Ee=J.length;J.push(ae);e:for(;0<Ee;){var Ke=Ee-1>>>1,Ze=J[Ke];if(0<o(Ze,ae))J[Ke]=ae,J[Ee]=Ze,Ee=Ke;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ae=J[0],Ee=J.pop();if(Ee!==ae){J[0]=Ee;e:for(var Ke=0,Ze=J.length,q=Ze>>>1;Ke<q;){var ie=2*(Ke+1)-1,ce=J[ie],me=ie+1,Ie=J[me];if(0>o(ce,Ee))me<Ze&&0>o(Ie,ce)?(J[Ke]=Ie,J[me]=Ee,Ke=me):(J[Ke]=ce,J[ie]=Ee,Ke=ie);else if(me<Ze&&0>o(Ie,Ee))J[Ke]=Ie,J[me]=Ee,Ke=me;else break e}}return ae}function o(J,ae){var Ee=J.sortIndex-ae.sortIndex;return Ee!==0?Ee:J.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],h=[],_=1,T=null,E=3,w=!1,V=!1,k=!1,P=!1,K=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function oe(J){for(var ae=t(h);ae!==null;){if(ae.callback===null)i(h);else if(ae.startTime<=J)i(h),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(h)}}function le(J){if(k=!1,oe(J),!V)if(t(p)!==null)V=!0,re||(re=!0,B());else{var ae=t(h);ae!==null&&De(le,ae.startTime-J)}}var re=!1,M=-1,D=5,x=-1;function O(){return P?!0:!(n.unstable_now()-x<D)}function U(){if(P=!1,re){var J=n.unstable_now();x=J;var ae=!0;try{e:{V=!1,k&&(k=!1,Z(M),M=-1),w=!0;var Ee=E;try{t:{for(oe(J),T=t(p);T!==null&&!(T.expirationTime>J&&O());){var Ke=T.callback;if(typeof Ke=="function"){T.callback=null,E=T.priorityLevel;var Ze=Ke(T.expirationTime<=J);if(J=n.unstable_now(),typeof Ze=="function"){T.callback=Ze,oe(J),ae=!0;break t}T===t(p)&&i(p),oe(J)}else i(p);T=t(p)}if(T!==null)ae=!0;else{var q=t(h);q!==null&&De(le,q.startTime-J),ae=!1}}break e}finally{T=null,E=Ee,w=!1}ae=void 0}}finally{ae?B():re=!1}}}var B;if(typeof Q=="function")B=function(){Q(U)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Te=N.port2;N.port1.onmessage=U,B=function(){Te.postMessage(null)}}else B=function(){K(U,0)};function De(J,ae){M=K(function(){J(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(J){switch(E){case 1:case 2:case 3:var ae=3;break;default:ae=E}var Ee=E;E=ae;try{return J()}finally{E=Ee}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ee=E;E=J;try{return ae()}finally{E=Ee}},n.unstable_scheduleCallback=function(J,ae,Ee){var Ke=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ke+Ee:Ke):Ee=Ke,J){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=Ee+Ze,J={id:_++,callback:ae,priorityLevel:J,startTime:Ee,expirationTime:Ze,sortIndex:-1},Ee>Ke?(J.sortIndex=Ee,e(h,J),t(p)===null&&J===t(h)&&(k?(Z(M),M=-1):k=!0,De(le,Ee-Ke))):(J.sortIndex=Ze,e(p,J),V||w||(V=!0,re||(re=!0,B()))),J},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(J){var ae=E;return function(){var Ee=E;E=ae;try{return J.apply(this,arguments)}finally{E=Ee}}}})(Wp)),Wp}var L0;function nb(){return L0||(L0=1,Xp.exports=tb()),Xp.exports}var Zp={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function ib(){if(U0)return nn;U0=1;var n=ng();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},nn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},nn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},nn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},nn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:w}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:E,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},nn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},nn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},nn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},nn.requestFormReset=function(p){i.d.r(p)},nn.unstable_batchedUpdates=function(p,h){return p(h)},nn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},nn.version="19.2.3",nn}var O0;function sb(){if(O0)return Zp.exports;O0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zp.exports=ib(),Zp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function rb(){if(F0)return tu;F0=1;var n=nb(),e=ng(),t=sb();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),r;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=v;break}if(R===c){A=!0,c=y,l=v;break}R=R.sibling}if(!A){for(R=v.child;R;){if(R===l){A=!0,l=v,c=y;break}if(R===c){A=!0,c=v,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function Te(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case K:return"Profiler";case P:return"StrictMode";case le:return"Suspense";case re:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case Q:return s.displayName||"Context";case Z:return(s._context.displayName||"Context")+".Consumer";case oe:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Te(s.type)||"Memo";case D:r=s._payload,s=s._init;try{return Te(s(r))}catch{}}return null}var De=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Ke=[],Ze=-1;function q(s){return{current:s}}function ie(s){0>Ze||(s.current=Ke[Ze],Ke[Ze]=null,Ze--)}function ce(s,r){Ze++,Ke[Ze]=s.current,s.current=r}var me=q(null),Ie=q(null),Pe=q(null),Ge=q(null);function Ot(s,r){switch(ce(Pe,r),ce(Ie,s),ce(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?e0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=e0(r),s=t0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ie(me),ce(me,s)}function dt(){ie(me),ie(Ie),ie(Pe)}function Mr(s){s.memoizedState!==null&&ce(Ge,s);var r=me.current,l=t0(r,s.type);r!==l&&(ce(Ie,s),ce(me,l))}function Io(s){Ie.current===s&&(ie(me),ie(Ie)),Ge.current===s&&(ie(Ge),Xl._currentValue=Ee)}var wo,Ro;function yi(s){if(wo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);wo=r&&r[1]||"",Ro=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wo+s+Ro}var Xa=!1;function Dr(s,r){if(!s||Xa)return"";Xa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var $=W}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(W){$=W}s.call(ne.prototype)}}else{try{throw Error()}catch(W){$=W}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],R=v[1];if(A&&R){var L=A.split(`
`),Y=R.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===Y.length)for(c=L.length-1,y=Y.length-1;1<=c&&0<=y&&L[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==Y[y]){var j=`
`+L[c].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=c&&0<=y);break}}}finally{Xa=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?yi(l):""}function Wa(s,r){switch(s.tag){case 26:case 27:case 5:return yi(s.type);case 16:return yi("Lazy");case 13:return s.child!==r&&r!==null?yi("Suspense Fallback"):yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return Dr(s.type,!1);case 11:return Dr(s.type.render,!1);case 1:return Dr(s.type,!0);case 31:return yi("Activity");default:return""}}function Za(s){try{var r="",l=null;do r+=Wa(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var wt=Object.prototype.hasOwnProperty,Ft=n.unstable_scheduleCallback,Ns=n.unstable_cancelCallback,Qd=n.unstable_shouldYield,Gu=n.unstable_requestPaint,un=n.unstable_now,Pr=n.unstable_getCurrentPriorityLevel,ja=n.unstable_ImmediatePriority,el=n.unstable_UserBlockingPriority,xs=n.unstable_NormalPriority,Xd=n.unstable_LowPriority,zu=n.unstable_IdlePriority,Ku=n.log,Yu=n.unstable_setDisableYieldValue,jn=null,Jt=null;function Ln(s){if(typeof Ku=="function"&&Yu(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(jn,s)}catch{}}var Tt=Math.clz32?Math.clz32:$u,Ju=Math.log,bo=Math.LN2;function $u(s){return s>>>=0,s===0?32:31-(Ju(s)/bo|0)|0}var _i=256,Vr=262144,Rt=4194304;function vi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ti(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=vi(c):(A&=R,A!==0?y=vi(A):l||(l=R&~s,l!==0&&(y=vi(l))))):(R=c&~v,R!==0?y=vi(R):A!==0?y=vi(A):l||(l=c&~s,l!==0&&(y=vi(l)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:y}function ei(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Wd(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qu(){var s=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),s}function Ei(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function kr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zd(s,r,l,c,y,v){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,L=s.expirationTimes,Y=s.hiddenUpdates;for(l=A&~l;0<l;){var j=31-Tt(l),ne=1<<j;R[j]=0,L[j]=-1;var $=Y[j];if($!==null)for(Y[j]=null,j=0;j<$.length;j++){var W=$[j];W!==null&&(W.lane&=-536870913)}l&=~ne}c!==0&&Lr(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~r))}function Lr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Tt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function tl(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-Tt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function nl(s,r){var l=r&-r;return l=(l&42)!==0?1:Ur(l),(l&(s.suspendedLanes|r))!==0?0:l}function Ur(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function $i(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Xu(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:C0(s.type))}function ti(s,r){var l=ae.p;try{return ae.p=s,r()}finally{ae.p=l}}var ni=Math.random().toString(36).slice(2),bt="__reactFiber$"+ni,Ht="__reactProps$"+ni,Si="__reactContainer$"+ni,No="__reactEvents$"+ni,jd="__reactListeners$"+ni,Wu="__reactHandles$"+ni,Zu="__reactResources$"+ni,Ai="__reactMarker$"+ni;function xo(s){delete s[bt],delete s[Ht],delete s[No],delete s[jd],delete s[Wu]}function Ci(s){var r=s[bt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Si]||l[bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=l0(s);s!==null;){if(l=s[bt])return l;s=l0(s)}return r}s=l,l=s.parentNode}return null}function Un(s){if(s=s[bt]||s[Si]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function wn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ii(s){var r=s[Zu];return r||(r=s[Zu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(s){s[Ai]=!0}var il=new Set,sl={};function wi(s,r){Ri(s,r),Ri(s+"Capture",r)}function Ri(s,r){for(sl[s]=r,s=0;s<r.length;s++)il.add(r[s])}var rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ol={},al={};function ju(s){return wt.call(al,s)?!0:wt.call(ol,s)?!1:rl.test(s)?al[s]=!0:(ol[s]=!0,!1)}function Mo(s,r,l){if(ju(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Rn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function xt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function Gt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ms(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ll(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function je(s){if(!s._valueTracker){var r=Ms(s)?"checked":"value";s._valueTracker=ll(s,r,""+s[r])}}function Or(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Ms(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function bi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fr=/[\n"\\]/g;function mn(s){return s.replace(Fr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Do(s,r,l,c,y,v,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Gt(r)):s.value!==""+Gt(r)&&(s.value=""+Gt(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?ul(s,A,Gt(r)):l!=null?ul(s,A,Gt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Gt(R):s.removeAttribute("name")}function ec(s,r,l,c,y,v,A,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){je(s);return}l=l!=null?""+Gt(l):"",r=r!=null?""+Gt(r):l,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),je(s)}function ul(s,r,l){r==="number"&&bi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ds(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Gt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function tc(s,r,l){if(r!=null&&(r=""+Gt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Gt(l):""}function Ps(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(De(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Gt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),je(s)}function gn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||nc.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function fl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&cl(s,y,c)}else for(var v in r)r.hasOwnProperty(v)&&cl(s,v,r[v])}function Po(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vo(s){return Vs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ii(){}var dl=null;function On(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ks=null,Ni=null;function qr(s){var r=Un(s);if(r&&(s=r.stateNode)){var l=s[Ht]||null;e:switch(s=r.stateNode,r.type){case"input":if(Do(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+mn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ht]||null;if(!y)throw Error(i(90));Do(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Or(c)}break e;case"textarea":tc(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ds(s,!!l.multiple,r,!1)}}}var ko=!1;function Ls(s,r,l){if(ko)return s(r,l);ko=!0;try{var c=s(r);return c}finally{if(ko=!1,(ks!==null||Ni!==null)&&(Xc(),ks&&(r=ks,s=Ni,Ni=ks=null,qr(r),s)))for(r=0;r<s.length;r++)qr(s[r])}}function si(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ht]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Fn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Br=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Br=!1}var xi=null,hl=null,Hr=null;function pl(){if(Hr)return Hr;var s,r=hl,l=r.length,c,y="value"in xi?xi.value:xi.textContent,v=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[v-c];c++);return Hr=y.slice(s,1<c?1-c:void 0)}function Gr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Qi(){return!0}function ri(){return!1}function $t(s){function r(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Qi:ri,this.isPropagationStopped=ri,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),r}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=$t(Xi),Us=T({},Xi,{view:0,detail:0}),ml=$t(Us),Os,Lo,Di,Uo=T({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Di&&(Di&&s.type==="mousemove"?(Os=s.screenX-Di.screenX,Lo=s.screenY-Di.screenY):Lo=Os=0,Di=s),Os)},movementY:function(s){return"movementY"in s?s.movementY:Lo}}),gl=$t(Uo),zr=T({},Uo,{dataTransfer:0}),sc=$t(zr),rc=T({},Us,{relatedTarget:0}),Kr=$t(rc),yl=T({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),oc=$t(yl),Oo=T({},Xi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ac=$t(Oo),lc=T({},Xi,{data:0}),Pi=$t(lc),uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=fc[s])?!!r[s]:!1}function Fs(){return dc}var cn=T({},Us,{key:function(s){if(s.key){var r=uc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Gr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(s){return s.type==="keypress"?Gr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hc=$t(cn),pc=T({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wi=$t(pc),g=T({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),S=$t(g),C=T({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=$t(C),G=T({},Uo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=$t(G),ue=T({},Xi,{newState:0,oldState:0}),xe=$t(ue),Et=[9,13,27,32],Qe=Fn&&"CompositionEvent"in window,ht=null;Fn&&"documentMode"in document&&(ht=document.documentMode);var qn=Fn&&"TextEvent"in window&&!ht,Vi=Fn&&(!Qe||ht&&8<ht&&11>=ht),oi=" ",ai=!1;function Yr(s,r){switch(s){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qo=!1;function Ew(s,r){switch(s){case"compositionend":return Fo(r);case"keypress":return r.which!==32?null:(ai=!0,oi);case"textInput":return s=r.data,s===oi&&ai?null:s;default:return null}}function Sw(s,r){if(qo)return s==="compositionend"||!Qe&&Yr(s,r)?(s=pl(),Hr=hl=xi=null,qo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vi&&r.locale!=="ko"?null:r.data;default:return null}}var Aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Aw[s.type]:r==="textarea"}function dy(s,r,l,c){ks?Ni?Ni.push(c):Ni=[c]:ks=c,r=sf(r,"onChange"),0<r.length&&(l=new Mi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var _l=null,vl=null;function Cw(s){$v(s,0)}function mc(s){var r=wn(s);if(Or(r))return s}function hy(s,r){if(s==="change")return r}var py=!1;if(Fn){var eh;if(Fn){var th="oninput"in document;if(!th){var my=document.createElement("div");my.setAttribute("oninput","return;"),th=typeof my.oninput=="function"}eh=th}else eh=!1;py=eh&&(!document.documentMode||9<document.documentMode)}function gy(){_l&&(_l.detachEvent("onpropertychange",yy),vl=_l=null)}function yy(s){if(s.propertyName==="value"&&mc(vl)){var r=[];dy(r,vl,s,On(s)),Ls(Cw,r)}}function Iw(s,r,l){s==="focusin"?(gy(),_l=r,vl=l,_l.attachEvent("onpropertychange",yy)):s==="focusout"&&gy()}function ww(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mc(vl)}function Rw(s,r){if(s==="click")return mc(r)}function bw(s,r){if(s==="input"||s==="change")return mc(r)}function Nw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var bn=typeof Object.is=="function"?Object.is:Nw;function Tl(s,r){if(bn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!wt.call(r,y)||!bn(s[y],r[y]))return!1}return!0}function _y(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function vy(s,r){var l=_y(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=_y(l)}}function Ty(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ty(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Ey(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=bi(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=bi(s.document)}return r}function nh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var xw=Fn&&"documentMode"in document&&11>=document.documentMode,Bo=null,ih=null,El=null,sh=!1;function Sy(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;sh||Bo==null||Bo!==bi(c)||(c=Bo,"selectionStart"in c&&nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),El&&Tl(El,c)||(El=c,c=sf(ih,"onSelect"),0<c.length&&(r=new Mi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Bo)))}function Jr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Ho={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},rh={},Ay={};Fn&&(Ay=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function $r(s){if(rh[s])return rh[s];if(!Ho[s])return s;var r=Ho[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Ay)return rh[s]=r[l];return s}var Cy=$r("animationend"),Iy=$r("animationiteration"),wy=$r("animationstart"),Mw=$r("transitionrun"),Dw=$r("transitionstart"),Pw=$r("transitioncancel"),Ry=$r("transitionend"),by=new Map,oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oh.push("scrollEnd");function li(s,r){by.set(s,r),wi(r,[s])}var gc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Bn=[],Go=0,ah=0;function yc(){for(var s=Go,r=ah=Go=0;r<s;){var l=Bn[r];Bn[r++]=null;var c=Bn[r];Bn[r++]=null;var y=Bn[r];Bn[r++]=null;var v=Bn[r];if(Bn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Ny(l,y,v)}}function _c(s,r,l,c){Bn[Go++]=s,Bn[Go++]=r,Bn[Go++]=l,Bn[Go++]=c,ah|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function lh(s,r,l,c){return _c(s,r,l,c),vc(s)}function Qr(s,r){return _c(s,null,null,r),vc(s)}function Ny(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&r!==null&&(y=31-Tt(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),v):null}function vc(s){if(50<Gl)throw Gl=0,yp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var zo={};function Vw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(s,r,l,c){return new Vw(s,r,l,c)}function uh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zi(s,r){var l=s.alternate;return l===null?(l=Nn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function xy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Tc(s,r,l,c,y,v){var A=0;if(c=s,typeof s=="function")uh(s)&&(A=1);else if(typeof s=="string")A=FR(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Nn(31,l,r,y),s.elementType=x,s.lanes=v,s;case k:return Xr(l.children,y,v,r);case P:A=8,y|=24;break;case K:return s=Nn(12,l,r,y|2),s.elementType=K,s.lanes=v,s;case le:return s=Nn(13,l,r,y),s.elementType=le,s.lanes=v,s;case re:return s=Nn(19,l,r,y),s.elementType=re,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:A=10;break e;case Z:A=9;break e;case oe:A=11;break e;case M:A=14;break e;case D:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Nn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=v,r}function Xr(s,r,l,c){return s=Nn(7,s,c,r),s.lanes=l,s}function ch(s,r,l){return s=Nn(6,s,null,r),s.lanes=l,s}function My(s){var r=Nn(18,null,null,0);return r.stateNode=s,r}function fh(s,r,l){return r=Nn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Dy=new WeakMap;function Hn(s,r){if(typeof s=="object"&&s!==null){var l=Dy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Za(r)},Dy.set(s,r),r)}return{value:s,source:r,stack:Za(r)}}var Ko=[],Yo=0,Ec=null,Sl=0,Gn=[],zn=0,qs=null,ki=1,Li="";function ji(s,r){Ko[Yo++]=Sl,Ko[Yo++]=Ec,Ec=s,Sl=r}function Py(s,r,l){Gn[zn++]=ki,Gn[zn++]=Li,Gn[zn++]=qs,qs=s;var c=ki;s=Li;var y=32-Tt(c)-1;c&=~(1<<y),l+=1;var v=32-Tt(r)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,ki=1<<32-Tt(r)+y|l<<y|c,Li=v+s}else ki=1<<v|l<<y|c,Li=s}function dh(s){s.return!==null&&(ji(s,1),Py(s,1,0))}function hh(s){for(;s===Ec;)Ec=Ko[--Yo],Ko[Yo]=null,Sl=Ko[--Yo],Ko[Yo]=null;for(;s===qs;)qs=Gn[--zn],Gn[zn]=null,Li=Gn[--zn],Gn[zn]=null,ki=Gn[--zn],Gn[zn]=null}function Vy(s,r){Gn[zn++]=ki,Gn[zn++]=Li,Gn[zn++]=qs,ki=r.id,Li=r.overflow,qs=s}var Qt=null,lt=null,He=!1,Bs=null,Kn=!1,ph=Error(i(519));function Hs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Al(Hn(r,s)),ph}function ky(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[bt]=s,r[Ht]=c,l){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(l=0;l<Kl.length;l++)Le(Kl[l],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),ec(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ps(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Zv(r.textContent,l)?(c.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),c.onScroll!=null&&Le("scroll",r),c.onScrollEnd!=null&&Le("scrollend",r),c.onClick!=null&&(r.onclick=ii),r=!0):r=!1,r||Hs(s,!0)}function Ly(s){for(Qt=s.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Qt=Qt.return}}function Jo(s){if(s!==Qt)return!1;if(!He)return Ly(s),He=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Dp(s.type,s.memoizedProps)),l=!l),l&&lt&&Hs(s),Ly(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=a0(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=a0(s)}else r===27?(r=lt,nr(s.type)?(s=Up,Up=null,lt=s):lt=r):lt=Qt?Jn(s.stateNode.nextSibling):null;return!0}function Wr(){lt=Qt=null,He=!1}function mh(){var s=Bs;return s!==null&&(Tn===null?Tn=s:Tn.push.apply(Tn,s),Bs=null),s}function Al(s){Bs===null?Bs=[s]:Bs.push(s)}var gh=q(null),Zr=null,es=null;function Gs(s,r,l){ce(gh,r._currentValue),r._currentValue=l}function ts(s){s._currentValue=gh.current,ie(gh)}function yh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function _h(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var L=0;L<r.length;L++)if(R.context===r[L]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),yh(v.return,l,s),c||(A=null);break e}v=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),yh(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function $o(s,r,l,c){s=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;bn(y.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Xl):s=[Xl])}y=y.return}s!==null&&_h(r,s,l,c),r.flags|=262144}function Sc(s){for(s=s.firstContext;s!==null;){if(!bn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function jr(s){Zr=s,es=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Xt(s){return Uy(Zr,s)}function Ac(s,r){return Zr===null&&jr(s),Uy(s,r)}function Uy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},es===null){if(s===null)throw Error(i(308));es=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else es=es.next=r;return l}var kw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},Lw=n.unstable_scheduleCallback,Uw=n.unstable_NormalPriority,Mt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vh(){return{controller:new kw,data:new Map,refCount:0}}function Cl(s){s.refCount--,s.refCount===0&&Lw(Uw,function(){s.controller.abort()})}var Il=null,Th=0,Qo=0,Xo=null;function Ow(s,r){if(Il===null){var l=Il=[];Th=0,Qo=Ap(),Xo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Th++,r.then(Oy,Oy),r}function Oy(){if(--Th===0&&Il!==null){Xo!==null&&(Xo.status="fulfilled");var s=Il;Il=null,Qo=0,Xo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Fw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Fy=J.S;J.S=function(s,r){Sv=un(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ow(s,r),Fy!==null&&Fy(s,r)};var eo=q(null);function Eh(){var s=eo.current;return s!==null?s:ot.pooledCache}function Cc(s,r){r===null?ce(eo,eo.current):ce(eo,r.pool)}function qy(){var s=Eh();return s===null?null:{parent:Mt._currentValue,pool:s}}var Wo=Error(i(460)),Sh=Error(i(474)),Ic=Error(i(542)),wc={then:function(){}};function By(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Hy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ii,ii),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,zy(s),s;default:if(typeof r.status=="string")r.then(ii,ii);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,zy(s),s}throw no=r,Wo}}function to(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(no=l,Wo):l}}var no=null;function Gy(){if(no===null)throw Error(i(459));var s=no;return no=null,s}function zy(s){if(s===Wo||s===Ic)throw Error(i(483))}var Zo=null,wl=0;function Rc(s){var r=wl;return wl+=1,Zo===null&&(Zo=[]),Hy(Zo,s,r)}function Rl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function bc(s,r){throw r.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Ky(s){function r(H,F){if(s){var z=H.deletions;z===null?(H.deletions=[F],H.flags|=16):z.push(F)}}function l(H,F){if(!s)return null;for(;F!==null;)r(H,F),F=F.sibling;return null}function c(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function y(H,F){return H=Zi(H,F),H.index=0,H.sibling=null,H}function v(H,F,z){return H.index=z,s?(z=H.alternate,z!==null?(z=z.index,z<F?(H.flags|=67108866,F):z):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function A(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function R(H,F,z,ee){return F===null||F.tag!==6?(F=ch(z,H.mode,ee),F.return=H,F):(F=y(F,z),F.return=H,F)}function L(H,F,z,ee){var _e=z.type;return _e===k?j(H,F,z.props.children,ee,z.key):F!==null&&(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===D&&to(_e)===F.type)?(F=y(F,z.props),Rl(F,z),F.return=H,F):(F=Tc(z.type,z.key,z.props,null,H.mode,ee),Rl(F,z),F.return=H,F)}function Y(H,F,z,ee){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=fh(z,H.mode,ee),F.return=H,F):(F=y(F,z.children||[]),F.return=H,F)}function j(H,F,z,ee,_e){return F===null||F.tag!==7?(F=Xr(z,H.mode,ee,_e),F.return=H,F):(F=y(F,z),F.return=H,F)}function ne(H,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=ch(""+F,H.mode,z),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return z=Tc(F.type,F.key,F.props,null,H.mode,z),Rl(z,F),z.return=H,z;case V:return F=fh(F,H.mode,z),F.return=H,F;case D:return F=to(F),ne(H,F,z)}if(De(F)||B(F))return F=Xr(F,H.mode,z,null),F.return=H,F;if(typeof F.then=="function")return ne(H,Rc(F),z);if(F.$$typeof===Q)return ne(H,Ac(H,F),z);bc(H,F)}return null}function $(H,F,z,ee){var _e=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:R(H,F,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===_e?L(H,F,z,ee):null;case V:return z.key===_e?Y(H,F,z,ee):null;case D:return z=to(z),$(H,F,z,ee)}if(De(z)||B(z))return _e!==null?null:j(H,F,z,ee,null);if(typeof z.then=="function")return $(H,F,Rc(z),ee);if(z.$$typeof===Q)return $(H,F,Ac(H,z),ee);bc(H,z)}return null}function W(H,F,z,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return H=H.get(z)||null,R(F,H,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return H=H.get(ee.key===null?z:ee.key)||null,L(F,H,ee,_e);case V:return H=H.get(ee.key===null?z:ee.key)||null,Y(F,H,ee,_e);case D:return ee=to(ee),W(H,F,z,ee,_e)}if(De(ee)||B(ee))return H=H.get(z)||null,j(F,H,ee,_e,null);if(typeof ee.then=="function")return W(H,F,z,Rc(ee),_e);if(ee.$$typeof===Q)return W(H,F,z,Ac(F,ee),_e);bc(F,ee)}return null}function ge(H,F,z,ee){for(var _e=null,Ye=null,ye=F,Ve=F=0,Oe=null;ye!==null&&Ve<z.length;Ve++){ye.index>Ve?(Oe=ye,ye=null):Oe=ye.sibling;var Je=$(H,ye,z[Ve],ee);if(Je===null){ye===null&&(ye=Oe);break}s&&ye&&Je.alternate===null&&r(H,ye),F=v(Je,F,Ve),Ye===null?_e=Je:Ye.sibling=Je,Ye=Je,ye=Oe}if(Ve===z.length)return l(H,ye),He&&ji(H,Ve),_e;if(ye===null){for(;Ve<z.length;Ve++)ye=ne(H,z[Ve],ee),ye!==null&&(F=v(ye,F,Ve),Ye===null?_e=ye:Ye.sibling=ye,Ye=ye);return He&&ji(H,Ve),_e}for(ye=c(ye);Ve<z.length;Ve++)Oe=W(ye,H,Ve,z[Ve],ee),Oe!==null&&(s&&Oe.alternate!==null&&ye.delete(Oe.key===null?Ve:Oe.key),F=v(Oe,F,Ve),Ye===null?_e=Oe:Ye.sibling=Oe,Ye=Oe);return s&&ye.forEach(function(ar){return r(H,ar)}),He&&ji(H,Ve),_e}function Se(H,F,z,ee){if(z==null)throw Error(i(151));for(var _e=null,Ye=null,ye=F,Ve=F=0,Oe=null,Je=z.next();ye!==null&&!Je.done;Ve++,Je=z.next()){ye.index>Ve?(Oe=ye,ye=null):Oe=ye.sibling;var ar=$(H,ye,Je.value,ee);if(ar===null){ye===null&&(ye=Oe);break}s&&ye&&ar.alternate===null&&r(H,ye),F=v(ar,F,Ve),Ye===null?_e=ar:Ye.sibling=ar,Ye=ar,ye=Oe}if(Je.done)return l(H,ye),He&&ji(H,Ve),_e;if(ye===null){for(;!Je.done;Ve++,Je=z.next())Je=ne(H,Je.value,ee),Je!==null&&(F=v(Je,F,Ve),Ye===null?_e=Je:Ye.sibling=Je,Ye=Je);return He&&ji(H,Ve),_e}for(ye=c(ye);!Je.done;Ve++,Je=z.next())Je=W(ye,H,Ve,Je.value,ee),Je!==null&&(s&&Je.alternate!==null&&ye.delete(Je.key===null?Ve:Je.key),F=v(Je,F,Ve),Ye===null?_e=Je:Ye.sibling=Je,Ye=Je);return s&&ye.forEach(function(XR){return r(H,XR)}),He&&ji(H,Ve),_e}function rt(H,F,z,ee){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var _e=z.key;F!==null;){if(F.key===_e){if(_e=z.type,_e===k){if(F.tag===7){l(H,F.sibling),ee=y(F,z.props.children),ee.return=H,H=ee;break e}}else if(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===D&&to(_e)===F.type){l(H,F.sibling),ee=y(F,z.props),Rl(ee,z),ee.return=H,H=ee;break e}l(H,F);break}else r(H,F);F=F.sibling}z.type===k?(ee=Xr(z.props.children,H.mode,ee,z.key),ee.return=H,H=ee):(ee=Tc(z.type,z.key,z.props,null,H.mode,ee),Rl(ee,z),ee.return=H,H=ee)}return A(H);case V:e:{for(_e=z.key;F!==null;){if(F.key===_e)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(H,F.sibling),ee=y(F,z.children||[]),ee.return=H,H=ee;break e}else{l(H,F);break}else r(H,F);F=F.sibling}ee=fh(z,H.mode,ee),ee.return=H,H=ee}return A(H);case D:return z=to(z),rt(H,F,z,ee)}if(De(z))return ge(H,F,z,ee);if(B(z)){if(_e=B(z),typeof _e!="function")throw Error(i(150));return z=_e.call(z),Se(H,F,z,ee)}if(typeof z.then=="function")return rt(H,F,Rc(z),ee);if(z.$$typeof===Q)return rt(H,F,Ac(H,z),ee);bc(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(l(H,F.sibling),ee=y(F,z),ee.return=H,H=ee):(l(H,F),ee=ch(z,H.mode,ee),ee.return=H,H=ee),A(H)):l(H,F)}return function(H,F,z,ee){try{wl=0;var _e=rt(H,F,z,ee);return Zo=null,_e}catch(ye){if(ye===Wo||ye===Ic)throw ye;var Ye=Nn(29,ye,null,H.mode);return Ye.lanes=ee,Ye.return=H,Ye}finally{}}}var io=Ky(!0),Yy=Ky(!1),zs=!1;function Ah(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ch(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ks(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ys(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=vc(s),Ny(s,null,l),r}return _c(s,c,r,l),vc(s)}function bl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,tl(s,l)}}function Ih(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=r:v=v.next=r}else y=v=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var wh=!1;function Nl(){if(wh){var s=Xo;if(s!==null)throw s}}function xl(s,r,l,c){wh=!1;var y=s.updateQueue;zs=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var L=R,Y=L.next;L.next=null,A===null?v=Y:A.next=Y,A=L;var j=s.alternate;j!==null&&(j=j.updateQueue,R=j.lastBaseUpdate,R!==A&&(R===null?j.firstBaseUpdate=Y:R.next=Y,j.lastBaseUpdate=L))}if(v!==null){var ne=y.baseState;A=0,j=Y=L=null,R=v;do{var $=R.lane&-536870913,W=$!==R.lane;if(W?(Ue&$)===$:(c&$)===$){$!==0&&$===Qo&&(wh=!0),j!==null&&(j=j.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=s,Se=R;$=r;var rt=l;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){ne=ge.call(rt,ne,$);break e}ne=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,$=typeof ge=="function"?ge.call(rt,ne,$):ge,$==null)break e;ne=T({},ne,$);break e;case 2:zs=!0}}$=R.callback,$!==null&&(s.flags|=64,W&&(s.flags|=8192),W=y.callbacks,W===null?y.callbacks=[$]:W.push($))}else W={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},j===null?(Y=j=W,L=ne):j=j.next=W,A|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;W=R,R=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);j===null&&(L=ne),y.baseState=L,y.firstBaseUpdate=Y,y.lastBaseUpdate=j,v===null&&(y.shared.lanes=0),Ws|=A,s.lanes=A,s.memoizedState=ne}}function Jy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function $y(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Jy(l[s],r)}var jo=q(null),Nc=q(0);function Qy(s,r){s=cs,ce(Nc,s),ce(jo,r),cs=s|r.baseLanes}function Rh(){ce(Nc,cs),ce(jo,jo.current)}function bh(){cs=Nc.current,ie(jo),ie(Nc)}var xn=q(null),Yn=null;function Js(s){var r=s.alternate;ce(St,St.current&1),ce(xn,s),Yn===null&&(r===null||jo.current!==null||r.memoizedState!==null)&&(Yn=s)}function Nh(s){ce(St,St.current),ce(xn,s),Yn===null&&(Yn=s)}function Xy(s){s.tag===22?(ce(St,St.current),ce(xn,s),Yn===null&&(Yn=s)):$s()}function $s(){ce(St,St.current),ce(xn,xn.current)}function Mn(s){ie(xn),Yn===s&&(Yn=null),ie(St)}var St=q(0);function xc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||kp(l)||Lp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ns=0,Me=null,it=null,Dt=null,Mc=!1,ea=!1,so=!1,Dc=0,Ml=0,ta=null,qw=0;function yt(){throw Error(i(321))}function xh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!bn(s[l],r[l]))return!1;return!0}function Mh(s,r,l,c,y,v){return ns=v,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=s===null||s.memoizedState===null?P_:Yh,so=!1,v=l(c,y),so=!1,ea&&(v=Zy(r,l,c,y)),Wy(s),v}function Wy(s){J.H=Vl;var r=it!==null&&it.next!==null;if(ns=0,Dt=it=Me=null,Mc=!1,Ml=0,ta=null,r)throw Error(i(300));s===null||Pt||(s=s.dependencies,s!==null&&Sc(s)&&(Pt=!0))}function Zy(s,r,l,c){Me=s;var y=0;do{if(ea&&(ta=null),Ml=0,ea=!1,25<=y)throw Error(i(301));if(y+=1,Dt=it=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=V_,v=r(l,c)}while(ea);return v}function Bw(){var s=J.H,r=s.useState()[0];return r=typeof r.then=="function"?Dl(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(Me.flags|=1024),r}function Dh(){var s=Dc!==0;return Dc=0,s}function Ph(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Vh(s){if(Mc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Mc=!1}ns=0,Dt=it=Me=null,ea=!1,Ml=Dc=0,ta=null}function fn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Me.memoizedState=Dt=s:Dt=Dt.next=s,Dt}function At(){if(it===null){var s=Me.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=Dt===null?Me.memoizedState:Dt.next;if(r!==null)Dt=r,it=s;else{if(s===null)throw Me.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Dt===null?Me.memoizedState=Dt=s:Dt=Dt.next=s}return Dt}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(s){var r=Ml;return Ml+=1,ta===null&&(ta=[]),s=Hy(ta,s,r),r=Me,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?P_:Yh),s}function Vc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Dl(s);if(s.$$typeof===Q)return Xt(s)}throw Error(i(438,String(s)))}function kh(s){var r=null,l=Me.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Pc(),Me.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=O;return r.index++,l}function is(s,r){return typeof r=="function"?r(s):r}function kc(s){var r=At();return Lh(r,it,s)}function Lh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}r.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{r=y.next;var R=A=null,L=null,Y=r,j=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ue&ne)===ne:(ns&ne)===ne){var $=Y.revertLane;if($===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Qo&&(j=!0);else if((ns&$)===$){Y=Y.next,$===Qo&&(j=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(R=L=ne,A=v):L=L.next=ne,Me.lanes|=$,Ws|=$;ne=Y.action,so&&l(v,ne),v=Y.hasEagerState?Y.eagerState:l(v,ne)}else $={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(R=L=$,A=v):L=L.next=$,Me.lanes|=ne,Ws|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(L===null?A=v:L.next=R,!bn(v,s.memoizedState)&&(Pt=!0,j&&(l=Xo,l!==null)))throw l;s.memoizedState=v,s.baseState=A,s.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Uh(s){var r=At(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);bn(v,r.memoizedState)||(Pt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,c]}function jy(s,r,l){var c=Me,y=At(),v=He;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!bn((it||y).memoizedState,l);if(A&&(y.memoizedState=l,Pt=!0),y=y.queue,qh(n_.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Dt!==null&&Dt.memoizedState.tag&1){if(c.flags|=2048,na(9,{destroy:void 0},t_.bind(null,c,y,l,r),null),ot===null)throw Error(i(349));v||(ns&127)!==0||e_(c,r,l)}return l}function e_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Me.updateQueue,r===null?(r=Pc(),Me.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function t_(s,r,l,c){r.value=l,r.getSnapshot=c,i_(r)&&s_(s)}function n_(s,r,l){return l(function(){i_(r)&&s_(s)})}function i_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!bn(s,l)}catch{return!0}}function s_(s){var r=Qr(s,2);r!==null&&En(r,s,2)}function Oh(s){var r=fn();if(typeof s=="function"){var l=s;if(s=l(),so){Ln(!0);try{l()}finally{Ln(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:s},r}function r_(s,r,l,c){return s.baseState=l,Lh(s,it,typeof c=="function"?c:is)}function Hw(s,r,l,c,y){if(Oc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};J.T!==null?l(!0):v.isTransition=!1,c(v),l=r.pending,l===null?(v.next=r.pending=v,o_(r,v)):(v.next=l.next,r.pending=l.next=v)}}function o_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var v=J.T,A={};J.T=A;try{var R=l(y,c),L=J.S;L!==null&&L(A,R),a_(s,r,R)}catch(Y){Fh(s,r,Y)}finally{v!==null&&A.types!==null&&(v.types=A.types),J.T=v}}else try{v=l(y,c),a_(s,r,v)}catch(Y){Fh(s,r,Y)}}function a_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){l_(s,r,c)},function(c){return Fh(s,r,c)}):l_(s,r,l)}function l_(s,r,l){r.status="fulfilled",r.value=l,u_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,o_(s,l)))}function Fh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,u_(r),r=r.next;while(r!==c)}s.action=null}function u_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function c_(s,r){return r}function f_(s,r){if(He){var l=ot.formState;if(l!==null){e:{var c=Me;if(He){if(lt){t:{for(var y=lt,v=Kn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){lt=Jn(y.nextSibling),c=y.data==="F!";break e}}Hs(c)}c=!1}c&&(r=l[0])}}return l=fn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c_,lastRenderedState:r},l.queue=c,l=x_.bind(null,Me,c),c.dispatch=l,c=Oh(!1),v=Kh.bind(null,Me,!1,c.queue),c=fn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=Hw.bind(null,Me,y,v,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function d_(s){var r=At();return h_(r,it,s)}function h_(s,r,l){if(r=Lh(s,r,c_)[0],s=kc(is)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Dl(r)}catch(A){throw A===Wo?Ic:A}else c=r;r=At();var y=r.queue,v=y.dispatch;return l!==r.memoizedState&&(Me.flags|=2048,na(9,{destroy:void 0},Gw.bind(null,y,l),null)),[c,v,s]}function Gw(s,r){s.action=r}function p_(s){var r=At(),l=it;if(l!==null)return h_(r,l,s);At(),r=r.memoizedState,l=At();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function na(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Me.updateQueue,r===null&&(r=Pc(),Me.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function m_(){return At().memoizedState}function Lc(s,r,l,c){var y=fn();Me.flags|=s,y.memoizedState=na(1|r,{destroy:void 0},l,c===void 0?null:c)}function Uc(s,r,l,c){var y=At();c=c===void 0?null:c;var v=y.memoizedState.inst;it!==null&&c!==null&&xh(c,it.memoizedState.deps)?y.memoizedState=na(r,v,l,c):(Me.flags|=s,y.memoizedState=na(1|r,v,l,c))}function g_(s,r){Lc(8390656,8,s,r)}function qh(s,r){Uc(2048,8,s,r)}function zw(s){Me.flags|=4;var r=Me.updateQueue;if(r===null)r=Pc(),Me.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function y_(s){var r=At().memoizedState;return zw({ref:r,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function __(s,r){return Uc(4,2,s,r)}function v_(s,r){return Uc(4,4,s,r)}function T_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function E_(s,r,l){l=l!=null?l.concat([s]):null,Uc(4,4,T_.bind(null,r,s),l)}function Bh(){}function S_(s,r){var l=At();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&xh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function A_(s,r){var l=At();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&xh(r,c[1]))return c[0];if(c=s(),so){Ln(!0);try{s()}finally{Ln(!1)}}return l.memoizedState=[c,r],c}function Hh(s,r,l){return l===void 0||(ns&1073741824)!==0&&(Ue&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Cv(),Me.lanes|=s,Ws|=s,l)}function C_(s,r,l,c){return bn(l,r)?l:jo.current!==null?(s=Hh(s,l,c),bn(s,r)||(Pt=!0),s):(ns&42)===0||(ns&1073741824)!==0&&(Ue&261930)===0?(Pt=!0,s.memoizedState=l):(s=Cv(),Me.lanes|=s,Ws|=s,r)}function I_(s,r,l,c,y){var v=ae.p;ae.p=v!==0&&8>v?v:8;var A=J.T,R={};J.T=R,Kh(s,!1,r,l);try{var L=y(),Y=J.S;if(Y!==null&&Y(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var j=Fw(L,c);Pl(s,r,j,Vn(s))}else Pl(s,r,c,Vn(s))}catch(ne){Pl(s,r,{then:function(){},status:"rejected",reason:ne},Vn())}finally{ae.p=v,A!==null&&R.types!==null&&(A.types=R.types),J.T=A}}function Kw(){}function Gh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=w_(s).queue;I_(s,y,r,Ee,l===null?Kw:function(){return R_(s),l(c)})}function w_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:Ee},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function R_(s){var r=w_(s);r.next===null&&(r=s.alternate.memoizedState),Pl(s,r.next.queue,{},Vn())}function zh(){return Xt(Xl)}function b_(){return At().memoizedState}function N_(){return At().memoizedState}function Yw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Vn();s=Ks(l);var c=Ys(r,s,l);c!==null&&(En(c,r,l),bl(c,r,l)),r={cache:vh()},s.payload=r;return}r=r.return}}function Jw(s,r,l){var c=Vn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Oc(s)?M_(r,l):(l=lh(s,r,l,c),l!==null&&(En(l,s,c),D_(l,r,c)))}function x_(s,r,l){var c=Vn();Pl(s,r,l,c)}function Pl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Oc(s))M_(r,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,R=v(A,l);if(y.hasEagerState=!0,y.eagerState=R,bn(R,A))return _c(s,r,y,0),ot===null&&yc(),!1}catch{}finally{}if(l=lh(s,r,y,c),l!==null)return En(l,s,c),D_(l,r,c),!0}return!1}function Kh(s,r,l,c){if(c={lane:2,revertLane:Ap(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Oc(s)){if(r)throw Error(i(479))}else r=lh(s,l,c,2),r!==null&&En(r,s,2)}function Oc(s){var r=s.alternate;return s===Me||r!==null&&r===Me}function M_(s,r){ea=Mc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function D_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,tl(s,l)}}var Vl={readContext:Xt,use:Vc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Vl.useEffectEvent=yt;var P_={readContext:Xt,use:Vc,useCallback:function(s,r){return fn().memoizedState=[s,r===void 0?null:r],s},useContext:Xt,useEffect:g_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Lc(4194308,4,T_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Lc(4194308,4,s,r)},useInsertionEffect:function(s,r){Lc(4,2,s,r)},useMemo:function(s,r){var l=fn();r=r===void 0?null:r;var c=s();if(so){Ln(!0);try{s()}finally{Ln(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=fn();if(l!==void 0){var y=l(r);if(so){Ln(!0);try{l(r)}finally{Ln(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Jw.bind(null,Me,s),[c.memoizedState,s]},useRef:function(s){var r=fn();return s={current:s},r.memoizedState=s},useState:function(s){s=Oh(s);var r=s.queue,l=x_.bind(null,Me,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Bh,useDeferredValue:function(s,r){var l=fn();return Hh(l,s,r)},useTransition:function(){var s=Oh(!1);return s=I_.bind(null,Me,s.queue,!0,!1),fn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Me,y=fn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ot===null)throw Error(i(349));(Ue&127)!==0||e_(c,r,l)}y.memoizedState=l;var v={value:l,getSnapshot:r};return y.queue=v,g_(n_.bind(null,c,v,s),[s]),c.flags|=2048,na(9,{destroy:void 0},t_.bind(null,c,v,l,r),null),l},useId:function(){var s=fn(),r=ot.identifierPrefix;if(He){var l=Li,c=ki;l=(c&~(1<<32-Tt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Dc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=qw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:zh,useFormState:f_,useActionState:f_,useOptimistic:function(s){var r=fn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Kh.bind(null,Me,!0,l),l.dispatch=r,[s,r]},useMemoCache:kh,useCacheRefresh:function(){return fn().memoizedState=Yw.bind(null,Me)},useEffectEvent:function(s){var r=fn(),l={impl:s};return r.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Yh={readContext:Xt,use:Vc,useCallback:S_,useContext:Xt,useEffect:qh,useImperativeHandle:E_,useInsertionEffect:__,useLayoutEffect:v_,useMemo:A_,useReducer:kc,useRef:m_,useState:function(){return kc(is)},useDebugValue:Bh,useDeferredValue:function(s,r){var l=At();return C_(l,it.memoizedState,s,r)},useTransition:function(){var s=kc(is)[0],r=At().memoizedState;return[typeof s=="boolean"?s:Dl(s),r]},useSyncExternalStore:jy,useId:b_,useHostTransitionStatus:zh,useFormState:d_,useActionState:d_,useOptimistic:function(s,r){var l=At();return r_(l,it,s,r)},useMemoCache:kh,useCacheRefresh:N_};Yh.useEffectEvent=y_;var V_={readContext:Xt,use:Vc,useCallback:S_,useContext:Xt,useEffect:qh,useImperativeHandle:E_,useInsertionEffect:__,useLayoutEffect:v_,useMemo:A_,useReducer:Uh,useRef:m_,useState:function(){return Uh(is)},useDebugValue:Bh,useDeferredValue:function(s,r){var l=At();return it===null?Hh(l,s,r):C_(l,it.memoizedState,s,r)},useTransition:function(){var s=Uh(is)[0],r=At().memoizedState;return[typeof s=="boolean"?s:Dl(s),r]},useSyncExternalStore:jy,useId:b_,useHostTransitionStatus:zh,useFormState:p_,useActionState:p_,useOptimistic:function(s,r){var l=At();return it!==null?r_(l,it,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:kh,useCacheRefresh:N_};V_.useEffectEvent=y_;function Jh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var $h={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Vn(),y=Ks(c);y.payload=r,l!=null&&(y.callback=l),r=Ys(s,y,c),r!==null&&(En(r,s,c),bl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Vn(),y=Ks(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Ys(s,y,c),r!==null&&(En(r,s,c),bl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Vn(),c=Ks(l);c.tag=2,r!=null&&(c.callback=r),r=Ys(s,c,l),r!==null&&(En(r,s,l),bl(r,s,l))}};function k_(s,r,l,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):r.prototype&&r.prototype.isPureReactComponent?!Tl(l,c)||!Tl(y,v):!0}function L_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&$h.enqueueReplaceState(r,r.state,null)}function ro(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function U_(s){gc(s)}function O_(s){console.error(s)}function F_(s){gc(s)}function Fc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function q_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Qh(s,r,l){return l=Ks(l),l.tag=3,l.payload={element:null},l.callback=function(){Fc(s,r)},l}function B_(s){return s=Ks(s),s.tag=3,s}function H_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){q_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){q_(r,l,c),typeof y!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function $w(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&$o(r,l,y,!0),l=xn.current,l!==null){switch(l.tag){case 31:case 13:return Yn===null?Wc():l.alternate===null&&_t===0&&(_t=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===wc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Tp(s,c,y)),!1;case 22:return l.flags|=65536,c===wc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Tp(s,c,y)),!1}throw Error(i(435,l.tag))}return Tp(s,c,y),Wc(),!1}if(He)return r=xn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==ph&&(s=Error(i(422),{cause:c}),Al(Hn(s,l)))):(c!==ph&&(r=Error(i(423),{cause:c}),Al(Hn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Hn(c,l),y=Qh(s.stateNode,c,y),Ih(s,y),_t!==4&&(_t=2)),!1;var v=Error(i(520),{cause:c});if(v=Hn(v,l),Hl===null?Hl=[v]:Hl.push(v),_t!==4&&(_t=2),r===null)return!0;c=Hn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Qh(l.stateNode,c,s),Ih(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zs===null||!Zs.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=B_(y),H_(y,s,l,c),Ih(l,y),!1}l=l.return}while(l!==null);return!1}var Xh=Error(i(461)),Pt=!1;function Wt(s,r,l,c){r.child=s===null?Yy(r,null,l,c):io(r,s.child,l,c)}function G_(s,r,l,c,y){l=l.render;var v=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return jr(r),c=Mh(s,r,l,A,v,y),R=Dh(),s!==null&&!Pt?(Ph(s,r,y),ss(s,r,y)):(He&&R&&dh(r),r.flags|=1,Wt(s,r,c,y),r.child)}function z_(s,r,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!uh(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,K_(s,r,v,c,y)):(s=Tc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!sp(s,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:Tl,l(A,c)&&s.ref===r.ref)return ss(s,r,y)}return r.flags|=1,s=Zi(v,c),s.ref=r.ref,s.return=r,r.child=s}function K_(s,r,l,c,y){if(s!==null){var v=s.memoizedProps;if(Tl(v,c)&&s.ref===r.ref)if(Pt=!1,r.pendingProps=c=v,sp(s,y))(s.flags&131072)!==0&&(Pt=!0);else return r.lanes=s.lanes,ss(s,r,y)}return Wh(s,r,l,c,y)}function Y_(s,r,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return J_(s,r,v,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cc(r,v!==null?v.cachePool:null),v!==null?Qy(r,v):Rh(),Xy(r);else return c=r.lanes=536870912,J_(s,r,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Cc(r,v.cachePool),Qy(r,v),$s(),r.memoizedState=null):(s!==null&&Cc(r,null),Rh(),$s());return Wt(s,r,y,l),r.child}function kl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function J_(s,r,l,c,y){var v=Eh();return v=v===null?null:{parent:Mt._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&Cc(r,null),Rh(),Xy(r),s!==null&&$o(s,r,c,!0),r.childLanes=y,null}function qc(s,r){return r=Hc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function $_(s,r,l){return io(r,s.child,null,l),s=qc(r,r.pendingProps),s.flags|=2,Mn(r),r.memoizedState=null,s}function Qw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(He){if(c.mode==="hidden")return s=qc(r,c),r.lanes=536870912,kl(null,s);if(Nh(r),(s=lt)?(s=o0(s,Kn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:qs!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=My(s),l.return=r,r.child=l,Qt=r,lt=null)):s=null,s===null)throw Hs(r);return r.lanes=536870912,null}return qc(r,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(Nh(r),y)if(r.flags&256)r.flags&=-257,r=$_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Pt||$o(s,r,l,!1),y=(l&s.childLanes)!==0,Pt||y){if(c=ot,c!==null&&(A=nl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,Qr(s,A),En(c,s,A),Xh;Wc(),r=$_(s,r,l)}else s=v.treeContext,lt=Jn(A.nextSibling),Qt=r,He=!0,Bs=null,Kn=!1,s!==null&&Vy(r,s),r=qc(r,c),r.flags|=4096;return r}return s=Zi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Bc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Wh(s,r,l,c,y){return jr(r),l=Mh(s,r,l,c,void 0,y),c=Dh(),s!==null&&!Pt?(Ph(s,r,y),ss(s,r,y)):(He&&c&&dh(r),r.flags|=1,Wt(s,r,l,y),r.child)}function Q_(s,r,l,c,y,v){return jr(r),r.updateQueue=null,l=Zy(r,c,l,y),Wy(s),c=Dh(),s!==null&&!Pt?(Ph(s,r,v),ss(s,r,v)):(He&&c&&dh(r),r.flags|=1,Wt(s,r,l,v),r.child)}function X_(s,r,l,c,y){if(jr(r),r.stateNode===null){var v=zo,A=l.contextType;typeof A=="object"&&A!==null&&(v=Xt(A)),v=new l(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$h,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},Ah(r),A=l.contextType,v.context=typeof A=="object"&&A!==null?Xt(A):zo,v.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Jh(r,l,A,c),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&$h.enqueueReplaceState(v,v.state,null),xl(r,c,v,y),Nl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){v=r.stateNode;var R=r.memoizedProps,L=ro(l,R);v.props=L;var Y=v.context,j=l.contextType;A=zo,typeof j=="object"&&j!==null&&(A=Xt(j));var ne=l.getDerivedStateFromProps;j=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||Y!==A)&&L_(r,v,c,A),zs=!1;var $=r.memoizedState;v.state=$,xl(r,c,v,y),Nl(),Y=r.memoizedState,R||$!==Y||zs?(typeof ne=="function"&&(Jh(r,l,ne,c),Y=r.memoizedState),(L=zs||k_(r,l,L,c,$,Y,A))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),v.props=c,v.state=Y,v.context=A,c=L):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Ch(s,r),A=r.memoizedProps,j=ro(l,A),v.props=j,ne=r.pendingProps,$=v.context,Y=l.contextType,L=zo,typeof Y=="object"&&Y!==null&&(L=Xt(Y)),R=l.getDerivedStateFromProps,(Y=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ne||$!==L)&&L_(r,v,c,L),zs=!1,$=r.memoizedState,v.state=$,xl(r,c,v,y),Nl();var W=r.memoizedState;A!==ne||$!==W||zs||s!==null&&s.dependencies!==null&&Sc(s.dependencies)?(typeof R=="function"&&(Jh(r,l,R,c),W=r.memoizedState),(j=zs||k_(r,l,j,c,$,W,L)||s!==null&&s.dependencies!==null&&Sc(s.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,L)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),v.props=c,v.state=W,v.context=L,c=j):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return v=c,Bc(s,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&c?(r.child=io(r,s.child,null,y),r.child=io(r,null,l,y)):Wt(s,r,l,y),r.memoizedState=v.state,s=r.child):s=ss(s,r,y),s}function W_(s,r,l,c){return Wr(),r.flags|=256,Wt(s,r,l,c),r.child}var Zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jh(s){return{baseLanes:s,cachePool:qy()}}function ep(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Pn),s}function Z_(s,r,l){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(He){if(y?Js(r):$s(),(s=lt)?(s=o0(s,Kn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:qs!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=My(s),l.return=r,r.child=l,Qt=r,lt=null)):s=null,s===null)throw Hs(r);return Lp(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?($s(),y=r.mode,R=Hc({mode:"hidden",children:R},y),c=Xr(c,y,l,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=jh(l),c.childLanes=ep(s,A,l),r.memoizedState=Zh,kl(null,c)):(Js(r),tp(r,R))}var L=s.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(v)r.flags&256?(Js(r),r.flags&=-257,r=np(s,r,l)):r.memoizedState!==null?($s(),r.child=s.child,r.flags|=128,r=null):($s(),R=c.fallback,y=r.mode,c=Hc({mode:"visible",children:c.children},y),R=Xr(R,y,l,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,io(r,s.child,null,l),c=r.child,c.memoizedState=jh(l),c.childLanes=ep(s,A,l),r.memoizedState=Zh,r=kl(null,c));else if(Js(r),Lp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,Al({value:c,source:null,stack:null}),r=np(s,r,l)}else if(Pt||$o(s,r,l,!1),A=(l&s.childLanes)!==0,Pt||A){if(A=ot,A!==null&&(c=nl(A,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,Qr(s,c),En(A,s,c),Xh;kp(R)||Wc(),r=np(s,r,l)}else kp(R)?(r.flags|=192,r.child=s.child,r=null):(s=L.treeContext,lt=Jn(R.nextSibling),Qt=r,He=!0,Bs=null,Kn=!1,s!==null&&Vy(r,s),r=tp(r,c.children),r.flags|=4096);return r}return y?($s(),R=c.fallback,y=r.mode,L=s.child,Y=L.sibling,c=Zi(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Y!==null?R=Zi(Y,R):(R=Xr(R,y,l,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,kl(null,c),c=r.child,R=s.child.memoizedState,R===null?R=jh(l):(y=R.cachePool,y!==null?(L=Mt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=qy(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=ep(s,A,l),r.memoizedState=Zh,kl(s.child,c)):(Js(r),l=s.child,s=l.sibling,l=Zi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function tp(s,r){return r=Hc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Hc(s,r){return s=Nn(22,s,null,r),s.lanes=0,s}function np(s,r,l){return io(r,s.child,null,l),s=tp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function j_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),yh(s.return,r,l)}function ip(s,r,l,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function ev(s,r,l){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=St.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,ce(St,A),Wt(s,r,c,l),c=He?Sl:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&j_(s,l,r);else if(s.tag===19)j_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&xc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),ip(r,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&xc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}ip(r,!0,l,null,v,c);break;case"together":ip(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ss(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Ws|=r.lanes,(l&r.childLanes)===0)if(s!==null){if($o(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Zi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Zi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function sp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Sc(s)))}function Xw(s,r,l){switch(r.tag){case 3:Ot(r,r.stateNode.containerInfo),Gs(r,Mt,s.memoizedState.cache),Wr();break;case 27:case 5:Mr(r);break;case 4:Ot(r,r.stateNode.containerInfo);break;case 10:Gs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Nh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Js(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Z_(s,r,l):(Js(r),s=ss(s,r,l),s!==null?s.sibling:null);Js(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||($o(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return ev(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(St,St.current),c)break;return null;case 22:return r.lanes=0,Y_(s,r,l,r.pendingProps);case 24:Gs(r,Mt,s.memoizedState.cache)}return ss(s,r,l)}function tv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Pt=!0;else{if(!sp(s,l)&&(r.flags&128)===0)return Pt=!1,Xw(s,r,l);Pt=(s.flags&131072)!==0}else Pt=!1,He&&(r.flags&1048576)!==0&&Py(r,Sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=to(r.elementType),r.type=s,typeof s=="function")uh(s)?(c=ro(s,c),r.tag=1,r=X_(null,r,s,c,l)):(r.tag=0,r=Wh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===oe){r.tag=11,r=G_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=z_(null,r,s,c,l);break e}}throw r=Te(s)||s,Error(i(306,r,""))}}return r;case 0:return Wh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=ro(c,r.pendingProps),X_(s,r,c,y,l);case 3:e:{if(Ot(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,Ch(s,r),xl(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Gs(r,Mt,c),c!==v.cache&&_h(r,[Mt],l,!0),Nl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=W_(s,r,c,l);break e}else if(c!==y){y=Hn(Error(i(424)),r),Al(y),r=W_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(lt=Jn(s.firstChild),Qt=r,He=!0,Bs=null,Kn=!0,l=Yy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Wr(),c===y){r=ss(s,r,l);break e}Wt(s,r,c,l)}r=r.child}return r;case 26:return Bc(s,r),s===null?(l=d0(r.type,null,r.pendingProps,null))?r.memoizedState=l:He||(l=r.type,s=r.pendingProps,c=rf(Pe.current).createElement(l),c[bt]=r,c[Ht]=s,Zt(c,l,s),Nt(c),r.stateNode=c):r.memoizedState=d0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Mr(r),s===null&&He&&(c=r.stateNode=u0(r.type,r.pendingProps,Pe.current),Qt=r,Kn=!0,y=lt,nr(r.type)?(Up=y,lt=Jn(c.firstChild)):lt=y),Wt(s,r,r.pendingProps.children,l),Bc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&He&&((y=c=lt)&&(c=wR(c,r.type,r.pendingProps,Kn),c!==null?(r.stateNode=c,Qt=r,lt=Jn(c.firstChild),Kn=!1,y=!0):y=!1),y||Hs(r)),Mr(r),y=r.type,v=r.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,Dp(y,v)?c=null:A!==null&&Dp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Mh(s,r,Bw,null,null,l),Xl._currentValue=y),Bc(s,r),Wt(s,r,c,l),r.child;case 6:return s===null&&He&&((s=l=lt)&&(l=RR(l,r.pendingProps,Kn),l!==null?(r.stateNode=l,Qt=r,lt=null,s=!0):s=!1),s||Hs(r)),null;case 13:return Z_(s,r,l);case 4:return Ot(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=io(r,null,c,l):Wt(s,r,c,l),r.child;case 11:return G_(s,r,r.type,r.pendingProps,l);case 7:return Wt(s,r,r.pendingProps,l),r.child;case 8:return Wt(s,r,r.pendingProps.children,l),r.child;case 12:return Wt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Gs(r,r.type,c.value),Wt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,jr(r),y=Xt(y),c=c(y),r.flags|=1,Wt(s,r,c,l),r.child;case 14:return z_(s,r,r.type,r.pendingProps,l);case 15:return K_(s,r,r.type,r.pendingProps,l);case 19:return ev(s,r,l);case 31:return Qw(s,r,l);case 22:return Y_(s,r,l,r.pendingProps);case 24:return jr(r),c=Xt(Mt),s===null?(y=Eh(),y===null&&(y=ot,v=vh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),r.memoizedState={parent:c,cache:y},Ah(r),Gs(r,Mt,y)):((s.lanes&l)!==0&&(Ch(s,r),xl(r,null,null,l),Nl()),y=s.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Gs(r,Mt,c)):(c=v.cache,Gs(r,Mt,c),c!==y.cache&&_h(r,[Mt],l,!0))),Wt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function rs(s){s.flags|=4}function rp(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(bv())s.flags|=8192;else throw no=wc,Sh}else s.flags&=-16777217}function nv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!y0(r))if(bv())s.flags|=8192;else throw no=wc,Sh}function Gc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Qu():536870912,s.lanes|=r,oa|=r)}function Ll(s,r){if(!He)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ut(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Ww(s,r,l){var c=r.pendingProps;switch(hh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ts(Mt),dt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Jo(r)?rs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mh())),ut(r),null;case 26:var y=r.type,v=r.memoizedState;return s===null?(rs(r),v!==null?(ut(r),nv(r,v)):(ut(r),rp(r,y,null,c,l))):v?v!==s.memoizedState?(rs(r),ut(r),nv(r,v)):(ut(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&rs(r),ut(r),rp(r,y,s,c,l)),null;case 27:if(Io(r),l=Pe.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}s=me.current,Jo(r)?ky(r):(s=u0(y,c,l),r.stateNode=s,rs(r))}return ut(r),null;case 5:if(Io(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}if(v=me.current,Jo(r))ky(r);else{var A=rf(Pe.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[bt]=r,v[Ht]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;e:switch(Zt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&rs(r)}}return ut(r),rp(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Pe.current,Jo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Qt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[bt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Zv(s.nodeValue,l)),s||Hs(r,!0)}else s=rf(s).createTextNode(c),s[bt]=r,r.stateNode=s}return ut(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Jo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[bt]=r}else Wr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),s=!1}else l=mh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Mn(r),r):(Mn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ut(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Jo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[bt]=r}else Wr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=mh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Mn(r),r):(Mn(r),null)}return Mn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Gc(r,r.updateQueue),ut(r),null);case 4:return dt(),s===null&&Rp(r.stateNode.containerInfo),ut(r),null;case 10:return ts(r.type),ut(r),null;case 19:if(ie(St),c=r.memoizedState,c===null)return ut(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)Ll(c,!1);else{if(_t!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=xc(s),v!==null){for(r.flags|=128,Ll(c,!1),s=v.updateQueue,r.updateQueue=s,Gc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)xy(l,s),l=l.sibling;return ce(St,St.current&1|2),He&&ji(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&un()>$c&&(r.flags|=128,y=!0,Ll(c,!1),r.lanes=4194304)}else{if(!y)if(s=xc(v),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Gc(r,s),Ll(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!He)return ut(r),null}else 2*un()-c.renderingStartTime>$c&&l!==536870912&&(r.flags|=128,y=!0,Ll(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(s=c.last,s!==null?s.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=un(),s.sibling=null,l=St.current,ce(St,y?l&1|2:l&1),He&&ji(r,c.treeForkCount),s):(ut(r),null);case 22:case 23:return Mn(r),bh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),l=r.updateQueue,l!==null&&Gc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ie(eo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ts(Mt),ut(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Zw(s,r){switch(hh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ts(Mt),dt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Io(r),null;case 31:if(r.memoizedState!==null){if(Mn(r),r.alternate===null)throw Error(i(340));Wr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Mn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Wr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ie(St),null;case 4:return dt(),null;case 10:return ts(r.type),null;case 22:case 23:return Mn(r),bh(),s!==null&&ie(eo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ts(Mt),null;case 25:return null;default:return null}}function iv(s,r){switch(hh(r),r.tag){case 3:ts(Mt),dt();break;case 26:case 27:case 5:Io(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&Mn(r);break;case 13:Mn(r);break;case 19:ie(St);break;case 10:ts(r.type);break;case 22:case 23:Mn(r),bh(),s!==null&&ie(eo);break;case 24:ts(Mt)}}function Ul(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){tt(r,r.return,R)}}function Qs(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var L=l,Y=R;try{Y()}catch(j){tt(y,L,j)}}}c=c.next}while(c!==v)}}catch(j){tt(r,r.return,j)}}function sv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{$y(r,l)}catch(c){tt(s,s.return,c)}}}function rv(s,r,l){l.props=ro(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){tt(s,r,c)}}function Ol(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){tt(s,r,y)}}function Ui(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){tt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){tt(s,r,y)}else l.current=null}function ov(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){tt(s,s.return,y)}}function op(s,r,l){try{var c=s.stateNode;TR(c,s.type,l,r),c[Ht]=r}catch(y){tt(s,s.return,y)}}function av(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&nr(s.type)||s.tag===4}function ap(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||av(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&nr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function lp(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ii));else if(c!==4&&(c===27&&nr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(lp(s,r,l),s=s.sibling;s!==null;)lp(s,r,l),s=s.sibling}function zc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&nr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(zc(s,r,l),s=s.sibling;s!==null;)zc(s,r,l),s=s.sibling}function lv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Zt(r,c,l),r[bt]=s,r[Ht]=l}catch(v){tt(s,s.return,v)}}var os=!1,Vt=!1,up=!1,uv=typeof WeakSet=="function"?WeakSet:Set,zt=null;function jw(s,r){if(s=s.containerInfo,xp=df,s=Ey(s),nh(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,R=-1,L=-1,Y=0,j=0,ne=s,$=null;t:for(;;){for(var W;ne!==l||y!==0&&ne.nodeType!==3||(R=A+y),ne!==v||c!==0&&ne.nodeType!==3||(L=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(W=ne.firstChild)!==null;)$=ne,ne=W;for(;;){if(ne===s)break t;if($===l&&++Y===y&&(R=A),$===v&&++j===c&&(L=A),(W=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=W}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Mp={focusedElem:s,selectionRange:l},df=!1,zt=r;zt!==null;)if(r=zt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,zt=s;else for(;zt!==null;){switch(r=zt,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ge=ro(l.type,y);s=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){tt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Vp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Vp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,zt=s;break}zt=r.return}}function cv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ls(s,l),c&4&&Ul(5,l);break;case 1:if(ls(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){tt(l,l.return,A)}else{var y=ro(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(l,l.return,A)}}c&64&&sv(l),c&512&&Ol(l,l.return);break;case 3:if(ls(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{$y(s,r)}catch(A){tt(l,l.return,A)}}break;case 27:r===null&&c&4&&lv(l);case 26:case 5:ls(s,l),r===null&&c&4&&ov(l),c&512&&Ol(l,l.return);break;case 12:ls(s,l);break;case 31:ls(s,l),c&4&&hv(s,l);break;case 13:ls(s,l),c&4&&pv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=lR.bind(null,l),bR(s,l))));break;case 22:if(c=l.memoizedState!==null||os,!c){r=r!==null&&r.memoizedState!==null||Vt,y=os;var v=Vt;os=c,(Vt=r)&&!v?us(s,l,(l.subtreeFlags&8772)!==0):ls(s,l),os=y,Vt=v}break;case 30:break;default:ls(s,l)}}function fv(s){var r=s.alternate;r!==null&&(s.alternate=null,fv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&xo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,yn=!1;function as(s,r,l){for(l=l.child;l!==null;)dv(s,r,l),l=l.sibling}function dv(s,r,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(jn,l)}catch{}switch(l.tag){case 26:Vt||Ui(l,r),as(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Vt||Ui(l,r);var c=pt,y=yn;nr(l.type)&&(pt=l.stateNode,yn=!1),as(s,r,l),Jl(l.stateNode),pt=c,yn=y;break;case 5:Vt||Ui(l,r);case 6:if(c=pt,y=yn,pt=null,as(s,r,l),pt=c,yn=y,pt!==null)if(yn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(v){tt(l,r,v)}else try{pt.removeChild(l.stateNode)}catch(v){tt(l,r,v)}break;case 18:pt!==null&&(yn?(s=pt,s0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),pa(s)):s0(pt,l.stateNode));break;case 4:c=pt,y=yn,pt=l.stateNode.containerInfo,yn=!0,as(s,r,l),pt=c,yn=y;break;case 0:case 11:case 14:case 15:Qs(2,l,r),Vt||Qs(4,l,r),as(s,r,l);break;case 1:Vt||(Ui(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&rv(l,r,c)),as(s,r,l);break;case 21:as(s,r,l);break;case 22:Vt=(c=Vt)||l.memoizedState!==null,as(s,r,l),Vt=c;break;default:as(s,r,l)}}function hv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{pa(s)}catch(l){tt(r,r.return,l)}}}function pv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{pa(s)}catch(l){tt(r,r.return,l)}}function eR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new uv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new uv),r;default:throw Error(i(435,s.tag))}}function Kc(s,r){var l=eR(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=uR.bind(null,s,c);c.then(y,y)}})}function _n(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(nr(R.type)){pt=R.stateNode,yn=!1;break e}break;case 5:pt=R.stateNode,yn=!1;break e;case 3:case 4:pt=R.stateNode.containerInfo,yn=!0;break e}R=R.return}if(pt===null)throw Error(i(160));dv(v,A,y),pt=null,yn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)mv(r,s),r=r.sibling}var ui=null;function mv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:_n(r,s),vn(s),c&4&&(Qs(3,s,s.return),Ul(3,s),Qs(5,s,s.return));break;case 1:_n(r,s),vn(s),c&512&&(Vt||l===null||Ui(l,l.return)),c&64&&os&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ui;if(_n(r,s),vn(s),c&512&&(Vt||l===null||Ui(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ai]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),Zt(v,c,l),v[bt]=s,Nt(v),c=v;break e;case"link":var A=m0("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(v=A[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}v=y.createElement(c),Zt(v,c,l),y.head.appendChild(v);break;case"meta":if(A=m0("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(v=A[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}v=y.createElement(c),Zt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[bt]=s,Nt(v),c=v}s.stateNode=c}else g0(y,s.type,s.stateNode);else s.stateNode=p0(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?g0(y,s.type,s.stateNode):p0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&op(s,s.memoizedProps,l.memoizedProps)}break;case 27:_n(r,s),vn(s),c&512&&(Vt||l===null||Ui(l,l.return)),l!==null&&c&4&&op(s,s.memoizedProps,l.memoizedProps);break;case 5:if(_n(r,s),vn(s),c&512&&(Vt||l===null||Ui(l,l.return)),s.flags&32){y=s.stateNode;try{gn(y,"")}catch(ge){tt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,op(s,y,l!==null?l.memoizedProps:y)),c&1024&&(up=!0);break;case 6:if(_n(r,s),vn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){tt(s,s.return,ge)}}break;case 3:if(lf=null,y=ui,ui=of(r.containerInfo),_n(r,s),ui=y,vn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{pa(r.containerInfo)}catch(ge){tt(s,s.return,ge)}up&&(up=!1,gv(s));break;case 4:c=ui,ui=of(s.stateNode.containerInfo),_n(r,s),vn(s),ui=c;break;case 12:_n(r,s),vn(s);break;case 31:_n(r,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Kc(s,c)));break;case 13:_n(r,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Jc=un()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Kc(s,c)));break;case 22:y=s.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Y=os,j=Vt;if(os=Y||y,Vt=j||L,_n(r,s),Vt=j,os=Y,vn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||L||os||Vt||oo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){L=l=r;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=L.stateNode;var ne=L.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ge){tt(L,L.return,ge)}}}else if(r.tag===6){if(l===null){L=r;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ge){tt(L,L.return,ge)}}}else if(r.tag===18){if(l===null){L=r;try{var W=L.stateNode;y?r0(W,!0):r0(L.stateNode,!1)}catch(ge){tt(L,L.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Kc(s,l))));break;case 19:_n(r,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Kc(s,c)));break;case 30:break;case 21:break;default:_n(r,s),vn(s)}}function vn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(av(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=ap(s);zc(s,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(gn(A,""),l.flags&=-33);var R=ap(s);zc(s,R,A);break;case 3:case 4:var L=l.stateNode.containerInfo,Y=ap(s);lp(s,Y,L);break;default:throw Error(i(161))}}catch(j){tt(s,s.return,j)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function gv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;gv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ls(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)cv(s,r.alternate,r),r=r.sibling}function oo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Qs(4,r,r.return),oo(r);break;case 1:Ui(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&rv(r,r.return,l),oo(r);break;case 27:Jl(r.stateNode);case 26:case 5:Ui(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}s=s.sibling}}function us(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:us(y,v,l),Ul(4,v);break;case 1:if(us(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){tt(c,c.return,Y)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Jy(L[y],R)}catch(Y){tt(c,c.return,Y)}}l&&A&64&&sv(v),Ol(v,v.return);break;case 27:lv(v);case 26:case 5:us(y,v,l),l&&c===null&&A&4&&ov(v),Ol(v,v.return);break;case 12:us(y,v,l);break;case 31:us(y,v,l),l&&A&4&&hv(y,v);break;case 13:us(y,v,l),l&&A&4&&pv(y,v);break;case 22:v.memoizedState===null&&us(y,v,l),Ol(v,v.return);break;case 30:break;default:us(y,v,l)}r=r.sibling}}function cp(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Cl(l))}function fp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Cl(s))}function ci(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yv(s,r,l,c),r=r.sibling}function yv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ci(s,r,l,c),y&2048&&Ul(9,r);break;case 1:ci(s,r,l,c);break;case 3:ci(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Cl(s)));break;case 12:if(y&2048){ci(s,r,l,c),s=r.stateNode;try{var v=r.memoizedProps,A=v.id,R=v.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){tt(r,r.return,L)}}else ci(s,r,l,c);break;case 31:ci(s,r,l,c);break;case 13:ci(s,r,l,c);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?ci(s,r,l,c):Fl(s,r):v._visibility&2?ci(s,r,l,c):(v._visibility|=2,ia(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&cp(A,r);break;case 24:ci(s,r,l,c),y&2048&&fp(r.alternate,r);break;default:ci(s,r,l,c)}}function ia(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,A=r,R=l,L=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:ia(v,A,R,L,y),Ul(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?ia(v,A,R,L,y):Fl(v,A):(j._visibility|=2,ia(v,A,R,L,y)),y&&Y&2048&&cp(A.alternate,A);break;case 24:ia(v,A,R,L,y),y&&Y&2048&&fp(A.alternate,A);break;default:ia(v,A,R,L,y)}r=r.sibling}}function Fl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Fl(l,c),y&2048&&cp(c.alternate,c);break;case 24:Fl(l,c),y&2048&&fp(c.alternate,c);break;default:Fl(l,c)}r=r.sibling}}var ql=8192;function sa(s,r,l){if(s.subtreeFlags&ql)for(s=s.child;s!==null;)_v(s,r,l),s=s.sibling}function _v(s,r,l){switch(s.tag){case 26:sa(s,r,l),s.flags&ql&&s.memoizedState!==null&&qR(l,ui,s.memoizedState,s.memoizedProps);break;case 5:sa(s,r,l);break;case 3:case 4:var c=ui;ui=of(s.stateNode.containerInfo),sa(s,r,l),ui=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=ql,ql=16777216,sa(s,r,l),ql=c):sa(s,r,l));break;default:sa(s,r,l)}}function vv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Bl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];zt=c,Ev(c,s)}vv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Tv(s),s=s.sibling}function Tv(s){switch(s.tag){case 0:case 11:case 15:Bl(s),s.flags&2048&&Qs(9,s,s.return);break;case 3:Bl(s);break;case 12:Bl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Yc(s)):Bl(s);break;default:Bl(s)}}function Yc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];zt=c,Ev(c,s)}vv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Qs(8,r,r.return),Yc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Yc(r));break;default:Yc(r)}s=s.sibling}}function Ev(s,r){for(;zt!==null;){var l=zt;switch(l.tag){case 0:case 11:case 15:Qs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Cl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,zt=c;else e:for(l=s;zt!==null;){c=zt;var y=c.sibling,v=c.return;if(fv(c),c===l){zt=null;break e}if(y!==null){y.return=v,zt=y;break e}zt=v}}}var tR={getCacheForType:function(s){var r=Xt(Mt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Xt(Mt).controller.signal}},nR=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ot=null,ke=null,Ue=0,et=0,Dn=null,Xs=!1,ra=!1,dp=!1,cs=0,_t=0,Ws=0,ao=0,hp=0,Pn=0,oa=0,Hl=null,Tn=null,pp=!1,Jc=0,Sv=0,$c=1/0,Qc=null,Zs=null,qt=0,js=null,aa=null,fs=0,mp=0,gp=null,Av=null,Gl=0,yp=null;function Vn(){return(Xe&2)!==0&&Ue!==0?Ue&-Ue:J.T!==null?Ap():Xu()}function Cv(){if(Pn===0)if((Ue&536870912)===0||He){var s=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),Pn=s}else Pn=536870912;return s=xn.current,s!==null&&(s.flags|=32),Pn}function En(s,r,l){(s===ot&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(la(s,0),er(s,Ue,Pn,!1)),kr(s,l),((Xe&2)===0||s!==ot)&&(s===ot&&((Xe&2)===0&&(ao|=l),_t===4&&er(s,Ue,Pn,!1)),Oi(s))}function Iv(s,r,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ei(s,r),y=c?rR(s,r):vp(s,r,!0),v=c;do{if(y===0){ra&&!c&&er(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!iR(l)){y=vp(s,r,!1),v=!1;continue}if(y===2){if(v=r,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=s;y=Hl;var L=R.current.memoizedState.isDehydrated;if(L&&(la(R,A).flags|=256),A=vp(R,A,!1),A!==2){if(dp&&!L){R.errorRecoveryDisabledLanes|=v,ao|=v,y=4;break e}v=Tn,Tn=y,v!==null&&(Tn===null?Tn=v:Tn.push.apply(Tn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){la(s,0),er(s,r,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:er(c,r,Pn,!Xs);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Jc+300-un(),10<y)){if(er(c,r,Pn,!Xs),Ti(c,0,!0)!==0)break e;fs=r,c.timeoutHandle=n0(wv.bind(null,c,l,Tn,Qc,pp,r,Pn,ao,oa,Xs,v,"Throttled",-0,0),y);break e}wv(c,l,Tn,Qc,pp,r,Pn,ao,oa,Xs,v,null,-0,0)}}break}while(!0);Oi(s)}function wv(s,r,l,c,y,v,A,R,L,Y,j,ne,$,W){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},_v(r,v,ne);var ge=(v&62914560)===v?Jc-un():(v&4194048)===v?Sv-un():0;if(ge=BR(ne,ge),ge!==null){fs=v,s.cancelPendingCommit=ge(Vv.bind(null,s,r,v,l,c,y,A,R,L,j,ne,null,$,W)),er(s,v,A,!Y);return}}Vv(s,r,v,l,c,y,A,R,L)}function iR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!bn(v(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function er(s,r,l,c){r&=~hp,r&=~ao,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var v=31-Tt(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&Lr(s,l,r)}function Xc(){return(Xe&6)===0?(zl(0),!1):!0}function _p(){if(ke!==null){if(et===0)var s=ke.return;else s=ke,es=Zr=null,Vh(s),Zo=null,wl=0,s=ke;for(;s!==null;)iv(s.alternate,s),s=s.return;ke=null}}function la(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,AR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),fs=0,_p(),ot=s,ke=l=Zi(s.current,null),Ue=r,et=0,Dn=null,Xs=!1,ra=ei(s,r),dp=!1,oa=Pn=hp=ao=Ws=_t=0,Tn=Hl=null,pp=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-Tt(c),v=1<<y;r|=s[y],c&=~v}return cs=r,yc(),l}function Rv(s,r){Me=null,J.H=Vl,r===Wo||r===Ic?(r=Gy(),et=3):r===Sh?(r=Gy(),et=4):et=r===Xh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Dn=r,ke===null&&(_t=1,Fc(s,Hn(r,s.current)))}function bv(){var s=xn.current;return s===null?!0:(Ue&4194048)===Ue?Yn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?s===Yn:!1}function Nv(){var s=J.H;return J.H=Vl,s===null?Vl:s}function xv(){var s=J.A;return J.A=tR,s}function Wc(){_t=4,Xs||(Ue&4194048)!==Ue&&xn.current!==null||(ra=!0),(Ws&134217727)===0&&(ao&134217727)===0||ot===null||er(ot,Ue,Pn,!1)}function vp(s,r,l){var c=Xe;Xe|=2;var y=Nv(),v=xv();(ot!==s||Ue!==r)&&(Qc=null,la(s,r)),r=!1;var A=_t;e:do try{if(et!==0&&ke!==null){var R=ke,L=Dn;switch(et){case 8:_p(),A=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(r=!0);var Y=et;if(et=0,Dn=null,ua(s,R,L,Y),l&&ra){A=0;break e}break;default:Y=et,et=0,Dn=null,ua(s,R,L,Y)}}sR(),A=_t;break}catch(j){Rv(s,j)}while(!0);return r&&s.shellSuspendCounter++,es=Zr=null,Xe=c,J.H=y,J.A=v,ke===null&&(ot=null,Ue=0,yc()),A}function sR(){for(;ke!==null;)Mv(ke)}function rR(s,r){var l=Xe;Xe|=2;var c=Nv(),y=xv();ot!==s||Ue!==r?(Qc=null,$c=un()+500,la(s,r)):ra=ei(s,r);e:do try{if(et!==0&&ke!==null){r=ke;var v=Dn;t:switch(et){case 1:et=0,Dn=null,ua(s,r,v,1);break;case 2:case 9:if(By(v)){et=0,Dn=null,Dv(r);break}r=function(){et!==2&&et!==9||ot!==s||(et=7),Oi(s)},v.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:By(v)?(et=0,Dn=null,Dv(r)):(et=0,Dn=null,ua(s,r,v,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var R=ke;if(A?y0(A):R.stateNode.complete){et=0,Dn=null;var L=R.sibling;if(L!==null)ke=L;else{var Y=R.return;Y!==null?(ke=Y,Zc(Y)):ke=null}break t}}et=0,Dn=null,ua(s,r,v,5);break;case 6:et=0,Dn=null,ua(s,r,v,6);break;case 8:_p(),_t=6;break e;default:throw Error(i(462))}}oR();break}catch(j){Rv(s,j)}while(!0);return es=Zr=null,J.H=c,J.A=y,Xe=l,ke!==null?0:(ot=null,Ue=0,yc(),_t)}function oR(){for(;ke!==null&&!Qd();)Mv(ke)}function Mv(s){var r=tv(s.alternate,s,cs);s.memoizedProps=s.pendingProps,r===null?Zc(s):ke=r}function Dv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=Q_(l,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=Q_(l,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:Vh(r);default:iv(l,r),r=ke=xy(r,cs),r=tv(l,r,cs)}s.memoizedProps=s.pendingProps,r===null?Zc(s):ke=r}function ua(s,r,l,c){es=Zr=null,Vh(r),Zo=null,wl=0;var y=r.return;try{if($w(s,y,r,l,Ue)){_t=1,Fc(s,Hn(l,s.current)),ke=null;return}}catch(v){if(y!==null)throw ke=y,v;_t=1,Fc(s,Hn(l,s.current)),ke=null;return}r.flags&32768?(He||c===1?s=!0:ra||(Ue&536870912)!==0?s=!1:(Xs=s=!0,(c===2||c===9||c===3||c===6)&&(c=xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Pv(r,s)):Zc(r)}function Zc(s){var r=s;do{if((r.flags&32768)!==0){Pv(r,Xs);return}s=r.return;var l=Ww(r.alternate,r,cs);if(l!==null){ke=l;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=s}while(r!==null);_t===0&&(_t=5)}function Pv(s,r){do{var l=Zw(s.alternate,s);if(l!==null){l.flags&=32767,ke=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){ke=s;return}ke=s=l}while(s!==null);_t=6,ke=null}function Vv(s,r,l,c,y,v,A,R,L){s.cancelPendingCommit=null;do jc();while(qt!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=ah,Zd(s,l,v,A,R,L),s===ot&&(ke=ot=null,Ue=0),aa=r,js=s,fs=l,mp=v,gp=y,Av=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,cR(xs,function(){return Fv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=ae.p,ae.p=2,A=Xe,Xe|=4;try{jw(s,r,l)}finally{Xe=A,ae.p=y,J.T=c}}qt=1,kv(),Lv(),Uv()}}function kv(){if(qt===1){qt=0;var s=js,r=aa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{mv(r,s);var v=Mp,A=Ey(s.containerInfo),R=v.focusedElem,L=v.selectionRange;if(A!==R&&R&&R.ownerDocument&&Ty(R.ownerDocument.documentElement,R)){if(L!==null&&nh(R)){var Y=L.start,j=L.end;if(j===void 0&&(j=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(j,R.value.length);else{var ne=R.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var W=$.getSelection(),ge=R.textContent.length,Se=Math.min(L.start,ge),rt=L.end===void 0?Se:Math.min(L.end,ge);!W.extend&&Se>rt&&(A=rt,rt=Se,Se=A);var H=vy(R,Se),F=vy(R,rt);if(H&&F&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==F.node||W.focusOffset!==F.offset)){var z=ne.createRange();z.setStart(H.node,H.offset),W.removeAllRanges(),Se>rt?(W.addRange(z),W.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),W.addRange(z))}}}}for(ne=[],W=R;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ne.length;R++){var ee=ne[R];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}df=!!xp,Mp=xp=null}finally{Xe=y,ae.p=c,J.T=l}}s.current=r,qt=2}}function Lv(){if(qt===2){qt=0;var s=js,r=aa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{cv(s,r.alternate,r)}finally{Xe=y,ae.p=c,J.T=l}}qt=3}}function Uv(){if(qt===4||qt===3){qt=0,Gu();var s=js,r=aa,l=fs,c=Av;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qt=5:(qt=0,aa=js=null,Ov(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Zs=null),$i(l),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(jn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,y=ae.p,ae.p=2,J.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var R=c[A];v(R.value,{componentStack:R.stack})}}finally{J.T=r,ae.p=y}}(fs&3)!==0&&jc(),Oi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===yp?Gl++:(Gl=0,yp=s):Gl=0,zl(0)}}function Ov(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Cl(r)))}function jc(){return kv(),Lv(),Uv(),Fv()}function Fv(){if(qt!==5)return!1;var s=js,r=mp;mp=0;var l=$i(fs),c=J.T,y=ae.p;try{ae.p=32>l?32:l,J.T=null,l=gp,gp=null;var v=js,A=fs;if(qt=0,aa=js=null,fs=0,(Xe&6)!==0)throw Error(i(331));var R=Xe;if(Xe|=4,Tv(v.current),yv(v,v.current,A,l),Xe=R,zl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(jn,v)}catch{}return!0}finally{ae.p=y,J.T=c,Ov(s,r)}}function qv(s,r,l){r=Hn(l,r),r=Qh(s.stateNode,r,2),s=Ys(s,r,2),s!==null&&(kr(s,2),Oi(s))}function tt(s,r,l){if(s.tag===3)qv(s,s,l);else for(;r!==null;){if(r.tag===3){qv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zs===null||!Zs.has(c))){s=Hn(l,s),l=B_(2),c=Ys(r,l,2),c!==null&&(H_(l,c,r,s),kr(c,2),Oi(c));break}}r=r.return}}function Tp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new nR;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(dp=!0,y.add(l),s=aR.bind(null,s,r,l),r.then(s,s))}function aR(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(Ue&l)===l&&(_t===4||_t===3&&(Ue&62914560)===Ue&&300>un()-Jc?(Xe&2)===0&&la(s,0):hp|=l,oa===Ue&&(oa=0)),Oi(s)}function Bv(s,r){r===0&&(r=Qu()),s=Qr(s,r),s!==null&&(kr(s,r),Oi(s))}function lR(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Bv(s,l)}function uR(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Bv(s,l)}function cR(s,r){return Ft(s,r)}var ef=null,ca=null,Ep=!1,tf=!1,Sp=!1,tr=0;function Oi(s){s!==ca&&s.next===null&&(ca===null?ef=ca=s:ca=ca.next=s),tf=!0,Ep||(Ep=!0,dR())}function zl(s,r){if(!Sp&&tf){Sp=!0;do for(var l=!1,c=ef;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-Tt(42|s)+1)-1,v&=y&~(A&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,Kv(c,v))}else v=Ue,v=Ti(c,c===ot?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ei(c,v)||(l=!0,Kv(c,v));c=c.next}while(l);Sp=!1}}function fR(){Hv()}function Hv(){tf=Ep=!1;var s=0;tr!==0&&SR()&&(s=tr);for(var r=un(),l=null,c=ef;c!==null;){var y=c.next,v=Gv(c,r);v===0?(c.next=null,l===null?ef=y:l.next=y,y===null&&(ca=l)):(l=c,(s!==0||(v&3)!==0)&&(tf=!0)),c=y}qt!==0&&qt!==5||zl(s),tr!==0&&(tr=0)}function Gv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-Tt(v),R=1<<A,L=y[A];L===-1?((R&l)===0||(R&c)!==0)&&(y[A]=Wd(R,r)):L<=r&&(s.expiredLanes|=R),v&=~R}if(r=ot,l=Ue,l=Ti(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(et===2||et===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ns(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ei(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Ns(c),$i(l)){case 2:case 8:l=el;break;case 32:l=xs;break;case 268435456:l=zu;break;default:l=xs}return c=zv.bind(null,s),l=Ft(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Ns(c),s.callbackPriority=2,s.callbackNode=null,2}function zv(s,r){if(qt!==0&&qt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(jc()&&s.callbackNode!==l)return null;var c=Ue;return c=Ti(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Iv(s,c,r),Gv(s,un()),s.callbackNode!=null&&s.callbackNode===l?zv.bind(null,s):null)}function Kv(s,r){if(jc())return null;Iv(s,r,!0)}function dR(){CR(function(){(Xe&6)!==0?Ft(ja,fR):Hv()})}function Ap(){if(tr===0){var s=Qo;s===0&&(s=_i,_i<<=1,(_i&261888)===0&&(_i=256)),tr=s}return tr}function Yv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Vo(""+s)}function Jv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function hR(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var v=Yv((y[Ht]||null).action),A=c.submitter;A&&(r=(r=A[Ht]||null)?Yv(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var R=new Mi("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(tr!==0){var L=A?Jv(y,A):new FormData(y);Gh(l,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(R.preventDefault(),L=A?Jv(y,A):new FormData(y),Gh(l,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var Cp=0;Cp<oh.length;Cp++){var Ip=oh[Cp],pR=Ip.toLowerCase(),mR=Ip[0].toUpperCase()+Ip.slice(1);li(pR,"on"+mR)}li(Cy,"onAnimationEnd"),li(Iy,"onAnimationIteration"),li(wy,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(Mw,"onTransitionRun"),li(Dw,"onTransitionStart"),li(Pw,"onTransitionCancel"),li(Ry,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function $v(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],L=R.instance,Y=R.currentTarget;if(R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=Y;try{v(y)}catch(j){gc(j)}y.currentTarget=null,v=L}else for(A=0;A<c.length;A++){if(R=c[A],L=R.instance,Y=R.currentTarget,R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=Y;try{v(y)}catch(j){gc(j)}y.currentTarget=null,v=L}}}}function Le(s,r){var l=r[No];l===void 0&&(l=r[No]=new Set);var c=s+"__bubble";l.has(c)||(Qv(r,s,2,!1),l.add(c))}function wp(s,r,l){var c=0;r&&(c|=4),Qv(l,s,c,r)}var nf="_reactListening"+Math.random().toString(36).slice(2);function Rp(s){if(!s[nf]){s[nf]=!0,il.forEach(function(l){l!=="selectionchange"&&(gR.has(l)||wp(l,!1,s),wp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[nf]||(r[nf]=!0,wp("selectionchange",!1,r))}}function Qv(s,r,l,c){switch(C0(r)){case 2:var y=zR;break;case 8:y=KR;break;default:y=Hp}l=y.bind(null,r,l,s),y=void 0,!Br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function bp(s,r,l,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Ci(R),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=v=A;continue e}R=R.parentNode}}c=c.return}Ls(function(){var Y=v,j=On(l),ne=[];e:{var $=by.get(s);if($!==void 0){var W=Mi,ge=s;switch(s){case"keypress":if(Gr(l)===0)break e;case"keydown":case"keyup":W=hc;break;case"focusin":ge="focus",W=Kr;break;case"focusout":ge="blur",W=Kr;break;case"beforeblur":case"afterblur":W=Kr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=sc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=S;break;case Cy:case Iy:case wy:W=oc;break;case Ry:W=b;break;case"scroll":case"scrollend":W=ml;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=ac;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Wi;break;case"toggle":case"beforetoggle":W=xe}var Se=(r&4)!==0,rt=!Se&&(s==="scroll"||s==="scrollend"),H=Se?$!==null?$+"Capture":null:$;Se=[];for(var F=Y,z;F!==null;){var ee=F;if(z=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||z===null||H===null||(ee=si(F,H),ee!=null&&Se.push(Yl(F,ee,z))),rt)break;F=F.return}0<Se.length&&($=new W($,ge,null,l,j),ne.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",$&&l!==dl&&(ge=l.relatedTarget||l.fromElement)&&(Ci(ge)||ge[Si]))break e;if((W||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,W?(ge=l.relatedTarget||l.toElement,W=Y,ge=ge?Ci(ge):null,ge!==null&&(rt=a(ge),Se=ge.tag,ge!==rt||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(W=null,ge=Y),W!==ge)){if(Se=gl,ee="onMouseLeave",H="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Se=Wi,ee="onPointerLeave",H="onPointerEnter",F="pointer"),rt=W==null?$:wn(W),z=ge==null?$:wn(ge),$=new Se(ee,F+"leave",W,l,j),$.target=rt,$.relatedTarget=z,ee=null,Ci(j)===Y&&(Se=new Se(H,F+"enter",ge,l,j),Se.target=z,Se.relatedTarget=rt,ee=Se),rt=ee,W&&ge)t:{for(Se=yR,H=W,F=ge,z=0,ee=H;ee;ee=Se(ee))z++;ee=0;for(var _e=F;_e;_e=Se(_e))ee++;for(;0<z-ee;)H=Se(H),z--;for(;0<ee-z;)F=Se(F),ee--;for(;z--;){if(H===F||F!==null&&H===F.alternate){Se=H;break t}H=Se(H),F=Se(F)}Se=null}else Se=null;W!==null&&Xv(ne,$,W,Se,!1),ge!==null&&rt!==null&&Xv(ne,rt,ge,Se,!0)}}e:{if($=Y?wn(Y):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Ye=hy;else if(fy($))if(py)Ye=bw;else{Ye=ww;var ye=Iw}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Po(Y.elementType)&&(Ye=hy):Ye=Rw;if(Ye&&(Ye=Ye(s,Y))){dy(ne,Ye,l,j);break e}ye&&ye(s,$,Y),s==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&ul($,"number",$.value)}switch(ye=Y?wn(Y):window,s){case"focusin":(fy(ye)||ye.contentEditable==="true")&&(Bo=ye,ih=Y,El=null);break;case"focusout":El=ih=Bo=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Sy(ne,l,j);break;case"selectionchange":if(xw)break;case"keydown":case"keyup":Sy(ne,l,j)}var Ve;if(Qe)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else qo?Yr(s,l)&&(Oe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Vi&&l.locale!=="ko"&&(qo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&qo&&(Ve=pl()):(xi=j,hl="value"in xi?xi.value:xi.textContent,qo=!0)),ye=sf(Y,Oe),0<ye.length&&(Oe=new Pi(Oe,s,null,l,j),ne.push({event:Oe,listeners:ye}),Ve?Oe.data=Ve:(Ve=Fo(l),Ve!==null&&(Oe.data=Ve)))),(Ve=qn?Ew(s,l):Sw(s,l))&&(Oe=sf(Y,"onBeforeInput"),0<Oe.length&&(ye=new Pi("onBeforeInput","beforeinput",null,l,j),ne.push({event:ye,listeners:Oe}),ye.data=Ve)),hR(ne,s,Y,l,j)}$v(ne,r)})}function Yl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function sf(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=si(s,l),y!=null&&c.unshift(Yl(s,y,v)),y=si(s,r),y!=null&&c.push(Yl(s,y,v))),s.tag===3)return c;s=s.return}return[]}function yR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Xv(s,r,l,c,y){for(var v=r._reactName,A=[];l!==null&&l!==c;){var R=l,L=R.alternate,Y=R.stateNode;if(R=R.tag,L!==null&&L===c)break;R!==5&&R!==26&&R!==27||Y===null||(L=Y,y?(Y=si(l,v),Y!=null&&A.unshift(Yl(l,Y,L))):y||(Y=si(l,v),Y!=null&&A.push(Yl(l,Y,L)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var _R=/\r\n?/g,vR=/\u0000|\uFFFD/g;function Wv(s){return(typeof s=="string"?s:""+s).replace(_R,`
`).replace(vR,"")}function Zv(s,r){return r=Wv(r),Wv(s)===r}function st(s,r,l,c,y,v){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||gn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&gn(s,""+c);break;case"className":Rn(s,"class",c);break;case"tabIndex":Rn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(s,l,c);break;case"style":fl(s,c,v);break;case"data":if(r!=="object"){Rn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Vo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&st(s,r,"name",y.name,y,null),st(s,r,"formEncType",y.formEncType,y,null),st(s,r,"formMethod",y.formMethod,y,null),st(s,r,"formTarget",y.formTarget,y,null)):(st(s,r,"encType",y.encType,y,null),st(s,r,"method",y.method,y,null),st(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Vo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ii);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Vo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Mo(s,"popover",c);break;case"xlinkActuate":xt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":xt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":xt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":xt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":xt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":xt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":xt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":xt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":xt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Mo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ic.get(l)||l,Mo(s,l,c))}}function Np(s,r,l,c,y,v){switch(l){case"style":fl(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?gn(s,c):(typeof c=="number"||typeof c=="bigint")&&gn(s,""+c);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),v=s[Ht]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Mo(s,l,c)}}}function Zt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,v,A,l,null)}}y&&st(s,r,"srcSet",l.srcSet,l,null),c&&st(s,r,"src",l.src,l,null);return;case"input":Le("invalid",s);var R=v=A=y=null,L=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":y=j;break;case"type":A=j;break;case"checked":L=j;break;case"defaultChecked":Y=j;break;case"value":v=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:st(s,r,c,j,l,null)}}ec(s,v,R,L,Y,A,y,!1);return;case"select":Le("invalid",s),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:st(s,r,y,R,l,null)}r=v,l=A,s.multiple=!!c,r!=null?Ds(s,!!c,r,!1):l!=null&&Ds(s,!!c,l,!0);return;case"textarea":Le("invalid",s),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:st(s,r,A,R,l,null)}Ps(s,c,y,v);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(s,r,L,c,l,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(c=0;c<Kl.length;c++)Le(Kl[c],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,Y,c,l,null)}return;default:if(Po(r)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&Np(s,r,j,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&st(s,r,R,c,l,null))}function TR(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,R=null,L=null,Y=null,j=null;for(W in l){var ne=l[W];if(l.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":L=ne;default:c.hasOwnProperty(W)||st(s,r,W,null,c,ne)}}for(var $ in c){var W=c[$];if(ne=l[$],c.hasOwnProperty($)&&(W!=null||ne!=null))switch($){case"type":v=W;break;case"name":y=W;break;case"checked":Y=W;break;case"defaultChecked":j=W;break;case"value":A=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ne&&st(s,r,$,W,c,ne)}}Do(s,A,R,L,Y,j,v,y);return;case"select":W=A=R=$=null;for(v in l)if(L=l[v],l.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":W=L;default:c.hasOwnProperty(v)||st(s,r,v,null,c,L)}for(y in c)if(v=c[y],L=l[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":$=v;break;case"defaultValue":R=v;break;case"multiple":A=v;default:v!==L&&st(s,r,y,v,c,L)}r=R,l=A,c=W,$!=null?Ds(s,!!l,$,!1):!!c!=!!l&&(r!=null?Ds(s,!!l,r,!0):Ds(s,!!l,l?[]:"",!1));return;case"textarea":W=$=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:st(s,r,R,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&st(s,r,A,y,c,v)}tc(s,$,W);return;case"option":for(var ge in l)if($=l[ge],l.hasOwnProperty(ge)&&$!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:st(s,r,ge,null,c,$)}for(L in c)if($=c[L],W=l[L],c.hasOwnProperty(L)&&$!==W&&($!=null||W!=null))switch(L){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:st(s,r,L,$,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)$=l[Se],l.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&st(s,r,Se,null,c,$);for(Y in c)if($=c[Y],W=l[Y],c.hasOwnProperty(Y)&&$!==W&&($!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:st(s,r,Y,$,c,W)}return;default:if(Po(r)){for(var rt in l)$=l[rt],l.hasOwnProperty(rt)&&$!==void 0&&!c.hasOwnProperty(rt)&&Np(s,r,rt,void 0,c,$);for(j in c)$=c[j],W=l[j],!c.hasOwnProperty(j)||$===W||$===void 0&&W===void 0||Np(s,r,j,$,c,W);return}}for(var H in l)$=l[H],l.hasOwnProperty(H)&&$!=null&&!c.hasOwnProperty(H)&&st(s,r,H,null,c,$);for(ne in c)$=c[ne],W=l[ne],!c.hasOwnProperty(ne)||$===W||$==null&&W==null||st(s,r,ne,$,c,W)}function jv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ER(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,R=y.duration;if(v&&R&&jv(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var L=l[c],Y=L.startTime;if(Y>R)break;var j=L.transferSize,ne=L.initiatorType;j&&jv(ne)&&(L=L.responseEnd,A+=j*(L<R?1:(R-Y)/(L-Y)))}if(--c,r+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var xp=null,Mp=null;function rf(s){return s.nodeType===9?s:s.ownerDocument}function e0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Dp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pp=null;function SR(){var s=window.event;return s&&s.type==="popstate"?s===Pp?!1:(Pp=s,!0):(Pp=null,!1)}var n0=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,CR=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(s){return i0.resolve(null).then(s).catch(IR)}:n0;function IR(s){setTimeout(function(){throw s})}function nr(s){return s==="head"}function s0(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),pa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Jl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Jl(l);for(var v=l.firstChild;v;){var A=v.nextSibling,R=v.nodeName;v[Ai]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&Jl(s.ownerDocument.body);l=y}while(l);pa(r)}function r0(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Vp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Vp(l),xo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function wR(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ai])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Jn(s.nextSibling),s===null)break}return null}function RR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Jn(s.nextSibling),s===null))return null;return s}function o0(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Jn(s.nextSibling),s===null))return null;return s}function kp(s){return s.data==="$?"||s.data==="$~"}function Lp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function bR(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Jn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Up=null;function a0(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Jn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function l0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function u0(s,r,l){switch(r=rf(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);xo(s)}var $n=new Map,c0=new Set;function of(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ds=ae.d;ae.d={f:NR,r:xR,D:MR,C:DR,L:PR,m:VR,X:LR,S:kR,M:UR};function NR(){var s=ds.f(),r=Xc();return s||r}function xR(s){var r=Un(s);r!==null&&r.tag===5&&r.type==="form"?R_(r):ds.r(s)}var fa=typeof document>"u"?null:document;function f0(s,r,l){var c=fa;if(c&&typeof r=="string"&&r){var y=mn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),c0.has(y)||(c0.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Zt(r,"link",s),Nt(r),c.head.appendChild(r)))}}function MR(s){ds.D(s),f0("dns-prefetch",s,null)}function DR(s,r){ds.C(s,r),f0("preconnect",s,r)}function PR(s,r,l){ds.L(s,r,l);var c=fa;if(c&&s&&r){var y='link[rel="preload"][as="'+mn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+mn(l.imageSizes)+'"]')):y+='[href="'+mn(s)+'"]';var v=y;switch(r){case"style":v=da(s);break;case"script":v=ha(s)}$n.has(v)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),$n.set(v,s),c.querySelector(y)!==null||r==="style"&&c.querySelector($l(v))||r==="script"&&c.querySelector(Ql(v))||(r=c.createElement("link"),Zt(r,"link",s),Nt(r),c.head.appendChild(r)))}}function VR(s,r){ds.m(s,r);var l=fa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+mn(c)+'"][href="'+mn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ha(s)}if(!$n.has(v)&&(s=T({rel:"modulepreload",href:s},r),$n.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ql(v)))return}c=l.createElement("link"),Zt(c,"link",s),Nt(c),l.head.appendChild(c)}}}function kR(s,r,l){ds.S(s,r,l);var c=fa;if(c&&s){var y=Ii(c).hoistableStyles,v=da(s);r=r||"default";var A=y.get(v);if(!A){var R={loading:0,preload:null};if(A=c.querySelector($l(v)))R.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=$n.get(v))&&Op(s,l);var L=A=c.createElement("link");Nt(L),Zt(L,"link",s),L._p=new Promise(function(Y,j){L.onload=Y,L.onerror=j}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,af(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(v,A)}}}function LR(s,r){ds.X(s,r);var l=fa;if(l&&s){var c=Ii(l).hoistableScripts,y=ha(s),v=c.get(y);v||(v=l.querySelector(Ql(y)),v||(s=T({src:s,async:!0},r),(r=$n.get(y))&&Fp(s,r),v=l.createElement("script"),Nt(v),Zt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function UR(s,r){ds.M(s,r);var l=fa;if(l&&s){var c=Ii(l).hoistableScripts,y=ha(s),v=c.get(y);v||(v=l.querySelector(Ql(y)),v||(s=T({src:s,async:!0,type:"module"},r),(r=$n.get(y))&&Fp(s,r),v=l.createElement("script"),Nt(v),Zt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function d0(s,r,l,c){var y=(y=Pe.current)?of(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=da(l.href),l=Ii(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=da(l.href);var v=Ii(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector($l(s)))&&!v._p&&(A.instance=v,A.state.loading=5),$n.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$n.set(s,l),v||OR(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ha(l),l=Ii(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function da(s){return'href="'+mn(s)+'"'}function $l(s){return'link[rel="stylesheet"]['+s+"]"}function h0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function OR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Zt(r,"link",l),Nt(r),s.head.appendChild(r))}function ha(s){return'[src="'+mn(s)+'"]'}function Ql(s){return"script[async]"+s}function p0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+mn(l.href)+'"]');if(c)return r.instance=c,Nt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Nt(c),Zt(c,"style",y),af(c,l.precedence,s),r.instance=c;case"stylesheet":y=da(l.href);var v=s.querySelector($l(y));if(v)return r.state.loading|=4,r.instance=v,Nt(v),v;c=h0(l),(y=$n.get(y))&&Op(c,y),v=(s.ownerDocument||s).createElement("link"),Nt(v);var A=v;return A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),Zt(v,"link",c),r.state.loading|=4,af(v,l.precedence,s),r.instance=v;case"script":return v=ha(l.src),(y=s.querySelector(Ql(v)))?(r.instance=y,Nt(y),y):(c=l,(y=$n.get(v))&&(c=T({},l),Fp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Nt(y),Zt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,af(c,l.precedence,s));return r.instance}function af(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Op(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Fp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var lf=null;function m0(s,r,l){if(lf===null){var c=new Map,y=lf=new Map;y.set(l,c)}else y=lf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[Ai]||v[bt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=s+A;var R=c.get(A);R?R.push(v):c.set(A,[v])}}return c}function g0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function FR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function y0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function qR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=da(c.href),v=r.querySelector($l(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=uf.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,Nt(v);return}v=r.ownerDocument||r,c=h0(c),(y=$n.get(y))&&Op(c,y),v=v.createElement("link"),Nt(v);var A=v;A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),Zt(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=uf.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var qp=0;function BR(s,r){return s.stylesheets&&s.count===0&&ff(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&ff(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&qp===0&&(qp=62500*ER());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ff(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>qp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function uf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ff(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cf=null;function ff(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cf=new Map,r.forEach(HR,s),cf=null,uf.call(s))}function HR(s,r){if(!(r.state.loading&4)){var l=cf.get(s);if(l)var c=l.get(null);else{l=new Map,cf.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=uf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Xl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function GR(s,r,l,c,y,v,A,R,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function _0(s,r,l,c,y,v,A,R,L,Y,j,ne){return s=new GR(s,r,l,A,L,Y,j,ne,R),r=1,v===!0&&(r|=24),v=Nn(3,null,null,r),s.current=v,v.stateNode=s,r=vh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:r},Ah(v),s}function v0(s){return s?(s=zo,s):zo}function T0(s,r,l,c,y,v){y=v0(y),c.context===null?c.context=y:c.pendingContext=y,c=Ks(r),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Ys(s,c,r),l!==null&&(En(l,s,r),bl(l,s,r))}function E0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Bp(s,r){E0(s,r),(s=s.alternate)&&E0(s,r)}function S0(s){if(s.tag===13||s.tag===31){var r=Qr(s,67108864);r!==null&&En(r,s,67108864),Bp(s,67108864)}}function A0(s){if(s.tag===13||s.tag===31){var r=Vn();r=Ur(r);var l=Qr(s,r);l!==null&&En(l,s,r),Bp(s,r)}}var df=!0;function zR(s,r,l,c){var y=J.T;J.T=null;var v=ae.p;try{ae.p=2,Hp(s,r,l,c)}finally{ae.p=v,J.T=y}}function KR(s,r,l,c){var y=J.T;J.T=null;var v=ae.p;try{ae.p=8,Hp(s,r,l,c)}finally{ae.p=v,J.T=y}}function Hp(s,r,l,c){if(df){var y=Gp(c);if(y===null)bp(s,r,c,hf,l),I0(s,c);else if(JR(y,s,r,l,c))c.stopPropagation();else if(I0(s,c),r&4&&-1<YR.indexOf(s)){for(;y!==null;){var v=Un(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=vi(v.pendingLanes);if(A!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var L=1<<31-Tt(A);R.entanglements[1]|=L,A&=~L}Oi(v),(Xe&6)===0&&($c=un()+500,zl(0))}}break;case 31:case 13:R=Qr(v,2),R!==null&&En(R,v,2),Xc(),Bp(v,2)}if(v=Gp(c),v===null&&bp(s,r,c,hf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else bp(s,r,c,null,l)}}function Gp(s){return s=On(s),zp(s)}var hf=null;function zp(s){if(hf=null,s=Ci(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=f(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return hf=s,null}function C0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pr()){case ja:return 2;case el:return 8;case xs:case Xd:return 32;case zu:return 268435456;default:return 32}default:return 32}}var Kp=!1,ir=null,sr=null,rr=null,Wl=new Map,Zl=new Map,or=[],YR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I0(s,r){switch(s){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Wl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(r.pointerId)}}function jl(s,r,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=Un(r),r!==null&&S0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function JR(s,r,l,c,y){switch(r){case"focusin":return ir=jl(ir,s,r,l,c,y),!0;case"dragenter":return sr=jl(sr,s,r,l,c,y),!0;case"mouseover":return rr=jl(rr,s,r,l,c,y),!0;case"pointerover":var v=y.pointerId;return Wl.set(v,jl(Wl.get(v)||null,s,r,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Zl.set(v,jl(Zl.get(v)||null,s,r,l,c,y)),!0}return!1}function w0(s){var r=Ci(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ti(s.priority,function(){A0(l)});return}}else if(r===31){if(r=f(l),r!==null){s.blockedOn=r,ti(s.priority,function(){A0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Gp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);dl=c,l.target.dispatchEvent(c),dl=null}else return r=Un(l),r!==null&&S0(r),s.blockedOn=l,!1;r.shift()}return!0}function R0(s,r,l){pf(s)&&l.delete(r)}function $R(){Kp=!1,ir!==null&&pf(ir)&&(ir=null),sr!==null&&pf(sr)&&(sr=null),rr!==null&&pf(rr)&&(rr=null),Wl.forEach(R0),Zl.forEach(R0)}function mf(s,r){s.blockedOn===r&&(s.blockedOn=null,Kp||(Kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$R)))}var gf=null;function b0(s){gf!==s&&(gf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gf===s&&(gf=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(zp(c||l)===null)continue;break}var v=Un(l);v!==null&&(s.splice(r,3),r-=3,Gh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function pa(s){function r(L){return mf(L,s)}ir!==null&&mf(ir,s),sr!==null&&mf(sr,s),rr!==null&&mf(rr,s),Wl.forEach(r),Zl.forEach(r);for(var l=0;l<or.length;l++){var c=or[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<or.length&&(l=or[0],l.blockedOn===null);)w0(l),l.blockedOn===null&&or.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Ht]||null;if(typeof v=="function")A||b0(l);else if(A){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Ht]||null)R=A.formAction;else if(zp(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),b0(l)}}}function N0(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Yp(s){this._internalRoot=s}yf.prototype.render=Yp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Vn();T0(l,c,s,r,null,null)},yf.prototype.unmount=Yp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;T0(s.current,2,null,s,null,null),Xc(),r[Si]=null}};function yf(s){this._internalRoot=s}yf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Xu();s={blockedOn:null,target:s,priority:r};for(var l=0;l<or.length&&r!==0&&r<or[l].priority;l++);or.splice(l,0,s),l===0&&w0(s)}};var x0=e.version;if(x0!=="19.2.3")throw Error(i(527,x0,"19.2.3"));ae.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var QR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{jn=_f.inject(QR),Jt=_f}catch{}}return tu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=U_,v=O_,A=F_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=_0(s,1,!1,null,null,l,c,null,y,v,A,N0),s[Si]=r.current,Rp(s),new Yp(r)},tu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",v=U_,A=O_,R=F_,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),r=_0(s,1,!0,r,l??null,c,y,L,v,A,R,N0),r.context=v0(null),l=r.current,c=Vn(),c=Ur(c),y=Ks(c),y.callback=null,Ys(l,y,c),l=c,r.current.lanes=l,kr(r,l),Oi(r),s[Si]=r.current,Rp(s),new yf(r)},tu.version="19.2.3",tu}var q0;function ob(){if(q0)return Qp.exports;q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qp.exports=rb(),Qp.exports}var ab=ob();const lb=jS(ab),ub=()=>{};var B0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cb=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],f=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},tA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,f=u?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,_=a>>2,T=(a&3)<<4|f>>4;let E=(f&15)<<2|h>>6,w=h&63;p||(w=64,u||(E=64)),i.push(t[_],t[T],t[E],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||f==null||h==null||T==null)throw new fb;const E=a<<2|f>>4;if(i.push(E),h!==64){const w=f<<4&240|h>>2;if(i.push(w),T!==64){const V=h<<6&192|T;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const db=function(n){const e=eA(n);return tA.encodeByteArray(e,!0)},Yf=function(n){return db(n).replace(/\./g,"")},nA=function(n){try{return tA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=()=>hb().__FIREBASE_DEFAULTS__,mb=()=>{if(typeof process>"u"||typeof B0>"u")return;const n=B0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nA(n[1]);return e&&JSON.parse(e)},vd=()=>{try{return ub()||pb()||mb()||gb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iA=n=>{var e,t;return(t=(e=vd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},yb=n=>{const e=iA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},sA=()=>{var n;return(n=vd())==null?void 0:n.config},rA=n=>{var e;return(e=vd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Yf(JSON.stringify(t)),Yf(JSON.stringify(u)),""].join(".")}const du={};function Tb(){const n={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?n.emulator.push(e):n.prod.push(e);return n}function Eb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let H0=!1;function aA(n,e){if(typeof window>"u"||typeof document>"u"||!Fa(window.location.host)||du[n]===e||du[n]||H0)return;du[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=Tb().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{H0=!0,u()},E}function _(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=Eb(i),w=t("text"),V=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),P=document.getElementById(k)||document.createElement("a"),K=t("preprendIcon"),Z=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Q=E.element;f(Q),_(P,k);const oe=h();p(Z,K),Q.append(Z,V,P,oe),document.body.appendChild(Q)}a?(V.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function Ab(){var e;const n=(e=vd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ib(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rb(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bb(){return!Ab()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nb(){try{return typeof indexedDB=="object"}catch{return!1}}function xb(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="FirebaseError";class Is extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Mb,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?Db(a,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new Is(o,f,i)}}function Db(n,e){return n.replace(Pb,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Pb=/\{\$([^}]+)}/g;function Vb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _s(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(G0(a)&&G0(u)){if(!_s(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function G0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ru(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function ou(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kb(n,e){const t=new Lb(n,e);return t.subscribe.bind(t)}class Lb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Ub(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jp),o.error===void 0&&(o.error=jp),o.complete===void 0&&(o.complete=jp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ub(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n){return n&&n._delegate?n._delegate:n}class mo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new _b;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qb(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Fb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fb(n){return n===uo?void 0:n}function qb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ob(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const Hb={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},Gb=Fe.INFO,zb={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Kb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=zb[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ig{constructor(e){this.name=e,this._logLevel=Gb,this._logHandler=Kb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const Yb=(n,e)=>e.some(t=>n instanceof t);let z0,K0;function Jb(){return z0||(z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $b(){return K0||(K0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,gm=new WeakMap,uA=new WeakMap,em=new WeakMap,sg=new WeakMap;function Qb(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(mr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&lA.set(t,n)}).catch(()=>{}),sg.set(e,n),e}function Xb(n){if(gm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});gm.set(n,e)}let ym={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Wb(n){ym=n(ym)}function Zb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(tm(this),e,...t);return uA.set(i,e.sort?e.sort():[e]),mr(i)}:$b().includes(n)?function(...e){return n.apply(tm(this),e),mr(lA.get(this))}:function(...e){return mr(n.apply(tm(this),e))}}function jb(n){return typeof n=="function"?Zb(n):(n instanceof IDBTransaction&&Xb(n),Yb(n,Jb())?new Proxy(n,ym):n)}function mr(n){if(n instanceof IDBRequest)return Qb(n);if(em.has(n))return em.get(n);const e=jb(n);return e!==n&&(em.set(n,e),sg.set(e,n)),e}const tm=n=>sg.get(n);function eN(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),f=mr(u);return i&&u.addEventListener("upgradeneeded",p=>{i(mr(u.result),p.oldVersion,p.newVersion,mr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const tN=["get","getKey","getAll","getAllKeys","count"],nN=["put","add","delete","clear"],nm=new Map;function Y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=nN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||tN.includes(t)))return;const a=async function(u,...f){const p=this.transaction(u,o?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),o&&p.done]))[0]};return nm.set(e,a),a}Wb(n=>({...n,get:(e,t,i)=>Y0(e,t)||n.get(e,t,i),has:(e,t)=>!!Y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function sN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _m="@firebase/app",J0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new ig("@firebase/app"),rN="@firebase/app-compat",oN="@firebase/analytics-compat",aN="@firebase/analytics",lN="@firebase/app-check-compat",uN="@firebase/app-check",cN="@firebase/auth",fN="@firebase/auth-compat",dN="@firebase/database",hN="@firebase/data-connect",pN="@firebase/database-compat",mN="@firebase/functions",gN="@firebase/functions-compat",yN="@firebase/installations",_N="@firebase/installations-compat",vN="@firebase/messaging",TN="@firebase/messaging-compat",EN="@firebase/performance",SN="@firebase/performance-compat",AN="@firebase/remote-config",CN="@firebase/remote-config-compat",IN="@firebase/storage",wN="@firebase/storage-compat",RN="@firebase/firestore",bN="@firebase/ai",NN="@firebase/firestore-compat",xN="firebase",MN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="[DEFAULT]",DN={[_m]:"fire-core",[rN]:"fire-core-compat",[aN]:"fire-analytics",[oN]:"fire-analytics-compat",[uN]:"fire-app-check",[lN]:"fire-app-check-compat",[cN]:"fire-auth",[fN]:"fire-auth-compat",[dN]:"fire-rtdb",[hN]:"fire-data-connect",[pN]:"fire-rtdb-compat",[mN]:"fire-fn",[gN]:"fire-fn-compat",[yN]:"fire-iid",[_N]:"fire-iid-compat",[vN]:"fire-fcm",[TN]:"fire-fcm-compat",[EN]:"fire-perf",[SN]:"fire-perf-compat",[AN]:"fire-rc",[CN]:"fire-rc-compat",[IN]:"fire-gcs",[wN]:"fire-gcs-compat",[RN]:"fire-fst",[NN]:"fire-fst-compat",[bN]:"fire-vertex","fire-js":"fire-js",[xN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Map,PN=new Map,Tm=new Map;function $0(n,e){try{n.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xa(n){const e=n.name;if(Tm.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;Tm.set(e,n);for(const t of Jf.values())$0(t,n);for(const t of PN.values())$0(t,n);return!0}function rg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new wu("app","Firebase",VN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=MN;function cA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:vm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw gr.create("bad-app-name",{appName:String(o)});if(t||(t=sA()),!t)throw gr.create("no-options");const a=Jf.get(o);if(a){if(_s(t,a.options)&&_s(i,a.config))return a;throw gr.create("duplicate-app",{appName:o})}const u=new Bb(o);for(const p of Tm.values())u.addComponent(p);const f=new kN(t,i,u);return Jf.set(o,f),f}function fA(n=vm){const e=Jf.get(n);if(!e&&n===vm&&sA())return cA();if(!e)throw gr.create("no-app",{appName:n});return e}function yr(n,e,t){let i=DN[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(u.join(" "));return}xa(new mo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="firebase-heartbeat-database",UN=1,_u="firebase-heartbeat-store";let im=null;function dA(){return im||(im=eN(LN,UN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_u)}catch(t){console.warn(t)}}}}).catch(n=>{throw gr.create("idb-open",{originalErrorMessage:n.message})})),im}async function ON(n){try{const t=(await dA()).transaction(_u),i=await t.objectStore(_u).get(hA(n));return await t.done,i}catch(e){if(e instanceof Is)vs.warn(e.message);else{const t=gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(t.message)}}}async function Q0(n,e){try{const i=(await dA()).transaction(_u,"readwrite");await i.objectStore(_u).put(e,hA(n)),await i.done}catch(t){if(t instanceof Is)vs.warn(t.message);else{const i=gr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vs.warn(i.message)}}}function hA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=1024,qN=30;class BN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new GN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=X0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>qN){const u=zN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=X0(),{heartbeatsToSend:i,unsentEntries:o}=HN(this._heartbeatsCache.heartbeats),a=Yf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return vs.warn(t),""}}}function X0(){return new Date().toISOString().substring(0,10)}function HN(n,e=FN){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),W0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),W0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class GN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nb()?xb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ON(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Q0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Q0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function W0(n){return Yf(JSON.stringify({version:2,heartbeats:n})).length}function zN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){xa(new mo("platform-logger",e=>new iN(e),"PRIVATE")),xa(new mo("heartbeat",e=>new BN(e),"PRIVATE")),yr(_m,J0,n),yr(_m,J0,"esm2020"),yr("fire-js","")}KN("");var Z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _r,pA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function x(){}x.prototype=D.prototype,M.F=D.prototype,M.prototype=new x,M.prototype.constructor=M,M.D=function(O,U,B){for(var N=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)N[Te-2]=arguments[Te];return D.prototype[U].apply(O,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,D,x){x||(x=0);const O=Array(16);if(typeof D=="string")for(var U=0;U<16;++U)O[U]=D.charCodeAt(x++)|D.charCodeAt(x++)<<8|D.charCodeAt(x++)<<16|D.charCodeAt(x++)<<24;else for(U=0;U<16;++U)O[U]=D[x++]|D[x++]<<8|D[x++]<<16|D[x++]<<24;D=M.g[0],x=M.g[1],U=M.g[2];let B=M.g[3],N;N=D+(B^x&(U^B))+O[0]+3614090360&4294967295,D=x+(N<<7&4294967295|N>>>25),N=B+(U^D&(x^U))+O[1]+3905402710&4294967295,B=D+(N<<12&4294967295|N>>>20),N=U+(x^B&(D^x))+O[2]+606105819&4294967295,U=B+(N<<17&4294967295|N>>>15),N=x+(D^U&(B^D))+O[3]+3250441966&4294967295,x=U+(N<<22&4294967295|N>>>10),N=D+(B^x&(U^B))+O[4]+4118548399&4294967295,D=x+(N<<7&4294967295|N>>>25),N=B+(U^D&(x^U))+O[5]+1200080426&4294967295,B=D+(N<<12&4294967295|N>>>20),N=U+(x^B&(D^x))+O[6]+2821735955&4294967295,U=B+(N<<17&4294967295|N>>>15),N=x+(D^U&(B^D))+O[7]+4249261313&4294967295,x=U+(N<<22&4294967295|N>>>10),N=D+(B^x&(U^B))+O[8]+1770035416&4294967295,D=x+(N<<7&4294967295|N>>>25),N=B+(U^D&(x^U))+O[9]+2336552879&4294967295,B=D+(N<<12&4294967295|N>>>20),N=U+(x^B&(D^x))+O[10]+4294925233&4294967295,U=B+(N<<17&4294967295|N>>>15),N=x+(D^U&(B^D))+O[11]+2304563134&4294967295,x=U+(N<<22&4294967295|N>>>10),N=D+(B^x&(U^B))+O[12]+1804603682&4294967295,D=x+(N<<7&4294967295|N>>>25),N=B+(U^D&(x^U))+O[13]+4254626195&4294967295,B=D+(N<<12&4294967295|N>>>20),N=U+(x^B&(D^x))+O[14]+2792965006&4294967295,U=B+(N<<17&4294967295|N>>>15),N=x+(D^U&(B^D))+O[15]+1236535329&4294967295,x=U+(N<<22&4294967295|N>>>10),N=D+(U^B&(x^U))+O[1]+4129170786&4294967295,D=x+(N<<5&4294967295|N>>>27),N=B+(x^U&(D^x))+O[6]+3225465664&4294967295,B=D+(N<<9&4294967295|N>>>23),N=U+(D^x&(B^D))+O[11]+643717713&4294967295,U=B+(N<<14&4294967295|N>>>18),N=x+(B^D&(U^B))+O[0]+3921069994&4294967295,x=U+(N<<20&4294967295|N>>>12),N=D+(U^B&(x^U))+O[5]+3593408605&4294967295,D=x+(N<<5&4294967295|N>>>27),N=B+(x^U&(D^x))+O[10]+38016083&4294967295,B=D+(N<<9&4294967295|N>>>23),N=U+(D^x&(B^D))+O[15]+3634488961&4294967295,U=B+(N<<14&4294967295|N>>>18),N=x+(B^D&(U^B))+O[4]+3889429448&4294967295,x=U+(N<<20&4294967295|N>>>12),N=D+(U^B&(x^U))+O[9]+568446438&4294967295,D=x+(N<<5&4294967295|N>>>27),N=B+(x^U&(D^x))+O[14]+3275163606&4294967295,B=D+(N<<9&4294967295|N>>>23),N=U+(D^x&(B^D))+O[3]+4107603335&4294967295,U=B+(N<<14&4294967295|N>>>18),N=x+(B^D&(U^B))+O[8]+1163531501&4294967295,x=U+(N<<20&4294967295|N>>>12),N=D+(U^B&(x^U))+O[13]+2850285829&4294967295,D=x+(N<<5&4294967295|N>>>27),N=B+(x^U&(D^x))+O[2]+4243563512&4294967295,B=D+(N<<9&4294967295|N>>>23),N=U+(D^x&(B^D))+O[7]+1735328473&4294967295,U=B+(N<<14&4294967295|N>>>18),N=x+(B^D&(U^B))+O[12]+2368359562&4294967295,x=U+(N<<20&4294967295|N>>>12),N=D+(x^U^B)+O[5]+4294588738&4294967295,D=x+(N<<4&4294967295|N>>>28),N=B+(D^x^U)+O[8]+2272392833&4294967295,B=D+(N<<11&4294967295|N>>>21),N=U+(B^D^x)+O[11]+1839030562&4294967295,U=B+(N<<16&4294967295|N>>>16),N=x+(U^B^D)+O[14]+4259657740&4294967295,x=U+(N<<23&4294967295|N>>>9),N=D+(x^U^B)+O[1]+2763975236&4294967295,D=x+(N<<4&4294967295|N>>>28),N=B+(D^x^U)+O[4]+1272893353&4294967295,B=D+(N<<11&4294967295|N>>>21),N=U+(B^D^x)+O[7]+4139469664&4294967295,U=B+(N<<16&4294967295|N>>>16),N=x+(U^B^D)+O[10]+3200236656&4294967295,x=U+(N<<23&4294967295|N>>>9),N=D+(x^U^B)+O[13]+681279174&4294967295,D=x+(N<<4&4294967295|N>>>28),N=B+(D^x^U)+O[0]+3936430074&4294967295,B=D+(N<<11&4294967295|N>>>21),N=U+(B^D^x)+O[3]+3572445317&4294967295,U=B+(N<<16&4294967295|N>>>16),N=x+(U^B^D)+O[6]+76029189&4294967295,x=U+(N<<23&4294967295|N>>>9),N=D+(x^U^B)+O[9]+3654602809&4294967295,D=x+(N<<4&4294967295|N>>>28),N=B+(D^x^U)+O[12]+3873151461&4294967295,B=D+(N<<11&4294967295|N>>>21),N=U+(B^D^x)+O[15]+530742520&4294967295,U=B+(N<<16&4294967295|N>>>16),N=x+(U^B^D)+O[2]+3299628645&4294967295,x=U+(N<<23&4294967295|N>>>9),N=D+(U^(x|~B))+O[0]+4096336452&4294967295,D=x+(N<<6&4294967295|N>>>26),N=B+(x^(D|~U))+O[7]+1126891415&4294967295,B=D+(N<<10&4294967295|N>>>22),N=U+(D^(B|~x))+O[14]+2878612391&4294967295,U=B+(N<<15&4294967295|N>>>17),N=x+(B^(U|~D))+O[5]+4237533241&4294967295,x=U+(N<<21&4294967295|N>>>11),N=D+(U^(x|~B))+O[12]+1700485571&4294967295,D=x+(N<<6&4294967295|N>>>26),N=B+(x^(D|~U))+O[3]+2399980690&4294967295,B=D+(N<<10&4294967295|N>>>22),N=U+(D^(B|~x))+O[10]+4293915773&4294967295,U=B+(N<<15&4294967295|N>>>17),N=x+(B^(U|~D))+O[1]+2240044497&4294967295,x=U+(N<<21&4294967295|N>>>11),N=D+(U^(x|~B))+O[8]+1873313359&4294967295,D=x+(N<<6&4294967295|N>>>26),N=B+(x^(D|~U))+O[15]+4264355552&4294967295,B=D+(N<<10&4294967295|N>>>22),N=U+(D^(B|~x))+O[6]+2734768916&4294967295,U=B+(N<<15&4294967295|N>>>17),N=x+(B^(U|~D))+O[13]+1309151649&4294967295,x=U+(N<<21&4294967295|N>>>11),N=D+(U^(x|~B))+O[4]+4149444226&4294967295,D=x+(N<<6&4294967295|N>>>26),N=B+(x^(D|~U))+O[11]+3174756917&4294967295,B=D+(N<<10&4294967295|N>>>22),N=U+(D^(B|~x))+O[2]+718787259&4294967295,U=B+(N<<15&4294967295|N>>>17),N=x+(B^(U|~D))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(U+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+B&4294967295}i.prototype.v=function(M,D){D===void 0&&(D=M.length);const x=D-this.blockSize,O=this.C;let U=this.h,B=0;for(;B<D;){if(U==0)for(;B<=x;)o(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<D;)if(O[U++]=M.charCodeAt(B++),U==this.blockSize){o(this,O),U=0;break}}else for(;B<D;)if(O[U++]=M[B++],U==this.blockSize){o(this,O),U=0;break}}this.h=U,this.o+=D},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;D=this.o*8;for(var x=M.length-8;x<M.length;++x)M[x]=D&255,D/=256;for(this.v(M),M=Array(16),D=0,x=0;x<4;++x)for(let O=0;O<32;O+=8)M[D++]=this.g[x]>>>O&255;return M};function a(M,D){var x=f;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=D(M)}function u(M,D){this.h=D;const x=[];let O=!0;for(let U=M.length-1;U>=0;U--){const B=M[U]|0;O&&B==D||(x[U]=B,O=!1)}this.g=x}var f={};function p(M){return-128<=M&&M<128?a(M,function(D){return new u([D|0],D<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return P(h(-M));const D=[];let x=1;for(let O=0;M>=x;O++)D[O]=M/x|0,x*=4294967296;return new u(D,0)}function _(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return P(_(M.substring(1),D));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(D,8));let O=T;for(let B=0;B<M.length;B+=8){var U=Math.min(8,M.length-B);const N=parseInt(M.substring(B,B+U),D);U<8?(U=h(Math.pow(D,U)),O=O.j(U).add(h(N))):(O=O.j(x),O=O.add(h(N)))}return O}var T=p(0),E=p(1),w=p(16777216);n=u.prototype,n.m=function(){if(k(this))return-P(this).m();let M=0,D=1;for(let x=0;x<this.g.length;x++){const O=this.i(x);M+=(O>=0?O:4294967296+O)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V(this))return"0";if(k(this))return"-"+P(this).toString(M);const D=h(Math.pow(M,6));var x=this;let O="";for(;;){const U=oe(x,D).g;x=K(x,U.j(D));let B=((x.g.length>0?x.g[0]:x.h)>>>0).toString(M);if(x=U,V(x))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function V(M){if(M.h!=0)return!1;for(let D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function k(M){return M.h==-1}n.l=function(M){return M=K(this,M),k(M)?-1:V(M)?0:1};function P(M){const D=M.g.length,x=[];for(let O=0;O<D;O++)x[O]=~M.g[O];return new u(x,~M.h).add(E)}n.abs=function(){return k(this)?P(this):this},n.add=function(M){const D=Math.max(this.g.length,M.g.length),x=[];let O=0;for(let U=0;U<=D;U++){let B=O+(this.i(U)&65535)+(M.i(U)&65535),N=(B>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);O=N>>>16,B&=65535,N&=65535,x[U]=N<<16|B}return new u(x,x[x.length-1]&-2147483648?-1:0)};function K(M,D){return M.add(P(D))}n.j=function(M){if(V(this)||V(M))return T;if(k(this))return k(M)?P(this).j(P(M)):P(P(this).j(M));if(k(M))return P(this.j(P(M)));if(this.l(w)<0&&M.l(w)<0)return h(this.m()*M.m());const D=this.g.length+M.g.length,x=[];for(var O=0;O<2*D;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(let U=0;U<M.g.length;U++){const B=this.i(O)>>>16,N=this.i(O)&65535,Te=M.i(U)>>>16,De=M.i(U)&65535;x[2*O+2*U]+=N*De,Z(x,2*O+2*U),x[2*O+2*U+1]+=B*De,Z(x,2*O+2*U+1),x[2*O+2*U+1]+=N*Te,Z(x,2*O+2*U+1),x[2*O+2*U+2]+=B*Te,Z(x,2*O+2*U+2)}for(M=0;M<D;M++)x[M]=x[2*M+1]<<16|x[2*M];for(M=D;M<2*D;M++)x[M]=0;return new u(x,0)};function Z(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function Q(M,D){this.g=M,this.h=D}function oe(M,D){if(V(D))throw Error("division by zero");if(V(M))return new Q(T,T);if(k(M))return D=oe(P(M),D),new Q(P(D.g),P(D.h));if(k(D))return D=oe(M,P(D)),new Q(P(D.g),D.h);if(M.g.length>30){if(k(M)||k(D))throw Error("slowDivide_ only works with positive integers.");for(var x=E,O=D;O.l(M)<=0;)x=le(x),O=le(O);var U=re(x,1),B=re(O,1);for(O=re(O,2),x=re(x,2);!V(O);){var N=B.add(O);N.l(M)<=0&&(U=U.add(x),B=N),O=re(O,1),x=re(x,1)}return D=K(M,U.j(D)),new Q(U,D)}for(U=T;M.l(D)>=0;){for(x=Math.max(1,Math.floor(M.m()/D.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=h(x),N=B.j(D);k(N)||N.l(M)>0;)x-=O,B=h(x),N=B.j(D);V(B)&&(B=E),U=U.add(B),M=K(M,N)}return new Q(U,M)}n.B=function(M){return oe(this,M).h},n.and=function(M){const D=Math.max(this.g.length,M.g.length),x=[];for(let O=0;O<D;O++)x[O]=this.i(O)&M.i(O);return new u(x,this.h&M.h)},n.or=function(M){const D=Math.max(this.g.length,M.g.length),x=[];for(let O=0;O<D;O++)x[O]=this.i(O)|M.i(O);return new u(x,this.h|M.h)},n.xor=function(M){const D=Math.max(this.g.length,M.g.length),x=[];for(let O=0;O<D;O++)x[O]=this.i(O)^M.i(O);return new u(x,this.h^M.h)};function le(M){const D=M.g.length+1,x=[];for(let O=0;O<D;O++)x[O]=M.i(O)<<1|M.i(O-1)>>>31;return new u(x,M.h)}function re(M,D){const x=D>>5;D%=32;const O=M.g.length-x,U=[];for(let B=0;B<O;B++)U[B]=D>0?M.i(B+x)>>>D|M.i(B+x+1)<<32-D:M.i(B+x);return new u(U,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,pA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,_r=u}).apply(typeof Z0<"u"?Z0:typeof self<"u"?self:typeof window<"u"?window:{});var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mA,au,gA,Vf,Em,yA,_A,vA;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof vf=="object"&&vf];for(var S=0;S<g.length;++S){var C=g[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,S){if(S)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var G=g[b];if(!(G in C))break e;C=C[G]}g=g[g.length-1],b=C[g],S=S(b),S!=b&&S!=null&&e(C,g,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(S){var C=[],b;for(b in S)Object.prototype.hasOwnProperty.call(S,b)&&C.push([b,S[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function p(g,S,C){return g.call.apply(g.bind,arguments)}function h(g,S,C){return h=p,h.apply(null,arguments)}function _(g,S){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function T(g,S){function C(){}C.prototype=S.prototype,g.Z=S.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,G,X){for(var ue=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ue[xe-2]=arguments[xe];return S.prototype[G].apply(b,ue)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const S=g.length;if(S>0){const C=Array(S);for(let b=0;b<S;b++)C[b]=g[b];return C}return[]}function V(g,S){for(let b=1;b<arguments.length;b++){const G=arguments[b];var C=typeof G;if(C=C!="object"?C:G?Array.isArray(G)?"array":C:"null",C=="array"||C=="object"&&typeof G.length=="number"){C=g.length||0;const X=G.length||0;g.length=C+X;for(let ue=0;ue<X;ue++)g[C+ue]=G[ue]}else g.push(G)}}class k{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(g){u.setTimeout(()=>{throw g},0)}function K(){var g=M;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class Z{constructor(){this.h=this.g=null}add(S,C){const b=Q.get();b.set(S,C),this.h?this.h.next=b:this.g=b,this.h=b}}var Q=new k(()=>new oe,g=>g.reset());class oe{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let le,re=!1,M=new Z,D=()=>{const g=Promise.resolve(void 0);le=()=>{g.then(x)}};function x(){for(var g;g=K();){try{g.h.call(g.g)}catch(C){P(C)}var S=Q;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}re=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,S),u.removeEventListener("test",C,S)}catch{}return g})();function N(g){return/^[\s\xa0]*$/.test(g)}function Te(g,S){U.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}T(Te,U),Te.prototype.init=function(g,S){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(C=="mouseover"?S=g.fromElement:C=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),J=0;function ae(g,S,C,b,G){this.listener=g,this.proxy=null,this.src=S,this.type=C,this.capture=!!b,this.ha=G,this.key=++J,this.da=this.fa=!1}function Ee(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ke(g,S,C){for(const b in g)S.call(C,g[b],b,g)}function Ze(g,S){for(const C in g)S.call(void 0,g[C],C,g)}function q(g){const S={};for(const C in g)S[C]=g[C];return S}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,S){let C,b;for(let G=1;G<arguments.length;G++){b=arguments[G];for(C in b)g[C]=b[C];for(let X=0;X<ie.length;X++)C=ie[X],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,S,C,b,G){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const ue=Pe(g,S,b,G);return ue>-1?(S=g[ue],C||(S.fa=!1)):(S=new ae(S,this.src,X,!!b,G),S.fa=C,g.push(S)),S};function Ie(g,S){const C=S.type;if(C in g.g){var b=g.g[C],G=Array.prototype.indexOf.call(b,S,void 0),X;(X=G>=0)&&Array.prototype.splice.call(b,G,1),X&&(Ee(S),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Pe(g,S,C,b){for(let G=0;G<g.length;++G){const X=g[G];if(!X.da&&X.listener==S&&X.capture==!!C&&X.ha==b)return G}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ot={};function dt(g,S,C,b,G){if(Array.isArray(S)){for(let X=0;X<S.length;X++)dt(g,S[X],C,b,G);return null}return C=Za(C),g&&g[De]?g.J(S,C,f(b)?!!b.capture:!1,G):Mr(g,S,C,!1,b,G)}function Mr(g,S,C,b,G,X){if(!S)throw Error("Invalid event type");const ue=f(G)?!!G.capture:!!G;let xe=Dr(g);if(xe||(g[Ge]=xe=new me(g)),C=xe.add(S,C,b,ue,X),C.proxy)return C;if(b=Io(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)B||(G=ue),G===void 0&&(G=!1),g.addEventListener(S.toString(),b,G);else if(g.attachEvent)g.attachEvent(yi(S.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Io(){function g(C){return S.call(g.src,g.listener,C)}const S=Xa;return g}function wo(g,S,C,b,G){if(Array.isArray(S))for(var X=0;X<S.length;X++)wo(g,S[X],C,b,G);else b=f(b)?!!b.capture:!!b,C=Za(C),g&&g[De]?(g=g.i,X=String(S).toString(),X in g.g&&(S=g.g[X],C=Pe(S,C,b,G),C>-1&&(Ee(S[C]),Array.prototype.splice.call(S,C,1),S.length==0&&(delete g.g[X],g.h--)))):g&&(g=Dr(g))&&(S=g.g[S.toString()],g=-1,S&&(g=Pe(S,C,b,G)),(C=g>-1?S[g]:null)&&Ro(C))}function Ro(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[De])Ie(S.i,g);else{var C=g.type,b=g.proxy;S.removeEventListener?S.removeEventListener(C,b,g.capture):S.detachEvent?S.detachEvent(yi(C),b):S.addListener&&S.removeListener&&S.removeListener(b),(C=Dr(S))?(Ie(C,g),C.h==0&&(C.src=null,S[Ge]=null)):Ee(g)}}}function yi(g){return g in Ot?Ot[g]:Ot[g]="on"+g}function Xa(g,S){if(g.da)g=!0;else{S=new Te(S,this);const C=g.listener,b=g.ha||g.src;g.fa&&Ro(g),g=C.call(b,S)}return g}function Dr(g){return g=g[Ge],g instanceof me?g:null}var Wa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Za(g){return typeof g=="function"?g:(g[Wa]||(g[Wa]=function(S){return g.handleEvent(S)}),g[Wa])}function wt(){O.call(this),this.i=new me(this),this.M=this,this.G=null}T(wt,O),wt.prototype[De]=!0,wt.prototype.removeEventListener=function(g,S,C,b){wo(this,g,S,C,b)};function Ft(g,S){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=S.type||S,typeof S=="string")S=new U(S,g);else if(S instanceof U)S.target=S.target||g;else{var G=S;S=new U(b,g),ce(S,G)}G=!0;let X,ue;if(C)for(ue=C.length-1;ue>=0;ue--)X=S.g=C[ue],G=Ns(X,b,!0,S)&&G;if(X=S.g=g,G=Ns(X,b,!0,S)&&G,G=Ns(X,b,!1,S)&&G,C)for(ue=0;ue<C.length;ue++)X=S.g=C[ue],G=Ns(X,b,!1,S)&&G}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const C=g.g[S];for(let b=0;b<C.length;b++)Ee(C[b]);delete g.g[S],g.h--}}this.G=null},wt.prototype.J=function(g,S,C,b){return this.i.add(String(g),S,!1,C,b)},wt.prototype.K=function(g,S,C,b){return this.i.add(String(g),S,!0,C,b)};function Ns(g,S,C,b){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let X=0;X<S.length;++X){const ue=S[X];if(ue&&!ue.da&&ue.capture==C){const xe=ue.listener,Et=ue.ha||ue.src;ue.fa&&Ie(g.i,ue),G=xe.call(Et,b)!==!1&&G}}return G&&!b.defaultPrevented}function Qd(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function Gu(g){g.g=Qd(()=>{g.g=null,g.i&&(g.i=!1,Gu(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class un extends O{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Gu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(g){O.call(this),this.h=g,this.g={}}T(Pr,O);var ja=[];function el(g){Ke(g.g,function(S,C){this.g.hasOwnProperty(C)&&Ro(S)},g),g.g={}}Pr.prototype.N=function(){Pr.Z.N.call(this),el(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=u.JSON.stringify,Xd=u.JSON.parse,zu=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Ku(){}function Yu(){}var jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){U.call(this,"d")}T(Jt,U);function Ln(){U.call(this,"c")}T(Ln,U);var Tt={},Ju=null;function bo(){return Ju=Ju||new wt}Tt.Ia="serverreachability";function $u(g){U.call(this,Tt.Ia,g)}T($u,U);function _i(g){const S=bo();Ft(S,new $u(S))}Tt.STAT_EVENT="statevent";function Vr(g,S){U.call(this,Tt.STAT_EVENT,g),this.stat=S}T(Vr,U);function Rt(g){const S=bo();Ft(S,new Vr(S,g))}Tt.Ja="timingevent";function vi(g,S){U.call(this,Tt.Ja,g),this.size=S}T(vi,U);function Ti(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function Wd(g,S,C,b,G,X){g.info(function(){if(g.g)if(X){var ue="",xe=X.split("&");for(let Qe=0;Qe<xe.length;Qe++){var Et=xe[Qe].split("=");if(Et.length>1){const ht=Et[0];Et=Et[1];const qn=ht.split("_");ue=qn.length>=2&&qn[1]=="type"?ue+(ht+"="+Et+"&"):ue+(ht+"=redacted&")}}}else ue=null;else ue=X;return"XMLHTTP REQ ("+b+") [attempt "+G+"]: "+S+`
`+C+`
`+ue})}function Qu(g,S,C,b,G,X,ue){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+G+"]: "+S+`
`+C+`
`+X+" "+ue})}function Ei(g,S,C,b){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+Zd(g,C)+(b?" "+b:"")})}function kr(g,S){g.info(function(){return"TIMEOUT: "+S})}ei.prototype.info=function(){};function Zd(g,S){if(!g.g)return S;if(!S)return null;try{const X=JSON.parse(S);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var C=X[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var G=b[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<b.length;ue++)b[ue]=""}}}}return xs(X)}catch{return S}}var Lr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function Ur(){}T(Ur,Ku),Ur.prototype.g=function(){return new XMLHttpRequest},nl=new Ur;function $i(g){return encodeURIComponent(String(g))}function Xu(g){var S=1;g=g.split(":");const C=[];for(;S>0&&g.length;)C.push(g.shift()),S--;return g.length&&C.push(g.join(":")),C}function ti(g,S,C,b){this.j=g,this.i=S,this.l=C,this.S=b||1,this.V=new Pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var bt={},Ht={};function Si(g,S,C){g.M=1,g.A=Or(xt(S)),g.u=C,g.R=!0,No(g,null)}function No(g,S){g.F=Date.now(),Ai(g),g.B=xt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Po(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ni,g.g=fc(g.j,C?S:null,!g.u),g.P>0&&(g.O=new un(h(g.Y,g,g.g),g.P)),S=g.V,C=g.g,b=g.ba;var G="readystatechange";Array.isArray(G)||(G&&(ja[0]=G.toString()),G=ja);for(let X=0;X<G.length;X++){const ue=dt(C,G[X],b||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),_i(),Wd(g.i,g.v,g.B,g.l,g.S,g.u)}ti.prototype.ba=function(g){g=g.target;const S=this.O;S&&ri(g)==3?S.j():this.Y(g)},ti.prototype.Y=function(g){try{if(g==this.g)e:{const xe=ri(this.g),Et=this.g.ya(),Qe=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||xe!=4||Et==7||(Et==8||Qe<=0?_i(3):_i(2)),Ci(this);var S=this.g.ca();this.X=S;var C=jd(this);if(this.o=S==200,Qu(this.i,this.v,this.B,this.l,this.S,xe,S),this.o){if(this.U&&!this.L){t:{if(this.g){var b,G=this.g;if((b=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(b)){var X=b;break t}}X=null}if(g=X)Ei(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,g);else{this.o=!1,this.m=3,Rt(12),wn(this),Un(this);break e}}if(this.R){g=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=Zu(this,C),ht==Ht){xe==4&&(this.m=4,Rt(14),g=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==bt){this.m=4,Rt(15),Ei(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ei(this.i,this.l,ht,null),Ii(this,ht);if(Wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||C.length!=0||this.h.h||(this.m=1,Rt(16),g=!1),this.o=this.o&&g,!g)Ei(this.i,this.l,C,"[Invalid Chunked Response]"),wn(this),Un(this);else if(C.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),yl(ue),ue.P=!0,Rt(11))}}else Ei(this.i,this.l,C,null),Ii(this,C);xe==4&&wn(this),this.o&&!this.K&&(xe==4?ac(this.j,this):(this.o=!1,Ai(this)))}else Xi(this.g),S==400&&C.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),wn(this),Un(this)}}}catch{}finally{}};function jd(g){if(!Wu(g))return g.g.la();const S=$t(g.g);if(S==="")return"";let C="";const b=S.length,G=ri(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return wn(g),Un(g),"";g.h.i=new u.TextDecoder}for(let X=0;X<b;X++)g.h.h=!0,C+=g.h.i.decode(S[X],{stream:!(G&&X==b-1)});return S.length=0,g.h.g+=C,g.C=0,g.h.g}function Wu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Zu(g,S){var C=g.C,b=S.indexOf(`
`,C);return b==-1?Ht:(C=Number(S.substring(C,b)),isNaN(C)?bt:(b+=1,b+C>S.length?Ht:(S=S.slice(b,b+C),g.C=b+C,S)))}ti.prototype.cancel=function(){this.K=!0,wn(this)};function Ai(g){g.T=Date.now()+g.H,xo(g,g.H)}function xo(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ti(h(g.aa,g),S)}function Ci(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ti.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(kr(this.i,this.B),this.M!=2&&(_i(),Rt(17)),wn(this),this.m=2,Un(this)):xo(this,this.T-g)};function Un(g){g.j.I==0||g.K||ac(g.j,g)}function wn(g){Ci(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,el(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function Ii(g,S){try{var C=g.j;if(C.I!=0&&(C.g==g||Ri(C.h,g))){if(!g.L&&Ri(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var G=b;if(G[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Oo(C),Os(C);else break e;Kr(C),Rt(18)}}else C.xa=G[1],0<C.xa-C.K&&G[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ti(h(C.Va,C),6e3));wi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Pi(C,11)}else if((g.L||C.g==g)&&Oo(C),!N(S))for(G=C.Ba.g.parse(S),S=0;S<G.length;S++){let Qe=G[S];const ht=Qe[0];if(!(ht<=C.K))if(C.K=ht,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const qn=Qe[3];qn!=null&&(C.ka=qn,C.j.info("VER="+C.ka));const Vi=Qe[4];Vi!=null&&(C.za=Vi,C.j.info("SVER="+C.za));const oi=Qe[5];oi!=null&&typeof oi=="number"&&oi>0&&(b=1.5*oi,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ai=g.g;if(ai){const Yr=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yr){var X=b.h;X.g||Yr.indexOf("spdy")==-1&&Yr.indexOf("quic")==-1&&Yr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(rl(X,X.h),X.h=null))}if(b.G){const Fo=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(b.wa=Fo,je(b.J,b.G,Fo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ue=g;if(b.na=cc(b,b.L?b.ba:null,b.W),ue.L){ol(b.h,ue);var xe=ue,Et=b.O;Et&&(xe.H=Et),xe.D&&(Ci(xe),Ai(xe)),b.g=ue}else rc(b);C.i.length>0&&Di(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Pi(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Pi(C,7):ml(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}_i(4)}catch{}}var Nt=class{constructor(g,S){this.g=g,this.map=S}};function il(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function wi(g){return g.h?1:g.g?g.g.size:0}function Ri(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function rl(g,S){g.g?g.g.add(S):g.h=S}function ol(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}il.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function al(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const C of g.g.values())S=S.concat(C.G);return S}return w(g.i)}var ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mo(g,S){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let G,X=null;b>=0?(G=g[C].substring(0,b),X=g[C].substring(b+1)):G=g[C],S(G,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Rn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Rn?(this.l=g.l,Gt(this,g.j),this.o=g.o,this.g=g.g,Ms(this,g.u),this.h=g.h,ll(this,ic(g.i)),this.m=g.m):g&&(S=String(g).match(ju))?(this.l=!1,Gt(this,S[1]||"",!0),this.o=bi(S[2]||""),this.g=bi(S[3]||"",!0),Ms(this,S[4]),this.h=bi(S[5]||"",!0),ll(this,S[6]||"",!0),this.m=bi(S[7]||"")):(this.l=!1,this.i=new Ps(null,this.l))}Rn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(Fr(S,Do,!0),":");var C=this.g;return(C||S=="file")&&(g.push("//"),(S=this.o)&&g.push(Fr(S,Do,!0),"@"),g.push($i(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Fr(C,C.charAt(0)=="/"?ul:ec,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Fr(C,tc)),g.join("")},Rn.prototype.resolve=function(g){const S=xt(this);let C=!!g.j;C?Gt(S,g.j):C=!!g.o,C?S.o=g.o:C=!!g.g,C?S.g=g.g:C=g.u!=null;var b=g.h;if(C)Ms(S,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var G=S.h.lastIndexOf("/");G!=-1&&(b=S.h.slice(0,G+1)+b)}if(G=b,G==".."||G==".")b="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){b=G.lastIndexOf("/",0)==0,G=G.split("/");const X=[];for(let ue=0;ue<G.length;){const xe=G[ue++];xe=="."?b&&ue==G.length&&X.push(""):xe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&ue==G.length&&X.push("")):(X.push(xe),b=!0)}b=X.join("/")}else b=G}return C?S.h=b:C=g.i.toString()!=="",C?ll(S,ic(g.i)):C=!!g.m,C&&(S.m=g.m),S};function xt(g){return new Rn(g)}function Gt(g,S,C){g.j=C?bi(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Ms(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function ll(g,S,C){S instanceof Ps?(g.i=S,Vo(g.i,g.l)):(C||(S=Fr(S,Ds)),g.i=new Ps(S,g.l))}function je(g,S,C){g.i.set(S,C)}function Or(g){return je(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function bi(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Fr(g,S,C){return typeof g=="string"?(g=encodeURI(g).replace(S,mn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function mn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Do=/[#\/\?@]/g,ec=/[#\?:]/g,ul=/[#\?]/g,Ds=/[#\?@]/g,tc=/#/g;function Ps(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function gn(g){g.g||(g.g=new Map,g.h=0,g.i&&Mo(g.i,function(S,C){g.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}n=Ps.prototype,n.add=function(g,S){gn(this),this.i=null,g=Vs(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(S),this.h+=1,this};function nc(g,S){gn(g),S=Vs(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function cl(g,S){return gn(g),S=Vs(g,S),g.g.has(S)}n.forEach=function(g,S){gn(this),this.g.forEach(function(C,b){C.forEach(function(G){g.call(S,G,b,this)},this)},this)};function fl(g,S){gn(g);let C=[];if(typeof S=="string")cl(g,S)&&(C=C.concat(g.g.get(Vs(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)C=C.concat(g[S]);return C}n.set=function(g,S){return gn(this),this.i=null,g=Vs(this,g),cl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=fl(this,g),g.length>0?String(g[0]):S):S};function Po(g,S,C){nc(g,S),C.length>0&&(g.i=null,g.g.set(Vs(g,S),w(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let b=0;b<S.length;b++){var C=S[b];const G=$i(C);C=fl(this,C);for(let X=0;X<C.length;X++){let ue=G;C[X]!==""&&(ue+="="+$i(C[X])),g.push(ue)}}return this.i=g.join("&")};function ic(g){const S=new Ps;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function Vs(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function Vo(g,S){S&&!g.j&&(gn(g),g.i=null,g.g.forEach(function(C,b){const G=b.toLowerCase();b!=G&&(nc(this,b),Po(this,G,C))},g)),g.j=S}function ii(g,S){const C=new ei;if(u.Image){const b=new Image;b.onload=_(On,C,"TestLoadImage: loaded",!0,S,b),b.onerror=_(On,C,"TestLoadImage: error",!1,S,b),b.onabort=_(On,C,"TestLoadImage: abort",!1,S,b),b.ontimeout=_(On,C,"TestLoadImage: timeout",!1,S,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else S(!1)}function dl(g,S){const C=new ei,b=new AbortController,G=setTimeout(()=>{b.abort(),On(C,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:b.signal}).then(X=>{clearTimeout(G),X.ok?On(C,"TestPingServer: ok",!0,S):On(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),On(C,"TestPingServer: error",!1,S)})}function On(g,S,C,b,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),b(C)}catch{}}function ks(){this.g=new zu}function Ni(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Ni,Ku),Ni.prototype.g=function(){return new qr(this.i,this.h)};function qr(g,S){wt.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(qr,wt),n=qr.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,si(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ko(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ko(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?Ls(this):si(this),this.readyState==3&&ko(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Ls(this))},n.Na=function(g){this.g&&(this.response=g,Ls(this))},n.ga=function(){this.g&&Ls(this)};function Ls(g){g.readyState=4,g.l=null,g.j=null,g.B=null,si(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=S.next();return g.join(`\r
`)};function si(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Fn(g){let S="";return Ke(g,function(C,b){S+=b,S+=":",S+=C,S+=`\r
`}),S}function Br(g,S,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Fn(C),typeof g=="string"?C!=null&&$i(C):je(g,S,C))}function nt(g){wt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,wt);var xi=/^https?$/i,hl=["POST","PUT"];n=nt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(X){Hr(this,X);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var G in b)C.set(G,b[G]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())C.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),G=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(hl,S,void 0)>=0)||b||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of C)this.g.setRequestHeader(X,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){Hr(this,X)}};function Hr(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,pl(g),Qi(g)}function pl(g){g.A||(g.A=!0,Ft(g,"complete"),Ft(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Ft(this,"complete"),Ft(this,"abort"),Qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Gr(this):this.Xa())},n.Xa=function(){Gr(this)};function Gr(g){if(g.h&&typeof a<"u"){if(g.v&&ri(g)==4)setTimeout(g.Ca.bind(g),0);else if(Ft(g,"readystatechange"),ri(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var b;if(b=X===0){let ue=String(g.D).match(ju)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),b=!xi.test(ue?ue.toLowerCase():"")}C=b}if(C)Ft(g,"complete"),Ft(g,"success");else{g.o=6;try{var G=ri(g)>2?g.g.statusText:""}catch{G=""}g.l=G+" ["+g.ca()+"]",pl(g)}}finally{Qi(g)}}}}function Qi(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,S||Ft(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ri(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),Xd(S)}};function $t(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Xi(g){const S={};g=(g.g&&ri(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(N(g[b]))continue;var C=Xu(g[b]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=S[G]||[];S[G]=X,X.push(C)}Ze(S,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(g,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||S}function Us(g){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,g),this.Za=Mi("retryDelaySeedMs",1e4,g),this.Ta=Mi("forwardChannelMaxRetries",2,g),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new il(g&&g.concurrentRequestLimit),this.Ba=new ks,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Us.prototype,n.ka=8,n.I=1,n.connect=function(g,S,C,b){Rt(0),this.W=g,this.H=S||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=cc(this,null,this.W),Di(this)};function ml(g){if(Lo(g),g.I==3){var S=g.V++,C=xt(g.J);if(je(C,"SID",g.M),je(C,"RID",S),je(C,"TYPE","terminate"),zr(g,C),S=new ti(g,g.j,S),S.M=2,S.A=Or(xt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=S.A,C=!0),C||(S.g=fc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ai(S)}uc(g)}function Os(g){g.g&&(yl(g),g.g.cancel(),g.g=null)}function Lo(g){Os(g),g.v&&(u.clearTimeout(g.v),g.v=null),Oo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Di(g){if(!sl(g.h)&&!g.m){g.m=!0;var S=g.Ea;le||D(),re||(le(),re=!0),M.add(S,g),g.D=0}}function Uo(g,S){return wi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ti(h(g.Ea,g,S),lc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const G=new ti(this,this.j,g);let X=this.o;if(this.U&&(X?(X=q(X),ce(X,this.U)):X=this.U),this.u!==null||this.R||(G.J=X,X=null),this.S)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,S>4096){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=sc(this,G,S),C=xt(this.J),je(C,"RID",g),je(C,"CVER",22),this.G&&je(C,"X-HTTP-Session-Id",this.G),zr(this,C),X&&(this.R?S="headers="+$i(Fn(X))+"&"+S:this.u&&Br(C,this.u,X)),rl(this.h,G),this.Ra&&je(C,"TYPE","init"),this.S?(je(C,"$req",S),je(C,"SID","null"),G.U=!0,Si(G,C,null)):Si(G,C,S),this.I=2}}else this.I==3&&(g?gl(this,g):this.i.length==0||sl(this.h)||gl(this))};function gl(g,S){var C;S?C=S.l:C=g.V++;const b=xt(g.J);je(b,"SID",g.M),je(b,"RID",C),je(b,"AID",g.K),zr(g,b),g.u&&g.o&&Br(b,g.u,g.o),C=new ti(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),S&&(g.i=S.G.concat(g.i)),S=sc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),rl(g.h,C),Si(C,b,S)}function zr(g,S){g.H&&Ke(g.H,function(C,b){je(S,b,C)}),g.l&&Ke({},function(C,b){je(S,b,C)})}function sc(g,S,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var G=g.i;let xe=-1;for(;;){const Et=["count="+C];xe==-1?C>0?(xe=G[0].g,Et.push("ofs="+xe)):xe=0:Et.push("ofs="+xe);let Qe=!0;for(let ht=0;ht<C;ht++){var X=G[ht].g;const qn=G[ht].map;if(X-=xe,X<0)xe=Math.max(0,G[ht].g-100),Qe=!1;else try{X="req"+X+"_"||"";try{var ue=qn instanceof Map?qn:Object.entries(qn);for(const[Vi,oi]of ue){let ai=oi;f(oi)&&(ai=xs(oi)),Et.push(X+Vi+"="+encodeURIComponent(ai))}}catch(Vi){throw Et.push(X+"type="+encodeURIComponent("_badmap")),Vi}}catch{b&&b(qn)}}if(Qe){ue=Et.join("&");break e}}ue=void 0}return g=g.i.splice(0,C),S.G=g,ue}function rc(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;le||D(),re||(le(),re=!0),M.add(S,g),g.A=0}}function Kr(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ti(h(g.Da,g),lc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,oc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ti(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Os(this),oc(this))};function yl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function oc(g){g.g=new ti(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=xt(g.na);je(S,"RID","rpc"),je(S,"SID",g.M),je(S,"AID",g.K),je(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&je(S,"TO",g.ia),je(S,"TYPE","xmlhttp"),zr(g,S),g.u&&g.o&&Br(S,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Or(xt(S)),C.u=null,C.R=!0,No(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Os(this),Kr(this),Rt(19))};function Oo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function ac(g,S){var C=null;if(g.g==S){Oo(g),yl(g),g.g=null;var b=2}else if(Ri(g.h,S))C=S.G,ol(g.h,S),b=1;else return;if(g.I!=0){if(S.o)if(b==1){C=S.u?S.u.length:0,S=Date.now()-S.F;var G=g.D;b=bo(),Ft(b,new vi(b,C)),Di(g)}else rc(g);else if(G=S.m,G==3||G==0&&S.X>0||!(b==1&&Uo(g,S)||b==2&&Kr(g)))switch(C&&C.length>0&&(S=g.h,S.i=S.i.concat(C)),G){case 1:Pi(g,5);break;case 4:Pi(g,10);break;case 3:Pi(g,6);break;default:Pi(g,2)}}}function lc(g,S){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*S}function Pi(g,S){if(g.j.info("Error code "+S),S==2){var C=h(g.bb,g),b=g.Ua;const G=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gt(b,"https"),Or(b),G?ii(b.toString(),C):dl(b.toString(),C)}else Rt(2);g.I=0,g.l&&g.l.pa(S),uc(g),Lo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function uc(g){if(g.I=0,g.ja=[],g.l){const S=al(g.h);(S.length!=0||g.i.length!=0)&&(V(g.ja,S),V(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function cc(g,S,C){var b=C instanceof Rn?xt(C):new Rn(C);if(b.g!="")S&&(b.g=S+"."+b.g),Ms(b,b.u);else{var G=u.location;b=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const X=new Rn(null);b&&Gt(X,b),S&&(X.g=S),G&&Ms(X,G),C&&(X.h=C),b=X}return C=g.G,S=g.wa,C&&S&&je(b,C,S),je(b,"VER",g.ka),zr(g,b),b}function fc(g,S,C){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new nt(new Ni({ab:C})):new nt(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dc(){}n=dc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Fs(){}Fs.prototype.g=function(g,S){return new cn(g,S)};function cn(g,S){wt.call(this),this.g=new Us(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!N(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!N(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new Wi(this)}T(cn,wt),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){ml(this.g)},cn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=xs(g),g=C);S.i.push(new Nt(S.Ya++,g)),S.I==3&&Di(S)},cn.prototype.N=function(){this.g.l=null,delete this.j,ml(this.g),delete this.g,cn.Z.N.call(this)};function hc(g){Jt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const C in S){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}T(hc,Jt);function pc(){Ln.call(this),this.status=1}T(pc,Ln);function Wi(g){this.g=g}T(Wi,dc),Wi.prototype.ra=function(){Ft(this.g,"a")},Wi.prototype.qa=function(g){Ft(this.g,new hc(g))},Wi.prototype.pa=function(g){Ft(this.g,new pc)},Wi.prototype.oa=function(){Ft(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,vA=function(){return new Fs},_A=function(){return bo()},yA=Tt,Em={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lr.NO_ERROR=0,Lr.TIMEOUT=8,Lr.HTTP_ERROR=6,Vf=Lr,tl.COMPLETE="complete",gA=tl,Yu.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,au=Yu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,mA=nt}).apply(typeof vf<"u"?vf:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore",eT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new ig("@firebase/firestore");function ga(){return go.logLevel}function pe(n,...e){if(go.logLevel<=Fe.DEBUG){const t=e.map(og);go.debug(`Firestore (${Ba}): ${n}`,...t)}}function Ts(n,...e){if(go.logLevel<=Fe.ERROR){const t=e.map(og);go.error(`Firestore (${Ba}): ${n}`,...t)}}function Ma(n,...e){if(go.logLevel<=Fe.WARN){const t=e.map(og);go.warn(`Firestore (${Ba}): ${n}`,...t)}}function og(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,TA(n,i,t)}function TA(n,e,t){let i=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ts(i),new Error(i)}function We(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||TA(e,o,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class JN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $N{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gs,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new EA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class QN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new QN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=ZN(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function Sm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return sm(o)===sm(a)?qe(o,a):sm(o)?1:-1}return qe(n.length,e.length)}const jN=55296,ex=57343;function sm(n){const e=n.charCodeAt(0);return e>=jN&&e<=ex}function Da(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="__name__";class Fi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Fi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Fi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=Fi.isNumericId(e),o=Fi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Fi.extractNumericId(e).compare(Fi.extractNumericId(t)):Sm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}}class at extends Fi{construct(e,t,i){return new at(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const tx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Fi{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return tx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nT}static keyField(){return new en([nT])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(a(),o++)}if(a(),u)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(at.fromString(e))}static fromName(e){return new ve(at.fromString(e).popFirst(5))}static empty(){return new ve(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n,e,t){if(!t)throw new fe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nx(n,e,t,i){if(e===!0&&i===!0)throw new fe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iT(n){if(!ve.isDocumentKey(n))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sT(n){if(ve.isDocumentKey(n))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(n);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!AA(n))throw new fe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new fe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=-62135596800,oT=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*oT);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rT)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oT}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Ut("string",ct._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function ix(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new Tr(o,ve.empty(),e)}function sx(n){return new Tr(n.readTime,n.key,vu)}class Tr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Tr(Re.min(),ve.empty(),vu)}static max(){return new Tr(Re.max(),ve.empty(),vu)}}function rx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ax{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==ox)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let f=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++f,f===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function lx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ga(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ed.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function Sd(n){return n==null}function $f(n){return n===0&&1/n==-1/0}function ux(n){return typeof n=="number"&&Number.isInteger(n)&&!$f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="";function cx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aT(e)),e=fx(n.get(t),e);return aT(e)}function fx(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case CA:t+="";break;default:t+=a}}return t}function aT(n){return n+CA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??jt.RED,this.left=o??jt.EMPTY,this.right=a??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new jt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uT(this.data.getIterator())}getIteratorFrom(e){return new uT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class uT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Bt(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wA("Invalid base64 string: "+a):a}})(e);return new tn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const dx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=dx.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sr(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="server_timestamp",bA="__type__",NA="__previous_value__",xA="__local_write_time__";function ug(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[bA])==null?void 0:i.stringValue)===RA}function Ad(n){const e=n.mapValue.fields[NA];return ug(e)?Ad(e):e}function Tu(n){const e=Er(n.mapValue.fields[xA].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i,o,a,u,f,p,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_}}const Qf="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||Qf}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===Qf}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",px="__max__",Ef={mapValue:{}},DA="__vector__",Xf="value";function Ar(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ug(n)?4:gx(n)?9007199254740991:mx(n)?10:11:Ce(28295,{value:n})}function Ji(n,e){if(n===e)return!0;const t=Ar(n);if(t!==Ar(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tu(n).isEqual(Tu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Er(o.timestampValue),f=Er(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Sr(o.bytesValue).isEqual(Sr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Ct(o.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Ct(o.integerValue)===Ct(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Ct(o.doubleValue),f=Ct(a.doubleValue);return u===f?$f(u)===$f(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Da(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},f=a.mapValue.fields||{};if(lT(u)!==lT(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Ji(u[p],f[p])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Su(n,e){return(n.values||[]).find((t=>Ji(t,e)))!==void 0}function Pa(n,e){if(n===e)return 0;const t=Ar(n),i=Ar(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=Ct(a.integerValue||a.doubleValue),p=Ct(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return cT(n.timestampValue,e.timestampValue);case 4:return cT(Tu(n),Tu(e));case 5:return Sm(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=Sr(a),p=Sr(u);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),p=u.split("/");for(let h=0;h<f.length&&h<p.length;h++){const _=qe(f[h],p[h]);if(_!==0)return _}return qe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=qe(Ct(a.latitude),Ct(u.latitude));return f!==0?f:qe(Ct(a.longitude),Ct(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return fT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var E,w,V,k;const f=a.fields||{},p=u.fields||{},h=(E=f[Xf])==null?void 0:E.arrayValue,_=(w=p[Xf])==null?void 0:w.arrayValue,T=qe(((V=h==null?void 0:h.values)==null?void 0:V.length)||0,((k=_==null?void 0:_.values)==null?void 0:k.length)||0);return T!==0?T:fT(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Ef.mapValue&&u===Ef.mapValue)return 0;if(a===Ef.mapValue)return 1;if(u===Ef.mapValue)return-1;const f=a.fields||{},p=Object.keys(f),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const E=Sm(p[T],_[T]);if(E!==0)return E;const w=Pa(f[p[T]],h[_[T]]);if(w!==0)return w}return qe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function cT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Er(n),i=Er(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function fT(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Pa(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Va(n){return Am(n)}function Am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Er(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Sr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Am(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Am(t.fields[u])}`;return o+"}"})(n.mapValue):Ce(61005,{value:n})}function kf(n){switch(Ar(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ad(n);return e?16+kf(e):16;case 5:return 2*n.stringValue.length;case 6:return Sr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+kf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return wr(i.fields,((a,u)=>{o+=a.length+kf(u)})),o})(n.mapValue);default:throw Ce(13486,{value:n})}}function dT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cm(n){return!!n&&"integerValue"in n}function cg(n){return!!n&&"arrayValue"in n}function hT(n){return!!n&&"nullValue"in n}function pT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lf(n){return!!n&&"mapValue"in n}function mx(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MA])==null?void 0:i.stringValue)===DA}function hu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return wr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=hu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return{...n}}function gx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===px}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}u?i[f.lastSegment()]=hu(u):o.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Lf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){wr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new An(hu(this.value))}}function PA(n){const e=[];return wr(n.fields,((t,i)=>{const o=new en([t]);if(Lf(i)){const a=PA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,i,o,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),An.empty(),0)}static newFoundDocument(e,t,i,o){return new on(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new on(e,2,t,Re.min(),Re.min(),An.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Re.min(),Re.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.position=e,this.inclusive=t}}function mT(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),t.key):i=Pa(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function gT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t="asc"){this.field=e,this.dir=t}}function yx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{}class Lt extends VA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vx(e,t,i):t==="array-contains"?new Sx(e,i):t==="in"?new Ax(e,i):t==="not-in"?new Cx(e,i):t==="array-contains-any"?new Ix(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Tx(e,i):new Ex(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pa(t,this.value)):t!==null&&Ar(this.value)===Ar(t)&&this.matchesComparison(Pa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends VA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pi(e,t)}matches(e){return kA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kA(n){return n.op==="and"}function LA(n){return _x(n)&&kA(n)}function _x(n){for(const e of n.filters)if(e instanceof pi)return!1;return!0}function Im(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Va(n.value);if(LA(n))return n.filters.map((e=>Im(e))).join(",");{const e=n.filters.map((t=>Im(t))).join(",");return`${n.op}(${e})`}}function UA(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Ji(i.value,o.value)})(n,e):n instanceof pi?(function(i,o){return o instanceof pi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,f)=>a&&UA(u,o.filters[f])),!0):!1})(n,e):void Ce(19439)}function OA(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Va(t.value)}`})(n):n instanceof pi?(function(t){return t.op.toString()+" {"+t.getFilters().map(OA).join(" ,")+"}"})(n):"Filter"}class vx extends Lt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tx extends Lt{constructor(e,t){super(e,"in",t),this.keys=FA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ex extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=FA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class Sx extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cg(t)&&Su(t.arrayValue,this.value)}}class Ax extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Su(this.value.arrayValue,t)}}class Cx extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Su(this.value.arrayValue,t)}}class Ix extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Su(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t=null,i=[],o=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function yT(n,e=null,t=[],i=[],o=null,a=null,u=null){return new wx(n,e,t,i,o,a,u)}function fg(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Im(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Va(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Va(i))).join(",")),e.Te=t}return e.Te}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gT(n.startAt,e.startAt)&&gT(n.endAt,e.endAt)}function wm(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t=null,i=[],o=[],a=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rx(n,e,t,i,o,a,u,f){return new za(n,e,t,i,o,a,u,f)}function Cd(n){return new za(n)}function _T(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qA(n){return n.collectionGroup!==null}function pu(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Bt(en.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Au(a,i))})),t.has(en.keyField().canonicalString())||e.Ie.push(new Au(en.keyField(),i))}return e.Ie}function Bi(n){const e=Ne(n);return e.Ee||(e.Ee=bx(e,pu(n))),e.Ee}function bx(n,e){if(n.limitType==="F")return yT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Au(o.field,a)}));const t=n.endAt?new Wf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Wf(n.startAt.position,n.startAt.inclusive):null;return yT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Rm(n,e){const t=n.filters.concat([e]);return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zf(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Id(n,e){return dg(Bi(n),Bi(e))&&n.limitType===e.limitType}function BA(n){return`${fg(Bi(n))}|lt:${n.limitType}`}function ya(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>OA(o))).join(", ")}]`),Sd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Va(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Va(o))).join(",")),`Target(${i})`})(Bi(n))}; limitType=${n.limitType})`}function wd(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of pu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,p){const h=mT(u,f,p);return u.inclusive?h<=0:h<0})(i.startAt,pu(i),o)||i.endAt&&!(function(u,f,p){const h=mT(u,f,p);return u.inclusive?h>=0:h>0})(i.endAt,pu(i),o))})(n,e)}function Nx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HA(n){return(e,t)=>{let i=!1;for(const o of pu(n)){const a=xx(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function xx(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(a,u,f){const p=u.data.field(a),h=f.data.field(a);return p!==null&&h!==null?Pa(p,h):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return IA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new gt(ve.comparator);function Es(){return Mx}const GA=new gt(ve.comparator);function lu(...n){let e=GA;for(const t of n)e=e.insert(t.key,t);return e}function zA(n){let e=GA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fo(){return mu()}function KA(){return mu()}function mu(){return new To((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Dx=new gt(ve.comparator),Px=new Bt(ve.comparator);function Be(...n){let e=Px;for(const t of n)e=e.add(t);return e}const Vx=new Bt(qe);function kx(){return Vx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$f(e)?"-0":e}}function YA(n){return{integerValue:""+n}}function Lx(n,e){return ux(e)?YA(e):hg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this._=void 0}}function Ux(n,e,t){return n instanceof jf?(function(o,a){const u={fields:{[bA]:{stringValue:RA},[xA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&ug(a)&&(a=Ad(a)),a&&(u.fields[NA]=a),{mapValue:u}})(t,e):n instanceof ka?$A(n,e):n instanceof La?QA(n,e):(function(o,a){const u=JA(o,a),f=vT(u)+vT(o.Ae);return Cm(u)&&Cm(o.Ae)?YA(f):hg(o.serializer,f)})(n,e)}function Ox(n,e,t){return n instanceof ka?$A(n,e):n instanceof La?QA(n,e):t}function JA(n,e){return n instanceof ed?(function(i){return Cm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class jf extends Rd{}class ka extends Rd{constructor(e){super(),this.elements=e}}function $A(n,e){const t=XA(e);for(const i of n.elements)t.some((o=>Ji(o,i)))||t.push(i);return{arrayValue:{values:t}}}class La extends Rd{constructor(e){super(),this.elements=e}}function QA(n,e){let t=XA(e);for(const i of n.elements)t=t.filter((o=>!Ji(o,i)));return{arrayValue:{values:t}}}class ed extends Rd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vT(n){return Ct(n.integerValue||n.doubleValue)}function XA(n){return cg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.field=e,this.transform=t}}function Fx(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof ka&&o instanceof ka||i instanceof La&&o instanceof La?Da(i.elements,o.elements,Ji):i instanceof ed&&o instanceof ed?Ji(i.Ae,o.Ae):i instanceof jf&&o instanceof jf})(n.transform,e.transform)}class qx{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bd{}function ZA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pg(n.key,In.none()):new Nu(n.key,n.data,In.none());{const t=n.data,i=An.empty();let o=new Bt(en.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Rr(n.key,i,new kn(o.toArray()),In.none())}}function Bx(n,e,t){n instanceof Nu?(function(o,a,u){const f=o.value.clone(),p=ET(o.fieldTransforms,a,u.transformResults);f.setAll(p),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Rr?(function(o,a,u){if(!Uf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const f=ET(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(jA(o)),p.setAll(f),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function gu(n,e,t,i){return n instanceof Nu?(function(a,u,f,p){if(!Uf(a.precondition,u))return f;const h=a.value.clone(),_=ST(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Rr?(function(a,u,f,p){if(!Uf(a.precondition,u))return f;const h=ST(a.fieldTransforms,p,u),_=u.data;return _.setAll(jA(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,f){return Uf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function Hx(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=JA(i.transform,o||null);a!=null&&(t===null&&(t=An.empty()),t.set(i.field,a))}return t||null}function TT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Da(i,o,((a,u)=>Fx(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nu extends bd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rr extends bd{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function ET(n,e,t){const i=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,f=e.data.field(a.field);i.set(a.field,Ox(u,f,t[o]))}return i}function ST(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,Ux(a,u,e))}return i}class pg extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gx extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&Bx(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=gu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=gu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=KA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(o.key)?null:f;const p=ZA(u,f);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,((t,i)=>TT(t,i)))&&Da(this.baseMutations,e.baseMutations,((t,i)=>TT(t,i)))}}class mg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return Dx})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new mg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ze;function Jx(n){switch(n){case te.OK:return Ce(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function eC(n){if(n===void 0)return Ts("GRPC error has no .code"),te.UNKNOWN;switch(n){case kt.OK:return te.OK;case kt.CANCELLED:return te.CANCELLED;case kt.UNKNOWN:return te.UNKNOWN;case kt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case kt.INTERNAL:return te.INTERNAL;case kt.UNAVAILABLE:return te.UNAVAILABLE;case kt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case kt.NOT_FOUND:return te.NOT_FOUND;case kt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case kt.ABORTED:return te.ABORTED;case kt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case kt.DATA_LOSS:return te.DATA_LOSS;default:return Ce(39323,{code:n})}}(ze=kt||(kt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new _r([4294967295,4294967295],0);function AT(n){const e=$x().encode(n),t=new pA;return t.update(e),new Uint8Array(t.digest())}function CT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new _r([t,i],0),new _r([o,a],0)]}class gg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new uu(`Invalid padding: ${t}`);if(i<0)throw new uu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_r.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(_r.fromNumber(i)));return o.compare(Qx)===1&&(o=new _r([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=AT(e),[i,o]=CT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new gg(a,o,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=AT(e),[i,o]=CT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Nd(Re.min(),o,new gt(qe),Es(),Be())}}class xu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xu(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class tC{constructor(e,t){this.targetId=e,this.Ce=t}}class nC{constructor(e,t,i=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class IT{constructor(){this.ve=0,this.Fe=wT(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce(38017,{changeType:a})}})),new xu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=wT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Xx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Es(),this.Je=Sf(),this.He=Sf(),this.Ye=new gt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(wm(a))if(i===0){const u=new ve(a.path);this.et(t,u,on.newNoDocument(u,Re.min()))}else We(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,f;try{u=Sr(i).toUint8Array()}catch(p){if(p instanceof wA)return Ma("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new gg(u,o,a)}catch(p){return Ma(p instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&wm(f.target)){const p=new ve(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,on.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Be();this.He.forEach(((a,u)=>{let f=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Nd(e,t,this.Ye,this.je,i);return this.je=Es(),this.Je=Sf(),this.He=Sf(),this.Ye=new gt(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new IT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new IT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sf(){return new gt(ve.comparator)}function wT(){return new gt(ve.comparator)}const Wx={asc:"ASCENDING",desc:"DESCENDING"},Zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jx={and:"AND",or:"OR"};class e1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bm(n,e){return n.useProto3Json||Sd(e)?e:{value:e}}function td(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t1(n,e){return td(n,e.toTimestamp())}function Hi(n){return We(!!n,49232),Re.fromTimestamp((function(t){const i=Er(t);return new ct(i.seconds,i.nanos)})(n))}function yg(n,e){return Nm(n,e).canonicalString()}function Nm(n,e){const t=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sC(n){const e=at.fromString(n);return We(uC(e),10190,{key:e.toString()}),e}function xm(n,e){return yg(n.databaseId,e.path)}function rm(n,e){const t=sC(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(oC(t))}function rC(n,e){return yg(n.databaseId,e)}function n1(n){const e=sC(n);return e.length===4?at.emptyPath():oC(e)}function Mm(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oC(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function RT(n,e,t){return{name:xm(n,e),fields:t.value.mapValue.fields}}function i1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ce(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(We(_===void 0||typeof _=="string",58123),tn.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),tn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?te.UNKNOWN:eC(h.code);return new fe(_,h.message||"")})(u);t=new nC(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=rm(n,i.document.name),a=Hi(i.document.updateTime),u=i.document.createTime?Hi(i.document.createTime):Re.min(),f=new An({mapValue:{fields:i.document.fields}}),p=on.newFoundDocument(o,a,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Of(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=rm(n,i.document),a=i.readTime?Hi(i.readTime):Re.min(),u=on.newNoDocument(o,a),f=i.removedTargetIds||[];t=new Of([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=rm(n,i.document),a=i.removedTargetIds||[];t=new Of([],a,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new Yx(o,a),f=i.targetId;t=new tC(f,u)}}return t}function s1(n,e){let t;if(e instanceof Nu)t={update:RT(n,e.key,e.value)};else if(e instanceof pg)t={delete:xm(n,e.key)};else if(e instanceof Rr)t={update:RT(n,e.key,e.data),updateMask:h1(e.fieldMask)};else{if(!(e instanceof Gx))return Ce(16599,{Vt:e.type});t={verify:xm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof jf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ka)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof La)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ed)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ce(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:t1(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ce(27497)})(n,e.precondition)),t}function r1(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Hi(o.updateTime):Hi(a);return u.isEqual(Re.min())&&(u=Hi(a)),new qx(u,o.transformResults||[])})(t,e)))):[]}function o1(n,e){return{documents:[rC(n,e.path)]}}function a1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rC(n,o);const a=(function(h){if(h.length!==0)return lC(pi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(E){return{field:_a(E.field),direction:c1(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=bm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function l1(n){let e=n1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const E=aC(T);return E instanceof pi&&LA(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((E=>(function(V){return new Au(va(V.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let E;return E=typeof T=="object"?T.value:T,Sd(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(T){const E=!!T.before,w=T.values||[];return new Wf(w,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const E=!T.before,w=T.values||[];return new Wf(w,E)})(t.endAt)),Rx(e,o,u,a,f,"F",p,h)}function u1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=va(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=va(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=va(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=va(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(va(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pi.create(t.compositeFilter.filters.map((i=>aC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function c1(n){return Wx[n]}function f1(n){return Zx[n]}function d1(n){return jx[n]}function _a(n){return{fieldPath:n.canonicalString()}}function va(n){return en.fromServerFormat(n.fieldPath)}function lC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(pT(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NAN"}};if(hT(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pT(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NAN"}};if(hT(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(t.field),op:f1(t.op),value:t.value}}})(n):n instanceof pi?(function(t){const i=t.getFilters().map((o=>lC(o)));return i.length===1?i[0]:{compositeFilter:{op:d1(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function h1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t,i,o,a=Re.min(),u=Re.min(),f=tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.yt=e}}function m1(n){const e=l1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.Cn=new y1}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Tr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class y1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(at.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cC=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(cC,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ua(0)}static cr(){return new Ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="LruGarbageCollector",_1=1048576;function xT([n,e],[t,i]){const o=qe(n,t);return o===0?qe(e,i):o}class v1{constructor(e){this.Ir=e,this.buffer=new Bt(xT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();xT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(NT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ga(t)?pe(NT,"Ignoring IndexedDB error during garbage collection: ",t):await Ha(t)}await this.Vr(3e5)}))}}class E1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Ed.ce);const i=new v1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(bT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,f,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),ga()<=Fe.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${a} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function S1(n,e){return new E1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.changes=new To((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&gu(i.mutation,o,kn.empty(),ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=fo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=lu();return a.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,o){let a=Es();const u=mu(),f=(function(){return mu()})();return t.forEach(((p,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Rr)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),gu(_.mutation,h,_.mutation.getFieldMask(),ct.now())):u.set(h.key,kn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new C1(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=mu();let o=new gt(((u,f)=>u-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||kn.empty();_=f.applyToLocalView(h,_),i.set(p,_);const T=(o.get(f.batchId)||Be()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),h=p.key,_=p.value,T=KA();_.forEach((E=>{if(!a.has(E)){const w=ZA(t.get(E),i.get(E));w!==null&&T.set(E,w),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(fo());let f=vu,p=a;return u.next((h=>se.forEach(h,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{p=p.insert(_,E)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,Be()))).next((_=>({batchId:f,changes:zA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=lu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=lu();return this.indexManager.getCollectionParents(e,a).next((f=>se.forEach(f,(p=>{const h=(function(T,E){return new za(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((T,E)=>{u=u.insert(T,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,on.newInvalidDocument(_)))}));let f=lu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&gu(_.mutation,h,kn.empty(),ct.now()),wd(t,h)&&(f=f.insert(p,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Hi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:m1(o.bundledQuery),readTime:Hi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.overlays=new gt(ve.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=fo(),a=t.length+1,u=new ve(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new gt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=fo(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=fo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=o)););return se.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Kx(t,i));let a=this.qr.get(t);a===void 0&&(a=Be(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new Bt(Kt.$r),this.Ur=new Bt(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Kt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Kt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ve(new at([])),i=new Kt(t,e),o=new Kt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new at([])),i=new Kt(t,e),o=new Kt(t,e+1);let a=Be();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Kt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Kt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new zx(a,t,i,o);this.mutationQueue.push(u);for(const f of o)this.Zr=this.Zr.add(new Kt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?lg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Kt(t,0),o=new Kt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const f=this.Xr(u.Yr);a.push(f)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(qe);return t.forEach((o=>{const a=new Kt(o,0),u=new Kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const u=new Kt(new ve(a),0);let f=new Bt(qe);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(p.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const a=new Kt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Kt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.ri=e,this.docs=(function(){return new gt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=Es();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():on.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Es();const u=t.path,f=new ve(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||rx(sx(_),i)<=0||(o.has(_.key)||wd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ce(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new M1(this)}getSize(e){return se.resolve(this.size)}}class M1 extends A1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.persistence=e,this.si=new To((t=>fg(t)),dg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=Ua.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ua(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ed(0),this.li=!1,this.li=!0,this.hi=new b1,this.referenceDelegate=e(this),this.Pi=new D1(this),this.indexManager=new g1,this.remoteDocumentCache=(function(o){return new x1(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new p1(t),this.Ii=new w1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new N1(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new P1(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class P1 extends ax{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new vg(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=ve.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class nd{constructor(e,t){this.persistence=e,this.pi=new To((i=>cx(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=S1(this,t)}static mi(e,t){return new nd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kf(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Tg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bb()?8:lx(ln())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new V1;return this.Ss(e,t,u).next((f=>{if(a.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(ga()<=Fe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ya(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ga()<=Fe.DEBUG&&pe("QueryEngine","Query:",ya(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ga()<=Fe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ya(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):se.resolve())}ys(e,t){if(_T(t))return se.resolve(null);let i=Bi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Zf(t,null,"F"),i=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.Ds(t,f);return this.Cs(t,h,u,p.readTime)?this.ys(e,Zf(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,i,o){return _T(t)||o.isEqual(Re.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?se.resolve(null):(ga()<=Fe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ya(t)),this.vs(e,u,t,ix(o,vu)).next((f=>f)))}))}Ds(e,t){let i=new Bt(HA(e));return t.forEach(((o,a)=>{wd(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return ga()<=Fe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ya(t)),this.ps.getDocumentsMatchingQuery(e,t,Tr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",L1=3e8;class U1{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new gt(qe),this.xs=new To((a=>fg(a)),dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function O1(n,e,t,i){return new U1(n,e,t,i)}async function dC(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let p=Be();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){f.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function F1(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,h,_){const T=h.batch,E=T.keys();let w=se.resolve();return E.forEach((V=>{w=w.next((()=>_.getEntry(p,V))).next((k=>{const P=h.docVersions.get(V);We(P!==null,48541),k.version.compareTo(P)<0&&(T.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),_.addEntry(k)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Be();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(p=p.add(f.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function hC(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function q1(n,e){const t=Ne(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const E=o.get(T);if(!E)return;f.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,T))));let w=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(tn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),o=o.insert(T,w),(function(k,P,K){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=L1?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(E,w,_)&&f.push(t.Pi.updateTargetData(a,w))}));let p=Es(),h=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),f.push(B1(a,u,e.documentUpdates).next((_=>{p=_.ks,h=_.qs}))),!i.isEqual(Re.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(_)}return se.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function B1(n,e,t){let i=Be(),o=Be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Es();return t.forEach(((f,p)=>{const h=a.get(f);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):pe(Eg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function H1(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=lg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function G1(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new pr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Dm(n,e,t){const i=Ne(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ga(u))throw u;pe(Eg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function MT(n,e,t){const i=Ne(n);let o=Re.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const T=Ne(p),E=T.xs.get(_);return E!==void 0?se.resolve(T.Ms.get(E)):T.Pi.getTargetData(h,_)})(i,u,Bi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:Be()))).next((f=>(z1(i,Nx(e),f),{documents:f,Qs:a})))))}function z1(n,e,t){let i=n.Os.get(e)||Re.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class DT{constructor(){this.activeTargetIds=kx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K1{constructor(){this.Mo=new DT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new DT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="ConnectivityMonitor";class VT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(PT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(PT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function Pm(){return Af===null?Af=(function(){return 268435456+Math.round(2147483648*Math.random())})():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",J1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Qf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Pm(),f=this.zo(e,t.toUriEncodedString());pe(om,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:h}=new URL(f),_=Fa(h);return this.Jo(e,f,p,i,_).then((T=>(pe(om,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Ma(om,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=J1[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class X1 extends $1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Pm();return new Promise(((f,p)=>{const h=new mA;h.setWithCredentials(!0),h.listenOnce(gA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Vf.NO_ERROR:const T=h.getResponseJson();pe(sn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Vf.TIMEOUT:pe(sn,`RPC '${e}' ${u} timed out`),p(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Vf.HTTP_ERROR:const E=h.getStatus();if(pe(sn,`RPC '${e}' ${u} failed with status:`,E,"response text:",h.getResponseText()),E>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const V=w==null?void 0:w.error;if(V&&V.status&&V.message){const k=(function(K){const Z=K.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Z)>=0?Z:te.UNKNOWN})(V.status);p(new fe(k,V.message))}else p(new fe(te.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{pe(sn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);pe(sn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Pm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vA(),f=_A(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");pe(sn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=u.createWebChannel(_,p);this.I_(T);let E=!1,w=!1;const V=new Q1({Yo:P=>{w?pe(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(E||(pe(sn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),E=!0),pe(sn,`RPC '${e}' stream ${o} sending:`,P),T.send(P))},Zo:()=>T.close()}),k=(P,K,Z)=>{P.listen(K,(Q=>{try{Z(Q)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return k(T,au.EventType.OPEN,(()=>{w||(pe(sn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),k(T,au.EventType.CLOSE,(()=>{w||(w=!0,pe(sn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(T))})),k(T,au.EventType.ERROR,(P=>{w||(w=!0,Ma(sn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),V.a_(new fe(te.UNAVAILABLE,"The operation could not be completed")))})),k(T,au.EventType.MESSAGE,(P=>{var K;if(!w){const Z=P.data[0];We(!!Z,16349);const Q=Z,oe=(Q==null?void 0:Q.error)||((K=Q[0])==null?void 0:K.error);if(oe){pe(sn,`RPC '${e}' stream ${o} received error:`,oe);const le=oe.status;let re=(function(x){const O=kt[x];if(O!==void 0)return eC(O)})(le),M=oe.message;re===void 0&&(re=te.INTERNAL,M="Unknown error status: "+le+" with message "+oe.message),w=!0,V.a_(new fe(re,M)),T.close()}else pe(sn,`RPC '${e}' stream ${o} received:`,Z),V.u_(Z)}})),k(f,yA.STAT_EVENT,(P=>{P.stat===Em.PROXY?pe(sn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===Em.NOPROXY&&pe(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n){return new e1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="PersistentStream";class mC{constructor(e,t,i,o,a,u,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Ts(t.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new fe(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(kT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(kT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W1 extends mC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=i1(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Hi(u.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Mm(this.serializer),t.addTarget=(function(a,u){let f;const p=u.target;if(f=wm(p)?{documents:o1(a,p)}:{query:a1(a,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=iC(a,u.resumeToken);const h=bm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=td(a,u.snapshotVersion.toTimestamp());const h=bm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=u1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Mm(this.serializer),t.removeTarget=e,this.q_(t)}}class Z1 extends mC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=r1(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Mm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>s1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{}class eM extends j1{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Nm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(te.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Nm(t,i),o,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class nM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Eo(this)&&(pe(yo,"Restarting streams for network reachability change."),await(async function(p){const h=Ne(p);h.Ea.add(4),await Mu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Md(h)})(this))}))})),this.Ra=new tM(i,o)}}async function Md(n){if(Eo(n))for(const e of n.da)await e(!0)}async function Mu(n){for(const e of n.da)await e(!1)}function gC(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ig(t)?Cg(t):Ka(t).O_()&&Ag(t,e))}function Sg(n,e){const t=Ne(n),i=Ka(t);t.Ia.delete(e),i.O_()&&yC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Eo(t)&&t.Ra.set("Unknown"))}function Ag(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ka(n).Y_(e)}function yC(n,e){n.Va.Ue(e),Ka(n).Z_(e)}function Cg(n){n.Va=new Xx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ka(n).start(),n.Ra.ua()}function Ig(n){return Eo(n)&&!Ka(n).x_()&&n.Ia.size>0}function Eo(n){return Ne(n).Ea.size===0}function _C(n){n.Va=void 0}async function iM(n){n.Ra.set("Online")}async function sM(n){n.Ia.forEach(((e,t)=>{Ag(n,e)}))}async function rM(n,e){_C(n),Ig(n)?(n.Ra.ha(e),Cg(n)):n.Ra.set("Unknown")}async function oM(n,e,t){if(n.Ra.set("Online"),e instanceof nC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const f of a.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){pe(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await id(n,i)}else if(e instanceof Of?n.Va.Ze(e):e instanceof tC?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const i=await hC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.Va.Tt(u);return f.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(tn.EMPTY_BYTE_STRING,_.snapshotVersion)),yC(a,p);const T=new pr(_.target,p,h,_.sequenceNumber);Ag(a,T)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){pe(yo,"Failed to raise snapshot:",i),await id(n,i)}}async function id(n,e,t){if(!Ga(e))throw e;n.Ea.add(1),await Mu(n),n.Ra.set("Offline"),t||(t=()=>hC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Md(n)}))}function vC(n,e){return e().catch((t=>id(n,t,e)))}async function Dd(n){const e=Ne(n),t=Cr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lg;for(;aM(e);)try{const o=await H1(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,lM(e,o)}catch(o){await id(e,o)}TC(e)&&EC(e)}function aM(n){return Eo(n)&&n.Ta.length<10}function lM(n,e){n.Ta.push(e);const t=Cr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function TC(n){return Eo(n)&&!Cr(n).x_()&&n.Ta.length>0}function EC(n){Cr(n).start()}async function uM(n){Cr(n).ra()}async function cM(n){const e=Cr(n);for(const t of n.Ta)e.ea(t.mutations)}async function fM(n,e,t){const i=n.Ta.shift(),o=mg.from(i,e,t);await vC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Dd(n)}async function dM(n,e){e&&Cr(n).X_&&await(async function(i,o){if((function(u){return Jx(u)&&u!==te.ABORTED})(o.code)){const a=i.Ta.shift();Cr(i).B_(),await vC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Dd(i)}})(n,e),TC(n)&&EC(n)}async function LT(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),pe(yo,"RemoteStore received new credentials");const i=Eo(t);t.Ea.add(3),await Mu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Md(t)}async function hM(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Md(t)):e||(t.Ea.add(2),await Mu(t),t.Ra.set("Unknown"))}function Ka(n){return n.ma||(n.ma=(function(t,i,o){const a=Ne(t);return a.sa(),new W1(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:iM.bind(null,n),t_:sM.bind(null,n),r_:rM.bind(null,n),H_:oM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ig(n)?Cg(n):n.Ra.set("Unknown")):(await n.ma.stop(),_C(n))}))),n.ma}function Cr(n){return n.fa||(n.fa=(function(t,i,o){const a=Ne(t);return a.sa(),new Z1(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:uM.bind(null,n),r_:dM.bind(null,n),ta:cM.bind(null,n),na:fM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Dd(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,f=new wg(e,t,u,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(n,e){if(Ts("AsyncQueue",`${e}: ${n}`),Ga(n))return new fe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{static emptySet(e){return new Ca(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=lu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ca;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.ga=new gt(ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Oa{constructor(e,t,i,o,a,u,f,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Oa(e,t,Ca.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mM{constructor(){this.queries=OT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ne(t),a=o.queries;o.queries=OT(),a.forEach(((u,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function OT(){return new To((n=>BA(n)),Id)}async function bg(n,e){const t=Ne(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new pM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const f=Rg(u,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&xg(t)}async function Ng(n,e){const t=Ne(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function gM(n,e){const t=Ne(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const f of u.Sa)f.Fa(o)&&(i=!0);u.wa=o}}i&&xg(t)}function yM(n,e,t){const i=Ne(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function xg(n){n.Ca.forEach((e=>{e.next()}))}var Vm,FT;(FT=Vm||(Vm={})).Ma="default",FT.Cache="cache";class Mg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Oa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.key=e}}class AC{constructor(e){this.key=e}}class _M{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=HA(e),this.tu=new Ca(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new UT,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const E=o.get(_),w=wd(this.query,T)?T:null,V=!!E&&this.mutatedKeys.has(E.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;E&&w?E.data.isEqual(w.data)?V!==k&&(i.track({type:3,doc:w}),P=!0):this.su(E,w)||(i.track({type:2,doc:w}),P=!0,(p&&this.eu(w,p)>0||h&&this.eu(w,h)<0)&&(f=!0)):!E&&w?(i.track({type:0,doc:w}),P=!0):E&&!w&&(i.track({type:1,doc:E}),P=!0,(p||h)&&(f=!0)),P&&(w?(u=u.add(w),a=k?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,V){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:P})}};return k(w)-k(V)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,u.length!==0||h?{snapshot:new Oa(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new AC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new SC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dg="SyncEngine";class vM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class TM{constructor(e){this.key=e,this.hu=!1}}class EM{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new To((f=>BA(f)),Id),this.Iu=new Map,this.Eu=new Set,this.du=new gt(ve.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=Ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SM(n,e,t=!0){const i=NC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await CC(i,e,t,!0),o}async function AM(n,e){const t=NC(n);await CC(t,e,!0,!1)}async function CC(n,e,t,i){const o=await G1(n.localStore,Bi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await CM(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&gC(n.remoteStore,o),f}async function CM(n,e,t,i,o){n.pu=(T,E,w)=>(async function(k,P,K,Z){let Q=P.view.ru(K);Q.Cs&&(Q=await MT(k.localStore,P.query,!1).then((({documents:M})=>P.view.ru(M,Q))));const oe=Z&&Z.targetChanges.get(P.targetId),le=Z&&Z.targetMismatches.get(P.targetId)!=null,re=P.view.applyChanges(Q,k.isPrimaryClient,oe,le);return BT(k,P.targetId,re.au),re.snapshot})(n,T,E,w);const a=await MT(n.localStore,e,!0),u=new _M(e,a.Qs),f=u.ru(a.documents),p=xu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(f,n.isPrimaryClient,p);BT(n,t,h.au);const _=new vM(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function IM(n,e,t){const i=Ne(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Id(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Dm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Sg(i.remoteStore,o.targetId),km(i,o.targetId)})).catch(Ha)):(km(i,o.targetId),await Dm(i.localStore,o.targetId,!0))}async function wM(n,e){const t=Ne(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Sg(t.remoteStore,i.targetId))}async function RM(n,e,t){const i=VM(n);try{const o=await(function(u,f){const p=Ne(u),h=ct.now(),_=f.reduce(((w,V)=>w.add(V.key)),Be());let T,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=Es(),k=Be();return p.Ns.getEntries(w,_).next((P=>{V=P,V.forEach(((K,Z)=>{Z.isValidDocument()||(k=k.add(K))}))})).next((()=>p.localDocuments.getOverlayedDocuments(w,V))).next((P=>{T=P;const K=[];for(const Z of f){const Q=Hx(Z,T.get(Z.key).overlayedDocument);Q!=null&&K.push(new Rr(Z.key,Q,PA(Q.value.mapValue),In.exists(!0)))}return p.mutationQueue.addMutationBatch(w,h,K,f)})).next((P=>{E=P;const K=P.applyToLocalDocumentSet(T,k);return p.documentOverlayCache.saveOverlays(w,P.batchId,K)}))})).then((()=>({batchId:E.batchId,changes:zA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,p){let h=u.Vu[u.currentUser.toKey()];h||(h=new gt(qe)),h=h.insert(f,p),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Du(i,o.changes),await Dd(i.remoteStore)}catch(o){const a=Rg(o,"Failed to persist write");t.reject(a)}}async function IC(n,e){const t=Ne(n);try{const i=await q1(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?We(u.hu,14607):o.removedDocuments.size>0&&(We(u.hu,42227),u.hu=!1))})),await Du(t,i,e)}catch(i){await Ha(i)}}function qT(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const p=Ne(u);p.onlineState=f;let h=!1;p.queries.forEach(((_,T)=>{for(const E of T.Sa)E.va(f)&&(h=!0)})),h&&xg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function bM(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new gt(ve.comparator);u=u.insert(a,on.newNoDocument(a,Re.min()));const f=Be().add(a),p=new Nd(Re.min(),new Map,new gt(qe),u,f);await IC(i,p),i.du=i.du.remove(a),i.Au.delete(e),Pg(i)}else await Dm(i.localStore,e,!1).then((()=>km(i,e,t))).catch(Ha)}async function NM(n,e){const t=Ne(n),i=e.batch.batchId;try{const o=await F1(t.localStore,e);RC(t,i,null),wC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Du(t,o)}catch(o){await Ha(o)}}async function xM(n,e,t){const i=Ne(n);try{const o=await(function(u,f){const p=Ne(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,f).next((T=>(We(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(h,T)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);RC(i,e,t),wC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Du(i,o)}catch(o){await Ha(o)}}function wC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function RC(n,e,t){const i=Ne(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||bC(n,i)}))}function bC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pg(n))}function BT(n,e,t){for(const i of t)i instanceof SC?(n.Ru.addReference(i.key,e),MM(n,i)):i instanceof AC?(pe(Dg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||bC(n,i.key)):Ce(19791,{wu:i})}function MM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(pe(Dg,"New document in limbo: "+t),n.Eu.add(i),Pg(n))}function Pg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(at.fromString(e)),i=n.fu.next();n.Au.set(i,new TM(t)),n.du=n.du.insert(t,i),gC(n.remoteStore,new pr(Bi(Cd(t.path)),i,"TargetPurposeLimboResolution",Ed.ce))}}async function Du(n,e,t){const i=Ne(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(h){o.push(h);const T=Tg.As(p.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(p,h){const _=Ne(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(E=>se.forEach(E.Es,(w=>_.persistence.referenceDelegate.addReference(T,E.targetId,w))).next((()=>se.forEach(E.ds,(w=>_.persistence.referenceDelegate.removeReference(T,E.targetId,w)))))))))}catch(T){if(!Ga(T))throw T;pe(Eg,"Failed to update sequence numbers: "+T)}for(const T of h){const E=T.targetId;if(!T.fromCache){const w=_.Ms.get(E),V=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(V);_.Ms=_.Ms.insert(E,k)}}})(i.localStore,a))}async function DM(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){pe(Dg,"User change. New user:",e.toKey());const i=await dC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((p=>{p.reject(new fe(te.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Du(t,i.Ls)}}function PM(n,e){const t=Ne(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const f=t.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function NC(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bM.bind(null,e),e.Pu.H_=gM.bind(null,e.eventManager),e.Pu.yu=yM.bind(null,e.eventManager),e}function VM(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xM.bind(null,e),e}class sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return O1(this.persistence,new k1,e.initialUser,this.serializer)}Cu(e){return new fC(vg.mi,this.serializer)}Du(e){return new K1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sd.provider={build:()=>new sd};class kM extends sd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof nd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new T1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new fC((i=>nd.mi(i,t)),this.serializer)}}class Lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DM.bind(null,this.syncEngine),await hM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mM})()}createDatastore(e){const t=xd(e.databaseInfo.databaseId),i=(function(a){return new X1(a)})(e.databaseInfo);return(function(a,u,f,p){return new eM(a,u,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,f){return new nM(i,o,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>qT(this.syncEngine,t,0)),(function(){return VT.v()?new VT:new Y1})())}createSyncEngine(e,t){return(function(o,a,u,f,p,h,_){const T=new EM(o,a,u,f,p,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);pe(yo,"RemoteStore shutting down."),a.Ea.add(5),await Mu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Lm.provider={build:()=>new Lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="FirestoreClient";class LM{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(Ir,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(Ir,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Rg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function lm(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Ir,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await dC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function HT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await UM(n);pe(Ir,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>LT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>LT(e.remoteStore,o))),n._onlineComponents=e}async function UM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Ir,"Using user provided OfflineComponentProvider");try{await lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ma("Error using user provided cache. Falling back to memory cache: "+t),await lm(n,new sd)}}else pe(Ir,"Using default OfflineComponentProvider"),await lm(n,new kM(void 0));return n._offlineComponents}async function xC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Ir,"Using user provided OnlineComponentProvider"),await HT(n,n._uninitializedComponentsProvider._online)):(pe(Ir,"Using default OnlineComponentProvider"),await HT(n,new Lm))),n._onlineComponents}function OM(n){return xC(n).then((e=>e.syncEngine))}async function rd(n){const e=await xC(n),t=e.eventManager;return t.onListen=SM.bind(null,e.syncEngine),t.onUnlisten=IM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wM.bind(null,e.syncEngine),t}function FM(n,e,t={}){const i=new gs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,p,h){const _=new Vg({next:E=>{_.Nu(),u.enqueueAndForget((()=>Ng(a,T)));const w=E.docs.has(f);!w&&E.fromCache?h.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&E.fromCache&&p&&p.source==="server"?h.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new Mg(Cd(f.path),_,{includeMetadataChanges:!0,qa:!0});return bg(a,T)})(await rd(n),n.asyncQueue,e,t,i))),i.promise}function qM(n,e,t={}){const i=new gs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,p,h){const _=new Vg({next:E=>{_.Nu(),u.enqueueAndForget((()=>Ng(a,T))),E.fromCache&&p.source==="server"?h.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new Mg(f,_,{includeMetadataChanges:!0,qa:!0});return bg(a,T)})(await rd(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firestore.googleapis.com",zT=!0;class KT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DC,this.ssl=zT}else this.host=e.host,this.ssl=e.ssl??zT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_1)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new YN;switch(i.type){case"firstParty":return new XN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=GT.get(t);i&&(pe("ComponentProvider","Removing Datastore"),GT.delete(t),i.terminate())})(this),Promise.resolve()}}function BM(n,e,t,i={}){var h;n=Cn(n,Pd);const o=Fa(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(oA(`https://${f}`),aA("Firestore",!0)),a.host!==DC&&a.host!==f&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:f,ssl:o,emulatorOptions:i};if(!_s(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=rn.MOCK_USER;else{_=vb(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new rn(E)}n._authCredentials=new JN(new EA(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bu(t,vt._jsonSchema))return new vt(e,i||null,new ve(at.fromString(t.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Ut("string",vt._jsonSchemaVersion),referencePath:Ut("string")};class vr extends ws{constructor(e,t,i){super(e,t,Cd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ve(e))}withConverter(e){return new vr(this.firestore,e,this._path)}}function lr(n,e,...t){if(n=It(n),SA("collection","path",e),n instanceof Pd){const i=at.fromString(e,...t);return sT(i),new vr(n,null,i)}{if(!(n instanceof vt||n instanceof vr))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return sT(i),new vr(n.firestore,null,i)}}function dn(n,e,...t){if(n=It(n),arguments.length===1&&(e=ag.newId()),SA("doc","path",e),n instanceof Pd){const i=at.fromString(e,...t);return iT(i),new vt(n,null,new ve(i))}{if(!(n instanceof vt||n instanceof vr))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return iT(i),new vt(n.firestore,n instanceof vr?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="AsyncQueue";class JT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pC(this,"async_queue_retry"),this._c=()=>{const i=am();i&&pe(YT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new gs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ga(e))throw e;pe(YT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",$T(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=wg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:$T(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $T(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Ss extends Pd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new JT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JT(e),this._firestoreClient=void 0,await e}}}function HM(n,e){const t=typeof n=="object"?n:fA(),i=typeof n=="string"?n:Qf,o=rg(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=yb("firestore");a&&BM(o,...a)}return o}function Pu(n){if(n._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||GM(n),n._firestoreClient}function GM(n){var i,o,a;const e=n._freezeSettings(),t=(function(f,p,h,_){return new hx(f,p,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,MC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new LM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(tn.fromBase64String(e))}catch(t){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Ut("string",Xn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Ut("string",Gi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new fe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Ut("string",zi._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=/^__.*__$/;class KM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}class PC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Vd{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VC(this.Ac)&&zM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xd(e)}Cc(e,t,i,o=!1){return new Vd({Ac:e,methodName:t,Dc:i,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lu(n){const e=n._freezeSettings(),t=xd(n._databaseId);return new YM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kg(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);Og("Data must be an object, but it was:",u,i);const f=OC(i,u);let p,h;if(a.merge)p=new kn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const E=Um(e,T,t);if(!u.contains(E))throw new fe(te.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);qC(_,E)||_.push(E)}p=new kn(_),h=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,h=u.fieldTransforms;return new KM(new An(f),p,h)}class kd extends ku{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function kC(n,e,t){return new Vd({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lg extends ku{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=kC(this,e,!0),i=this.vc.map((a=>So(a,t))),o=new ka(i);return new WA(e.path,o)}isEqual(e){return e instanceof Lg&&_s(this.vc,e.vc)}}class Ug extends ku{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=kC(this,e,!0),i=this.vc.map((a=>So(a,t))),o=new La(i);return new WA(e.path,o)}isEqual(e){return e instanceof Ug&&_s(this.vc,e.vc)}}function LC(n,e,t,i){const o=n.Cc(1,e,t);Og("Data must be an object, but it was:",o,i);const a=[],u=An.empty();wr(i,((p,h)=>{const _=Fg(e,p,t);h=It(h);const T=o.yc(_);if(h instanceof kd)a.push(_);else{const E=So(h,T);E!=null&&(a.push(_),u.set(_,E))}}));const f=new kn(a);return new PC(u,f,o.fieldTransforms)}function UC(n,e,t,i,o,a){const u=n.Cc(1,e,t),f=[Um(e,i,t)],p=[o];if(a.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)f.push(Um(e,a[E])),p.push(a[E+1]);const h=[],_=An.empty();for(let E=f.length-1;E>=0;--E)if(!qC(h,f[E])){const w=f[E];let V=p[E];V=It(V);const k=u.yc(w);if(V instanceof kd)h.push(w);else{const P=So(V,k);P!=null&&(h.push(w),_.set(w,P))}}const T=new kn(h);return new PC(_,T,u.fieldTransforms)}function JM(n,e,t,i=!1){return So(t,n.Cc(i?4:3,e))}function So(n,e){if(FC(n=It(n)))return Og("Unsupported field value:",e,n),OC(n,e);if(n instanceof ku)return(function(i,o){if(!VC(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const f of i){let p=So(f,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=It(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Lx(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ct.fromDate(i);return{timestampValue:td(o.serializer,a)}}if(i instanceof ct){const a=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:td(o.serializer,a)}}if(i instanceof Gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:iC(o.serializer,i._byteString)};if(i instanceof vt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:yg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zi)return(function(u,f){return{mapValue:{fields:{[MA]:{stringValue:DA},[Xf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return hg(f.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Td(i)}`)})(n,e)}function OC(n,e){const t={};return IA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(n,((i,o)=>{const a=So(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function FC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Gi||n instanceof Xn||n instanceof vt||n instanceof ku||n instanceof zi)}function Og(n,e,t){if(!FC(t)||!AA(t)){const i=Td(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Um(n,e,t){if((e=It(e))instanceof Vu)return e._internalPath;if(typeof e=="string")return Fg(n,e);throw od("Field path arguments must be of type string or ",n,!1,void 0,t)}const $M=new RegExp("[~\\*/\\[\\]]");function Fg(n,e,t){if(e.search($M)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vu(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function od(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new fe(te.INVALID_ARGUMENT,f+n+p)}function qC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ld("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QM extends BC{data(){return super.data()}}function Ld(n,e){return typeof e=="string"?Fg(n,e):e instanceof Vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class Bg extends qg{}function ma(n,e,...t){let i=[];e instanceof qg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof Hg)).length,f=a.filter((p=>p instanceof Ud)).length;if(u>1||u>0&&f>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ud extends Bg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ud(e,t,i)}_apply(e){const t=this._parse(e);return GC(e._query,t),new ws(e.firestore,e.converter,Rm(e._query,t))}_parse(e){const t=Lu(e.firestore);return(function(a,u,f,p,h,_,T){let E;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ZT(T,_);const V=[];for(const k of T)V.push(WT(p,a,k));E={arrayValue:{values:V}}}else E=WT(p,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ZT(T,_),E=JM(f,u,T,_==="in"||_==="not-in");return Lt.create(h,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lo(n,e,t){const i=e,o=Ld("where",n);return Ud._create(o,i,t)}class Hg extends qg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:pi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const f=a.getFlattenedFilters();for(const p of f)GC(u,p),u=Rm(u,p)})(e._query,t),new ws(e.firestore,e.converter,Rm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gg extends Bg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gg(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(a,u)})(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new za(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function XM(n,e="asc"){const t=e,i=Ld("orderBy",n);return Gg._create(i,t)}class zg extends Bg{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new zg(e,t,i)}_apply(e){return new ws(e.firestore,e.converter,Zf(e._query,this._limit,this._limitType))}}function XT(n){return zg._create("limit",n,"F")}function WT(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qA(e)&&t.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(at.fromString(t));if(!ve.isDocumentKey(i))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dT(n,new ve(i))}if(t instanceof vt)return dT(n,t._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function ZT(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GC(n,e){const t=(function(o,a){for(const u of o)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class WM{convertValue(e,t="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return wr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[Xf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>Ct(u.doubleValue)));return new zi(t)}convertGeoPoint(e){return new Gi(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ad(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const t=Er(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=at.fromString(e);We(uC(i),9688,{name:e});const o=new Eu(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return o.isEqual(t)||Ts(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ho extends BC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ld("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:Ut("string",ho._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ff extends ho{data(e={}){return super.data(e)}}class po{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new cu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ff(this._firestore,this._userDataWriter,i.key,i,new cu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const p=new Ff(o._firestore,o._userDataWriter,f.doc.key,f.doc,new cu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const p=new Ff(o._firestore,o._userDataWriter,f.doc.key,f.doc,new cu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:ZM(f.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n){n=Cn(n,vt);const e=Cn(n.firestore,Ss);return FM(Pu(e),n._key).then((t=>zC(e,n,t)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:Ut("string",po._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Yg extends WM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function um(n){n=Cn(n,ws);const e=Cn(n.firestore,Ss),t=Pu(e),i=new Yg(e);return HC(n._query),qM(t,n._query).then((o=>new po(e,i,n,o)))}function jM(n,e,t){n=Cn(n,vt);const i=Cn(n.firestore,Ss),o=Kg(n.converter,e,t);return Od(i,[kg(Lu(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,In.none())])}function hs(n,e,t,...i){n=Cn(n,vt);const o=Cn(n.firestore,Ss),a=Lu(o);let u;return u=typeof(e=It(e))=="string"||e instanceof Vu?UC(a,"updateDoc",n._key,e,t,i):LC(a,"updateDoc",n._key,e),Od(o,[u.toMutation(n._key,In.exists(!0))])}function jT(n,e){const t=Cn(n.firestore,Ss),i=dn(n),o=Kg(n.converter,e);return Od(t,[kg(Lu(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,In.exists(!1))]).then((()=>i))}function If(n,...e){var p,h,_;n=It(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||QT(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(QT(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let a,u,f;if(n instanceof vt)u=Cn(n.firestore,Ss),f=Cd(n._key.path),a={next:T=>{e[i]&&e[i](zC(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=Cn(n,ws);u=Cn(T.firestore,Ss),f=T._query;const E=new Yg(u);a={next:w=>{e[i]&&e[i](new po(u,E,T,w))},error:e[i+1],complete:e[i+2]},HC(n._query)}return(function(E,w,V,k){const P=new Vg(k),K=new Mg(w,P,V);return E.asyncQueue.enqueueAndForget((async()=>bg(await rd(E),K))),()=>{P.Nu(),E.asyncQueue.enqueueAndForget((async()=>Ng(await rd(E),K)))}})(Pu(u),f,o,a)}function Od(n,e){return(function(i,o){const a=new gs;return i.asyncQueue.enqueueAndForget((async()=>RM(await OM(i),o,a))),a.promise})(Pu(n),e)}function zC(n,e,t){const i=t.docs.get(e._key),o=new Yg(n);return new ho(n,o,e._key,i,new cu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lu(e)}set(e,t,i){this._verifyNotCommitted();const o=cm(e,this._firestore),a=Kg(o.converter,t,i),u=kg(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,i);return this._mutations.push(u.toMutation(o._key,In.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const a=cm(e,this._firestore);let u;return u=typeof(t=It(t))=="string"||t instanceof Vu?UC(this._dataReader,"WriteBatch.update",a._key,t,i,o):LC(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cm(e,this._firestore);return this._mutations=this._mutations.concat(new pg(t._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cm(n,e){if((n=It(n)).firestore!==e)throw new fe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function nu(...n){return new Lg("arrayUnion",n)}function wf(...n){return new Ug("arrayRemove",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){return Pu(n=Cn(n,Ss)),new eD(n,(e=>Od(n,e)))}(function(e,t=!0){(function(o){Ba=o})(qa),xa(new mo("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new Ss(new $N(i.getProvider("auth-internal")),new WN(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),yr(j0,eT,e),yr(j0,eT,"esm2020")})();function KC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nD=KC,YC=new wu("auth","Firebase",KC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new ig("@firebase/auth");function iD(n,...e){ad.logLevel<=Fe.WARN&&ad.warn(`Auth (${qa}): ${n}`,...e)}function qf(n,...e){ad.logLevel<=Fe.ERROR&&ad.error(`Auth (${qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,...e){throw Jg(n,...e)}function Ki(n,...e){return Jg(n,...e)}function JC(n,e,t){const i={...nD(),[e]:t};return new wu("auth","Firebase",i).create(e,{appName:n.name})}function ys(n){return JC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return YC.create(n,...e)}function Ae(n,e,...t){if(!n)throw Jg(e,...t)}function ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qf(e),new Error(e)}function As(n,e){n||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function sD(){return eE()==="http:"||eE()==="https:"}function eE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sD()||Ib()||"connection"in navigator)?navigator.onLine:!0}function oD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,As(t>e,"Short delay should be less than long delay!"),this.isMobile=Sb()||wb()}get(){return rD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n,e){As(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uD=new Uu(3e4,6e4);function br(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Nr(n,e,t,i,o={}){return QC(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=Ru({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return Cb()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Fa(n.emulatorConfig.host)&&(h.credentials="include"),$C.fetch()(await XC(n,n.config.apiHost,t,f),h)})}async function QC(n,e,t){n._canInitEmulator=!1;const i={...aD,...e};try{const o=new fD(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Rf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[p,h]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Rf(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Rf(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw JC(n,_,h);mi(n,_)}}catch(o){if(o instanceof Is)throw o;mi(n,"network-request-failed",{message:String(o)})}}async function Ou(n,e,t,i,o={}){const a=await Nr(n,e,t,i,o);return"mfaPendingCredential"in a&&mi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function XC(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?$g(n.config,o):`${n.config.apiScheme}://${o}`;return lD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function cD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ki(this.auth,"network-request-failed")),uD.get())})}}function Rf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ki(n,e,i);return o.customData._tokenResponse=t,o}function tE(n){return n!==void 0&&n.enterprise!==void 0}class dD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hD(n,e){return Nr(n,"GET","/v2/recaptchaConfig",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(n,e){return Nr(n,"POST","/v1/accounts:delete",e)}async function ld(n,e){return Nr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mD(n,e=!1){const t=It(n),i=await t.getIdToken(e),o=Qg(i);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:yu(fm(o.auth_time)),issuedAtTime:yu(fm(o.iat)),expirationTime:yu(fm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function fm(n){return Number(n)*1e3}function Qg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return qf("JWT malformed, contained fewer than 3 sections"),null;try{const o=nA(t);return o?JSON.parse(o):(qf("Failed to decode base64 JWT payload"),null)}catch(o){return qf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function nE(n){const e=Qg(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Is&&gD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function gD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Cu(n,ld(e,{idToken:t}));Ae(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?WC(o.providerUserInfo):[],u=vD(n.providerData,a),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function _D(n){const e=It(n);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vD(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function WC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(n,e){const t=await QC(n,{},async()=>{const i=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await XC(n,o,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&Fa(n.emulatorConfig.host)&&(p.credentials="include"),$C.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ED(n,e){return Nr(n,"POST","/v2/accounts:revokeToken",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=nE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await TD(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ia;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ae(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ae(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new yD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Cu(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mD(this,e)}reload(){return _D(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ud(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await Cu(this,pD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:w,providerData:V,stsTokenManager:k}=t;Ae(T&&k,e,"internal-error");const P=Ia.fromJSON(this.name,k);Ae(typeof T=="string",e,"internal-error"),ur(i,e.name),ur(o,e.name),Ae(typeof E=="boolean",e,"internal-error"),Ae(typeof w=="boolean",e,"internal-error"),ur(a,e.name),ur(u,e.name),ur(f,e.name),ur(p,e.name),ur(h,e.name),ur(_,e.name);const K=new fi({uid:T,auth:e,email:o,emailVerified:E,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:P,createdAt:h,lastLoginAt:_});return V&&Array.isArray(V)&&(K.providerData=V.map(Z=>({...Z}))),p&&(K._redirectEventId=p),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ia;o.updateFromServerResponse(t);const a=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ud(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?WC(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Ia;f.updateFromIdToken(i);const p=new fi({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Fm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function ms(n){As(n instanceof Function,"Expected a class definition");let e=iE.get(n);return e?(As(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ZC.type="NONE";const sE=ZC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class wa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Bf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Bf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ld(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new wa(ms(sE),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||ms(sE);const u=Bf(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const E=await ld(e,{idToken:_}).catch(()=>{});if(!E)break;T=await fi._fromGetAccountInfoResponse(e,E,_)}else T=fi._fromJSON(e,_);h!==a&&(f=T),a=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new wa(a,e,i):(a=p[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new wa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sI(e))return"Blackberry";if(rI(e))return"Webos";if(eI(e))return"Safari";if((e.includes("chrome/")||tI(e))&&!e.includes("edge/"))return"Chrome";if(iI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function jC(n=ln()){return/firefox\//i.test(n)}function eI(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tI(n=ln()){return/crios\//i.test(n)}function nI(n=ln()){return/iemobile/i.test(n)}function iI(n=ln()){return/android/i.test(n)}function sI(n=ln()){return/blackberry/i.test(n)}function rI(n=ln()){return/webos/i.test(n)}function Xg(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SD(n=ln()){var e;return Xg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function AD(){return Rb()&&document.documentMode===10}function oI(n=ln()){return Xg(n)||iI(n)||rI(n)||sI(n)||/windows phone/i.test(n)||nI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e=[]){let t;switch(n){case"Browser":t=rE(ln());break;case"Worker":t=`${rE(ln())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,f)=>{try{const p=e(a);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(n,e={}){return Nr(n,"GET","/v2/passwordPolicy",br(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=6;class RD{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??wD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new CD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ms(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ld(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(ys(this));const t=e?It(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ID(this),t=new RD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ED(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ms(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[ms(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&iD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ao(n){return It(n)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=kb(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ND(n){Fd=n}function lI(n){return Fd.loadJS(n)}function xD(){return Fd.recaptchaEnterpriseScript}function MD(){return Fd.gapiScript}function DD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class PD{constructor(){this.enterprise=new VD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class VD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kD="recaptcha-enterprise",uI="NO_RECAPTCHA";class LD{constructor(e){this.type=kD,this.auth=Ao(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{hD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new dD(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{f(p)})})}function o(a,u,f){const p=window.grecaptcha;tE(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(uI)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PD().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!t&&tE(window.grecaptcha))o(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=xD();p.length!==0&&(p+=f),lI(p).then(()=>{o(f,a,u)}).catch(h=>{u(h)})}}).catch(f=>{u(f)})})}}async function aE(n,e,t,i=!1,o=!1){const a=new LD(n);let u;if(o)u=uI;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function qm(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await aE(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await aE(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n,e){const t=rg(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(_s(a,e??{}))return o;mi(o,"already-initialized")}return t.initialize({options:e})}function OD(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ms);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function FD(n,e,t){const i=Ao(n);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=cI(e),{host:u,port:f}=qD(e),p=f===null?"":`:${f}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(_s(h,i.config.emulator)&&_s(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Fa(u)?(oA(`${a}//${u}${p}`),aA("Auth",!0)):BD()}function cI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qD(n){const e=cI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:lE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:lE(u)}}}function lE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function HD(n,e){return Nr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n,e){return Ou(n,"POST","/v1/accounts:signInWithPassword",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(n,e){return Ou(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}async function KD(n,e){return Ou(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Wg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Iu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Iu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qm(e,t,"signInWithPassword",GD);case"emailLink":return zD(e,{email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qm(e,i,"signUpPassword",HD);case"emailLink":return KD(e,{idToken:t,email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e){return Ou(n,"POST","/v1/accounts:signInWithIdp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="http://localhost";class _o extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new _o(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ra(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){const e={requestUri:YD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $D(n){const e=ru(ou(n)).link,t=e?ru(ou(e)).deep_link_id:null,i=ru(ou(n)).deep_link_id;return(i?ru(ou(i)).link:null)||i||t||e||n}class Zg{constructor(e){const t=ru(ou(e)),i=t.apiKey??null,o=t.oobCode??null,a=JD(t.mode??null);Ae(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$D(e);try{return new Zg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,t){return Iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Zg.parseLink(t);return Ae(i,"argument-error"),Iu._fromEmailAndCode(e,i.code,i.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends fI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Fu{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return fr.credential(t,i)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Fu{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Fu{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return hr.credential(t,i)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(n,e){return Ou(n,"POST","/v1/accounts:signUp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await fi._fromIdTokenResponse(e,i,o),u=uE(i);return new vo({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=uE(i);return new vo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function uE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends Is{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new cd(e,t,i,o)}}function dI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(n,a,e,i):a})}async function XD(n,e,t=!1){const i=await Cu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return vo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(n,e,t=!1){const{auth:i}=n;if(Qn(i.app))return Promise.reject(ys(i));const o="reauthenticate";try{const a=await Cu(n,dI(i,o,e,n),t);Ae(a.idToken,i,"internal-error");const u=Qg(a.idToken);Ae(u,i,"internal-error");const{sub:f}=u;return Ae(n.uid===f,i,"user-mismatch"),vo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&mi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(n,e,t=!1){if(Qn(n.app))return Promise.reject(ys(n));const i="signIn",o=await dI(n,i,e),a=await vo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function ZD(n,e){return hI(Ao(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(n){const e=Ao(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jD(n,e,t){if(Qn(n.app))return Promise.reject(ys(n));const i=Ao(n),u=await qm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&pI(n),p}),f=await vo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function eP(n,e,t){return Qn(n.app)?Promise.reject(ys(n)):ZD(It(n),Ya.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pI(n),i})}function tP(n,e,t,i){return It(n).onIdTokenChanged(e,t,i)}function nP(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function iP(n,e,t,i){return It(n).onAuthStateChanged(e,t,i)}function sP(n){return It(n).signOut()}const fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=1e3,oP=10;class gI extends mI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);AD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oP):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gI.type="LOCAL";const aP=gI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI extends mI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yI.type="SESSION";const _I=yI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new qd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(t.origin,a)),p=await lP(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((f,p)=>{const h=jg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const E=T;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(E.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(){return window}function cP(n){Yi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return typeof Yi().WorkerGlobalScope<"u"&&typeof Yi().importScripts=="function"}async function fP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function hP(){return vI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebaseLocalStorageDb",pP=1,dd="firebaseLocalStorage",EI="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bd(n,e){return n.transaction([dd],e?"readwrite":"readonly").objectStore(dd)}function mP(){const n=indexedDB.deleteDatabase(TI);return new qu(n).toPromise()}function Bm(){const n=indexedDB.open(TI,pP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dd,{keyPath:EI})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dd)?e(i):(i.close(),await mP(),e(await Bm()))})})}async function cE(n,e,t){const i=Bd(n,!0).put({[EI]:e,value:t});return new qu(i).toPromise()}async function gP(n,e){const t=Bd(n,!1).get(e),i=await new qu(t).toPromise();return i===void 0?null:i.value}function fE(n,e){const t=Bd(n,!0).delete(e);return new qu(t).toPromise()}const yP=800,_P=3;class SI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>_P)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qd._getInstance(hP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await fP(),!this.activeServiceWorker)return;this.sender=new uP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bm();return await cE(e,fd,"1"),await fE(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>cE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>gP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Bd(o,!1).getAll();return new qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SI.type="LOCAL";const vP=SI;new Uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e){return e?ms(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EP(n){return hI(n.auth,new ey(n),n.bypassAuthState)}function SP(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),WD(t,new ey(n),n.bypassAuthState)}async function AP(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),XD(t,new ey(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EP;case"linkViaPopup":case"linkViaRedirect":return AP;case"reauthViaPopup":case"reauthViaRedirect":return SP;default:mi(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new Uu(2e3,1e4);class Ea extends AI{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CP.get())};e()}}Ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="pendingRedirect",Hf=new Map;class wP extends AI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hf.get(this.auth._key());if(!e){try{const i=await RP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hf.set(this.auth._key(),e)}return this.bypassAuthState||Hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RP(n,e){const t=xP(e),i=NP(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function bP(n,e){Hf.set(n._key(),e)}function NP(n){return ms(n._redirectPersistence)}function xP(n){return Bf(IP,n.config.apiKey,n.name)}async function MP(n,e,t=!1){if(Qn(n.app))return Promise.reject(ys(n));const i=Ao(n),o=TP(i,e),u=await new wP(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=600*1e3;class PP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!CI(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ki(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DP&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e={}){return Nr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UP=/^https?/;async function OP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kP(n);for(const t of e)try{if(FP(t))return}catch{}mi(n,"unauthorized-domain")}function FP(n){const e=Om(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!UP.test(t))return!1;if(LP.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new Uu(3e4,6e4);function hE(){const n=Yi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BP(n){return new Promise((e,t)=>{var o,a,u;function i(){hE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hE(),t(Ki(n,"network-request-failed"))},timeout:qP.get()})}if((a=(o=Yi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Yi().gapi)!=null&&u.load)i();else{const f=DD("iframefcb");return Yi()[f]=()=>{gapi.load?i():t(Ki(n,"network-request-failed"))},lI(`${MD()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function HP(n){return Gf=Gf||BP(n),Gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=new Uu(5e3,15e3),zP="__/auth/iframe",KP="emulator/auth/iframe",YP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $P(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$g(e,KP):`https://${n.config.authDomain}/${zP}`,i={apiKey:e.apiKey,appName:n.name,v:qa},o=JP.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ru(i).slice(1)}`}async function QP(n){const e=await HP(n),t=Yi().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:$P(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YP,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ki(n,"network-request-failed"),f=Yi().setTimeout(()=>{a(u)},GP.get());function p(){Yi().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WP=500,ZP=600,jP="_blank",e2="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t2(n,e,t,i=WP,o=ZP){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...XP,width:i.toString(),height:o.toString(),top:a,left:u},h=ln().toLowerCase();t&&(f=tI(h)?jP:t),jC(h)&&(e=e||e2,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[w,V])=>`${E}${w}=${V},`,"");if(SD(h)&&f!=="_self")return n2(e||"",f),new pE(null);const T=window.open(e||"",f,_);Ae(T,n,"popup-blocked");try{T.focus()}catch{}return new pE(T)}function n2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="__/auth/handler",s2="emulator/auth/handler",r2=encodeURIComponent("fac");async function mE(n,e,t,i,o,a){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:qa,eventId:o};if(e instanceof fI){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Vb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof Fu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),h=p?`#${r2}=${encodeURIComponent(p)}`:"";return`${o2(n)}?${Ru(f).slice(1)}${h}`}function o2({config:n}){return n.emulator?$g(n,s2):`https://${n.authDomain}/${i2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class a2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_I,this._completeRedirectFn=MP,this._overrideRedirectResult=bP}async _openPopup(e,t,i,o){var u;As((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await mE(e,t,i,Om(),o);return t2(e,a,jg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await mE(e,t,i,Om(),o);return cP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(As(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await QP(e),i=new PP(e);return t.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dm,{type:dm},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[dm];a!==void 0&&t(!!a),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oI()||eI()||Xg()}}const l2=a2;var gE="@firebase/auth",yE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f2(n){xa(new mo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aI(n)},h=new bD(i,o,a,p);return OD(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xa(new mo("auth-internal",e=>{const t=Ao(e.getProvider("auth").getImmediate());return(i=>new u2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(gE,yE,c2(n)),yr(gE,yE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=300,h2=rA("authIdTokenMaxAge")||d2;let _E=null;const p2=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>h2)return;const o=t==null?void 0:t.token;_E!==o&&(_E=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function m2(n=fA()){const e=rg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=UD(n,{popupRedirectResolver:l2,persistence:[vP,aP,_I]}),i=rA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=p2(a.toString());nP(t,u,()=>u(t.currentUser)),tP(t,f=>u(f))}}const o=iA("auth");return o&&FD(t,`http://${o}`),t}function g2(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}ND({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Ki("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",g2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f2("Browser");var y2="firebase",_2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(y2,_2,"app");const v2={apiKey:"AIzaSyCaFpKeQuZszdWRL1Y7pt5PYepGnc6Qo1E",authDomain:"react-chat-app-b3937.firebaseapp.com",projectId:"react-chat-app-b3937",storageBucket:"react-chat-app-b3937.firebasestorage.app",messagingSenderId:"902063613038",appId:"1:902063613038:web:2d05d4bf8238912093b27f",measurementId:"G-0EPVZ2P30R"},II=cA(v2),bf=m2(II),mt=HM(II);class T2{async register(e,t,i,o){try{const a=ma(lr(mt,"users"),lo("phone","==",i));if(!(await um(a)).empty)throw new Error("Phone number already registered.");const p=(await jD(bf,t,o)).user,h={id:p.uid,name:e,email:t,phone:i,showPhone:!0,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.uid}`,bio:"Hello, I am using Saad Social App!",language:"en",friends:[],sentRequests:[],receivedRequests:[]};return await jM(dn(mt,"users",p.uid),h),h}catch(a){throw a}}async login(e,t){const i=await eP(bf,e,t),o=await Cf(dn(mt,"users",i.user.uid));return o.exists()?o.data():null}async logout(){await sP(bf)}onAuthChange(e){return iP(bf,async t=>{if(t){const i=await Cf(dn(mt,"users",t.uid));e(i.exists()?i.data():null)}else e(null)})}async updateProfile(e,t){await hs(dn(mt,"users",e),t)}async getUser(e){const t=await Cf(dn(mt,"users",e));return t.exists()?t.data():null}async searchUsers(e,t){const i=await um(ma(lr(mt,"users"),XT(50))),o=[],a=t.toLowerCase();return i.forEach(u=>{const f=u.data();f.id!==e&&(!t||f.name.toLowerCase().includes(a)||f.phone.includes(a))&&o.push(f)}),o}async sendFriendRequest(e,t){await hs(dn(mt,"users",e),{sentRequests:nu(t)}),await hs(dn(mt,"users",t),{receivedRequests:nu(e)})}async acceptFriendRequest(e,t){await hs(dn(mt,"users",e),{receivedRequests:wf(t),friends:nu(t)}),await hs(dn(mt,"users",t),{sentRequests:wf(e),friends:nu(e)})}async rejectFriendRequest(e,t){await hs(dn(mt,"users",e),{receivedRequests:wf(t)}),await hs(dn(mt,"users",t),{sentRequests:wf(e)})}async createPost(e,t,i){const o=lr(mt,"posts");await jT(o,{authorId:e.id,authorName:e.name,authorAvatar:e.avatar,text:t,image:i||null,timestamp:Date.now(),reactions:{like:[],love:[],haha:[]},comments:[]})}subscribeToFeed(e,t,i){const o=lr(mt,"posts"),a=ma(o,XM("timestamp","desc"),XT(50));return If(a,u=>{const f=[],p=[e,...t];u.forEach(h=>{const _=h.data();p.includes(_.authorId)&&f.push({..._,id:h.id})}),i(f)})}async addReaction(e,t,i){const o=dn(mt,"posts",e),a=await Cf(o);if(!a.exists())return;const f={...a.data().reactions};f[i].includes(t)?f[i]=f[i].filter(p=>p!==t):f[i].push(t),await hs(o,{reactions:f})}async addComment(e,t,i){const o=dn(mt,"posts",e),a={id:Math.random().toString(36).substr(2,9),authorId:t.id,authorName:t.name,authorAvatar:t.avatar,text:i,timestamp:Date.now()};await hs(o,{comments:nu(a)})}async sendMessage(e,t,i,o,a){await jT(lr(mt,"messages"),{senderId:e,receiverId:t,text:i||null,image:o||null,audio:a||null,timestamp:Date.now(),read:!1})}async markMessagesAsRead(e,t){const i=ma(lr(mt,"messages"),lo("receiverId","==",e),lo("senderId","==",t),lo("read","==",!1)),o=await um(i);if(o.empty)return;const a=tD(mt);o.forEach(u=>a.update(u.ref,{read:!0})),await a.commit()}subscribeToMessages(e,t,i){const o=ma(lr(mt,"messages"),lo("senderId","in",[e,t]));return If(o,a=>{const u=[];a.forEach(f=>{const p=f.data();(p.senderId===e&&p.receiverId===t||p.senderId===t&&p.receiverId===e)&&u.push({...p,id:f.id})}),u.sort((f,p)=>f.timestamp-p.timestamp),i(u)})}subscribeToAllUnread(e,t){const i=ma(lr(mt,"messages"),lo("receiverId","==",e),lo("read","==",!1));return If(i,o=>{const a={};o.forEach(u=>{const f=u.data();a[f.senderId]=(a[f.senderId]||0)+1}),t(a)})}subscribeToUser(e,t){return If(dn(mt,"users",e),i=>{i.exists()&&t(i.data())})}}const ft=new T2,vE={en:{app_name:"Saad Social App",login_tagline:"Connecting you, real-time",email:"Email Address",password:"Password",full_name:"Full Name",phone_number:"Phone Number",sign_in:"Sign In",start_chatting:"Start Chatting",new_member:"New to Saad? Join the community",already_member:"Already a member? Log in",inbox:"Inbox",community:"Community",discovery:"Discovery",ai_assistant:"AI Assistant",settings:"Settings",profile:"Profile",logout:"Logout",search_convos:"Search conversations...",requests:"Requests",accept:"Accept",ignore:"Ignore",no_active_chats:"No active chats.",find_friends:"Find friends in Discovery.",what_is_on_mind:"What's on your mind?",ai_caption:"AI Caption",post:"Post",no_stories:"No stories yet",comments:"Comments",add_comment:"Add a comment...",update_identity:"Update Identity",display_name:"Display Name",phone_visibility:"Phone Visibility",bio:"Bio / About Me",language:"Language",language_desc:"Choose your preferred interface language",syncing:"Syncing...",success_profile:"Profile updated successfully!",error_profile:"Failed to update profile.",personal_archive:"Personal Archive",my_stories:"My Stories",mutual_friends:"Mutual Friends",social_score:"Social Score",local_atmosphere:"Local Atmosphere",spiritual_flow:"Spiritual Flow",next:"NEXT",ai_thinking:"Gemini is thinking",type_message:"Type your message...",summarize:"Summarize with AI",recording:"Recording Audio...",stop_send:"Stop & Send"},ar:{app_name:"  ",login_tagline:"    ",email:" ",password:" ",full_name:" ",phone_number:" ",sign_in:" ",start_chatting:" ",new_member:"    ",already_member:"   ",inbox:" ",community:"",discovery:"",ai_assistant:"  ",settings:"",profile:" ",logout:" ",search_convos:"  ...",requests:"",accept:"",ignore:"",no_active_chats:"   .",find_friends:"     .",what_is_on_mind:" ",ai_caption:"  ",post:"",no_stories:"   ",comments:"",add_comment:" ...",update_identity:" ",display_name:" ",phone_visibility:" ",bio:" ",language:"",language_desc:"    ",syncing:" ...",success_profile:"    !",error_profile:"   .",personal_archive:" ",my_stories:"",mutual_friends:" ",social_score:" ",local_atmosphere:" ",spiritual_flow:" ",next:"",ai_thinking:" ",type_message:" ...",summarize:"  ",recording:"  ...",stop_send:" "}},wI=he.createContext(void 0),E2=({children:n,initialLanguage:e="en"})=>{const[t,i]=he.useState(e),o=u=>{i(u),document.documentElement.dir=u==="ar"?"rtl":"ltr",document.documentElement.lang=u};he.useEffect(()=>{document.documentElement.dir=t==="ar"?"rtl":"ltr",document.documentElement.lang=t},[t]);const a=u=>vE[t][u]||vE.en[u]||u;return I.jsx(wI.Provider,{value:{language:t,setLanguage:o,t:a,isRTL:t==="ar"},children:n})},Bu=()=>{const n=he.useContext(wI);if(!n)throw new Error("useLanguage must be used within LanguageProvider");return n},S2=({onLogin:n,onRegister:e})=>{const{t,isRTL:i}=Bu(),[o,a]=he.useState(!1),[u,f]=he.useState(""),[p,h]=he.useState(""),[_,T]=he.useState(""),[E,w]=he.useState(""),V=k=>{if(k.preventDefault(),!(!u||!p))if(o){if(!_||!E)return;e(_,u,E,p)}else n(u,p)};return I.jsx("div",{className:`flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-br from-indigo-700 to-indigo-900 ${i?"font-arabic":""}`,dir:i?"rtl":"ltr",children:I.jsxs("div",{className:"w-full max-w-md p-8 bg-white rounded-2xl shadow-2xl transition-all duration-300",children:[I.jsxs("div",{className:"flex flex-col items-center mb-8",children:[I.jsx("div",{className:"p-4 bg-indigo-50 rounded-2xl mb-4 text-indigo-600 shadow-inner",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),I.jsx("h1",{className:"text-3xl font-black text-gray-800 tracking-tight",children:t("app_name")}),I.jsx("p",{className:"text-gray-500 mt-2 font-medium",children:t("login_tagline")})]}),I.jsxs("form",{onSubmit:V,className:"space-y-4",children:[o&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:t("full_name")}),I.jsx("input",{type:"text",value:_,onChange:k=>T(k.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:t("phone_number")}),I.jsx("input",{type:"tel",value:E,onChange:k=>w(k.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"+1 234 567 890",required:!0})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:t("email")}),I.jsx("input",{type:"email",value:u,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"name@example.com",required:!0})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:t("password")}),I.jsx("input",{type:"password",value:p,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"",required:!0,minLength:6})]}),I.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3.5 mt-2 rounded-xl font-bold hover:bg-indigo-700 active:scale-95 transition-all shadow-lg shadow-indigo-100",children:t(o?"start_chatting":"sign_in")})]}),I.jsx("div",{className:"mt-8 text-center",children:I.jsx("button",{onClick:()=>a(!o),className:"text-indigo-600 hover:text-indigo-800 text-sm font-bold transition-colors",children:t(o?"already_member":"new_member")})})]})})},A2=({user:n,friends:e,pendingRequests:t,unreadMap:i,selectedId:o,onSelectFriend:a})=>{const{t:u,isRTL:f}=Bu();return I.jsxs("div",{className:"flex flex-col h-full animate-fade-in",dir:f?"rtl":"ltr",children:[I.jsxs("div",{className:"p-6",children:[I.jsx("h2",{className:"text-xl font-bold text-gray-900 tracking-tight mb-4",children:u("inbox")}),I.jsxs("div",{className:"relative group",children:[I.jsx("input",{type:"text",placeholder:u("search_convos"),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-2xl focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all text-xs"}),I.jsx("svg",{className:`w-3.5 h-3.5 absolute top-3 text-gray-400 ${f?"right-4":"left-4"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),I.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 custom-scrollbar",children:[t.length>0&&I.jsxs("div",{className:"mb-6",children:[I.jsx("h3",{className:"px-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3",children:u("requests")}),I.jsx("div",{className:"space-y-2",children:t.map(p=>I.jsxs("div",{className:"p-3 bg-gray-50 rounded-2xl border border-gray-100 transition-all",children:[I.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[I.jsx("img",{src:p.avatar,className:"w-8 h-8 rounded-full",alt:""}),I.jsx("p",{className:"text-xs font-bold text-gray-900 truncate",children:p.name})]}),I.jsxs("div",{className:"flex space-x-2",children:[I.jsx("button",{onClick:()=>ft.acceptFriendRequest(n.id,p.id),className:"flex-1 bg-gray-900 text-white text-[10px] font-bold py-1.5 rounded-xl active:scale-95 transition-transform",children:u("accept")}),I.jsx("button",{onClick:()=>ft.rejectFriendRequest(n.id,p.id),className:"flex-1 bg-white text-gray-400 text-[10px] font-bold py-1.5 rounded-xl border border-gray-100 active:scale-95 transition-transform",children:u("ignore")})]})]},p.id))})]}),I.jsx("div",{className:"space-y-1",children:e.length===0?I.jsx("div",{className:"px-4 py-12 text-center",children:I.jsx("p",{className:"text-xs text-gray-300 font-medium",children:u("no_active_chats")})}):e.map(p=>{const h=i[p.id]||0;return I.jsxs("button",{onClick:()=>a(p.id),className:`w-full p-3 flex items-center space-x-3 rounded-2xl transition-all border ${o===p.id?"bg-gray-100 border-gray-100 shadow-sm":"hover:bg-gray-50 border-transparent"}`,children:[I.jsxs("div",{className:"relative flex-shrink-0",children:[I.jsx("img",{src:p.avatar,className:"w-11 h-11 rounded-full border border-gray-50",alt:""}),I.jsx("div",{className:`absolute bottom-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full ${f?"left-0":"right-0"}`})]}),I.jsxs("div",{className:`flex-1 text-${f?"right":"left"} min-w-0`,children:[I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("h4",{className:`text-xs font-bold truncate ${h>0?"text-gray-900":"text-gray-600"}`,children:p.name}),h>0&&I.jsx("span",{className:"flex-shrink-0 bg-indigo-600 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:h})]}),I.jsx("p",{className:"text-[11px] truncate mt-0.5 text-gray-400 font-medium",children:p.bio||"Available"})]})]},p.id)})})]})]})};var C2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let I2,w2;function R2(){return{geminiUrl:I2,vertexUrl:w2}}function b2(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=R2();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rs{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function N2(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){f=p;break}if(f!==-1&&a.length>f)for(let p=f;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Hm(n,o,a,0,u)}}function Hm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const p of f[u])Hm(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of f)p[h]=u[h];for(const[h,_]of Object.entries(p)){const T=[];for(const E of t.slice(i))E==="*"?T.push(h):T.push(E);m(u,T,_)}for(const h of f)delete u[h]}}else{const u=n;a in u&&Hm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ty(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x2(n){const e={},t=d(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function M2(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],P2(u)),e}function D2(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],V2(u)),e}function P2(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>k2(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function V2(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>L2(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function k2(n){const e={},t=d(n,["video"]);return t!=null&&m(e,["video"],H2(t)),e}function L2(n){const e={},t=d(n,["_self"]);return t!=null&&m(e,["video"],G2(t)),e}function U2(n){const e={},t=d(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function O2(n){const e={},t=d(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function F2(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],q2(u)),e}function q2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function RI(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],B2(u)),e}function B2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function H2(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],ty(i));const o=d(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function G2(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],ty(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var TE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(TE||(TE={}));var EE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(EE||(EE={}));var SE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(SE||(SE={}));var qi;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(qi||(qi={}));var AE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(AE||(AE={}));var CE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(CE||(CE={}));var IE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(IE||(IE={}));var wE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(wE||(wE={}));var RE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(RE||(RE={}));var bE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(bE||(bE={}));var NE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(NE||(NE={}));var xE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(xE||(xE={}));var ME;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ME||(ME={}));var DE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(DE||(DE={}));var PE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(PE||(PE={}));var VE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(VE||(VE={}));var kE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(kE||(kE={}));var LE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(LE||(LE={}));var UE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(UE||(UE={}));var hd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(hd||(hd={}));var OE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(OE||(OE={}));var FE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(FE||(FE={}));var qE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qE||(qE={}));var Gm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Gm||(Gm={}));var BE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(BE||(BE={}));var HE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(HE||(HE={}));var GE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(GE||(GE={}));var zE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(zE||(zE={}));var KE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(KE||(KE={}));var YE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(YE||(YE={}));var JE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(JE||(JE={}));var $E;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($E||($E={}));var QE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(QE||(QE={}));var XE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(XE||(XE={}));var WE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(WE||(WE={}));var ZE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ZE||(ZE={}));var jE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jE||(jE={}));var eS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(eS||(eS={}));var tS;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(tS||(tS={}));var nS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(nS||(nS={}));var iS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(iS||(iS={}));var sS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(sS||(sS={}));var rS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(rS||(rS={}));var oS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(oS||(oS={}));var aS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(aS||(aS={}));var lS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(lS||(lS={}));var uS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(uS||(uS={}));var cS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(cS||(cS={}));var fS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(fS||(fS={}));var dS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(dS||(dS={}));var hS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hS||(hS={}));var pS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(pS||(pS={}));var mS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mS||(mS={}));var gS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(gS||(gS={}));var yS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(yS||(yS={}));var Sa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Sa||(Sa={}));class zm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class iu{get text(){var e,t,i,o,a,u,f,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const E of(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[w,V]of Object.entries(E))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(V!==null||V!==void 0)&&T.push(w);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,h+=E.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,f,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[E,w]of Object.entries(T))E!=="inlineData"&&(w!==null||w!==void 0)&&_.push(E);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,f,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,f,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,f,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class _S{}class vS{}class z2{}class K2{}class Y2{}class J2{}class TS{}class ES{}class SS{}class $2{}class pd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new pd;let o;const a=e;return t?o=D2(a):o=M2(a),Object.assign(i,o),i}}class AS{}class CS{}class IS{}class wS{}class Q2{}class X2{}class W2{}class ny{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new ny,a=F2(e);return Object.assign(i,a),i}}class Z2{}class j2{}class eV{}class RS{}class tV{get text(){var e,t,i;let o="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(f))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,p]of Object.entries(u))f!=="inlineData"&&p!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class nV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class iy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new iy,a=RI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bI(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function NI(n){return Array.isArray(n)?n.map(e=>md(e)):[md(n)]}function md(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function xI(n){const e=md(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function MI(n){const e=md(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function DI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>bS(e)):[bS(n)]}function Km(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function NS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function an(n){if(n==null)throw new Error("ContentUnion is required");return Km(n)?n:{role:"user",parts:DI(n)}}function sy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=an(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=an(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>an(t)):[an(e)]}function Wn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(NS(n)||xS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[an(n)]}const e=[],t=[],i=Km(n[0]);for(const o of n){const a=Km(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(NS(o)||xS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:DI(t)}),e}function iV(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(qi).includes(t[0].toUpperCase())?t[0].toUpperCase():qi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(qi).includes(i.toUpperCase())?i.toUpperCase():qi.TYPE_UNSPECIFIED})}}function ba(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&iV(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(qi).includes(f.toUpperCase())?f.toUpperCase():qi.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ba(f);else if(i.includes(u)){const p=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}p.push(ba(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(f))p[h]=ba(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=f}return e}function ry(n){return ba(n)}function oy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ay(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ja(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ba(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ba(e.response));return n}function $a(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function sV(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function bs(n,e){if(typeof e!="string")throw new Error("name must be a string");return sV(n,e,"cachedContents")}function PI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function xr(n){return ty(n)}function rV(n){return n!=null&&typeof n=="object"&&"name"in n}function oV(n){return n!=null&&typeof n=="object"&&"video"in n}function aV(n){return n!=null&&typeof n=="object"&&"uri"in n}function VI(n){var e;let t;if(rV(n)&&(t=n.name),!(aV(n)&&(t=n.uri,t===void 0))&&!(oV(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function kI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function LI(n){for(const e of["models","tunedModels","publisherModels"])if(lV(n,e))return n[e];return[]}function lV(n,e){return n!==null&&typeof n=="object"&&e in n}function uV(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function cV(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=uV(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function UI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function fV(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function OI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Qa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function FI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dV(n){const e={},t=d(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>YV(u))),m(e,["inlinedResponses"],a)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function hV(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function pV(n){const e={},t=d(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function zf(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["metadata","state"]);o!=null&&m(e,["state"],FI(o));const a=d(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=d(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const p=d(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=d(n,["metadata","output"]);return h!=null&&m(e,["dest"],dV(OI(h))),e}function Ym(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["state"]);o!=null&&m(e,["state"],FI(o));const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["createTime"]);u!=null&&m(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&m(e,["startTime"],f);const p=d(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=d(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&m(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&m(e,["src"],mV(T));const E=d(n,["outputConfig"]);E!=null&&m(e,["dest"],hV(OI(E)));const w=d(n,["completionStats"]);return w!=null&&m(e,["completionStats"],w),e}function mV(n){const e={},t=d(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function gV(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&m(t,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>KV(n,u))),m(t,["requests","requests"],a)}return t}function yV(n){const e={},t=d(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _V(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function vV(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Qa(n,i)),t}function TV(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Qa(n,i)),t}function EV(n){const e={},t=d(n,["content"]);t!=null&&m(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],SV(i));const o=d(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&m(e,["index"],p);const h=d(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>w)),m(e,["safetyRatings"],E)}const T=d(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function SV(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function qI(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>jV(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function AV(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function CV(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],pV(fV(o))),t}function MS(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["src"]);o!=null&&m(t,["batch","inputConfig"],gV(n,UI(n,o)));const a=d(e,["config"]);return a!=null&&AV(a,t),t}function IV(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],$e(n,i));const o=d(e,["src"]);o!=null&&m(t,["inputConfig"],yV(UI(n,o)));const a=d(e,["config"]);return a!=null&&CV(a,t),t}function wV(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function RV(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["src"]);o!=null&&m(t,["batch","inputConfig"],VV(n,o));const a=d(e,["config"]);return a!=null&&wV(a,t),t}function bV(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Qa(n,i)),t}function NV(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Qa(n,i)),t}function xV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);return a!=null&&m(e,["error"],a),e}function MV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);return a!=null&&m(e,["error"],a),e}function DV(n,e){const t={},i=d(e,["contents"]);if(i!=null){let a=sy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const o=d(e,["config"]);return o!=null&&(m(t,["_self"],PV(o,t)),N2(t,{"requests[].*":"requests[].request.*"})),t}function PV(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VV(n,e){const t={},i=d(e,["fileName"]);i!=null&&m(t,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],DV(n,o)),t}function kV(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function LV(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UV(n){const e={},t=d(n,["mode"]);t!=null&&m(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OV(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],qI(an(o)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const E=d(e,["logprobs"]);E!=null&&m(i,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&m(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&m(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const K=d(e,["responseSchema"]);K!=null&&m(i,["responseSchema"],ry(K));const Z=d(e,["responseJsonSchema"]);if(Z!=null&&m(i,["responseJsonSchema"],Z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=d(e,["safetySettings"]);if(t!==void 0&&Q!=null){let N=Q;Array.isArray(N)&&(N=N.map(Te=>ek(Te))),m(t,["safetySettings"],N)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let N=$a(oe);Array.isArray(N)&&(N=N.map(Te=>nk(Ja(Te)))),m(t,["tools"],N)}const le=d(e,["toolConfig"]);if(t!==void 0&&le!=null&&m(t,["toolConfig"],tk(le)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=d(e,["cachedContent"]);t!==void 0&&re!=null&&m(t,["cachedContent"],bs(n,re));const M=d(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&m(i,["mediaResolution"],D);const x=d(e,["speechConfig"]);if(x!=null&&m(i,["speechConfig"],oy(x)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&m(i,["thinkingConfig"],O);const U=d(e,["imageConfig"]);U!=null&&m(i,["imageConfig"],zV(U));const B=d(e,["enableEnhancedCivicAnswers"]);return B!=null&&m(i,["enableEnhancedCivicAnswers"],B),i}function FV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>EV(h))),m(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function qV(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Qa(n,i)),t}function BV(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Qa(n,i)),t}function HV(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function GV(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function zV(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function KV(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["request","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let f=Wn(o);Array.isArray(f)&&(f=f.map(p=>qI(p))),m(t,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=d(e,["config"]);return u!=null&&m(t,["request","generationConfig"],OV(n,u,d(t,["request"],{}))),t}function YV(n){const e={},t=d(n,["response"]);t!=null&&m(e,["response"],FV(t));const i=d(n,["error"]);return i!=null&&m(e,["error"],i),e}function JV(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function $V(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=d(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function QV(n){const e={},t=d(n,["config"]);return t!=null&&JV(t,e),e}function XV(n){const e={},t=d(n,["config"]);return t!=null&&$V(t,e),e}function WV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>zf(u))),m(e,["batchJobs"],a)}return e}function ZV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Ym(u))),m(e,["batchJobs"],a)}return e}function jV(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],kV(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],LV(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],_V(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function ek(n){const e={},t=d(n,["category"]);if(t!=null&&m(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function tk(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],UV(t));const i=d(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function nk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],HV(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],GV(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class Co{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ik extends Rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(Cs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=MS(this.apiClient,e),i=t._url,o=de("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,p=f.requests,h=[];for(const _ of p){const T=Object.assign({},_);if(T.systemInstruction){const E=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=E,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=IV(this.apiClient,e);return f=de("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Ym(_))}else{const h=MS(this.apiClient,e);return f=de("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>zf(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=RV(this.apiClient,e);return a=de("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>zf(p))}}async get(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=BV(this.apiClient,e);return f=de("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Ym(_))}else{const h=qV(this.apiClient,e);return f=de("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>zf(_))}}async cancel(e){var t,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const p=TV(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=vV(this.apiClient,e);u=de("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=XV(e);return f=de("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=ZV(_),E=new RS;return Object.assign(E,T),E})}else{const h=QV(e);return f=de("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=WV(_),E=new RS;return Object.assign(E,T),E})}}async delete(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=NV(this.apiClient,e);return f=de("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>MV(_))}else{const h=bV(this.apiClient,e);return f=de("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>xV(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sk(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function DS(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Rk(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function rk(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=Wn(u);Array.isArray(_)&&(_=_.map(T=>DS(T))),m(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],DS(an(f)));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>Nk(T))),m(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],bk(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function ok(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=Wn(u);Array.isArray(T)&&(T=T.map(E=>E)),m(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],an(f));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>xk(E))),m(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function ak(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],bI(n,i));const o=d(e,["config"]);return o!=null&&rk(o,t),t}function lk(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],bI(n,i));const o=d(e,["config"]);return o!=null&&ok(o,t),t}function uk(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],bs(n,i)),t}function ck(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],bs(n,i)),t}function fk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function dk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function hk(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function pk(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mk(n){const e={},t=d(n,["mode"]);t!=null&&m(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gk(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function yk(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],bs(n,i)),t}function _k(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],bs(n,i)),t}function vk(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Tk(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function Ek(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function Sk(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function Ak(n){const e={},t=d(n,["config"]);return t!=null&&Ek(t,e),e}function Ck(n){const e={},t=d(n,["config"]);return t!=null&&Sk(t,e),e}function Ik(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function wk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function Rk(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],hk(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],pk(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],sk(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function bk(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],mk(t));const i=d(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function Nk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],vk(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],Tk(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function xk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>gk(E))),m(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function Mk(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function Dk(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function Pk(n,e){const t={},i=d(e,["name"]);i!=null&&m(t,["_url","name"],bs(n,i));const o=d(e,["config"]);return o!=null&&Mk(o,t),t}function Vk(n,e){const t={},i=d(e,["name"]);i!=null&&m(t,["_url","name"],bs(n,i));const o=d(e,["config"]);return o!=null&&Dk(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kk extends Rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(Cs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=lk(this.apiClient,e);return f=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=ak(this.apiClient,e);return f=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=_k(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=yk(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=ck(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=dk(_),E=new IS;return Object.assign(E,T),E})}else{const h=uk(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=fk(_),E=new IS;return Object.assign(E,T),E})}}async update(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=Vk(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=Pk(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=Ck(e);return f=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=wk(_),E=new wS;return Object.assign(E,T),E})}else{const h=Ak(e);return f=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Ik(_),E=new wS;return Object.assign(E,T),E})}}}function gd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function PS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(n){return this instanceof we?(this.v=n,this):new we(n)}function di(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(V){return Promise.resolve(V).then(w,T)}}function f(w,V){i[w]&&(o[w]=function(k){return new Promise(function(P,K){a.push([w,k,P,K])>1||p(w,k)})},V&&(o[w]=V(o[w])))}function p(w,V){try{h(i[w](V))}catch(k){E(a[0][3],k)}}function h(w){w.value instanceof we?Promise.resolve(w.value.v).then(_,T):E(a[0][2],w)}function _(w){p("next",w)}function T(w){p("throw",w)}function E(w,V){w(V),a.shift(),a.length&&p(a[0][0],a[0][1])}}function hi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof PS=="function"?PS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,p){u=n[a](u),o(f,p,u.done,u.value)})}}function o(a,u,f,p){Promise.resolve(p).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:BI(t)}function BI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Uk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function VS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!BI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class Ok{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Fk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Fk{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),Uk(a)}async sendMessage(e){var t;await this.sendPromise;const i=an(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const p=await o,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let E=[];_!=null&&(E=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=an(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?VS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return di(this,arguments,function*(){var o,a,u,f,p,h;const _=[];try{for(var T=!0,E=hi(e),w;w=yield we(E.next()),o=w.done,!o;T=!0){f=w.value,T=!1;const V=f;if(Lk(V)){const k=(h=(p=V.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;k!==void 0&&_.push(k)}yield yield we(V)}}catch(V){a={error:V}}finally{try{!T&&!o&&(u=E.return)&&(yield we(u.call(E)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...VS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Hd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qk(n){const e={},t=d(n,["file"]);return t!=null&&m(e,["file"],t),e}function Bk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function Hk(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","file"],VI(t)),e}function Gk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function zk(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","file"],VI(t)),e}function Kk(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function Yk(n){const e={},t=d(n,["config"]);return t!=null&&Kk(t,e),e}function Jk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $k extends Rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(Cs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yk(e);return a=de("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=Jk(p),_=new Z2;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qk(e);return a=de("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=Bk(p),_=new j2;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zk(e);return a=de("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Hk(e);return a=de("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=Gk(p),_=new eV;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kf(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Qk(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>fL(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function Xk(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Wk(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zk(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function jk(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const E=d(n,["responseLogprobs"]);E!=null&&m(e,["responseLogprobs"],E);const w=d(n,["responseMimeType"]);w!=null&&m(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&m(e,["responseModalities"],V);const k=d(n,["responseSchema"]);k!=null&&m(e,["responseSchema"],k);const P=d(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const K=d(n,["seed"]);K!=null&&m(e,["seed"],K);const Z=d(n,["speechConfig"]);Z!=null&&m(e,["speechConfig"],Z);const Q=d(n,["stopSequences"]);Q!=null&&m(e,["stopSequences"],Q);const oe=d(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const le=d(n,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const re=d(n,["topK"]);re!=null&&m(e,["topK"],re);const M=d(n,["topP"]);if(M!=null&&m(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function tL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function nL(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],ay(T));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],Qk(an(V)));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let re=$a(k);Array.isArray(re)&&(re=re.map(M=>hL(Ja(M)))),m(e,["setup","tools"],re)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],dL(P));const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&m(e,["setup","inputAudioTranscription"],K);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&m(e,["setup","outputAudioTranscription"],Z);const Q=d(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&m(e,["setup","realtimeInputConfig"],Q);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const le=d(n,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function iL(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],jk(i));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],ay(T));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],an(V));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let M=$a(k);Array.isArray(M)&&(M=M.map(D=>pL(Ja(D)))),m(e,["setup","tools"],M)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],P);const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&m(e,["setup","inputAudioTranscription"],K);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&m(e,["setup","outputAudioTranscription"],Z);const Q=d(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&m(e,["setup","realtimeInputConfig"],Q);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const le=d(n,["proactivity"]);e!==void 0&&le!=null&&m(e,["setup","proactivity"],le);const re=d(n,["explicitVadSignal"]);return e!==void 0&&re!=null&&m(e,["setup","explicitVadSignal"],re),t}function sL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],$e(n,i));const o=d(e,["config"]);return o!=null&&m(t,["config"],nL(o,t)),t}function rL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],$e(n,i));const o=d(e,["config"]);return o!=null&&m(t,["config"],iL(o,t)),t}function oL(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function aL(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["weightedPrompts"],i)}return e}function lL(n){const e={},t=d(n,["media"]);if(t!=null){let h=NI(t);Array.isArray(h)&&(h=h.map(_=>Kf(_))),m(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&m(e,["audio"],Kf(MI(i)));const o=d(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&m(e,["video"],Kf(xI(a)));const u=d(n,["text"]);u!=null&&m(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function uL(n){const e={},t=d(n,["media"]);if(t!=null){let h=NI(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&m(e,["audio"],MI(i));const o=d(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&m(e,["video"],xI(a));const u=d(n,["text"]);u!=null&&m(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function cL(n){const e={},t=d(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const o=d(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=d(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=d(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],mL(u));const f=d(n,["goAway"]);f!=null&&m(e,["goAway"],f);const p=d(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&m(e,["voiceActivityDetectionSignal"],h),e}function fL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],Xk(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],Wk(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],Kf(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function dL(n){const e={},t=d(n,["handle"]);if(t!=null&&m(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],eL(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],tL(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function pL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>Zk(E))),m(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function mL(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const o=d(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=d(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const p=d(n,["promptTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(V=>V)),m(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(V=>V)),m(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(V=>V)),m(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(V=>V)),m(e,["toolUsePromptTokensDetails"],w)}const E=d(n,["trafficType"]);return E!=null&&m(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gL(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yL(n){const e={},t=d(n,["content"]);t!=null&&m(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],_L(i));const o=d(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&m(e,["index"],p);const h=d(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>w)),m(e,["safetyRatings"],E)}const T=d(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function _L(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function vL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let a=Wn(o);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["contents"],a)}return t}function TL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function EL(n){const e={},t=d(n,["values"]);t!=null&&m(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&m(e,["statistics"],SL(i)),e}function SL(n){const e={},t=d(n,["truncated"]);t!=null&&m(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function Gd(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>MU(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function AL(n){const e={},t=d(n,["controlType"]);t!=null&&m(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function CL(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function IL(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],an(i));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>KI(f))),m(e,["tools"],u)}const a=d(n,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],gU(a)),t}function wL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>Gd(f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&CL(a),t}function RL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>f)),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&IL(a,t),t}function bL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const o=d(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function NL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function xL(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],$e(n,i)),t}function ML(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],$e(n,i)),t}function DL(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function PL(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function VL(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const E=d(n,["includeRaiReason"]);e!==void 0&&E!=null&&m(e,["parameters","includeRaiReason"],E);const w=d(n,["language"]);e!==void 0&&w!=null&&m(e,["parameters","language"],w);const V=d(n,["outputMimeType"]);e!==void 0&&V!=null&&m(e,["parameters","outputOptions","mimeType"],V);const k=d(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","compressionQuality"],k);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&m(e,["parameters","addWatermark"],P);const K=d(n,["labels"]);e!==void 0&&K!=null&&m(e,["labels"],K);const Z=d(n,["editMode"]);e!==void 0&&Z!=null&&m(e,["parameters","editMode"],Z);const Q=d(n,["baseSteps"]);return e!==void 0&&Q!=null&&m(e,["parameters","editConfig","baseSteps"],Q),t}function kL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>UU(p))),m(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&VL(u,t),t}function LL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>zd(a))),m(e,["generatedImages"],o)}return e}function UL(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function OL(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=d(n,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),t}function FL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let f=sy(n,o);Array.isArray(f)&&(f=f.map(p=>p)),m(t,["requests[]","content"],f)}const a=d(e,["config"]);a!=null&&UL(a,t);const u=d(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],$e(n,u)),t}function qL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let u=sy(n,o);Array.isArray(u)&&(u=u.map(f=>f)),m(t,["instances[]","content"],u)}const a=d(e,["config"]);return a!=null&&OL(a,t),t}function BL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const o=d(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function HL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>EL(u))),m(e,["embeddings"],a)}const o=d(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function GL(n){const e={},t=d(n,["endpoint"]);t!=null&&m(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function zL(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function KL(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YL(n){const e={},t=d(n,["mode"]);t!=null&&m(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function JL(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function $L(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Gd(an(o)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const E=d(e,["logprobs"]);E!=null&&m(i,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&m(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&m(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const K=d(e,["responseSchema"]);K!=null&&m(i,["responseSchema"],ry(K));const Z=d(e,["responseJsonSchema"]);if(Z!=null&&m(i,["responseJsonSchema"],Z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=d(e,["safetySettings"]);if(t!==void 0&&Q!=null){let N=Q;Array.isArray(N)&&(N=N.map(Te=>OU(Te))),m(t,["safetySettings"],N)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let N=$a(oe);Array.isArray(N)&&(N=N.map(Te=>KU(Ja(Te)))),m(t,["tools"],N)}const le=d(e,["toolConfig"]);if(t!==void 0&&le!=null&&m(t,["toolConfig"],zU(le)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=d(e,["cachedContent"]);t!==void 0&&re!=null&&m(t,["cachedContent"],bs(n,re));const M=d(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&m(i,["mediaResolution"],D);const x=d(e,["speechConfig"]);if(x!=null&&m(i,["speechConfig"],oy(x)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&m(i,["thinkingConfig"],O);const U=d(e,["imageConfig"]);U!=null&&m(i,["imageConfig"],EU(U));const B=d(e,["enableEnhancedCivicAnswers"]);return B!=null&&m(i,["enableEnhancedCivicAnswers"],B),i}function QL(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],an(o));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const E=d(e,["logprobs"]);E!=null&&m(i,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&m(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&m(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const K=d(e,["responseSchema"]);K!=null&&m(i,["responseSchema"],ry(K));const Z=d(e,["responseJsonSchema"]);Z!=null&&m(i,["responseJsonSchema"],Z);const Q=d(e,["routingConfig"]);Q!=null&&m(i,["routingConfig"],Q);const oe=d(e,["modelSelectionConfig"]);oe!=null&&m(i,["modelConfig"],oe);const le=d(e,["safetySettings"]);if(t!==void 0&&le!=null){let J=le;Array.isArray(J)&&(J=J.map(ae=>ae)),m(t,["safetySettings"],J)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let J=$a(re);Array.isArray(J)&&(J=J.map(ae=>KI(Ja(ae)))),m(t,["tools"],J)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&m(t,["toolConfig"],M);const D=d(e,["labels"]);t!==void 0&&D!=null&&m(t,["labels"],D);const x=d(e,["cachedContent"]);t!==void 0&&x!=null&&m(t,["cachedContent"],bs(n,x));const O=d(e,["responseModalities"]);O!=null&&m(i,["responseModalities"],O);const U=d(e,["mediaResolution"]);U!=null&&m(i,["mediaResolution"],U);const B=d(e,["speechConfig"]);B!=null&&m(i,["speechConfig"],oy(B));const N=d(e,["audioTimestamp"]);N!=null&&m(i,["audioTimestamp"],N);const Te=d(e,["thinkingConfig"]);Te!=null&&m(i,["thinkingConfig"],Te);const De=d(e,["imageConfig"]);if(De!=null&&m(i,["imageConfig"],SU(De)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function kS(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>Gd(f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["generationConfig"],$L(n,a,t)),t}function LS(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>f)),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["generationConfig"],QL(n,a,t)),t}function US(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>yL(h))),m(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function OS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=d(n,["createTime"]);o!=null&&m(e,["createTime"],o);const a=d(n,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=d(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&m(e,["responseId"],f);const p=d(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function XL(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=d(n,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const E=d(n,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&m(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function WL(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const E=d(n,["includeRaiReason"]);e!==void 0&&E!=null&&m(e,["parameters","includeRaiReason"],E);const w=d(n,["language"]);e!==void 0&&w!=null&&m(e,["parameters","language"],w);const V=d(n,["outputMimeType"]);e!==void 0&&V!=null&&m(e,["parameters","outputOptions","mimeType"],V);const k=d(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","compressionQuality"],k);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&m(e,["parameters","addWatermark"],P);const K=d(n,["labels"]);e!==void 0&&K!=null&&m(e,["labels"],K);const Z=d(n,["imageSize"]);e!==void 0&&Z!=null&&m(e,["parameters","sampleImageSize"],Z);const Q=d(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&m(e,["parameters","enhancePrompt"],Q),t}function ZL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&XL(a,t),t}function jL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&WL(a,t),t}function eU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>dU(u))),m(e,["generatedImages"],a)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],GI(o)),e}function tU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>zd(u))),m(e,["generatedImages"],a)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],zI(o)),e}function nU(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=d(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],Kd(_));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let E=T;Array.isArray(E)&&(E=E.map(w=>s4(w))),m(e,["instances[0]","referenceImages"],E)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function iU(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=d(n,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=d(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=d(n,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&m(e,["parameters","pubsubTopic"],T);const E=d(n,["negativePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","negativePrompt"],E);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w);const V=d(n,["generateAudio"]);e!==void 0&&V!=null&&m(e,["parameters","generateAudio"],V);const k=d(n,["lastFrame"]);e!==void 0&&k!=null&&m(e,["instances[0]","lastFrame"],gi(k));const P=d(n,["referenceImages"]);if(e!==void 0&&P!=null){let Q=P;Array.isArray(Q)&&(Q=Q.map(oe=>r4(oe))),m(e,["instances[0]","referenceImages"],Q)}const K=d(n,["mask"]);e!==void 0&&K!=null&&m(e,["instances[0]","mask"],i4(K));const Z=d(n,["compressionQuality"]);return e!==void 0&&Z!=null&&m(e,["parameters","compressionQuality"],Z),t}function sU(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],lU(u)),e}function rU(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],uU(u)),e}function oU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&m(t,["instances[0]","image"],Kd(a));const u=d(e,["video"]);u!=null&&m(t,["instances[0]","video"],YI(u));const f=d(e,["source"]);f!=null&&cU(f,t);const p=d(e,["config"]);return p!=null&&nU(p,t),t}function aU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&m(t,["instances[0]","image"],gi(a));const u=d(e,["video"]);u!=null&&m(t,["instances[0]","video"],JI(u));const f=d(e,["source"]);f!=null&&fU(f,t);const p=d(e,["config"]);return p!=null&&iU(p,t),t}function lU(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>pU(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function uU(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>mU(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function cU(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Kd(o));const a=d(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],YI(a)),t}function fU(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],gi(o));const a=d(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],JI(a)),t}function dU(n){const e={},t=d(n,["_self"]);t!=null&&m(e,["image"],AU(t));const i=d(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=d(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],GI(o)),e}function zd(n){const e={},t=d(n,["_self"]);t!=null&&m(e,["image"],HI(t));const i=d(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=d(n,["_self"]);o!=null&&m(e,["safetyAttributes"],zI(o));const a=d(n,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function hU(n){const e={},t=d(n,["_self"]);t!=null&&m(e,["mask"],HI(t));const i=d(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function pU(n){const e={},t=d(n,["video"]);return t!=null&&m(e,["video"],t4(t)),e}function mU(n){const e={},t=d(n,["_self"]);return t!=null&&m(e,["video"],n4(t)),e}function gU(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const E=d(n,["responseLogprobs"]);E!=null&&m(e,["responseLogprobs"],E);const w=d(n,["responseMimeType"]);w!=null&&m(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&m(e,["responseModalities"],V);const k=d(n,["responseSchema"]);k!=null&&m(e,["responseSchema"],k);const P=d(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const K=d(n,["seed"]);K!=null&&m(e,["seed"],K);const Z=d(n,["speechConfig"]);Z!=null&&m(e,["speechConfig"],Z);const Q=d(n,["stopSequences"]);Q!=null&&m(e,["stopSequences"],Q);const oe=d(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const le=d(n,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const re=d(n,["topK"]);re!=null&&m(e,["topK"],re);const M=d(n,["topP"]);if(M!=null&&m(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function yU(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],$e(n,i)),t}function _U(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],$e(n,i)),t}function vU(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function TU(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function EU(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function SU(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&m(e,["imageSize"],i);const o=d(n,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const a=d(n,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function AU(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],xr(t));const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function HI(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],xr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Kd(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],xr(t));const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gi(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],xr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function CU(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],kI(n,f)),i}function IU(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],kI(n,f)),i}function wU(n,e){const t={},i=d(e,["config"]);return i!=null&&CU(n,i,t),t}function RU(n,e){const t={},i=d(e,["config"]);return i!=null&&IU(n,i,t),t}function bU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let a=LI(o);Array.isArray(a)&&(a=a.map(u=>Jm(u))),m(e,["models"],a)}return e}function NU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let a=LI(o);Array.isArray(a)&&(a=a.map(u=>$m(u))),m(e,["models"],a)}return e}function xU(n){const e={},t=d(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const o=d(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Jm(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);o!=null&&m(e,["description"],o);const a=d(n,["version"]);a!=null&&m(e,["version"],a);const u=d(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],YU(u));const f=d(n,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const p=d(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=d(n,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&m(e,["temperature"],_);const T=d(n,["maxTemperature"]);T!=null&&m(e,["maxTemperature"],T);const E=d(n,["topP"]);E!=null&&m(e,["topP"],E);const w=d(n,["topK"]);w!=null&&m(e,["topK"],w);const V=d(n,["thinking"]);return V!=null&&m(e,["thinking"],V),e}function $m(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);o!=null&&m(e,["description"],o);const a=d(n,["versionId"]);a!=null&&m(e,["version"],a);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>GL(E))),m(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&m(e,["labels"],f);const p=d(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],JU(p));const h=d(n,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["checkpoints"],T)}return e}function MU(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],zL(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],KL(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],gL(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function DU(n){const e={},t=d(n,["productImage"]);return t!=null&&m(e,["image"],gi(t)),e}function PU(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=d(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const p=d(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T);const E=d(n,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const w=d(n,["labels"]);return e!==void 0&&w!=null&&m(e,["labels"],w),t}function VU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["source"]);o!=null&&LU(o,t);const a=d(e,["config"]);return a!=null&&PU(a,t),t}function kU(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>zd(o))),m(e,["generatedImages"],i)}return e}function LU(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],gi(o));const a=d(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>DU(f))),m(e,["instances[0]","productImages"],u)}return t}function UU(n){const e={},t=d(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],gi(t));const i=d(n,["referenceId"]);i!=null&&m(e,["referenceId"],i);const o=d(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=d(n,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],xU(a));const u=d(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],AL(u));const f=d(n,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const p=d(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function GI(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function zI(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function OU(n){const e={},t=d(n,["category"]);if(t!=null&&m(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function FU(n){const e={},t=d(n,["image"]);return t!=null&&m(e,["image"],gi(t)),e}function qU(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=d(n,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const p=d(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function BU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["source"]);o!=null&&GU(o,t);const a=d(e,["config"]);return a!=null&&qU(a,t),t}function HU(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>hU(o))),m(e,["generatedMasks"],i)}return e}function GU(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],gi(o));const a=d(n,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],FU(a)),t}function zU(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],YL(t));const i=d(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function KU(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],vU(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],TU(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function KI(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>JL(E))),m(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function YU(n){const e={},t=d(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function JU(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function $U(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function QU(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function XU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","name"],$e(n,i));const o=d(e,["config"]);return o!=null&&$U(o,t),t}function WU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["config"]);return o!=null&&QU(o,t),t}function ZU(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=d(n,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const p=d(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=d(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const E=d(n,["numberOfImages"]);e!==void 0&&E!=null&&m(e,["parameters","sampleCount"],E);const w=d(n,["mode"]);return e!==void 0&&w!=null&&m(e,["parameters","mode"],w),t}function jU(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],$e(n,i));const o=d(e,["image"]);o!=null&&m(t,["instances[0]","image"],gi(o));const a=d(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=d(e,["config"]);return u!=null&&ZU(u,t),t}function e4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>zd(a))),m(e,["generatedImages"],o)}return e}function t4(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],xr(i));const o=d(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function n4(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],xr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function i4(n){const e={},t=d(n,["image"]);t!=null&&m(e,["_self"],gi(t));const i=d(n,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function s4(n){const e={},t=d(n,["image"]);t!=null&&m(e,["image"],Kd(t));const i=d(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function r4(n){const e={},t=d(n,["image"]);t!=null&&m(e,["image"],gi(t));const i=d(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function YI(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&m(e,["encodedVideo"],xr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function JI(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],xr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o4(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function a4(n){const e={},t=d(n,["config"]);return t!=null&&o4(t,e),e}function l4(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function u4(n){const e={},t=d(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&l4(i,e),e}function c4(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function f4(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const o=d(n,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),t}function d4(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],p4(u)),e}function h4(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&m(e,["fileName"],i);const o=d(n,["config"]);return o!=null&&f4(o,e),e}function p4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function m4(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function g4(n){const e={},t=d(n,["config"]);return t!=null&&m4(t,e),e}function y4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function $I(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const o=d(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>p)),m(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function _4(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&$I(i,e),e}function v4(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T4="Content-Type",E4="X-Server-Timeout",S4="User-Agent",Qm="x-goog-api-client",A4="1.34.0",C4=`google-genai-sdk/${A4}`,I4="v1beta1",w4="v1beta";class R4{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:I4,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:w4,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&b4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await FS(o),new zm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await FS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return di(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield we(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const V=JSON.parse(T);if("error"in V){const k=JSON.parse(JSON.stringify(V.error)),P=k.status,K=k.code,Z=`got status: ${P}. ${JSON.stringify(V)}`;if(K>=400&&K<600)throw new Hd({message:Z,status:K})}}catch(V){if(V.name==="ApiError")throw V}u+=T;let E=-1,w=0;for(;;){E=-1,w=0;for(const P of p){const K=u.indexOf(P);K!==-1&&(E===-1||K<E)&&(E=K,w=P.length)}if(E===-1)break;const V=u.substring(0,E);u=u.substring(E+w);const k=V.trim();if(k.startsWith(f)){const P=k.substring(f.length).trim();try{const K=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield we(new zm(K))}catch(K){throw new Error(`exception parsing stream chunk ${P}. ${K}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=C4+" "+this.clientOptions.userAgentExtra;return e[S4]=t,e[Qm]=t,e[T4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(E4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const p={file:o},h=this.getFileName(e),_=de("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&$I(i,T);const E=await this.fetchUploadUrl(h,f,p,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var f;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function FS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Hd({message:o,status:t}):new Error(o)}}function b4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=f[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[p]=h)}return f}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N4="mcp_used/unknown";let x4=!1;function QI(n){for(const e of n)if(M4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return x4}function XI(n){var e;const t=(e=n[Qm])!==null&&e!==void 0?e:"";n[Qm]=(t+` ${N4}`).trimStart()}function M4(n){return n!==null&&typeof n=="object"&&n instanceof ly}function D4(n){return di(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield we(t.listTools({cursor:o}));for(const f of u.tools)yield yield we(f),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class ly{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new ly(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,p=(t=void 0,hi(D4(_))),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const T=o;u.push(T);const E=T.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),cV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function P4(n,e,t){const i=new nV;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class V4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=U4(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(Q=>{h=Q}),T=e.callbacks,E=function(){h({})},w=this.apiClient,V={onopen:E,onmessage:Q=>{P4(w,T.onmessage,Q)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Q){}},k=this.webSocketFactory.create(p,L4(u),V);k.connect(),await _;const Z={setup:{model:$e(this.apiClient,e.model)}};return k.send(JSON.stringify(Z)),new k4(k,this.apiClient)}}class k4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=aL(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=oL(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Sa.PLAY)}pause(){this.sendPlaybackControl(Sa.PAUSE)}stop(){this.sendPlaybackControl(Sa.STOP)}resetContext(){this.sendPlaybackControl(Sa.RESET_CONTEXT)}close(){this.conn.close()}}function L4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function U4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function F4(n,e,t){const i=new tV;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=cL(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class q4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new V4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&QI(e.config.tools)&&XI(T);const E=z4(T);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_);else{const x=this.apiClient.getApiKey();let O="BidiGenerateContent",U="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",U="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${O}?${U}=${x}`}let w=()=>{};const V=new Promise(x=>{w=x}),k=e.callbacks,P=function(){var x;(x=k==null?void 0:k.onopen)===null||x===void 0||x.call(k),w({})},K=this.apiClient,Z={onopen:P,onmessage:x=>{F4(K,k.onmessage,x)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(x){}},Q=this.webSocketFactory.create(_,G4(E),Z);Q.connect(),await V;let oe=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const x=this.apiClient.getProject(),O=this.apiClient.getLocation();oe=`projects/${x}/locations/${O}/`+oe}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hd.AUDIO]}:e.config.responseModalities=[hd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const re=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const x of re)if(this.isCallableTool(x)){const O=x;M.push(await O.tool())}else M.push(x);M.length>0&&(e.config.tools=M);const D={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=rL(this.apiClient,D):le=sL(this.apiClient,D),delete le.config,Q.send(JSON.stringify(le)),new H4(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const B4={turnComplete:!0};class H4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Wn(t.turns),e.isVertexAI()||(i=i.map(o=>Gd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(O4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},B4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:uL(e)}:t={realtimeInput:lL(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function G4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function z4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qS=10;function BS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Na(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Na(n){return"callTool"in n&&typeof n.callTool=="function"}function K4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Na(o)))!==null&&i!==void 0?i:!1}function HS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Na(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function GS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y4 extends Rs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!K4(t)||BS(t.config))return await this.generateContentInternal(p);const h=HS(t);if(h.length>0){const k=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let _,T;const E=Wn(p.contents),w=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:qS;let V=0;for(;V<w&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const k=_.candidates[0].content,P=[];for(const K of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Na(K)){const Q=await K.callTool(_.functionCalls);P.push(...Q)}V++,T={role:"user",parts:P},p.contents=Wn(p.contents),p.contents.push(k),p.contents.push(T),GS(p.config)&&(E.push(k),E.push(T))}return GS(p.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async t=>{var i,o,a,u,f;if(this.maybeMoveToResponseJsonSchem(t),BS(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const p=HS(t);if(p.length>0){const T=p.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Co(Cs.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Na(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&QI(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),XI(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Na(u)){const f=u,p=await f.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:qS;let u=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(h,_,T){return di(this,arguments,function*(){for(var E,w,V,k,P,K;f<a;){u&&(f++,u=!1);const le=yield we(h.processParamsMaybeAddMcpUsage(T)),re=yield we(h.generateContentStreamInternal(le)),M=[],D=[];try{for(var Z=!0,Q=(w=void 0,hi(re)),oe;oe=yield we(Q.next()),E=oe.done,!E;Z=!0){k=oe.value,Z=!1;const x=k;if(yield yield we(x),x.candidates&&(!((P=x.candidates[0])===null||P===void 0)&&P.content)){D.push(x.candidates[0].content);for(const O of(K=x.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(f<a&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(O.functionCall.name)){const U=yield we(_.get(O.functionCall.name).callTool([O.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(x){w={error:x}}finally{try{!Z&&!E&&(V=Q.return)&&(yield we(V.call(Q)))}finally{if(w)throw w.error}}if(M.length>0){u=!0;const x=new iu;x.candidates=[{content:{role:"user",parts:M}}],yield yield we(x);const O=[];O.push(...D),O.push({role:"user",parts:M});const U=Wn(T.contents).concat(O);T.contents=U}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=LS(this.apiClient,e);return f=de("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=OS(_),E=new iu;return Object.assign(E,T),E})}else{const h=kS(this.apiClient,e);return f=de("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=US(_),E=new iu;return Object.assign(E,T),E})}}async generateContentStreamInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=LS(this.apiClient,e);return f=de("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return di(this,arguments,function*(){var E,w,V,k;try{for(var P=!0,K=hi(T),Z;Z=yield we(K.next()),E=Z.done,!E;P=!0){k=Z.value,P=!1;const Q=k,oe=OS(yield we(Q.json()));oe.sdkHttpResponse={headers:Q.headers};const le=new iu;Object.assign(le,oe),yield yield we(le)}}catch(Q){w={error:Q}}finally{try{!P&&!E&&(V=K.return)&&(yield we(V.call(K)))}finally{if(w)throw w.error}}})})}else{const h=kS(this.apiClient,e);return f=de("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return di(this,arguments,function*(){var E,w,V,k;try{for(var P=!0,K=hi(T),Z;Z=yield we(K.next()),E=Z.done,!E;P=!0){k=Z.value,P=!1;const Q=k,oe=US(yield we(Q.json()));oe.sdkHttpResponse={headers:Q.headers};const le=new iu;Object.assign(le,oe),yield yield we(le)}}catch(Q){w={error:Q}}finally{try{!P&&!E&&(V=K.return)&&(yield we(V.call(K)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=qL(this.apiClient,e);return f=de("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=HL(_),E=new _S;return Object.assign(E,T),E})}else{const h=FL(this.apiClient,e);return f=de("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=BL(_),E=new _S;return Object.assign(E,T),E})}}async generateImagesInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=jL(this.apiClient,e);return f=de("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=tU(_),E=new vS;return Object.assign(E,T),E})}else{const h=ZL(this.apiClient,e);return f=de("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=eU(_),E=new vS;return Object.assign(E,T),E})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=kL(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=LL(p),_=new z2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=jU(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=e4(p),_=new K2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=VU(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=kU(p),_=new Y2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=BU(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=HU(p),_=new J2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=_U(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>$m(_))}else{const h=yU(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Jm(_))}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=RU(this.apiClient,e);return f=de("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=NU(_),E=new TS;return Object.assign(E,T),E})}else{const h=wU(this.apiClient,e);return f=de("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=bU(_),E=new TS;return Object.assign(E,T),E})}}async update(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=WU(this.apiClient,e);return f=de("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>$m(_))}else{const h=XU(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Jm(_))}}async delete(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=ML(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=PL(_),E=new ES;return Object.assign(E,T),E})}else{const h=xL(this.apiClient,e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=DL(_),E=new ES;return Object.assign(E,T),E})}}async countTokens(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=RL(this.apiClient,e);return f=de("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=NL(_),E=new SS;return Object.assign(E,T),E})}else{const h=wL(this.apiClient,e);return f=de("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=bL(_),E=new SS;return Object.assign(E,T),E})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=vL(this.apiClient,e);return a=de("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=TL(p),_=new $2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=aU(this.apiClient,e);return f=de("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=rU(_),E=new pd;return Object.assign(E,T),E})}else{const h=oU(this.apiClient,e);return f=de("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=sU(_),E=new pd;return Object.assign(E,T),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J4 extends Rs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=O2(e);return f=de("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=U2(e);return f=de("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=x2(e);return a=de("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $4(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Q4(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>sO(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function X4(n,e,t){const i={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=d(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=d(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&m(t,["bidiGenerateContentSetup"],iO(n,f));const p=d(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function W4(n,e){const t={},i=d(e,["config"]);return i!=null&&m(t,["config"],X4(n,i,t)),t}function Z4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function j4(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eO(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function tO(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function nO(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],ay(T));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],Q4(an(V)));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let re=$a(k);Array.isArray(re)&&(re=re.map(M=>oO(Ja(M)))),m(e,["setup","tools"],re)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],rO(P));const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&m(e,["setup","inputAudioTranscription"],K);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&m(e,["setup","outputAudioTranscription"],Z);const Q=d(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&m(e,["setup","realtimeInputConfig"],Q);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const le=d(n,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function iO(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],$e(n,i));const o=d(e,["config"]);return o!=null&&m(t,["config"],nO(o,t)),t}function sO(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],Z4(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],j4(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],$4(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function rO(n){const e={},t=d(n,["handle"]);if(t!=null&&m(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oO(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],eO(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],tO(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function lO(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=aO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class uO extends Rs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=W4(this.apiClient,e);a=de("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const p=lO(f,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cO(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function fO(n){const e={},t=d(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&cO(i,e),e}function dO(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function hO(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function pO(n){const e={},t=d(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&hO(i,e),e}function mO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gO extends Rs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Co(Cs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dO(e);return a=de("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fO(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pO(e);return a=de("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=mO(p),_=new Q2;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yO extends Rs{constructor(e,t=new gO(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Co(Cs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=a4(e);return a=de("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=c4(e);return a=de("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=u4(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=g4(e);return a=de("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=y4(p),_=new X2;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_4(e);return a=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=v4(p),_=new W2;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=h4(e);return a=de("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=d4(p),_=new ny;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return WI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const _O=()=>WI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Wm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zn extends Error{}class pn extends Zn{constructor(e,t,i,o){super(`${pn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Yd({message:i,cause:Wm(t)});const a=t;return e===400?new jI(e,a,i,o):e===401?new ew(e,a,i,o):e===403?new tw(e,a,i,o):e===404?new nw(e,a,i,o):e===409?new iw(e,a,i,o):e===422?new sw(e,a,i,o):e===429?new rw(e,a,i,o):e>=500?new ow(e,a,i,o):new pn(e,a,i,o)}}class Zm extends pn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yd extends pn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ZI extends Yd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class jI extends pn{}class ew extends pn{}class tw extends pn{}class nw extends pn{}class iw extends pn{}class sw extends pn{}class rw extends pn{}class ow extends pn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vO=/^[a-z][a-z0-9+.-]*:/i,TO=n=>vO.test(n);let jm=n=>(jm=Array.isArray,jm(n));const EO=jm;let SO=EO;const zS=SO;function AO(n){if(!n)return!0;for(const e in n)return!1;return!0}function CO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const IO=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zn(`${n} must be an integer`);if(e<0)throw new Zn(`${n} must be a positive integer`);return e},wO=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RO=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ta="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const NO=()=>{var n,e,t,i,o;const a=bO();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ta,"X-Stainless-OS":YS(Deno.build.os),"X-Stainless-Arch":KS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ta,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ta,"X-Stainless-OS":YS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":KS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=xO();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ta,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ta,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xO(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const KS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",YS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Nf;const MO=()=>Nf??(Nf=NO());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function aw(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function PO(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return aw({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function lw(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function VO(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kO=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function hm(n,e,t){return uw(),new File(n,e??"unknown_file",t)}function LO(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const UO=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",OO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&cw(n),FO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function qO(n,e,t){if(uw(),n=await n,OO(n))return n instanceof File?n:hm([await n.arrayBuffer()],n.name);if(FO(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),hm(await eg(o),e,t)}const i=await eg(n);if(e||(e=LO(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return hm(i,e,t)}async function eg(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(cw(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(UO(n))try{for(var f=!0,p=hi(n),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const _=o;u.push(...await eg(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${BO(n)}`)}return u}function BO(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fw{constructor(e){this._client=e}}fw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dw(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const JS=Object.freeze(Object.create(null)),HO=(n=dw)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,T,E)=>{var w,V,k;/[?#]/.test(T)&&(o=!0);const P=i[E];let K=(o?encodeURIComponent:n)(""+P);return E!==i.length&&(P==null||typeof P=="object"&&P.toString===((k=Object.getPrototypeOf((V=Object.getPrototypeOf((w=P.hasOwnProperty)!==null&&w!==void 0?w:JS))!==null&&V!==void 0?V:JS))===null||k===void 0?void 0:k.toString))&&(K=P+"",a.push({start:_.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(E===i.length?"":K)},""),f=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(f))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((E,w)=>{const V=" ".repeat(w.start-_),k="^".repeat(w.length);return _=w.start+w.length,E+V+k},"");throw new Zn(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u}),xf=HO(dw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hw extends fw{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=gd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Zn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Zn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xf`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(xf`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(xf`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,f=gd(a,["api_version"]);return this._client.get(xf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}hw._key=Object.freeze(["interactions"]);class pw extends hw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GO(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Mf;function uy(n){let e;return(Mf??(e=new globalThis.TextEncoder,Mf=e.encode.bind(e)))(n)}let Df;function $S(n){let e;return(Df??(e=new globalThis.TextDecoder,Df=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?uy(e):e;this.buffer=GO([this.buffer,t]);const i=[];let o;for(;(o=zO(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push($S(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=$S(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Jd.NEWLINE_CHARS=new Set([`
`,"\r"]);Jd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function zO(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function KO(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yd={off:0,error:200,warn:300,info:400,debug:500},QS=(n,e,t)=>{if(n){if(CO(yd,n))return n;hn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(yd))}`)}};function fu(){}function Pf(n,e,t){return!e||yd[n]>yd[t]?fu:e[n].bind(e)}const YO={error:fu,warn:fu,info:fu,debug:fu};let XS=new WeakMap;function hn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return YO;const o=XS.get(t);if(o&&o[0]===i)return o[1];const a={error:Pf("error",t,i),warn:Pf("warn",t,i),info:Pf("info",t,i),debug:Pf("debug",t,i)};return XS.set(t,[i,a]),a}const co=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Aa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?hn(i):console;function u(){return di(this,arguments,function*(){var p,h,_,T;if(o)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let E=!1;try{try{for(var w=!0,V=hi(JO(e,t)),k;k=yield we(V.next()),p=k.done,!p;w=!0){T=k.value,w=!1;const P=T;if(!E)if(P.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield we(JSON.parse(P.data))}catch(K){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),K}}}catch(P){h={error:P}}finally{try{!w&&!p&&(_=V.return)&&(yield we(_.call(V)))}finally{if(h)throw h.error}}E=!0}catch(P){if(Xm(P))return yield we(void 0);throw P}finally{E||t.abort()}})}return new Aa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return di(this,arguments,function*(){var p,h,_,T;const E=new Jd,w=lw(e);try{for(var V=!0,k=hi(w),P;P=yield we(k.next()),p=P.done,!p;V=!0){T=P.value,V=!1;const K=T;for(const Z of E.decode(K))yield yield we(Z)}}catch(K){h={error:K}}finally{try{!V&&!p&&(_=k.return)&&(yield we(_.call(k)))}finally{if(h)throw h.error}}for(const K of E.flush())yield yield we(K)})}function u(){return di(this,arguments,function*(){var p,h,_,T;if(o)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let E=!1;try{try{for(var w=!0,V=hi(a()),k;k=yield we(V.next()),p=k.done,!p;w=!0){T=k.value,w=!1;const P=T;E||P&&(yield yield we(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!w&&!p&&(_=V.return)&&(yield we(_.call(V)))}finally{if(h)throw h.error}}E=!0}catch(P){if(Xm(P))return yield we(void 0);throw P}finally{E||t.abort()}})}return new Aa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Aa(()=>o(e),this.controller,this.client),new Aa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return aw({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=uy(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function JO(n,e){return di(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zn("Attempted to iterate over a response with no body");const f=new QO,p=new Jd,h=lw(n.body);try{for(var _=!0,T=hi($O(h)),E;E=yield we(T.next()),i=E.done,!i;_=!0){u=E.value,_=!1;const w=u;for(const V of p.decode(w)){const k=f.decode(V);k&&(yield yield we(k))}}}catch(w){o={error:w}}finally{try{!_&&!i&&(a=T.return)&&(yield we(a.call(T)))}finally{if(o)throw o.error}}for(const w of p.flush()){const V=f.decode(w);V&&(yield yield we(V))}})}function $O(n){return di(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var f=!0,p=hi(n),h;h=yield we(p.next()),t=h.done,!t;f=!0){a=h.value,f=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?uy(_):_;let E=new Uint8Array(u.length+T.length);E.set(u),E.set(T,u.length),u=E;let w;for(;(w=KO(u))!==-1;)yield yield we(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!f&&!t&&(o=p.return)&&(yield we(o.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield we(u))})}class QO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=XO(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function XO(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WO(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return hn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Aa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return hn(n).debug(`[${i}] response parsed`,co({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cy extends Promise{constructor(e,t,i=WO){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new cy(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mw=Symbol("brand.privateNullableHeaders");function*ZO(n){if(!n)return;if(mw in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():zS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=zS(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,f])}}const su=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of ZO(i)){const f=a.toLowerCase();o.has(f)||(e.delete(a),o.add(f)),u===null?(e.delete(a),t.add(f)):(e.append(a,u),t.delete(f))}}return{[mw]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pm=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=C2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gw;class $d{constructor(e){var t,i,o,a,u,f,p,{baseURL:h=pm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=pm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,E=gd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},E),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:$d.DEFAULT_TIMEOUT,this.logger=(o=w.logger)!==null&&o!==void 0?o:console;const V="warn";this.logLevel=V,this.logLevel=(u=(a=QS(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:QS(pm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=w.fetch)!==null&&p!==void 0?p:DO(),this.encoder=kO,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=su([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return su([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return su([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Zn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ta}`}defaultIdempotencyKey(){return`stainless-node-retry-${_O()}`}makeStatusError(e,t,i,o){return pn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=TO(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return AO(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new cy(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const f=await e,p=(o=f.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=p),await this.prepareOptions(f);const{req:h,url:_,timeout:T}=await this.buildRequest(f,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:f});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(hn(this).debug(`[${E}] sending request`,co({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new Zm;const k=new AbortController,P=await this.fetchWithTimeout(_,h,T,k).catch(Wm),K=Date.now();if(P instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Zm;const oe=Xm(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return hn(this).info(`[${E}] connection ${oe?"timed out":"failed"} - ${Q}`),hn(this).debug(`[${E}] connection ${oe?"timed out":"failed"} (${Q})`,co({retryOfRequestLogID:i,url:_,durationMs:K-V,message:P.message})),this.retryRequest(f,t,i??E);throw hn(this).info(`[${E}] connection ${oe?"timed out":"failed"} - error; no more retries left`),hn(this).debug(`[${E}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,co({retryOfRequestLogID:i,url:_,durationMs:K-V,message:P.message})),oe?new ZI:new Yd({cause:P})}const Z=`[${E}${w}] ${h.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${K-V}ms`;if(!P.ok){const Q=await this.shouldRetry(P);if(t&&Q){const x=`retrying, ${t} attempts remaining`;return await VO(P.body),hn(this).info(`${Z} - ${x}`),hn(this).debug(`[${E}] response error (${x})`,co({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:K-V})),this.retryRequest(f,t,i??E,P.headers)}const oe=Q?"error; no more retries left":"error; not retryable";hn(this).info(`${Z} - ${oe}`);const le=await P.text().catch(x=>Wm(x).message),re=wO(le),M=re?void 0:le;throw hn(this).debug(`[${E}] response error (${oe})`,co({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:M,durationMs:Date.now()-V})),this.makeStatusError(P.status,re,M,P.headers)}return hn(this).info(Z),hn(this).debug(`[${E}] response start`,co({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:K-V})),{response:P,options:f,controller:k,requestLogID:E,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:f}=a,p=gd(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),p);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const f=o==null?void 0:o.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const p=o==null?void 0:o.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await RO(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:f,path:p,query:h,defaultBaseURL:_}=u,T=this.buildURL(p,h,_);"timeout"in u&&IO("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:E,body:w}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:f,bodyHeaders:E,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=su([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MO()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=su([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:PO(e)}:this.encoder({body:e,headers:i})}}$d.DEFAULT_TIMEOUT=6e4;class Yt extends $d{constructor(){super(...arguments),this.interactions=new pw(this)}}gw=Yt;Yt.GeminiNextGenAPIClient=gw;Yt.GeminiNextGenAPIClientError=Zn;Yt.APIError=pn;Yt.APIConnectionError=Yd;Yt.APIConnectionTimeoutError=ZI;Yt.APIUserAbortError=Zm;Yt.NotFoundError=nw;Yt.ConflictError=iw;Yt.RateLimitError=rw;Yt.BadRequestError=jI;Yt.AuthenticationError=ew;Yt.InternalServerError=ow;Yt.PermissionDeniedError=tw;Yt.UnprocessableEntityError=sw;Yt.toFile=qO;Yt.Interactions=pw;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jO(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function e3(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function t3(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function n3(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function i3(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function s3(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec"],WS(w))}else if(o==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec"],WS(w))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=d(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let p=d(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(p==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(_==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const E=d(n,["beta"]);return e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),i}function r3(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&g3(a);const u=d(n,["config"]);return u!=null&&i3(u,t),t}function o3(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&y3(a,t,e);const u=d(n,["config"]);return u!=null&&s3(u,t,e),t}function a3(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function l3(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function u3(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function c3(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function f3(n,e){const t={},i=d(n,["config"]);return i!=null&&u3(i,t),t}function d3(n,e){const t={},i=d(n,["config"]);return i!=null&&c3(i,t),t}function h3(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=d(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>yw(f))),m(t,["tuningJobs"],u)}return t}function p3(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=d(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>tg(f))),m(t,["tuningJobs"],u)}return t}function m3(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["model"],i);const o=d(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function g3(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["examples","examples"],o)}return t}function y3(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=d(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function yw(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&m(t,["name"],o);const a=d(n,["state"]);a!=null&&m(t,["state"],PI(a));const u=d(n,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&m(t,["startTime"],f);const p=d(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=d(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&m(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const E=d(n,["_self"]);return E!=null&&m(t,["tunedModel"],m3(E)),t}function tg(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&m(t,["name"],o);const a=d(n,["state"]);a!=null&&m(t,["state"],PI(a));const u=d(n,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&m(t,["startTime"],f);const p=d(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=d(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&m(t,["error"],_);const T=d(n,["description"]);T!=null&&m(t,["description"],T);const E=d(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const w=d(n,["tunedModel"]);w!=null&&m(t,["tunedModel"],w);const V=d(n,["preTunedModel"]);V!=null&&m(t,["preTunedModel"],V);const k=d(n,["supervisedTuningSpec"]);k!=null&&m(t,["supervisedTuningSpec"],k);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&m(t,["preferenceOptimizationSpec"],P);const K=d(n,["tuningDataStats"]);K!=null&&m(t,["tuningDataStats"],K);const Z=d(n,["encryptionSpec"]);Z!=null&&m(t,["encryptionSpec"],Z);const Q=d(n,["partnerModelTuningSpec"]);Q!=null&&m(t,["partnerModelTuningSpec"],Q);const oe=d(n,["customBaseModel"]);oe!=null&&m(t,["customBaseModel"],oe);const le=d(n,["experiment"]);le!=null&&m(t,["experiment"],le);const re=d(n,["labels"]);re!=null&&m(t,["labels"],re);const M=d(n,["outputUri"]);M!=null&&m(t,["outputUri"],M);const D=d(n,["pipelineJob"]);D!=null&&m(t,["pipelineJob"],D);const x=d(n,["serviceAccount"]);x!=null&&m(t,["serviceAccount"],x);const O=d(n,["tunedModelDisplayName"]);O!=null&&m(t,["tunedModelDisplayName"],O);const U=d(n,["veoTuningSpec"]);return U!=null&&m(t,["veoTuningSpec"],U),t}function _3(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&m(t,["name"],o);const a=d(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=d(n,["done"]);u!=null&&m(t,["done"],u);const f=d(n,["error"]);return f!=null&&m(t,["error"],f),t}function WS(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v3 extends Rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(Cs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Gm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=l3(e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>tg(_))}else{const h=a3(e);return f=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>yw(_))}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=d3(e);return f=de("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=p3(_),E=new AS;return Object.assign(E,T),E})}else{const h=f3(e);return f=de("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=h3(_),E=new AS;return Object.assign(E,T),E})}}async cancel(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=e3(e);return f=de("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=n3(_),E=new CS;return Object.assign(E,T),E})}else{const h=jO(e);return f=de("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=t3(_),E=new CS;return Object.assign(E,T),E})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=o3(e,e);return a=de("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>tg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=r3(e);return a=de("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>_3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const E3=1024*1024*8,S3=3,A3=1e3,C3=2,_d="x-goog-upload-status";async function I3(n,e,t){var i;const o=await _w(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[_d])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function w3(n,e,t){var i;const o=await _w(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[_d])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=RI(a),f=new iy;return Object.assign(f,u),f}async function _w(n,e,t){var i,o;let a=0,u=0,f=new zm(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(E3,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let T=0,E=A3;for(;T<S3&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[_d]));)T++,await b3(E),E=E*C3;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[_d])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function R3(n){return{size:n.size,type:n.type}}function b3(n){return new Promise(e=>setTimeout(e,n))}class N3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await I3(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await w3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await R3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x3{create(e,t,i){return new M3(e,t,i)}}class M3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZS="x-goog-api-key";class D3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(ZS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ZS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P3="gl-node/";class Hu{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=b2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new D3(this.apiKey);this.apiClient=new R4({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:P3+"web",uploader:new N3,downloader:new T3}),this.models=new Y4(this.apiClient),this.live=new q4(this.apiClient,o,new x3),this.batches=new ik(this.apiClient),this.chats=new Ok(this.models,this.apiClient),this.caches=new kk(this.apiClient),this.files=new $k(this.apiClient),this.operations=new J4(this.apiClient),this.authTokens=new uO(this.apiClient),this.tunings=new v3(this.apiClient),this.fileSearchStores=new yO(this.apiClient)}}const V3=async(n,e)=>{try{const o=(await new Hu({apiKey:void 0}).models.generateContent({model:"gemini-3-flash-preview",contents:`
        Context of conversation: ${n}
        Last message: "${e}"
        Based on the context and the last message, suggest 3 short, friendly, and natural-sounding replies.
      `,config:{responseMimeType:"application/json",responseSchema:{type:qi.ARRAY,items:{type:qi.STRING}}}})).text||"[]";return JSON.parse(o)}catch(t){return console.error("Gemini suggestion error:",t),["Hey there!","How's it going?","Good to see you!"]}},k3=async n=>{try{return(await new Hu({apiKey:void 0}).models.generateContent({model:"gemini-3-flash-preview",contents:`Summarize the following conversation in one short sentence: 
${n.join(`
`)}`})).text||"No summary available."}catch{return"Could not generate summary."}},L3=({currentUser:n,targetId:e})=>{const{t,isRTL:i}=Bu(),[o,a]=he.useState([]),[u,f]=he.useState(""),[p,h]=he.useState([]),[_,T]=he.useState(!1),[E,w]=he.useState(null),[V,k]=he.useState(null),[P,K]=he.useState(!1),[Z,Q]=he.useState(null),oe=he.useRef([]),le=he.useRef(null),re=he.useRef(null);he.useEffect(()=>{ft.getUser(e).then(k);const N=ft.subscribeToMessages(n.id,e,Te=>{a(Te),ft.markMessagesAsRead(n.id,e)});return ft.markMessagesAsRead(n.id,e),N},[n.id,e]),he.useEffect(()=>{const N=o[o.length-1];N&&N.senderId===e&&N.text?U(N.text):h([]),re.current&&(re.current.scrollTop=re.current.scrollHeight)},[o,e]);const M=async(N,Te,De,J)=>{N&&N.preventDefault();const ae=Te||u;!ae.trim()&&!De&&!J||(await ft.sendMessage(n.id,e,ae||void 0,De,J),f(""),h([]))},D=N=>{var De;const Te=(De=N.target.files)==null?void 0:De[0];if(Te){const J=new FileReader;J.onloadend=()=>M(void 0,void 0,J.result),J.readAsDataURL(Te)}},x=async()=>{try{const N=await navigator.mediaDevices.getUserMedia({audio:!0}),Te=new MediaRecorder(N);oe.current=[],Te.ondataavailable=De=>{De.data.size>0&&oe.current.push(De.data)},Te.onstop=async()=>{const De=new Blob(oe.current,{type:"audio/webm"}),J=new FileReader;J.onloadend=()=>M(void 0,void 0,void 0,J.result),J.readAsDataURL(De),N.getTracks().forEach(ae=>ae.stop())},Te.start(),Q(Te),K(!0)}catch{alert("Microphone access denied.")}},O=()=>{Z&&(Z.stop(),K(!1),Q(null))},U=async N=>{T(!0);const Te=o.slice(-5).filter(J=>J.text).map(J=>J.text).join(". "),De=await V3(Te,N);h(De),T(!1)},B=async()=>{const N=o.slice(-10).filter(De=>De.text).map(De=>`${De.senderId===n.id?"Me":V==null?void 0:V.name}: ${De.text}`);if(N.length===0)return;T(!0);const Te=await k3(N);w(Te),T(!1)};return V?I.jsxs("div",{className:"flex flex-col h-full w-full animate-fade-in bg-white",dir:i?"rtl":"ltr",children:[I.jsxs("div",{className:"px-6 py-3 border-b border-gray-50 flex items-center justify-between glass sticky top-0 z-10",children:[I.jsxs("div",{className:"flex items-center space-x-3",children:[I.jsx("img",{src:V.avatar,className:"w-10 h-10 rounded-full border border-gray-100",alt:""}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm font-bold text-gray-900 tracking-tight",children:V.name}),I.jsxs("div",{className:"flex items-center space-x-1",children:[I.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),I.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Online"})]})]})]}),I.jsx("button",{onClick:B,className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",title:t("summarize"),children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),E&&I.jsxs("div",{className:"m-4 p-4 bg-gray-900 text-white rounded-2xl flex items-center justify-between shadow-lg",children:[I.jsxs("p",{className:"text-[11px] font-medium leading-relaxed italic",children:['"',E,'"']}),I.jsx("button",{onClick:()=>w(null),className:"ml-4 p-1 hover:bg-white/10 rounded-full",children:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M6 18L18 6M6 6l12 12"})})})]}),I.jsx("div",{ref:re,className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar bg-gray-50/30",children:o.map(N=>I.jsx("div",{className:`flex ${N.senderId===n.id?"justify-end":"justify-start"}`,children:I.jsxs("div",{className:`max-w-[75%] px-4 py-2.5 rounded-2xl text-[13px] leading-relaxed ${N.senderId===n.id?"bg-indigo-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none shadow-sm"}`,children:[N.image&&I.jsx("img",{src:N.image,className:"rounded-xl mb-2 max-h-60 object-cover",alt:""}),N.audio&&I.jsx("audio",{src:N.audio,controls:!0,className:"h-8 mb-1 scale-90"}),N.text&&I.jsx("div",{className:"font-medium",children:N.text}),I.jsx("div",{className:"text-[9px] mt-1 font-bold uppercase tracking-tighter opacity-60",children:new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},N.id))}),I.jsxs("div",{className:"p-4 bg-white border-t border-gray-50",children:[I.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:p.map((N,Te)=>I.jsx("button",{onClick:()=>M(void 0,N),className:"px-3 py-1 bg-gray-50 border border-gray-100 rounded-full text-[10px] font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:N},Te))}),I.jsxs("form",{onSubmit:M,className:"flex items-end space-x-2",children:[I.jsx("button",{type:"button",onClick:()=>{var N;return(N=le.current)==null?void 0:N.click()},className:"p-2.5 text-gray-400 hover:text-indigo-600 transition-colors",children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),I.jsx("input",{type:"file",ref:le,onChange:D,className:"hidden",accept:"image/*"}),I.jsxs("div",{className:"flex-1 relative",children:[I.jsx("input",{value:u,onChange:N=>f(N.target.value),placeholder:t("type_message"),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-full focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all text-xs"}),_&&I.jsx("div",{className:"absolute right-4 top-3 animate-spin h-3 w-3 border border-indigo-600 border-t-transparent rounded-full"})]}),I.jsx("button",{type:"button",onMouseDown:x,onMouseUp:O,className:`p-2.5 rounded-full transition-all ${P?"bg-red-50 text-red-600 animate-pulse":"text-gray-400 hover:text-indigo-600"}`,children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),I.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-3 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-30 disabled:shadow-none",children:I.jsx("svg",{className:"w-4 h-4 transform rotate-45",fill:"currentColor",viewBox:"0 0 20 20",children:I.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]}):null},U3=({currentUser:n,onAddFriend:e})=>{const[t,i]=he.useState(""),[o,a]=he.useState([]),[u,f]=he.useState(!1);he.useEffect(()=>{const _=setTimeout(()=>{p()},300);return()=>clearTimeout(_)},[t]);const p=async()=>{f(!0);const _=await ft.searchUsers(n.id,t);a(_),f(!1)},h=_=>n.friends.includes(_.id)?{text:"Friends",disabled:!0,className:"bg-green-100 text-green-700 border border-green-200"}:n.sentRequests.includes(_.id)?{text:"Sent",disabled:!0,className:"bg-gray-100 text-gray-500 border border-gray-200"}:n.receivedRequests.includes(_.id)?{text:"Action Needed",disabled:!0,className:"bg-amber-100 text-amber-700 border border-amber-200"}:{text:"Connect",disabled:!1,className:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-lg"};return I.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[I.jsxs("div",{className:"p-6",children:[I.jsx("h2",{className:"text-2xl font-black text-indigo-900 tracking-tighter uppercase",children:"Discovery"}),I.jsx("p",{className:"text-xs text-gray-400 mt-1 font-bold uppercase tracking-widest",children:"Global Directory"}),I.jsxs("div",{className:"mt-6 relative",children:[I.jsx("input",{type:"text",value:t,onChange:_=>i(_.target.value),placeholder:"Name or phone number...",className:"w-full pl-11 pr-4 py-4 bg-white border border-gray-100 rounded-2xl focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm shadow-sm"}),I.jsx("div",{className:"absolute left-4 top-4.5",children:u?I.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-indigo-600 border-t-transparent rounded-full"}):I.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),I.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6 custom-scrollbar",children:I.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.length===0&&!u?I.jsxs("div",{className:"py-20 text-center text-gray-400",children:[I.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full mx-auto mb-6 flex items-center justify-center border-2 border-dashed border-gray-200",children:I.jsx("svg",{className:"w-10 h-10 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),I.jsx("p",{className:"text-sm font-bold uppercase tracking-widest opacity-50",children:"No explorers found"}),I.jsx("p",{className:"text-[10px] mt-1 italic",children:"Try searching for a phone number or full name"})]}):o.map(_=>{const T=h(_);return I.jsxs("div",{className:"p-4 bg-white rounded-3xl border border-gray-50 shadow-sm flex items-center justify-between hover:shadow-xl hover:scale-[1.02] transition-all animate-fade-in group",children:[I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("img",{src:_.avatar,className:"w-14 h-14 rounded-2xl border-2 border-indigo-50 shadow-sm transition-transform group-hover:rotate-3",alt:""}),I.jsxs("div",{className:"min-w-0",children:[I.jsx("h4",{className:"text-sm font-black text-gray-900 truncate tracking-tight",children:_.name}),I.jsx("p",{className:"text-[10px] text-indigo-500 font-black uppercase tracking-widest mt-0.5",children:_.showPhone?_.phone:"Phone Private"}),I.jsx("p",{className:"text-[10px] text-gray-400 font-medium truncate mt-1 italic",children:_.bio||"Available"})]})]}),I.jsx("button",{disabled:T.disabled,onClick:()=>e(_.id),className:`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-sm active:scale-90 ${T.className}`,children:T.text})]},_.id)})})})]})},O3=({user:n})=>{const{t:e,setLanguage:t,language:i,isRTL:o}=Bu(),[a,u]=he.useState(n.name),[f,p]=he.useState(n.avatar),[h,_]=he.useState(n.bio),[T,E]=he.useState(n.showPhone??!0),[w,V]=he.useState(n.language||"en"),[k,P]=he.useState(!1),[K,Z]=he.useState(null),Q=he.useRef(null),oe=async re=>{re.preventDefault(),P(!0),Z(null);try{await ft.updateProfile(n.id,{name:a,avatar:f,bio:h,showPhone:T,language:w}),t(w),Z({type:"success",text:e("success_profile")})}catch{Z({type:"error",text:e("error_profile")})}finally{P(!1)}},le=re=>{var D;const M=(D=re.target.files)==null?void 0:D[0];if(M){if(M.size>1024*1024){alert("Image is too large. Please select an image smaller than 1MB.");return}const x=new FileReader;x.onloadend=()=>{p(x.result)},x.readAsDataURL(M)}};return I.jsxs("div",{className:"flex flex-col h-full animate-fade-in",dir:o?"rtl":"ltr",children:[I.jsxs("div",{className:"p-6",children:[I.jsx("h2",{className:"text-2xl font-black text-indigo-900 tracking-tighter uppercase",children:e("settings")}),I.jsx("p",{className:"text-xs text-gray-400 mt-1 font-bold uppercase tracking-widest",children:e("language_desc")})]}),I.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:I.jsxs("div",{className:"bg-white rounded-[3rem] border border-gray-100 p-8 shadow-sm",children:[I.jsxs("div",{className:"flex flex-col items-center mb-10",children:[I.jsxs("div",{onClick:()=>{var re;return(re=Q.current)==null?void 0:re.click()},className:"relative group cursor-pointer",children:[I.jsx("img",{src:f,className:"w-32 h-32 rounded-[2.5rem] border-4 border-indigo-50 shadow-xl object-cover transition-transform group-hover:scale-[1.02]",alt:"Profile"}),I.jsx("div",{className:"absolute inset-0 bg-indigo-900/40 rounded-[2.5rem] opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all backdrop-blur-[2px]",children:I.jsxs("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),I.jsx("input",{type:"file",ref:Q,onChange:le,className:"hidden",accept:"image/*"}),I.jsxs("div",{className:"mt-4 text-center",children:[I.jsx("p",{className:"text-sm font-black text-gray-800 tracking-tight",children:n.phone}),I.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:n.email})]})]}),I.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1",children:e("display_name")}),I.jsx("input",{type:"text",value:a,onChange:re=>u(re.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-2xl focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm font-semibold",required:!0})]}),I.jsxs("div",{className:"bg-slate-50 p-5 rounded-[2rem] border border-slate-100 flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:e("language")}),I.jsx("p",{className:"text-[11px] text-gray-500 font-medium leading-tight",children:e("language_desc")})]}),I.jsxs("div",{className:"flex bg-white rounded-xl p-1 shadow-inner border border-gray-100",children:[I.jsx("button",{type:"button",onClick:()=>V("en"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${w==="en"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-indigo-600"}`,children:"EN"}),I.jsx("button",{type:"button",onClick:()=>V("ar"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${w==="ar"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-indigo-600"}`,children:"AR"})]})]}),I.jsxs("div",{className:"bg-slate-50 p-5 rounded-[2rem] border border-slate-100 flex items-center justify-between",children:[I.jsx("div",{children:I.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:e("phone_visibility")})}),I.jsx("button",{type:"button",onClick:()=>E(!T),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${T?"bg-indigo-600":"bg-gray-200"}`,children:I.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow-md ring-0 transition duration-200 ease-in-out ${T?o?"-translate-x-5":"translate-x-5":"translate-x-0"}`})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1 text-indigo-600",children:e("bio")}),I.jsx("textarea",{rows:4,value:h,onChange:re=>_(re.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-[2rem] focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm font-semibold resize-none leading-relaxed"})]}),K&&I.jsx("div",{className:`p-5 rounded-[2rem] text-xs font-bold animate-fade-in flex items-center space-x-3 ${K.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:I.jsx("span",{children:K.text})}),I.jsx("button",{type:"submit",disabled:k,className:"w-full py-4 bg-indigo-600 text-white rounded-[2rem] font-black uppercase tracking-widest text-[11px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50",children:e(k?"syncing":"update_identity")})]})]})})]})},F3=({user:n})=>{const[e,t]=he.useState([{role:"model",text:`Hi ${n.name}! I'm Gemini, your Saad Social Assistant. How can I help you today?`,timestamp:Date.now()}]),[i,o]=he.useState(""),[a,u]=he.useState(!1),f=he.useRef(null);he.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[e,a]);const p=async h=>{if(h.preventDefault(),!i.trim()||a)return;const _={role:"user",text:i,timestamp:Date.now()};t(T=>[...T,_]),o(""),u(!0);try{const T=new Hu({apiKey:void 0}),E=e.filter((k,P)=>P>0||e[0].role==="user").map(k=>({role:k.role,parts:[{text:k.text}]})),V=(await T.models.generateContent({model:"gemini-3-pro-preview",contents:[...E,{role:"user",parts:[{text:i}]}],config:{systemInstruction:"You are the helpful AI assistant for 'Saad Social Chat', a modern real-time social networking app. Help users navigate the app, suggest conversation starters, or just chat. Be friendly, concise, and use emojis."}})).text||"I'm sorry, I couldn't process that. Could you try again?";t(k=>[...k,{role:"model",text:V,timestamp:Date.now()}])}catch(T){console.error("AI Chat Error:",T),t(E=>[...E,{role:"model",text:"Oops! I'm having trouble connecting right now.",timestamp:Date.now()}])}finally{u(!1)}};return I.jsxs("div",{className:"flex flex-col h-full w-full bg-slate-50/30 animate-fade-in",children:[I.jsx("div",{className:"px-6 py-4 border-b border-indigo-100 flex items-center justify-between bg-white/80 backdrop-blur-md sticky top-0 z-10",children:I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("div",{className:"w-11 h-11 rounded-2xl bg-gradient-to-tr from-indigo-600 to-violet-500 flex items-center justify-center shadow-lg shadow-indigo-100 ring-2 ring-white",children:I.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-base font-black text-indigo-900 tracking-tight",children:"Gemini AI Assistant"}),I.jsxs("div",{className:"flex items-center space-x-1.5",children:[I.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),I.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Always Online"})]})]})]})}),I.jsxs("div",{ref:f,className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[e.map((h,_)=>I.jsx("div",{className:`flex ${h.role==="user"?"justify-end":"justify-start"} animate-fade-in`,children:I.jsxs("div",{className:`max-w-[85%] px-5 py-3.5 rounded-3xl text-[13.5px] shadow-sm leading-relaxed ${h.role==="user"?"bg-indigo-600 text-white rounded-br-none shadow-indigo-100":"bg-white text-gray-800 border border-indigo-50 rounded-bl-none"}`,children:[h.text,I.jsx("div",{className:`text-[9px] mt-2 font-bold uppercase tracking-tighter ${h.role==="user"?"text-indigo-200":"text-gray-400"}`,children:new Date(h.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},_)),a&&I.jsx("div",{className:"flex justify-start animate-pulse",children:I.jsxs("div",{className:"bg-white border border-indigo-50 px-5 py-3.5 rounded-3xl rounded-bl-none shadow-sm flex items-center space-x-2",children:[I.jsxs("div",{className:"flex space-x-1",children:[I.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"}),I.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:0.2s]"}),I.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:0.4s]"})]}),I.jsx("span",{className:"text-[10px] font-black text-indigo-300 uppercase tracking-widest",children:"Gemini is thinking"})]})})]}),I.jsx("div",{className:"p-6 bg-white border-t border-indigo-50",children:I.jsxs("form",{onSubmit:p,className:"flex space-x-3 items-end",children:[I.jsx("input",{value:i,onChange:h=>o(h.target.value),placeholder:"Ask me anything...",className:"flex-1 px-6 py-4 bg-gray-50 border border-gray-100 rounded-3xl focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm shadow-inner"}),I.jsx("button",{type:"submit",disabled:!i.trim()||a,className:"p-4 bg-indigo-600 text-white rounded-2xl hover:bg-indigo-700 shadow-xl shadow-indigo-100 disabled:opacity-50 transition-all active:scale-90",children:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})})]})},q3=({user:n})=>{const[e,t]=he.useState([]),[i,o]=he.useState(!1),[a,u]=he.useState(""),[f,p]=he.useState(null),[h,_]=he.useState(!1),T=he.useRef(null);he.useEffect(()=>ft.subscribeToFeed(n.id,n.friends,P=>{t(P)}),[n.id,n.friends]);const E=k=>{var K;const P=(K=k.target.files)==null?void 0:K[0];if(P){const Z=new FileReader;Z.onloadend=()=>p(Z.result),Z.readAsDataURL(P)}},w=async()=>{if(!(!a.trim()&&!f)){o(!0);try{await ft.createPost(n,a,f||void 0),u(""),p(null)}finally{o(!1)}}},V=async()=>{if(!(!f&&!a)){_(!0);try{const k=new Hu({apiKey:void 0}),K=[{text:f?"Look at this image description (optional) and draft text: '"+a+"'. Suggest a catchy social media caption for this post.":"Draft text: '"+a+"'. Rewrite this to be more engaging for a social feed."}];f&&K.push({inlineData:{mimeType:"image/jpeg",data:f.split(",")[1]}});const Z=await k.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:K}});u(Z.text||a)}catch(k){console.error(k)}finally{_(!1)}}};return I.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50 animate-fade-in overflow-hidden",children:[I.jsxs("div",{className:"p-6 bg-white border-b border-gray-100 flex-shrink-0",children:[I.jsx("h2",{className:"text-2xl font-black text-indigo-900 tracking-tighter uppercase",children:"Community"}),I.jsx("p",{className:"text-xs text-gray-400 mt-1 font-bold uppercase tracking-widest",children:"Share with friends"})]}),I.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar space-y-6",children:[I.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100 animate-fade-in",children:I.jsxs("div",{className:"flex space-x-4",children:[I.jsx("img",{src:n.avatar,className:"w-12 h-12 rounded-2xl shadow-sm",alt:""}),I.jsxs("div",{className:"flex-1",children:[I.jsx("textarea",{value:a,onChange:k=>u(k.target.value),placeholder:"What's on your mind?",className:"w-full bg-gray-50 rounded-2xl p-4 text-sm focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all resize-none min-h-[100px]"}),f&&I.jsxs("div",{className:"mt-4 relative group",children:[I.jsx("img",{src:f,className:"max-h-64 rounded-2xl object-cover w-full border border-gray-100",alt:"Preview"}),I.jsx("button",{onClick:()=>p(null),className:"absolute top-2 right-2 p-2 bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),I.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[I.jsxs("div",{className:"flex space-x-2",children:[I.jsx("button",{onClick:()=>{var k;return(k=T.current)==null?void 0:k.click()},className:"p-3 text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Upload Image",children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),I.jsxs("button",{onClick:V,disabled:h||!a&&!f,className:"flex items-center space-x-2 px-4 py-2 text-violet-600 hover:bg-violet-50 rounded-xl transition-all disabled:opacity-30",children:[I.jsx("svg",{className:`w-5 h-5 ${h?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),I.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"AI Caption"})]}),I.jsx("input",{type:"file",ref:T,onChange:E,className:"hidden",accept:"image/*"})]}),I.jsx("button",{onClick:w,disabled:i||!a.trim()&&!f,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase tracking-widest text-[11px] shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50",children:i?"Posting...":"Post"})]})]})]})}),I.jsx("div",{className:"space-y-6 pb-12",children:e.length===0?I.jsxs("div",{className:"py-20 text-center text-gray-300",children:[I.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"No stories yet"}),I.jsx("p",{className:"text-[10px] mt-1",children:"Be the first to post something amazing!"})]}):e.map(k=>I.jsx(vw,{post:k,user:n},k.id))})]})]})},vw=({post:n,user:e})=>{const[t,i]=he.useState(""),[o,a]=he.useState(!1),u=async p=>{p.preventDefault(),t.trim()&&(await ft.addComment(n.id,e,t),i(""))},f=p=>{const h=Date.now()-p;return h<6e4?"Just now":h<36e5?Math.floor(h/6e4)+"m ago":h<864e5?Math.floor(h/36e5)+"h ago":new Date(p).toLocaleDateString()};return I.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden animate-fade-in group hover:shadow-xl transition-all duration-500",children:I.jsxs("div",{className:"p-6",children:[I.jsx("div",{className:"flex items-center justify-between mb-4",children:I.jsxs("div",{className:"flex items-center space-x-3",children:[I.jsx("img",{src:n.authorAvatar,className:"w-10 h-10 rounded-xl",alt:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-sm font-black text-gray-900 tracking-tight",children:n.authorName}),I.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter",children:f(n.timestamp)})]})]})}),I.jsx("p",{className:"text-[14px] text-gray-700 leading-relaxed mb-4 whitespace-pre-wrap",children:n.text}),n.image&&I.jsx("div",{className:"rounded-2xl overflow-hidden mb-4 border border-gray-50",children:I.jsx("img",{src:n.image,className:"w-full h-auto object-cover max-h-[500px]",alt:""})}),I.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[I.jsxs("div",{className:"flex space-x-1",children:[I.jsx(mm,{type:"like",emoji:"",count:n.reactions.like.length,active:n.reactions.like.includes(e.id),onClick:()=>ft.addReaction(n.id,e.id,"like")}),I.jsx(mm,{type:"love",emoji:"",count:n.reactions.love.length,active:n.reactions.love.includes(e.id),onClick:()=>ft.addReaction(n.id,e.id,"love")}),I.jsx(mm,{type:"haha",emoji:"",count:n.reactions.haha.length,active:n.reactions.haha.includes(e.id),onClick:()=>ft.addReaction(n.id,e.id,"haha")})]}),I.jsxs("button",{onClick:()=>a(!o),className:"flex items-center space-x-2 text-[11px] font-black text-indigo-600 uppercase tracking-widest hover:underline",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),I.jsxs("span",{children:[n.comments.length," Comments"]})]})]}),o&&I.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 animate-fade-in",children:[n.comments.map(p=>I.jsxs("div",{className:"flex space-x-3 group/comment",children:[I.jsx("img",{src:p.authorAvatar,className:"w-8 h-8 rounded-lg shadow-sm",alt:""}),I.jsxs("div",{className:"flex-1 bg-gray-50 rounded-2xl p-3",children:[I.jsxs("div",{className:"flex justify-between items-center mb-1",children:[I.jsx("span",{className:"text-[11px] font-black text-gray-900",children:p.authorName}),I.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase",children:f(p.timestamp)})]}),I.jsx("p",{className:"text-xs text-gray-600",children:p.text})]})]},p.id)),I.jsxs("form",{onSubmit:u,className:"flex items-center space-x-2 mt-4",children:[I.jsx("img",{src:e.avatar,className:"w-8 h-8 rounded-lg",alt:""}),I.jsx("input",{type:"text",value:t,onChange:p=>i(p.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-50 border-none rounded-xl px-4 py-2 text-xs focus:ring-2 focus:ring-indigo-200 transition-all"}),I.jsx("button",{type:"submit",className:"p-2 text-indigo-600 hover:scale-110 transition-transform",children:I.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:I.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})},mm=({emoji:n,count:e,active:t,onClick:i})=>I.jsxs("button",{onClick:i,className:`flex items-center space-x-1 px-3 py-1.5 rounded-full text-xs font-bold transition-all ${t?"bg-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:[I.jsx("span",{children:n}),e>0&&I.jsx("span",{children:e})]}),B3=({user:n})=>{const[e,t]=he.useState(null),[i,o]=he.useState(null),[a,u]=he.useState("Welcome back!"),[f,p]=he.useState(null),[h,_]=he.useState(null),[T,E]=he.useState([]),[w,V]=he.useState(!0);he.useEffect(()=>{const Q=ft.subscribeToFeed(n.id,n.friends,oe=>{const le=oe.filter(re=>re.authorId===n.id);E(le)});return k(),()=>{Q()}},[n.id]);const k=()=>{if(!navigator.geolocation){V(!1);return}navigator.geolocation.getCurrentPosition(async Q=>{const{latitude:oe,longitude:le}=Q.coords;try{const M=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${oe}&longitude=${le}&current_weather=true`)).json(),D=P(M.current_weather.weathercode),x=Math.round(M.current_weather.temperature);t({temp:x,condition:D});const U=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${oe}&lon=${le}&format=json`)).json(),B=U.address.city||U.address.town||U.address.village||"Nearby",N=U.address.country||"";o({city:B,country:N}),K(D,x,B);const J=(await(await fetch(`https://api.aladhan.com/v1/timings?latitude=${oe}&longitude=${le}&method=2`)).json()).data.timings;p(J),Z(J)}catch(re){console.error("External data fetch error:",re)}finally{V(!1)}},()=>{V(!1)})},P=Q=>Q===0?"Clear":Q<=3?"Partly Cloudy":Q>=45&&Q<=48?"Foggy":Q>=51&&Q<=67?"Rain":"Overcast",K=async(Q,oe,le)=>{try{const M=await new Hu({apiKey:void 0}).models.generateContent({model:"gemini-3-flash-preview",contents:`I am at a personal social networking dashboard in ${le}. Current local weather is ${Q} at ${oe}C. Give me one very short, helpful, and friendly sentence of lifestyle advice for today. Use a warm tone and a relevant emoji.`});u(M.text||"Have a wonderful day!")}catch{u("Enjoy your day and stay positive! ")}},Z=Q=>{const oe=new Date,le=oe.getHours()*60+oe.getMinutes(),re=["Fajr","Dhuhr","Asr","Maghrib","Isha"];for(const M of re){const[D,x]=Q[M].split(":").map(Number);if(D*60+x>le){_(M);return}}_("Fajr")};return w?I.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-white",children:[I.jsx("div",{className:"w-10 h-10 border-2 border-gray-100 border-t-indigo-600 rounded-full animate-spin"}),I.jsx("p",{className:"mt-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Loading Dashboard"})]}):I.jsxs("div",{className:"h-full overflow-y-auto bg-[#F5F5F7] custom-scrollbar animate-fade-in pb-20",children:[I.jsx("section",{className:"pt-12 pb-16 relative flex flex-col items-center",children:I.jsx("div",{className:"w-full max-w-5xl px-8",children:I.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("img",{src:n.avatar,className:"w-40 h-40 md:w-48 md:h-48 rounded-full border-8 border-white shadow-xl bg-white object-cover",alt:n.name}),I.jsx("div",{className:"absolute bottom-2 right-2 w-8 h-8 bg-green-500 border-4 border-white rounded-full shadow-lg"})]}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:n.name}),I.jsx("p",{className:"text-gray-500 font-medium text-sm mt-1",children:n.bio||"Digital Nomad"})]}),I.jsxs("div",{className:"flex space-x-4",children:[I.jsxs("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-sm border border-gray-100",children:[I.jsx("p",{className:"text-lg font-bold text-gray-900",children:T.length}),I.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Stories"})]}),I.jsxs("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-sm border border-gray-100",children:[I.jsx("p",{className:"text-lg font-bold text-gray-900",children:n.friends.length}),I.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Mutuals"})]})]})]})})}),I.jsxs("div",{className:"px-8 max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[I.jsx("div",{className:"lg:col-span-8 space-y-8",children:I.jsxs("div",{className:"space-y-6",children:[I.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-[0.2em] px-4",children:"Recent Stories"}),T.length===0?I.jsx("div",{className:"bg-white rounded-[2rem] p-12 text-center border border-gray-100 shadow-sm",children:I.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"No stories captured yet."})}):I.jsx("div",{className:"space-y-6",children:T.map(Q=>I.jsx(vw,{post:Q,user:n},Q.id))})]})}),I.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[I.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-sm border border-gray-100 group",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Local"}),I.jsx("h4",{className:"text-xl font-bold text-gray-900",children:i==null?void 0:i.city})]}),I.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[e==null?void 0:e.temp,""]})]}),I.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl border border-gray-100 text-xs text-gray-600 font-medium leading-relaxed italic",children:['"',a,'"']})]}),I.jsxs("div",{className:"bg-gray-900 rounded-[2rem] p-8 text-white shadow-lg overflow-hidden relative",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Schedule"}),h&&I.jsx("div",{className:"px-3 py-1 bg-white/10 rounded-full",children:I.jsxs("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:["Next: ",h]})})]}),I.jsx("div",{className:"space-y-1",children:f&&["Fajr","Dhuhr","Asr","Maghrib","Isha"].map(Q=>I.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl transition-all ${h===Q?"bg-white text-gray-900":"text-gray-400"}`,children:[I.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:Q}),I.jsx("span",{className:"text-xs font-mono",children:f[Q]})]},Q))})]})]})]})]})},H3=({user:n,onLogout:e})=>{const{t,isRTL:i}=Bu(),[o,a]=he.useState(null),[u,f]=he.useState("profile"),[p,h]=he.useState([]),[_,T]=he.useState([]),[E,w]=he.useState({});he.useEffect(()=>{u!=="chats"&&a(null)},[u]),he.useEffect(()=>{let P=!0;return(async()=>{try{const Z=n.friends.map(re=>ft.getUser(re)),Q=n.receivedRequests.map(re=>ft.getUser(re)),[oe,le]=await Promise.all([Promise.all(Z),Promise.all(Q)]);P&&(h(oe.filter(re=>re!==null)),T(le.filter(re=>re!==null)))}catch(Z){console.error("Error fetching related users:",Z)}})(),()=>{P=!1}},[n.friends,n.receivedRequests]),he.useEffect(()=>ft.subscribeToAllUnread(n.id,K=>{w(K)}),[n.id]);const V=Object.values(E).reduce((P,K)=>P+K,0),k=({tab:P,icon:K,label:Z,badge:Q})=>I.jsxs("button",{onClick:()=>f(P),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-all duration-300 relative ${u===P?"bg-gray-900 text-white shadow-lg":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"} ${i?"flex-row-reverse space-x-reverse":""}`,children:[K,I.jsx("span",{className:"text-xs font-semibold tracking-tight hidden md:inline",children:Z}),Q?I.jsx("span",{className:`absolute -top-1 ${i?"-left-1":"-right-1"} w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white`,children:Q}):null]});return I.jsxs("div",{className:`flex flex-col h-screen bg-[#F5F5F7] ${i?"font-arabic":""}`,dir:i?"rtl":"ltr",children:[I.jsxs("header",{className:"glass sticky top-0 z-50 border-b border-gray-100 px-6 h-16 flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center space-x-6",children:[I.jsxs("button",{onClick:()=>f("profile"),className:"flex items-center space-x-3 group",children:[I.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shadow-indigo-100 shadow-md group-active:scale-95 transition-transform",children:I.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),I.jsx("span",{className:"text-sm font-bold tracking-tight text-gray-900 hidden sm:inline",children:t("app_name")})]}),I.jsxs("nav",{className:"flex items-center space-x-1",children:[I.jsx(k,{tab:"chats",label:t("inbox"),badge:V,icon:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),I.jsx(k,{tab:"community",label:t("community"),icon:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2zM14 3v5h5M7 8h5M7 12h10M7 16h10"})})}),I.jsx(k,{tab:"search",label:t("discovery"),icon:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),I.jsx(k,{tab:"ai-assistant",label:t("ai_assistant"),icon:I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("button",{onClick:()=>f("settings"),className:`w-9 h-9 rounded-full overflow-hidden border-2 transition-all ${u==="settings"?"border-gray-900 shadow-md ring-2 ring-gray-100":"border-transparent hover:border-gray-200"}`,children:I.jsx("img",{src:n.avatar,className:"w-full h-full object-cover",alt:"profile"})}),I.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),I.jsx("button",{onClick:e,className:"text-gray-400 hover:text-red-500 transition-colors p-2",children:I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),I.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[u==="chats"||u==="search"||u==="settings"?I.jsx("aside",{className:`w-full md:w-80 lg:w-96 flex flex-col bg-white ${i?"border-l":"border-r"} border-gray-100 flex-shrink-0 z-40`,children:u==="chats"?I.jsx(A2,{user:n,friends:p,pendingRequests:_,unreadMap:E,selectedId:o,onSelectFriend:a}):u==="search"?I.jsx(U3,{currentUser:n,onAddFriend:P=>ft.sendFriendRequest(n.id,P)}):u==="settings"?I.jsx(O3,{user:n}):null}):null,I.jsx("div",{className:"flex-1 overflow-hidden bg-white/50 relative",children:u==="profile"?I.jsx(B3,{user:n}):u==="community"?I.jsx(q3,{user:n}):u==="ai-assistant"?I.jsx(F3,{user:n}):o?I.jsx(L3,{currentUser:n,targetId:o}):I.jsxs("div",{className:"hidden md:flex flex-1 flex-col h-full items-center justify-center text-gray-300 space-y-6",children:[I.jsx("div",{className:"w-24 h-24 bg-white rounded-3xl flex items-center justify-center shadow-sm border border-gray-100",children:I.jsx("svg",{className:"w-10 h-10 text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-xl font-bold text-gray-400 tracking-tight",children:t("app_name")}),I.jsx("p",{className:"text-xs text-gray-300 mt-1 uppercase tracking-widest font-medium",children:"Select a conversation to start"})]})]})})]})]})},G3=()=>{const[n,e]=he.useState(null),[t,i]=he.useState(!0);he.useEffect(()=>{const f=ft.onAuthChange(p=>{e(p),i(!1)});return()=>{f()}},[]),he.useEffect(()=>{if(!n)return;const f=ft.subscribeToUser(n.id,p=>{e(p)});return()=>f()},[n==null?void 0:n.id]);const o=async(f,p)=>{i(!0);try{await ft.login(f,p)}catch(h){let _=h.message;h.code==="auth/invalid-credential"&&(_="Invalid email or password. Please try again or join us!"),alert("Oops! "+_),i(!1)}},a=async(f,p,h,_)=>{i(!0);try{await ft.register(f,p,h,_)}catch(T){alert("Registration failed: "+T.message),i(!1)}},u=async()=>{i(!0),await ft.logout(),e(null),i(!1)};return t?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-indigo-50/20",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-indigo-600 border-t-transparent shadow-xl"}),I.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:I.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full"})})]}),I.jsx("p",{className:"mt-6 text-indigo-900/40 font-black uppercase tracking-widest text-[10px]",children:"Saad Social App"})]}):I.jsx(E2,{initialLanguage:(n==null?void 0:n.language)||"en",children:I.jsx("div",{className:"min-h-screen font-sans selection:bg-indigo-100 overflow-hidden",children:n?I.jsx(H3,{user:n,onLogout:u}):I.jsx(S2,{onLogin:o,onRegister:a})})})},Tw=document.getElementById("root");if(!Tw)throw new Error("Could not find root element to mount to");const z3=lb.createRoot(Tw);z3.render(I.jsx(eb.StrictMode,{children:I.jsx(G3,{})}));
