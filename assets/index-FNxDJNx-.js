(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function wE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var rm={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function LA(){if(_v)return Nl;_v=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Nl.Fragment=e,Nl.jsx=n,Nl.jsxs=n,Nl}var vv;function PA(){return vv||(vv=1,rm.exports=LA()),rm.exports}var E=PA(),am={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function UA(){if(Ev)return be;Ev=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),C=Symbol.iterator;function P(M){return M===null||typeof M!="object"?null:(M=C&&M[C]||M["@@iterator"],typeof M=="function"?M:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,J={};function re(M,W,ie){this.props=M,this.context=W,this.refs=J,this.updater=ie||K}re.prototype.isReactComponent={},re.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},re.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ae(){}ae.prototype=re.prototype;function ee(M,W,ie){this.props=M,this.context=W,this.refs=J,this.updater=ie||K}var pe=ee.prototype=new ae;pe.constructor=ee,Y(pe,re.prototype),pe.isPureReactComponent=!0;var Ce=Array.isArray;function ue(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function x(M,W,ie){var ce=ie.ref;return{$$typeof:s,type:M,key:W,ref:ce!==void 0?ce:null,props:ie}}function V(M,W){return x(M.type,W,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function L(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return W[ie]})}var w=/\/+/g;function Se(M,W){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):W.toString(36)}function Ne(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ue,ue):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function H(M,W,ie,ce,Ee){var Ie=typeof M;(Ie==="undefined"||Ie==="boolean")&&(M=null);var je=!1;if(M===null)je=!0;else switch(Ie){case"bigint":case"string":case"number":je=!0;break;case"object":switch(M.$$typeof){case s:case e:je=!0;break;case T:return je=M._init,H(je(M._payload),W,ie,ce,Ee)}}if(je)return Ee=Ee(M),je=ce===""?"."+Se(M,0):ce,Ce(Ee)?(ie="",je!=null&&(ie=je.replace(w,"$&/")+"/"),H(Ee,W,ie,"",function(gr){return gr})):Ee!=null&&(D(Ee)&&(Ee=V(Ee,ie+(Ee.key==null||M&&M.key===Ee.key?"":(""+Ee.key).replace(w,"$&/")+"/")+je)),W.push(Ee)),1;je=0;var Mt=ce===""?".":ce+":";if(Ce(M))for(var ot=0;ot<M.length;ot++)ce=M[ot],Ie=Mt+Se(ce,ot),je+=H(ce,W,ie,Ie,Ee);else if(ot=P(M),typeof ot=="function")for(M=ot.call(M),ot=0;!(ce=M.next()).done;)ce=ce.value,Ie=Mt+Se(ce,ot++),je+=H(ce,W,ie,Ie,Ee);else if(Ie==="object"){if(typeof M.then=="function")return H(Ne(M),W,ie,ce,Ee);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return je}function ne(M,W,ie){if(M==null)return M;var ce=[],Ee=0;return H(M,ce,"","",function(Ie){return W.call(ie,Ie,Ee++)}),ce}function ge(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Be=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ye={map:ne,forEach:function(M,W,ie){ne(M,function(){W.apply(this,arguments)},ie)},count:function(M){var W=0;return ne(M,function(){W++}),W},toArray:function(M){return ne(M,function(W){return W})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return be.Activity=S,be.Children=Ye,be.Component=re,be.Fragment=n,be.Profiler=o,be.PureComponent=ee,be.StrictMode=r,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,be.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},be.cache=function(M){return function(){return M.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(M,W,ie){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ce=Y({},M.props),Ee=M.key;if(W!=null)for(Ie in W.key!==void 0&&(Ee=""+W.key),W)!R.call(W,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&W.ref===void 0||(ce[Ie]=W[Ie]);var Ie=arguments.length-2;if(Ie===1)ce.children=ie;else if(1<Ie){for(var je=Array(Ie),Mt=0;Mt<Ie;Mt++)je[Mt]=arguments[Mt+2];ce.children=je}return x(M.type,Ee,ce)},be.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},be.createElement=function(M,W,ie){var ce,Ee={},Ie=null;if(W!=null)for(ce in W.key!==void 0&&(Ie=""+W.key),W)R.call(W,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ee[ce]=W[ce]);var je=arguments.length-2;if(je===1)Ee.children=ie;else if(1<je){for(var Mt=Array(je),ot=0;ot<je;ot++)Mt[ot]=arguments[ot+2];Ee.children=Mt}if(M&&M.defaultProps)for(ce in je=M.defaultProps,je)Ee[ce]===void 0&&(Ee[ce]=je[ce]);return x(M,Ie,Ee)},be.createRef=function(){return{current:null}},be.forwardRef=function(M){return{$$typeof:m,render:M}},be.isValidElement=D,be.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ge}},be.memo=function(M,W){return{$$typeof:y,type:M,compare:W===void 0?null:W}},be.startTransition=function(M){var W=I.T,ie={};I.T=ie;try{var ce=M(),Ee=I.S;Ee!==null&&Ee(ie,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,Be)}catch(Ie){Be(Ie)}finally{W!==null&&ie.types!==null&&(W.types=ie.types),I.T=W}},be.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},be.use=function(M){return I.H.use(M)},be.useActionState=function(M,W,ie){return I.H.useActionState(M,W,ie)},be.useCallback=function(M,W){return I.H.useCallback(M,W)},be.useContext=function(M){return I.H.useContext(M)},be.useDebugValue=function(){},be.useDeferredValue=function(M,W){return I.H.useDeferredValue(M,W)},be.useEffect=function(M,W){return I.H.useEffect(M,W)},be.useEffectEvent=function(M){return I.H.useEffectEvent(M)},be.useId=function(){return I.H.useId()},be.useImperativeHandle=function(M,W,ie){return I.H.useImperativeHandle(M,W,ie)},be.useInsertionEffect=function(M,W){return I.H.useInsertionEffect(M,W)},be.useLayoutEffect=function(M,W){return I.H.useLayoutEffect(M,W)},be.useMemo=function(M,W){return I.H.useMemo(M,W)},be.useOptimistic=function(M,W){return I.H.useOptimistic(M,W)},be.useReducer=function(M,W,ie){return I.H.useReducer(M,W,ie)},be.useRef=function(M){return I.H.useRef(M)},be.useState=function(M){return I.H.useState(M)},be.useSyncExternalStore=function(M,W,ie){return I.H.useSyncExternalStore(M,W,ie)},be.useTransition=function(){return I.H.useTransition()},be.version="19.2.3",be}var Tv;function Wm(){return Tv||(Tv=1,am.exports=UA()),am.exports}var oe=Wm();const jA=wE(oe);var om={exports:{}},Dl={},lm={exports:{}},um={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function zA(){return bv||(bv=1,(function(s){function e(H,ne){var ge=H.length;H.push(ne);e:for(;0<ge;){var Be=ge-1>>>1,Ye=H[Be];if(0<o(Ye,ne))H[Be]=ne,H[ge]=Ye,ge=Be;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ne=H[0],ge=H.pop();if(ge!==ne){H[0]=ge;e:for(var Be=0,Ye=H.length,M=Ye>>>1;Be<M;){var W=2*(Be+1)-1,ie=H[W],ce=W+1,Ee=H[ce];if(0>o(ie,ge))ce<Ye&&0>o(Ee,ie)?(H[Be]=Ee,H[ce]=ge,Be=ce):(H[Be]=ie,H[W]=ge,Be=W);else if(ce<Ye&&0>o(Ee,ge))H[Be]=Ee,H[ce]=ge,Be=ce;else break e}}return ne}function o(H,ne){var ge=H.sortIndex-ne.sortIndex;return ge!==0?ge:H.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var p=[],y=[],T=1,S=null,C=3,P=!1,K=!1,Y=!1,J=!1,re=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function pe(H){for(var ne=n(y);ne!==null;){if(ne.callback===null)r(y);else if(ne.startTime<=H)r(y),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(y)}}function Ce(H){if(Y=!1,pe(H),!K)if(n(p)!==null)K=!0,ue||(ue=!0,L());else{var ne=n(y);ne!==null&&Ne(Ce,ne.startTime-H)}}var ue=!1,I=-1,R=5,x=-1;function V(){return J?!0:!(s.unstable_now()-x<R)}function D(){if(J=!1,ue){var H=s.unstable_now();x=H;var ne=!0;try{e:{K=!1,Y&&(Y=!1,ae(I),I=-1),P=!0;var ge=C;try{t:{for(pe(H),S=n(p);S!==null&&!(S.expirationTime>H&&V());){var Be=S.callback;if(typeof Be=="function"){S.callback=null,C=S.priorityLevel;var Ye=Be(S.expirationTime<=H);if(H=s.unstable_now(),typeof Ye=="function"){S.callback=Ye,pe(H),ne=!0;break t}S===n(p)&&r(p),pe(H)}else r(p);S=n(p)}if(S!==null)ne=!0;else{var M=n(y);M!==null&&Ne(Ce,M.startTime-H),ne=!1}}break e}finally{S=null,C=ge,P=!1}ne=void 0}}finally{ne?L():ue=!1}}}var L;if(typeof ee=="function")L=function(){ee(D)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Se=w.port2;w.port1.onmessage=D,L=function(){Se.postMessage(null)}}else L=function(){re(D,0)};function Ne(H,ne){I=re(function(){H(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(H){switch(C){case 1:case 2:case 3:var ne=3;break;default:ne=C}var ge=C;C=ne;try{return H()}finally{C=ge}},s.unstable_requestPaint=function(){J=!0},s.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ge=C;C=H;try{return ne()}finally{C=ge}},s.unstable_scheduleCallback=function(H,ne,ge){var Be=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Be+ge:Be):ge=Be,H){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=ge+Ye,H={id:T++,callback:ne,priorityLevel:H,startTime:ge,expirationTime:Ye,sortIndex:-1},ge>Be?(H.sortIndex=ge,e(y,H),n(p)===null&&H===n(y)&&(Y?(ae(I),I=-1):Y=!0,Ne(Ce,ge-Be))):(H.sortIndex=Ye,e(p,H),K||P||(K=!0,ue||(ue=!0,L()))),H},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(H){var ne=C;return function(){var ge=C;C=ne;try{return H.apply(this,arguments)}finally{C=ge}}}})(um)),um}var Av;function BA(){return Av||(Av=1,lm.exports=zA()),lm.exports}var cm={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function qA(){if(Sv)return $t;Sv=1;var s=Wm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:y,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$t.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,T)},$t.flushSync=function(p){var y=f.T,T=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=T,r.d.f()}},$t.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},$t.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},$t.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,S=m(T,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:C,fetchPriority:P}):T==="script"&&r.d.X(p,{crossOrigin:S,integrity:C,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},$t.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},$t.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,S=m(T,y.crossOrigin);r.d.L(p,T,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},$t.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=m(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},$t.requestFormReset=function(p){r.d.r(p)},$t.unstable_batchedUpdates=function(p,y){return p(y)},$t.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},$t.useFormStatus=function(){return f.H.useHostTransitionStatus()},$t.version="19.2.3",$t}var wv;function HA(){if(wv)return cm.exports;wv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cm.exports=qA(),cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function FA(){if(Rv)return Dl;Rv=1;var s=BA(),e=Wm(),n=HA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=d;break}if(b===l){_=!0,l=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=h;break}if(b===l){_=!0,l=d,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,C=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function Se(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case re:return"Profiler";case J:return"StrictMode";case Ce:return"Suspense";case ue:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case ee:return t.displayName||"Context";case ae:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:Se(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return Se(t(i))}catch{}}return null}var Ne=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Be=[],Ye=-1;function M(t){return{current:t}}function W(t){0>Ye||(t.current=Be[Ye],Be[Ye]=null,Ye--)}function ie(t,i){Ye++,Be[Ye]=t.current,t.current=i}var ce=M(null),Ee=M(null),Ie=M(null),je=M(null);function Mt(t,i){switch(ie(Ie,i),ie(Ee,t),ie(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?B_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=B_(i),t=q_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(ce),ie(ce,t)}function ot(){W(ce),W(Ee),W(Ie)}function gr(t){t.memoizedState!==null&&ie(je,t);var i=ce.current,a=q_(i,t.type);i!==a&&(ie(Ee,t),ie(ce,a))}function oa(t){Ee.current===t&&(W(ce),W(Ee)),je.current===t&&(W(je),Rl._currentValue=ge)}var la,ua;function si(t){if(la===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);la=i&&i[1]||"",ua=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+la+t+ua}var Ro=!1;function pr(t,i){if(!t||Ro)return"";Ro=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var B=F}Reflect.construct(t,[],$)}else{try{$.call()}catch(F){B=F}t.call($.prototype)}}else{try{throw Error()}catch(F){B=F}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),z=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===z.length)for(l=N.length-1,h=z.length-1;1<=l&&0<=h&&N[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==z[h]){var G=`
`+N[l].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=l&&0<=h);break}}}finally{Ro=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?si(a):""}function Co(t,i){switch(t.tag){case 26:case 27:case 5:return si(t.type);case 16:return si("Lazy");case 13:return t.child!==i&&i!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return pr(t.type,!1);case 11:return pr(t.type.render,!1);case 1:return pr(t.type,!0);case 31:return si("Activity");default:return""}}function Io(t){try{var i="",a=null;do i+=Co(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,fs=s.unstable_cancelCallback,of=s.unstable_shouldYield,Eu=s.unstable_requestPaint,nn=s.unstable_now,yr=s.unstable_getCurrentPriorityLevel,xo=s.unstable_ImmediatePriority,No=s.unstable_UserBlockingPriority,ds=s.unstable_NormalPriority,lf=s.unstable_LowPriority,Tu=s.unstable_IdlePriority,bu=s.log,Au=s.unstable_setDisableYieldValue,Hn=null,Bt=null;function In(t){if(typeof bu=="function"&&Au(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Hn,t)}catch{}}var gt=Math.clz32?Math.clz32:wu,Su=Math.log,ca=Math.LN2;function wu(t){return t>>>=0,t===0?32:31-(Su(t)/ca|0)|0}var ri=256,_r=262144,bt=4194304;function ai(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function oi(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=ai(l):(_&=b,_!==0?h=ai(_):a||(a=b&~t,a!==0&&(h=ai(a))))):(b=l&~d,b!==0?h=ai(b):_!==0?h=ai(_):a||(a=l&~t,a!==0&&(h=ai(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Fn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function uf(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ru(){var t=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),t}function li(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function vr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cf(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var G=31-gt(a),$=1<<G;b[G]=0,N[G]=-1;var B=z[G];if(B!==null)for(z[G]=null,G=0;G<B.length;G++){var F=B[G];F!==null&&(F.lane&=-536870913)}a&=~$}l!==0&&Er(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Er(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-gt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Do(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-gt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Oo(t,i){var a=i&-i;return a=(a&42)!==0?1:Tr(a),(a&(t.suspendedLanes|i))!==0?0:a}function Tr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Vi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cu(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:hv(t.type))}function Gn(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var Kn=Math.random().toString(36).slice(2),At="__reactFiber$"+Kn,Pt="__reactProps$"+Kn,ui="__reactContainer$"+Kn,ha="__reactEvents$"+Kn,hf="__reactListeners$"+Kn,Iu="__reactHandles$"+Kn,xu="__reactResources$"+Kn,ci="__reactMarker$"+Kn;function fa(t){delete t[At],delete t[Pt],delete t[ha],delete t[hf],delete t[Iu]}function hi(t){var i=t[At];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ui]||a[At]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=X_(t);t!==null;){if(a=t[At])return a;t=X_(t)}return i}t=a,a=t.parentNode}return null}function xn(t){if(t=t[At]||t[ui]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function _n(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function fi(t){var i=t[xu];return i||(i=t[xu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function St(t){t[ci]=!0}var Mo=new Set,Vo={};function di(t,i){mi(t,i),mi(t+"Capture",i)}function mi(t,i){for(Vo[t]=i,t=0;t<i.length;t++)Mo.add(i[t])}var ko=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lo={},Po={};function Nu(t){return Tt.call(Po,t)?!0:Tt.call(Lo,t)?!1:ko.test(t)?Po[t]=!0:(Lo[t]=!0,!1)}function da(t,i,a){if(Nu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function vn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function wt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ms(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Qe(t){if(!t._valueTracker){var i=ms(t)?"checked":"value";t._valueTracker=Uo(t,i,""+t[i])}}function br(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=ms(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function gi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ar=/[\n"\\]/g;function on(t){return t.replace(Ar,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ma(t,i,a,l,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ut(i)):t.value!==""+Ut(i)&&(t.value=""+Ut(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?jo(t,_,Ut(i)):a!=null?jo(t,_,Ut(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Ut(b):t.removeAttribute("name")}function Du(t,i,a,l,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qe(t);return}a=a!=null?""+Ut(a):"",i=i!=null?""+Ut(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Qe(t)}function jo(t,i,a){i==="number"&&gi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function gs(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ou(t,i,a){if(i!=null&&(i=""+Ut(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Ut(a):""}function ps(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ne(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ut(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Qe(t)}function ln(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Mu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Mu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Bo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&zo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&zo(t,d,i[d])}function ga(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(t){return ys.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Yn(){}var qo=null;function Nn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,pi=null;function Sr(t){var i=xn(t);if(i&&(t=i.stateNode)){var a=t[Pt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ma(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+on(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Pt]||null;if(!h)throw Error(r(90));ma(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&br(l)}break e;case"textarea":Ou(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&gs(t,!!a.multiple,i,!1)}}}var ya=!1;function vs(t,i,a){if(ya)return t(i,a);ya=!0;try{var l=t(i);return l}finally{if(ya=!1,(_s!==null||pi!==null)&&(Cc(),_s&&(i=_s,t=pi,pi=_s=null,Sr(i),t)))for(i=0;i<t.length;i++)Sr(t[i])}}function Qn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Pt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wr=!1;if(Dn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){wr=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{wr=!1}var yi=null,Ho=null,Rr=null;function Fo(){if(Rr)return Rr;var t,i=Ho,a=i.length,l,h="value"in yi?yi.value:yi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return Rr=h.slice(t,1<l?1-l:void 0)}function Cr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ki(){return!0}function Xn(){return!1}function qt(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ki:Xn,this.isPropagationStopped=Xn,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),i}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=qt(Li),Es=S({},Li,{view:0,detail:0}),Go=qt(Es),Ts,_a,vi,va=S({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vi&&(vi&&t.type==="mousemove"?(Ts=t.screenX-vi.screenX,_a=t.screenY-vi.screenY):_a=Ts=0,vi=t),Ts)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),Ko=qt(va),Ir=S({},va,{dataTransfer:0}),ku=qt(Ir),Lu=S({},Es,{relatedTarget:0}),xr=qt(Lu),Yo=S({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=qt(Yo),Ea=S({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uu=qt(Ea),ju=S({},Li,{data:0}),Ei=qt(ju),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=qu[t])?!!i[t]:!1}function bs(){return Hu}var sn=S({},Es,{key:function(t){if(t.key){var i=zu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Cr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(t){return t.type==="keypress"?Cr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fu=qt(sn),Gu=S({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pi=qt(Gu),c=S({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),g=qt(c),v=S({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=qt(v),U=S({},va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q=qt(U),te=S({},Li,{newState:0,oldState:0}),we=qt(te),pt=[9,13,27,32],Fe=Dn&&"CompositionEvent"in window,lt=null;Dn&&"documentMode"in document&&(lt=document.documentMode);var On=Dn&&"TextEvent"in window&&!lt,Ti=Dn&&(!Fe||lt&&8<lt&&11>=lt),$n=" ",Jn=!1;function Nr(t,i){switch(t){case"keyup":return pt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ta(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ba=!1;function a1(t,i){switch(t){case"compositionend":return Ta(i);case"keypress":return i.which!==32?null:(Jn=!0,$n);case"textInput":return t=i.data,t===$n&&Jn?null:t;default:return null}}function o1(t,i){if(ba)return t==="compositionend"||!Fe&&Nr(t,i)?(t=Fo(),Rr=Ho=yi=null,ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ti&&i.locale!=="ko"?null:i.data;default:return null}}var l1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!l1[t.type]:i==="textarea"}function Zg(t,i,a,l){_s?pi?pi.push(l):pi=[l]:_s=l,i=Vc(i,"onChange"),0<i.length&&(a=new _i("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Qo=null,Xo=null;function u1(t){k_(t,0)}function Ku(t){var i=_n(t);if(br(i))return t}function ep(t,i){if(t==="change")return i}var tp=!1;if(Dn){var ff;if(Dn){var df="oninput"in document;if(!df){var np=document.createElement("div");np.setAttribute("oninput","return;"),df=typeof np.oninput=="function"}ff=df}else ff=!1;tp=ff&&(!document.documentMode||9<document.documentMode)}function ip(){Qo&&(Qo.detachEvent("onpropertychange",sp),Xo=Qo=null)}function sp(t){if(t.propertyName==="value"&&Ku(Xo)){var i=[];Zg(i,Xo,t,Nn(t)),vs(u1,i)}}function c1(t,i,a){t==="focusin"?(ip(),Qo=i,Xo=a,Qo.attachEvent("onpropertychange",sp)):t==="focusout"&&ip()}function h1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ku(Xo)}function f1(t,i){if(t==="click")return Ku(i)}function d1(t,i){if(t==="input"||t==="change")return Ku(i)}function m1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var En=typeof Object.is=="function"?Object.is:m1;function $o(t,i){if(En(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Tt.call(i,h)||!En(t[h],i[h]))return!1}return!0}function rp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ap(t,i){var a=rp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rp(a)}}function op(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?op(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function lp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=gi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=gi(t.document)}return i}function mf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var g1=Dn&&"documentMode"in document&&11>=document.documentMode,Aa=null,gf=null,Jo=null,pf=!1;function up(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pf||Aa==null||Aa!==gi(l)||(l=Aa,"selectionStart"in l&&mf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Jo&&$o(Jo,l)||(Jo=l,l=Vc(gf,"onSelect"),0<l.length&&(i=new _i("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Aa)))}function Dr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Sa={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},yf={},cp={};Dn&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Or(t){if(yf[t])return yf[t];if(!Sa[t])return t;var i=Sa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in cp)return yf[t]=i[a];return t}var hp=Or("animationend"),fp=Or("animationiteration"),dp=Or("animationstart"),p1=Or("transitionrun"),y1=Or("transitionstart"),_1=Or("transitioncancel"),mp=Or("transitionend"),gp=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Wn(t,i){gp.set(t,i),di(i,[t])}var Yu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Mn=[],wa=0,vf=0;function Qu(){for(var t=wa,i=vf=wa=0;i<t;){var a=Mn[i];Mn[i++]=null;var l=Mn[i];Mn[i++]=null;var h=Mn[i];Mn[i++]=null;var d=Mn[i];if(Mn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&pp(a,h,d)}}function Xu(t,i,a,l){Mn[wa++]=t,Mn[wa++]=i,Mn[wa++]=a,Mn[wa++]=l,vf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ef(t,i,a,l){return Xu(t,i,a,l),$u(t)}function Mr(t,i){return Xu(t,null,null,i),$u(t)}function pp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-gt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function $u(t){if(50<vl)throw vl=0,xd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ra={};function v1(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,i,a,l){return new v1(t,i,a,l)}function Tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ui(t,i){var a=t.alternate;return a===null?(a=Tn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function yp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ju(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")Tf(t)&&(_=1);else if(typeof t=="string")_=SA(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=Tn(31,a,i,h),t.elementType=x,t.lanes=d,t;case Y:return Vr(a.children,h,d,i);case J:_=8,h|=24;break;case re:return t=Tn(12,a,i,h|2),t.elementType=re,t.lanes=d,t;case Ce:return t=Tn(13,a,i,h),t.elementType=Ce,t.lanes=d,t;case ue:return t=Tn(19,a,i,h),t.elementType=ue,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:_=10;break e;case ae:_=9;break e;case pe:_=11;break e;case I:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=Tn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Vr(t,i,a,l){return t=Tn(7,t,l,i),t.lanes=a,t}function bf(t,i,a){return t=Tn(6,t,null,i),t.lanes=a,t}function _p(t){var i=Tn(18,null,null,0);return i.stateNode=t,i}function Af(t,i,a){return i=Tn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var vp=new WeakMap;function Vn(t,i){if(typeof t=="object"&&t!==null){var a=vp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Io(i)},vp.set(t,i),i)}return{value:t,source:i,stack:Io(i)}}var Ca=[],Ia=0,Wu=null,Wo=0,kn=[],Ln=0,As=null,bi=1,Ai="";function ji(t,i){Ca[Ia++]=Wo,Ca[Ia++]=Wu,Wu=t,Wo=i}function Ep(t,i,a){kn[Ln++]=bi,kn[Ln++]=Ai,kn[Ln++]=As,As=t;var l=bi;t=Ai;var h=32-gt(l)-1;l&=~(1<<h),a+=1;var d=32-gt(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,bi=1<<32-gt(i)+h|a<<h|l,Ai=d+t}else bi=1<<d|a<<h|l,Ai=t}function Sf(t){t.return!==null&&(ji(t,1),Ep(t,1,0))}function wf(t){for(;t===Wu;)Wu=Ca[--Ia],Ca[Ia]=null,Wo=Ca[--Ia],Ca[Ia]=null;for(;t===As;)As=kn[--Ln],kn[Ln]=null,Ai=kn[--Ln],kn[Ln]=null,bi=kn[--Ln],kn[Ln]=null}function Tp(t,i){kn[Ln++]=bi,kn[Ln++]=Ai,kn[Ln++]=As,bi=i.id,Ai=i.overflow,As=t}var Ht=null,it=null,Ue=!1,Ss=null,Pn=!1,Rf=Error(r(519));function ws(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zo(Vn(i,t)),Rf}function bp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[At]=t,i[Pt]=l,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<Tl.length;a++)Oe(Tl[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),Du(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),ps(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||j_(i.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),l.onScroll!=null&&Oe("scroll",i),l.onScrollEnd!=null&&Oe("scrollend",i),l.onClick!=null&&(i.onclick=Yn),i=!0):i=!1,i||ws(t,!0)}function Ap(t){for(Ht=t.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Ht=Ht.return}}function xa(t){if(t!==Ht)return!1;if(!Ue)return Ap(t),Ue=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Fd(t.type,t.memoizedProps)),a=!a),a&&it&&ws(t),Ap(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));it=Q_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));it=Q_(t)}else i===27?(i=it,js(t.type)?(t=Xd,Xd=null,it=t):it=i):it=Ht?jn(t.stateNode.nextSibling):null;return!0}function kr(){it=Ht=null,Ue=!1}function Cf(){var t=Ss;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),Ss=null),t}function Zo(t){Ss===null?Ss=[t]:Ss.push(t)}var If=M(null),Lr=null,zi=null;function Rs(t,i,a){ie(If,i._currentValue),i._currentValue=a}function Bi(t){t._currentValue=If.current,W(If)}function xf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Nf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),xf(d.return,a,t),l||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),xf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Na(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;En(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===je.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Rl):t=[Rl])}h=h.return}t!==null&&Nf(i,t,a,l),i.flags|=262144}function Zu(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Pr(t){Lr=t,zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return Sp(Lr,t)}function ec(t,i){return Lr===null&&Pr(t),Sp(t,i)}function Sp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},zi===null){if(t===null)throw Error(r(308));zi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else zi=zi.next=i;return a}var E1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},T1=s.unstable_scheduleCallback,b1=s.unstable_NormalPriority,Rt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new E1,data:new Map,refCount:0}}function el(t){t.refCount--,t.refCount===0&&T1(b1,function(){t.controller.abort()})}var tl=null,Of=0,Da=0,Oa=null;function A1(t,i){if(tl===null){var a=tl=[];Of=0,Da=kd(),Oa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Of++,i.then(wp,wp),i}function wp(){if(--Of===0&&tl!==null){Oa!==null&&(Oa.status="fulfilled");var t=tl;tl=null,Da=0,Oa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function S1(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Rp=H.S;H.S=function(t,i){u_=nn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&A1(t,i),Rp!==null&&Rp(t,i)};var Ur=M(null);function Mf(){var t=Ur.current;return t!==null?t:tt.pooledCache}function tc(t,i){i===null?ie(Ur,Ur.current):ie(Ur,i.pool)}function Cp(){var t=Mf();return t===null?null:{parent:Rt._currentValue,pool:t}}var Ma=Error(r(460)),Vf=Error(r(474)),nc=Error(r(542)),ic={then:function(){}};function Ip(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Yn,Yn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Dp(t),t;default:if(typeof i.status=="string")i.then(Yn,Yn);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Dp(t),t}throw zr=i,Ma}}function jr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zr=a,Ma):a}}var zr=null;function Np(){if(zr===null)throw Error(r(459));var t=zr;return zr=null,t}function Dp(t){if(t===Ma||t===nc)throw Error(r(483))}var Va=null,nl=0;function sc(t){var i=nl;return nl+=1,Va===null&&(Va=[]),xp(Va,t,i)}function il(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function rc(t,i){throw i.$$typeof===C?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Op(t){function i(k,O){if(t){var j=k.deletions;j===null?(k.deletions=[O],k.flags|=16):j.push(O)}}function a(k,O){if(!t)return null;for(;O!==null;)i(k,O),O=O.sibling;return null}function l(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function h(k,O){return k=Ui(k,O),k.index=0,k.sibling=null,k}function d(k,O,j){return k.index=j,t?(j=k.alternate,j!==null?(j=j.index,j<O?(k.flags|=67108866,O):j):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function _(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function b(k,O,j,Q){return O===null||O.tag!==6?(O=bf(j,k.mode,Q),O.return=k,O):(O=h(O,j),O.return=k,O)}function N(k,O,j,Q){var de=j.type;return de===Y?G(k,O,j.props.children,Q,j.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&jr(de)===O.type)?(O=h(O,j.props),il(O,j),O.return=k,O):(O=Ju(j.type,j.key,j.props,null,k.mode,Q),il(O,j),O.return=k,O)}function z(k,O,j,Q){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=Af(j,k.mode,Q),O.return=k,O):(O=h(O,j.children||[]),O.return=k,O)}function G(k,O,j,Q,de){return O===null||O.tag!==7?(O=Vr(j,k.mode,Q,de),O.return=k,O):(O=h(O,j),O.return=k,O)}function $(k,O,j){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=bf(""+O,k.mode,j),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P:return j=Ju(O.type,O.key,O.props,null,k.mode,j),il(j,O),j.return=k,j;case K:return O=Af(O,k.mode,j),O.return=k,O;case R:return O=jr(O),$(k,O,j)}if(Ne(O)||L(O))return O=Vr(O,k.mode,j,null),O.return=k,O;if(typeof O.then=="function")return $(k,sc(O),j);if(O.$$typeof===ee)return $(k,ec(k,O),j);rc(k,O)}return null}function B(k,O,j,Q){var de=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return de!==null?null:b(k,O,""+j,Q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case P:return j.key===de?N(k,O,j,Q):null;case K:return j.key===de?z(k,O,j,Q):null;case R:return j=jr(j),B(k,O,j,Q)}if(Ne(j)||L(j))return de!==null?null:G(k,O,j,Q,null);if(typeof j.then=="function")return B(k,O,sc(j),Q);if(j.$$typeof===ee)return B(k,O,ec(k,j),Q);rc(k,j)}return null}function F(k,O,j,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(j)||null,b(O,k,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case P:return k=k.get(Q.key===null?j:Q.key)||null,N(O,k,Q,de);case K:return k=k.get(Q.key===null?j:Q.key)||null,z(O,k,Q,de);case R:return Q=jr(Q),F(k,O,j,Q,de)}if(Ne(Q)||L(Q))return k=k.get(j)||null,G(O,k,Q,de,null);if(typeof Q.then=="function")return F(k,O,j,sc(Q),de);if(Q.$$typeof===ee)return F(k,O,j,ec(O,Q),de);rc(O,Q)}return null}function he(k,O,j,Q){for(var de=null,qe=null,fe=O,xe=O=0,Ve=null;fe!==null&&xe<j.length;xe++){fe.index>xe?(Ve=fe,fe=null):Ve=fe.sibling;var He=B(k,fe,j[xe],Q);if(He===null){fe===null&&(fe=Ve);break}t&&fe&&He.alternate===null&&i(k,fe),O=d(He,O,xe),qe===null?de=He:qe.sibling=He,qe=He,fe=Ve}if(xe===j.length)return a(k,fe),Ue&&ji(k,xe),de;if(fe===null){for(;xe<j.length;xe++)fe=$(k,j[xe],Q),fe!==null&&(O=d(fe,O,xe),qe===null?de=fe:qe.sibling=fe,qe=fe);return Ue&&ji(k,xe),de}for(fe=l(fe);xe<j.length;xe++)Ve=F(fe,k,xe,j[xe],Q),Ve!==null&&(t&&Ve.alternate!==null&&fe.delete(Ve.key===null?xe:Ve.key),O=d(Ve,O,xe),qe===null?de=Ve:qe.sibling=Ve,qe=Ve);return t&&fe.forEach(function(Fs){return i(k,Fs)}),Ue&&ji(k,xe),de}function ye(k,O,j,Q){if(j==null)throw Error(r(151));for(var de=null,qe=null,fe=O,xe=O=0,Ve=null,He=j.next();fe!==null&&!He.done;xe++,He=j.next()){fe.index>xe?(Ve=fe,fe=null):Ve=fe.sibling;var Fs=B(k,fe,He.value,Q);if(Fs===null){fe===null&&(fe=Ve);break}t&&fe&&Fs.alternate===null&&i(k,fe),O=d(Fs,O,xe),qe===null?de=Fs:qe.sibling=Fs,qe=Fs,fe=Ve}if(He.done)return a(k,fe),Ue&&ji(k,xe),de;if(fe===null){for(;!He.done;xe++,He=j.next())He=$(k,He.value,Q),He!==null&&(O=d(He,O,xe),qe===null?de=He:qe.sibling=He,qe=He);return Ue&&ji(k,xe),de}for(fe=l(fe);!He.done;xe++,He=j.next())He=F(fe,k,xe,He.value,Q),He!==null&&(t&&He.alternate!==null&&fe.delete(He.key===null?xe:He.key),O=d(He,O,xe),qe===null?de=He:qe.sibling=He,qe=He);return t&&fe.forEach(function(kA){return i(k,kA)}),Ue&&ji(k,xe),de}function et(k,O,j,Q){if(typeof j=="object"&&j!==null&&j.type===Y&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case P:e:{for(var de=j.key;O!==null;){if(O.key===de){if(de=j.type,de===Y){if(O.tag===7){a(k,O.sibling),Q=h(O,j.props.children),Q.return=k,k=Q;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&jr(de)===O.type){a(k,O.sibling),Q=h(O,j.props),il(Q,j),Q.return=k,k=Q;break e}a(k,O);break}else i(k,O);O=O.sibling}j.type===Y?(Q=Vr(j.props.children,k.mode,Q,j.key),Q.return=k,k=Q):(Q=Ju(j.type,j.key,j.props,null,k.mode,Q),il(Q,j),Q.return=k,k=Q)}return _(k);case K:e:{for(de=j.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){a(k,O.sibling),Q=h(O,j.children||[]),Q.return=k,k=Q;break e}else{a(k,O);break}else i(k,O);O=O.sibling}Q=Af(j,k.mode,Q),Q.return=k,k=Q}return _(k);case R:return j=jr(j),et(k,O,j,Q)}if(Ne(j))return he(k,O,j,Q);if(L(j)){if(de=L(j),typeof de!="function")throw Error(r(150));return j=de.call(j),ye(k,O,j,Q)}if(typeof j.then=="function")return et(k,O,sc(j),Q);if(j.$$typeof===ee)return et(k,O,ec(k,j),Q);rc(k,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,O!==null&&O.tag===6?(a(k,O.sibling),Q=h(O,j),Q.return=k,k=Q):(a(k,O),Q=bf(j,k.mode,Q),Q.return=k,k=Q),_(k)):a(k,O)}return function(k,O,j,Q){try{nl=0;var de=et(k,O,j,Q);return Va=null,de}catch(fe){if(fe===Ma||fe===nc)throw fe;var qe=Tn(29,fe,null,k.mode);return qe.lanes=Q,qe.return=k,qe}finally{}}}var Br=Op(!0),Mp=Op(!1),Cs=!1;function kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Is(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function xs(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=$u(t),pp(t,null,a),i}return Xu(t,l,i,a),$u(t)}function sl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Do(t,a)}}function Pf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Uf=!1;function rl(){if(Uf){var t=Oa;if(t!==null)throw t}}function al(t,i,a,l){Uf=!1;var h=t.updateQueue;Cs=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,z=N.next;N.next=null,_===null?d=z:_.next=z,_=N;var G=t.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==_&&(b===null?G.firstBaseUpdate=z:b.next=z,G.lastBaseUpdate=N))}if(d!==null){var $=h.baseState;_=0,G=z=N=null,b=d;do{var B=b.lane&-536870913,F=B!==b.lane;if(F?(Me&B)===B:(l&B)===B){B!==0&&B===Da&&(Uf=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=t,ye=b;B=i;var et=a;switch(ye.tag){case 1:if(he=ye.payload,typeof he=="function"){$=he.call(et,$,B);break e}$=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ye.payload,B=typeof he=="function"?he.call(et,$,B):he,B==null)break e;$=S({},$,B);break e;case 2:Cs=!0}}B=b.callback,B!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(z=G=F,N=$):G=G.next=F,_|=B;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);G===null&&(N=$),h.baseState=N,h.firstBaseUpdate=z,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Vs|=_,t.lanes=_,t.memoizedState=$}}function Vp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function kp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Vp(a[t],i)}var ka=M(null),ac=M(0);function Lp(t,i){t=$i,ie(ac,t),ie(ka,i),$i=t|i.baseLanes}function jf(){ie(ac,$i),ie(ka,ka.current)}function zf(){$i=ac.current,W(ka),W(ac)}var bn=M(null),Un=null;function Ns(t){var i=t.alternate;ie(yt,yt.current&1),ie(bn,t),Un===null&&(i===null||ka.current!==null||i.memoizedState!==null)&&(Un=t)}function Bf(t){ie(yt,yt.current),ie(bn,t),Un===null&&(Un=t)}function Pp(t){t.tag===22?(ie(yt,yt.current),ie(bn,t),Un===null&&(Un=t)):Ds()}function Ds(){ie(yt,yt.current),ie(bn,bn.current)}function An(t){W(bn),Un===t&&(Un=null),W(yt)}var yt=M(0);function oc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yd(a)||Qd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var qi=0,Re=null,We=null,Ct=null,lc=!1,La=!1,qr=!1,uc=0,ol=0,Pa=null,w1=0;function ft(){throw Error(r(321))}function qf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!En(t[a],i[a]))return!1;return!0}function Hf(t,i,a,l,h,d){return qi=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=t===null||t.memoizedState===null?Ey:sd,qr=!1,d=a(l,h),qr=!1,La&&(d=jp(i,a,l,h)),Up(t),d}function Up(t){H.H=cl;var i=We!==null&&We.next!==null;if(qi=0,Ct=We=Re=null,lc=!1,ol=0,Pa=null,i)throw Error(r(300));t===null||It||(t=t.dependencies,t!==null&&Zu(t)&&(It=!0))}function jp(t,i,a,l){Re=t;var h=0;do{if(La&&(Pa=null),ol=0,La=!1,25<=h)throw Error(r(301));if(h+=1,Ct=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=Ty,d=i(a,l)}while(La);return d}function R1(){var t=H.H,i=t.useState()[0];return i=typeof i.then=="function"?ll(i):i,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Re.flags|=1024),i}function Ff(){var t=uc!==0;return uc=0,t}function Gf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Kf(t){if(lc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}lc=!1}qi=0,Ct=We=Re=null,La=!1,ol=uc=0,Pa=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Re.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function _t(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var i=Ct===null?Re.memoizedState:Ct.next;if(i!==null)Ct=i,We=t;else{if(t===null)throw Re.alternate===null?Error(r(467)):Error(r(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ct===null?Re.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(t){var i=ol;return ol+=1,Pa===null&&(Pa=[]),t=xp(Pa,t,i),i=Re,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Ey:sd),t}function hc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ll(t);if(t.$$typeof===ee)return Ft(t)}throw Error(r(438,String(t)))}function Yf(t){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=cc(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=V;return i.index++,a}function Hi(t,i){return typeof i=="function"?i(t):i}function fc(t){var i=_t();return Qf(i,We,t)}function Qf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,N=null,z=i,G=!1;do{var $=z.lane&-536870913;if($!==z.lane?(Me&$)===$:(qi&$)===$){var B=z.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),$===Da&&(G=!0);else if((qi&B)===B){z=z.next,B===Da&&(G=!0);continue}else $={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=$,_=d):N=N.next=$,Re.lanes|=B,Vs|=B;$=z.action,qr&&a(d,$),d=z.hasEagerState?z.eagerState:a(d,$)}else B={lane:$,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=B,_=d):N=N.next=B,Re.lanes|=$,Vs|=$;z=z.next}while(z!==null&&z!==i);if(N===null?_=d:N.next=b,!En(d,t.memoizedState)&&(It=!0,G&&(a=Oa,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xf(t){var i=_t(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);En(d,i.memoizedState)||(It=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function zp(t,i,a){var l=Re,h=_t(),d=Ue;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!En((We||h).memoizedState,a);if(_&&(h.memoizedState=a,It=!0),h=h.queue,Wf(Hp.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ua(9,{destroy:void 0},qp.bind(null,l,h,a,i),null),tt===null)throw Error(r(349));d||(qi&127)!==0||Bp(l,i,a)}return a}function Bp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=cc(),Re.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function qp(t,i,a,l){i.value=a,i.getSnapshot=l,Fp(i)&&Gp(t)}function Hp(t,i,a){return a(function(){Fp(i)&&Gp(t)})}function Fp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!En(t,a)}catch{return!0}}function Gp(t){var i=Mr(t,2);i!==null&&dn(i,t,2)}function $f(t){var i=rn();if(typeof t=="function"){var a=t;if(t=a(),qr){In(!0);try{a()}finally{In(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},i}function Kp(t,i,a,l){return t.baseState=a,Qf(t,We,typeof l=="function"?l:Hi)}function C1(t,i,a,l,h){if(gc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Yp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Yp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=H.T,_={};H.T=_;try{var b=a(h,l),N=H.S;N!==null&&N(_,b),Qp(t,i,b)}catch(z){Jf(t,i,z)}finally{d!==null&&_.types!==null&&(d.types=_.types),H.T=d}}else try{d=a(h,l),Qp(t,i,d)}catch(z){Jf(t,i,z)}}function Qp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Xp(t,i,l)},function(l){return Jf(t,i,l)}):Xp(t,i,a)}function Xp(t,i,a){i.status="fulfilled",i.value=a,$p(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Yp(t,a)))}function Jf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,$p(i),i=i.next;while(i!==l)}t.action=null}function $p(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Jp(t,i){return i}function Wp(t,i){if(Ue){var a=tt.formState;if(a!==null){e:{var l=Re;if(Ue){if(it){t:{for(var h=it,d=Pn;h.nodeType!==8;){if(!d){h=null;break t}if(h=jn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){it=jn(h.nextSibling),l=h.data==="F!";break e}}ws(l)}l=!1}l&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jp,lastRenderedState:i},a.queue=l,a=yy.bind(null,Re,l),l.dispatch=a,l=$f(!1),d=id.bind(null,Re,!1,l.queue),l=rn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=C1.bind(null,Re,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Zp(t){var i=_t();return ey(i,We,t)}function ey(t,i,a){if(i=Qf(t,i,Jp)[0],t=fc(Hi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ll(i)}catch(_){throw _===Ma?nc:_}else l=i;i=_t();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,Ua(9,{destroy:void 0},I1.bind(null,h,a),null)),[l,d,t]}function I1(t,i){t.action=i}function ty(t){var i=_t(),a=We;if(a!==null)return ey(i,a,t);_t(),i=i.memoizedState,a=_t();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ua(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=cc(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function ny(){return _t().memoizedState}function dc(t,i,a,l){var h=rn();Re.flags|=t,h.memoizedState=Ua(1|i,{destroy:void 0},a,l===void 0?null:l)}function mc(t,i,a,l){var h=_t();l=l===void 0?null:l;var d=h.memoizedState.inst;We!==null&&l!==null&&qf(l,We.memoizedState.deps)?h.memoizedState=Ua(i,d,a,l):(Re.flags|=t,h.memoizedState=Ua(1|i,d,a,l))}function iy(t,i){dc(8390656,8,t,i)}function Wf(t,i){mc(2048,8,t,i)}function x1(t){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=cc(),Re.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function sy(t){var i=_t().memoizedState;return x1({ref:i,nextImpl:t}),function(){if((Ge&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function ry(t,i){return mc(4,2,t,i)}function ay(t,i){return mc(4,4,t,i)}function oy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ly(t,i,a){a=a!=null?a.concat([t]):null,mc(4,4,oy.bind(null,i,t),a)}function Zf(){}function uy(t,i){var a=_t();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&qf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function cy(t,i){var a=_t();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&qf(i,l[1]))return l[0];if(l=t(),qr){In(!0);try{t()}finally{In(!1)}}return a.memoizedState=[l,i],l}function ed(t,i,a){return a===void 0||(qi&1073741824)!==0&&(Me&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=h_(),Re.lanes|=t,Vs|=t,a)}function hy(t,i,a,l){return En(a,i)?a:ka.current!==null?(t=ed(t,a,l),En(t,i)||(It=!0),t):(qi&42)===0||(qi&1073741824)!==0&&(Me&261930)===0?(It=!0,t.memoizedState=a):(t=h_(),Re.lanes|=t,Vs|=t,i)}function fy(t,i,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var _=H.T,b={};H.T=b,id(t,!1,i,a);try{var N=h(),z=H.S;if(z!==null&&z(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=S1(N,l);ul(t,i,G,Rn(t))}else ul(t,i,l,Rn(t))}catch($){ul(t,i,{then:function(){},status:"rejected",reason:$},Rn())}finally{ne.p=d,_!==null&&b.types!==null&&(_.types=b.types),H.T=_}}function N1(){}function td(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=dy(t).queue;fy(t,h,i,ge,a===null?N1:function(){return my(t),a(l)})}function dy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function my(t){var i=dy(t);i.next===null&&(i=t.alternate.memoizedState),ul(t,i.next.queue,{},Rn())}function nd(){return Ft(Rl)}function gy(){return _t().memoizedState}function py(){return _t().memoizedState}function D1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();t=Is(a);var l=xs(i,t,a);l!==null&&(dn(l,i,a),sl(l,i,a)),i={cache:Df()},t.payload=i;return}i=i.return}}function O1(t,i,a){var l=Rn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gc(t)?_y(i,a):(a=Ef(t,i,a,l),a!==null&&(dn(a,t,l),vy(a,i,l)))}function yy(t,i,a){var l=Rn();ul(t,i,a,l)}function ul(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(gc(t))_y(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,En(b,_))return Xu(t,i,h,0),tt===null&&Qu(),!1}catch{}finally{}if(a=Ef(t,i,h,l),a!==null)return dn(a,t,l),vy(a,i,l),!0}return!1}function id(t,i,a,l){if(l={lane:2,revertLane:kd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gc(t)){if(i)throw Error(r(479))}else i=Ef(t,a,l,2),i!==null&&dn(i,t,2)}function gc(t){var i=t.alternate;return t===Re||i!==null&&i===Re}function _y(t,i){La=lc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function vy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Do(t,a)}}var cl={readContext:Ft,use:hc,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};cl.useEffectEvent=ft;var Ey={readContext:Ft,use:hc,useCallback:function(t,i){return rn().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:iy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,dc(4194308,4,oy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return dc(4194308,4,t,i)},useInsertionEffect:function(t,i){dc(4,2,t,i)},useMemo:function(t,i){var a=rn();i=i===void 0?null:i;var l=t();if(qr){In(!0);try{t()}finally{In(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=rn();if(a!==void 0){var h=a(i);if(qr){In(!0);try{a(i)}finally{In(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=O1.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var i=rn();return t={current:t},i.memoizedState=t},useState:function(t){t=$f(t);var i=t.queue,a=yy.bind(null,Re,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Zf,useDeferredValue:function(t,i){var a=rn();return ed(a,t,i)},useTransition:function(){var t=$f(!1);return t=fy.bind(null,Re,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Re,h=rn();if(Ue){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),tt===null)throw Error(r(349));(Me&127)!==0||Bp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,iy(Hp.bind(null,l,d,t),[t]),l.flags|=2048,Ua(9,{destroy:void 0},qp.bind(null,l,d,a,i),null),a},useId:function(){var t=rn(),i=tt.identifierPrefix;if(Ue){var a=Ai,l=bi;a=(l&~(1<<32-gt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=uc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=w1++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:nd,useFormState:Wp,useActionState:Wp,useOptimistic:function(t){var i=rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=id.bind(null,Re,!0,a),a.dispatch=i,[t,i]},useMemoCache:Yf,useCacheRefresh:function(){return rn().memoizedState=D1.bind(null,Re)},useEffectEvent:function(t){var i=rn(),a={impl:t};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},sd={readContext:Ft,use:hc,useCallback:uy,useContext:Ft,useEffect:Wf,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:cy,useReducer:fc,useRef:ny,useState:function(){return fc(Hi)},useDebugValue:Zf,useDeferredValue:function(t,i){var a=_t();return hy(a,We.memoizedState,t,i)},useTransition:function(){var t=fc(Hi)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:ll(t),i]},useSyncExternalStore:zp,useId:gy,useHostTransitionStatus:nd,useFormState:Zp,useActionState:Zp,useOptimistic:function(t,i){var a=_t();return Kp(a,We,t,i)},useMemoCache:Yf,useCacheRefresh:py};sd.useEffectEvent=sy;var Ty={readContext:Ft,use:hc,useCallback:uy,useContext:Ft,useEffect:Wf,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:cy,useReducer:Xf,useRef:ny,useState:function(){return Xf(Hi)},useDebugValue:Zf,useDeferredValue:function(t,i){var a=_t();return We===null?ed(a,t,i):hy(a,We.memoizedState,t,i)},useTransition:function(){var t=Xf(Hi)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:ll(t),i]},useSyncExternalStore:zp,useId:gy,useHostTransitionStatus:nd,useFormState:ty,useActionState:ty,useOptimistic:function(t,i){var a=_t();return We!==null?Kp(a,We,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:py};Ty.useEffectEvent=sy;function rd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ad={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Rn(),h=Is(l);h.payload=i,a!=null&&(h.callback=a),i=xs(t,h,l),i!==null&&(dn(i,t,l),sl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Rn(),h=Is(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=xs(t,h,l),i!==null&&(dn(i,t,l),sl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Rn(),l=Is(a);l.tag=2,i!=null&&(l.callback=i),i=xs(t,l,a),i!==null&&(dn(i,t,a),sl(i,t,a))}};function by(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!$o(a,l)||!$o(h,d):!0}function Ay(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&ad.enqueueReplaceState(i,i.state,null)}function Hr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Sy(t){Yu(t)}function wy(t){console.error(t)}function Ry(t){Yu(t)}function pc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Cy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function od(t,i,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){pc(t,i)},a}function Iy(t){return t=Is(t),t.tag=3,t}function xy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Cy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Cy(i,a,l),typeof h!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function M1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Na(i,a,h,!0),a=bn.current,a!==null){switch(a.tag){case 31:case 13:return Un===null?Ic():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===ic?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Od(t,l,h)),!1;case 22:return a.flags|=65536,l===ic?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Od(t,l,h)),!1}throw Error(r(435,a.tag))}return Od(t,l,h),Ic(),!1}if(Ue)return i=bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Rf&&(t=Error(r(422),{cause:l}),Zo(Vn(t,a)))):(l!==Rf&&(i=Error(r(423),{cause:l}),Zo(Vn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Vn(l,a),h=od(t.stateNode,l,h),Pf(t,h),dt!==4&&(dt=2)),!1;var d=Error(r(520),{cause:l});if(d=Vn(d,a),_l===null?_l=[d]:_l.push(d),dt!==4&&(dt=2),i===null)return!0;l=Vn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=od(a.stateNode,l,t),Pf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ks===null||!ks.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Iy(h),xy(h,t,a,l),Pf(a,h),!1}a=a.return}while(a!==null);return!1}var ld=Error(r(461)),It=!1;function Gt(t,i,a,l){i.child=t===null?Mp(i,null,a,l):Br(i,t.child,a,l)}function Ny(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Pr(i),l=Hf(t,i,a,_,d,h),b=Ff(),t!==null&&!It?(Gf(t,i,h),Fi(t,i,h)):(Ue&&b&&Sf(i),i.flags|=1,Gt(t,i,l,h),i.child)}function Dy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Tf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Oy(t,i,d,l,h)):(t=Ju(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!pd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:$o,a(_,l)&&t.ref===i.ref)return Fi(t,i,h)}return i.flags|=1,t=Ui(d,l),t.ref=i.ref,t.return=i,i.child=t}function Oy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if($o(d,l)&&t.ref===i.ref)if(It=!1,i.pendingProps=l=d,pd(t,h))(t.flags&131072)!==0&&(It=!0);else return i.lanes=t.lanes,Fi(t,i,h)}return ud(t,i,a,l,h)}function My(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Vy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&tc(i,d!==null?d.cachePool:null),d!==null?Lp(i,d):jf(),Pp(i);else return l=i.lanes=536870912,Vy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(tc(i,d.cachePool),Lp(i,d),Ds(),i.memoizedState=null):(t!==null&&tc(i,null),jf(),Ds());return Gt(t,i,h,a),i.child}function hl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Vy(t,i,a,l,h){var d=Mf();return d=d===null?null:{parent:Rt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&tc(i,null),jf(),Pp(i),t!==null&&Na(t,i,l,!0),i.childLanes=h,null}function yc(t,i){return i=vc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ky(t,i,a){return Br(i,t.child,null,a),t=yc(i,i.pendingProps),t.flags|=2,An(i),i.memoizedState=null,t}function V1(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ue){if(l.mode==="hidden")return t=yc(i,l),i.lanes=536870912,hl(null,t);if(Bf(i),(t=it)?(t=Y_(t,Pn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:As!==null?{id:bi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=_p(t),a.return=i,i.child=a,Ht=i,it=null)):t=null,t===null)throw ws(i);return i.lanes=536870912,null}return yc(i,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Bf(i),h)if(i.flags&256)i.flags&=-257,i=ky(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(It||Na(t,i,a,!1),h=(a&t.childLanes)!==0,It||h){if(l=tt,l!==null&&(_=Oo(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Mr(t,_),dn(l,t,_),ld;Ic(),i=ky(t,i,a)}else t=d.treeContext,it=jn(_.nextSibling),Ht=i,Ue=!0,Ss=null,Pn=!1,t!==null&&Tp(i,t),i=yc(i,l),i.flags|=4096;return i}return t=Ui(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function _c(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function ud(t,i,a,l,h){return Pr(i),a=Hf(t,i,a,l,void 0,h),l=Ff(),t!==null&&!It?(Gf(t,i,h),Fi(t,i,h)):(Ue&&l&&Sf(i),i.flags|=1,Gt(t,i,a,h),i.child)}function Ly(t,i,a,l,h,d){return Pr(i),i.updateQueue=null,a=jp(i,l,a,h),Up(t),l=Ff(),t!==null&&!It?(Gf(t,i,d),Fi(t,i,d)):(Ue&&l&&Sf(i),i.flags|=1,Gt(t,i,a,d),i.child)}function Py(t,i,a,l,h){if(Pr(i),i.stateNode===null){var d=Ra,_=a.contextType;typeof _=="object"&&_!==null&&(d=Ft(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ad,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},kf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Ft(_):Ra,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(rd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&ad.enqueueReplaceState(d,d.state,null),al(i,l,d,h),rl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=Hr(a,b);d.props=N;var z=d.context,G=a.contextType;_=Ra,typeof G=="object"&&G!==null&&(_=Ft(G));var $=a.getDerivedStateFromProps;G=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||z!==_)&&Ay(i,d,l,_),Cs=!1;var B=i.memoizedState;d.state=B,al(i,l,d,h),rl(),z=i.memoizedState,b||B!==z||Cs?(typeof $=="function"&&(rd(i,a,$,l),z=i.memoizedState),(N=Cs||by(i,a,N,l,B,z,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Lf(t,i),_=i.memoizedProps,G=Hr(a,_),d.props=G,$=i.pendingProps,B=d.context,z=a.contextType,N=Ra,typeof z=="object"&&z!==null&&(N=Ft(z)),b=a.getDerivedStateFromProps,(z=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||B!==N)&&Ay(i,d,l,N),Cs=!1,B=i.memoizedState,d.state=B,al(i,l,d,h),rl();var F=i.memoizedState;_!==$||B!==F||Cs||t!==null&&t.dependencies!==null&&Zu(t.dependencies)?(typeof b=="function"&&(rd(i,a,b,l),F=i.memoizedState),(G=Cs||by(i,a,G,l,B,F,N)||t!==null&&t.dependencies!==null&&Zu(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=N,l=G):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,_c(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Br(i,t.child,null,h),i.child=Br(i,null,a,h)):Gt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Fi(t,i,h),t}function Uy(t,i,a,l){return kr(),i.flags|=256,Gt(t,i,a,l),i.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hd(t){return{baseLanes:t,cachePool:Cp()}}function fd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=wn),t}function jy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ue){if(h?Ns(i):Ds(),(t=it)?(t=Y_(t,Pn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:As!==null?{id:bi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=_p(t),a.return=i,i.child=a,Ht=i,it=null)):t=null,t===null)throw ws(i);return Qd(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Ds(),h=i.mode,b=vc({mode:"hidden",children:b},h),l=Vr(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=hd(a),l.childLanes=fd(t,_,a),i.memoizedState=cd,hl(null,l)):(Ns(i),dd(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Ns(i),i.flags&=-257,i=md(t,i,a)):i.memoizedState!==null?(Ds(),i.child=t.child,i.flags|=128,i=null):(Ds(),b=l.fallback,h=i.mode,l=vc({mode:"visible",children:l.children},h),b=Vr(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Br(i,t.child,null,a),l=i.child,l.memoizedState=hd(a),l.childLanes=fd(t,_,a),i.memoizedState=cd,i=hl(null,l));else if(Ns(i),Qd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(r(419)),l.stack="",l.digest=_,Zo({value:l,source:null,stack:null}),i=md(t,i,a)}else if(It||Na(t,i,a,!1),_=(a&t.childLanes)!==0,It||_){if(_=tt,_!==null&&(l=Oo(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Mr(t,l),dn(_,t,l),ld;Yd(b)||Ic(),i=md(t,i,a)}else Yd(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,it=jn(b.nextSibling),Ht=i,Ue=!0,Ss=null,Pn=!1,t!==null&&Tp(i,t),i=dd(i,l.children),i.flags|=4096);return i}return h?(Ds(),b=l.fallback,h=i.mode,N=t.child,z=N.sibling,l=Ui(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,z!==null?b=Ui(z,b):(b=Vr(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,hl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=hd(a):(h=b.cachePool,h!==null?(N=Rt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=Cp(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=fd(t,_,a),i.memoizedState=cd,hl(t.child,l)):(Ns(i),a=t.child,t=a.sibling,a=Ui(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function dd(t,i){return i=vc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function vc(t,i){return t=Tn(22,t,null,i),t.lanes=0,t}function md(t,i,a){return Br(i,t.child,null,a),t=dd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function zy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),xf(t.return,i,a)}function gd(t,i,a,l,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function By(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var _=yt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ie(yt,_),Gt(t,i,l,a),l=Ue?Wo:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zy(t,a,i);else if(t.tag===19)zy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&oc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),gd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&oc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}gd(i,!0,a,null,d,l);break;case"together":gd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Fi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Vs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Na(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Ui(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ui(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function pd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Zu(t)))}function k1(t,i,a){switch(i.tag){case 3:Mt(i,i.stateNode.containerInfo),Rs(i,Rt,t.memoizedState.cache),kr();break;case 27:case 5:gr(i);break;case 4:Mt(i,i.stateNode.containerInfo);break;case 10:Rs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Bf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ns(i),i.flags|=128,null):(a&i.child.childLanes)!==0?jy(t,i,a):(Ns(i),t=Fi(t,i,a),t!==null?t.sibling:null);Ns(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Na(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return By(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(yt,yt.current),l)break;return null;case 22:return i.lanes=0,My(t,i,a,i.pendingProps);case 24:Rs(i,Rt,t.memoizedState.cache)}return Fi(t,i,a)}function qy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)It=!0;else{if(!pd(t,a)&&(i.flags&128)===0)return It=!1,k1(t,i,a);It=(t.flags&131072)!==0}else It=!1,Ue&&(i.flags&1048576)!==0&&Ep(i,Wo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=jr(i.elementType),i.type=t,typeof t=="function")Tf(t)?(l=Hr(t,l),i.tag=1,i=Py(null,i,t,l,a)):(i.tag=0,i=ud(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===pe){i.tag=11,i=Ny(null,i,t,l,a);break e}else if(h===I){i.tag=14,i=Dy(null,i,t,l,a);break e}}throw i=Se(t)||t,Error(r(306,i,""))}}return i;case 0:return ud(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Hr(l,i.pendingProps),Py(t,i,l,h,a);case 3:e:{if(Mt(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Lf(t,i),al(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Rs(i,Rt,l),l!==d.cache&&Nf(i,[Rt],a,!0),rl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Uy(t,i,l,a);break e}else if(l!==h){h=Vn(Error(r(424)),i),Zo(h),i=Uy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(it=jn(t.firstChild),Ht=i,Ue=!0,Ss=null,Pn=!0,a=Mp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(kr(),l===h){i=Fi(t,i,a);break e}Gt(t,i,l,a)}i=i.child}return i;case 26:return _c(t,i),t===null?(a=Z_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ue||(a=i.type,t=i.pendingProps,l=kc(Ie.current).createElement(a),l[At]=i,l[Pt]=t,Kt(l,a,t),St(l),i.stateNode=l):i.memoizedState=Z_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return gr(i),t===null&&Ue&&(l=i.stateNode=$_(i.type,i.pendingProps,Ie.current),Ht=i,Pn=!0,h=it,js(i.type)?(Xd=h,it=jn(l.firstChild)):it=h),Gt(t,i,i.pendingProps.children,a),_c(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ue&&((h=l=it)&&(l=hA(l,i.type,i.pendingProps,Pn),l!==null?(i.stateNode=l,Ht=i,it=jn(l.firstChild),Pn=!1,h=!0):h=!1),h||ws(i)),gr(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Fd(h,d)?l=null:_!==null&&Fd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Hf(t,i,R1,null,null,a),Rl._currentValue=h),_c(t,i),Gt(t,i,l,a),i.child;case 6:return t===null&&Ue&&((t=a=it)&&(a=fA(a,i.pendingProps,Pn),a!==null?(i.stateNode=a,Ht=i,it=null,t=!0):t=!1),t||ws(i)),null;case 13:return jy(t,i,a);case 4:return Mt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Br(i,null,l,a):Gt(t,i,l,a),i.child;case 11:return Ny(t,i,i.type,i.pendingProps,a);case 7:return Gt(t,i,i.pendingProps,a),i.child;case 8:return Gt(t,i,i.pendingProps.children,a),i.child;case 12:return Gt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Rs(i,i.type,l.value),Gt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Pr(i),h=Ft(h),l=l(h),i.flags|=1,Gt(t,i,l,a),i.child;case 14:return Dy(t,i,i.type,i.pendingProps,a);case 15:return Oy(t,i,i.type,i.pendingProps,a);case 19:return By(t,i,a);case 31:return V1(t,i,a);case 22:return My(t,i,a,i.pendingProps);case 24:return Pr(i),l=Ft(Rt),t===null?(h=Mf(),h===null&&(h=tt,d=Df(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},kf(i),Rs(i,Rt,h)):((t.lanes&a)!==0&&(Lf(t,i),al(i,null,null,a),rl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Rs(i,Rt,l)):(l=d.cache,Rs(i,Rt,l),l!==h.cache&&Nf(i,[Rt],a,!0))),Gt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Gi(t){t.flags|=4}function yd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(g_())t.flags|=8192;else throw zr=ic,Vf}else t.flags&=-16777217}function Hy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sv(i))if(g_())t.flags|=8192;else throw zr=ic,Vf}function Ec(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ru():536870912,t.lanes|=i,qa|=i)}function fl(t,i){if(!Ue)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function st(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function L1(t,i,a){var l=i.pendingProps;switch(wf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Bi(Rt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xa(i)?Gi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cf())),st(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Gi(i),d!==null?(st(i),Hy(i,d)):(st(i),yd(i,h,null,l,a))):d?d!==t.memoizedState?(Gi(i),st(i),Hy(i,d)):(st(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Gi(i),st(i),yd(i,h,t,l,a)),null;case 27:if(oa(i),a=Ie.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return st(i),null}t=ce.current,xa(i)?bp(i):(t=$_(h,l,a),i.stateNode=t,Gi(i))}return st(i),null;case 5:if(oa(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return st(i),null}if(d=ce.current,xa(i))bp(i);else{var _=kc(Ie.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}d[At]=i,d[Pt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Kt(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Gi(i)}}return st(i),yd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Gi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Ie.current,xa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Ht,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[At]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||j_(t.nodeValue,a)),t||ws(i,!0)}else t=kc(t).createTextNode(l),t[At]=i,i.stateNode=t}return st(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=xa(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[At]=i}else kr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),t=!1}else a=Cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(An(i),i):(An(i),null);if((i.flags&128)!==0)throw Error(r(558))}return st(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=xa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[At]=i}else kr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),h=!1}else h=Cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(An(i),i):(An(i),null)}return An(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Ec(i,i.updateQueue),st(i),null);case 4:return ot(),t===null&&jd(i.stateNode.containerInfo),st(i),null;case 10:return Bi(i.type),st(i),null;case 19:if(W(yt),l=i.memoizedState,l===null)return st(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)fl(l,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=oc(t),d!==null){for(i.flags|=128,fl(l,!1),t=d.updateQueue,i.updateQueue=t,Ec(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)yp(a,t),a=a.sibling;return ie(yt,yt.current&1|2),Ue&&ji(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&nn()>wc&&(i.flags|=128,h=!0,fl(l,!1),i.lanes=4194304)}else{if(!h)if(t=oc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Ec(i,t),fl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ue)return st(i),null}else 2*nn()-l.renderingStartTime>wc&&a!==536870912&&(i.flags|=128,h=!0,fl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nn(),t.sibling=null,a=yt.current,ie(yt,h?a&1|2:a&1),Ue&&ji(i,l.treeForkCount),t):(st(i),null);case 22:case 23:return An(i),zf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),a=i.updateQueue,a!==null&&Ec(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&W(Ur),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Bi(Rt),st(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function P1(t,i){switch(wf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Bi(Rt),ot(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return oa(i),null;case 31:if(i.memoizedState!==null){if(An(i),i.alternate===null)throw Error(r(340));kr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(An(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));kr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return W(yt),null;case 4:return ot(),null;case 10:return Bi(i.type),null;case 22:case 23:return An(i),zf(),t!==null&&W(Ur),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Bi(Rt),null;case 25:return null;default:return null}}function Fy(t,i){switch(wf(i),i.tag){case 3:Bi(Rt),ot();break;case 26:case 27:case 5:oa(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&An(i);break;case 13:An(i);break;case 19:W(yt);break;case 10:Bi(i.type);break;case 22:case 23:An(i),zf(),t!==null&&W(Ur);break;case 24:Bi(Rt)}}function dl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){$e(i,i.return,b)}}function Os(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var N=a,z=b;try{z()}catch(G){$e(h,N,G)}}}l=l.next}while(l!==d)}}catch(G){$e(i,i.return,G)}}function Gy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{kp(i,a)}catch(l){$e(t,t.return,l)}}}function Ky(t,i,a){a.props=Hr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){$e(t,i,l)}}function ml(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){$e(t,i,h)}}function Si(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){$e(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$e(t,i,h)}else a.current=null}function Yy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){$e(t,t.return,h)}}function _d(t,i,a){try{var l=t.stateNode;rA(l,t.type,a,i),l[Pt]=i}catch(h){$e(t,t.return,h)}}function Qy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&js(t.type)||t.tag===4}function vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ed(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Yn));else if(l!==4&&(l===27&&js(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Ed(t,i,a),t=t.sibling;t!==null;)Ed(t,i,a),t=t.sibling}function Tc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&js(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Tc(t,i,a),t=t.sibling;t!==null;)Tc(t,i,a),t=t.sibling}function Xy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Kt(i,l,a),i[At]=t,i[Pt]=a}catch(d){$e(t,t.return,d)}}var Ki=!1,xt=!1,Td=!1,$y=typeof WeakSet=="function"?WeakSet:Set,jt=null;function U1(t,i){if(t=t.containerInfo,qd=qc,t=lp(t),mf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,z=0,G=0,$=t,B=null;t:for(;;){for(var F;$!==a||h!==0&&$.nodeType!==3||(b=_+h),$!==d||l!==0&&$.nodeType!==3||(N=_+l),$.nodeType===3&&(_+=$.nodeValue.length),(F=$.firstChild)!==null;)B=$,$=F;for(;;){if($===t)break t;if(B===a&&++z===h&&(b=_),B===d&&++G===l&&(N=_),(F=$.nextSibling)!==null)break;$=B,B=$.parentNode}$=F}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hd={focusedElem:t,selectionRange:a},qc=!1,jt=i;jt!==null;)if(i=jt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,jt=t;else for(;jt!==null;){switch(i=jt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=Hr(a.type,h);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ye){$e(a,a.return,ye)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Kd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,jt=t;break}jt=i.return}}function Jy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(t,a),l&4&&dl(5,a);break;case 1:if(Qi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){$e(a,a.return,_)}else{var h=Hr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){$e(a,a.return,_)}}l&64&&Gy(a),l&512&&ml(a,a.return);break;case 3:if(Qi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{kp(t,i)}catch(_){$e(a,a.return,_)}}break;case 27:i===null&&l&4&&Xy(a);case 26:case 5:Qi(t,a),i===null&&l&4&&Yy(a),l&512&&ml(a,a.return);break;case 12:Qi(t,a);break;case 31:Qi(t,a),l&4&&e_(t,a);break;case 13:Qi(t,a),l&4&&t_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Y1.bind(null,a),dA(t,a))));break;case 22:if(l=a.memoizedState!==null||Ki,!l){i=i!==null&&i.memoizedState!==null||xt,h=Ki;var d=xt;Ki=l,(xt=i)&&!d?Xi(t,a,(a.subtreeFlags&8772)!==0):Qi(t,a),Ki=h,xt=d}break;case 30:break;default:Qi(t,a)}}function Wy(t){var i=t.alternate;i!==null&&(t.alternate=null,Wy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&fa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ut=null,un=!1;function Yi(t,i,a){for(a=a.child;a!==null;)Zy(t,i,a),a=a.sibling}function Zy(t,i,a){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:xt||Si(a,i),Yi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||Si(a,i);var l=ut,h=un;js(a.type)&&(ut=a.stateNode,un=!1),Yi(t,i,a),Al(a.stateNode),ut=l,un=h;break;case 5:xt||Si(a,i);case 6:if(l=ut,h=un,ut=null,Yi(t,i,a),ut=l,un=h,ut!==null)if(un)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(d){$e(a,i,d)}else try{ut.removeChild(a.stateNode)}catch(d){$e(a,i,d)}break;case 18:ut!==null&&(un?(t=ut,G_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),$a(t)):G_(ut,a.stateNode));break;case 4:l=ut,h=un,ut=a.stateNode.containerInfo,un=!0,Yi(t,i,a),ut=l,un=h;break;case 0:case 11:case 14:case 15:Os(2,a,i),xt||Os(4,a,i),Yi(t,i,a);break;case 1:xt||(Si(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ky(a,i,l)),Yi(t,i,a);break;case 21:Yi(t,i,a);break;case 22:xt=(l=xt)||a.memoizedState!==null,Yi(t,i,a),xt=l;break;default:Yi(t,i,a)}}function e_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{$a(t)}catch(a){$e(i,i.return,a)}}}function t_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$a(t)}catch(a){$e(i,i.return,a)}}function j1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new $y),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new $y),i;default:throw Error(r(435,t.tag))}}function bc(t,i){var a=j1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=Q1.bind(null,t,l);l.then(h,h)}})}function cn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(js(b.type)){ut=b.stateNode,un=!1;break e}break;case 5:ut=b.stateNode,un=!1;break e;case 3:case 4:ut=b.stateNode.containerInfo,un=!0;break e}b=b.return}if(ut===null)throw Error(r(160));Zy(d,_,h),ut=null,un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)n_(i,t),i=i.sibling}var Zn=null;function n_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cn(i,t),hn(t),l&4&&(Os(3,t,t.return),dl(3,t),Os(5,t,t.return));break;case 1:cn(i,t),hn(t),l&512&&(xt||a===null||Si(a,a.return)),l&64&&Ki&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Zn;if(cn(i,t),hn(t),l&512&&(xt||a===null||Si(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ci]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Kt(d,l,a),d[At]=t,St(d),l=d;break e;case"link":var _=nv("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(l),Kt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=nv("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(l),Kt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[At]=t,St(d),l=d}t.stateNode=l}else iv(h,t.type,t.stateNode);else t.stateNode=tv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?iv(h,t.type,t.stateNode):tv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&_d(t,t.memoizedProps,a.memoizedProps)}break;case 27:cn(i,t),hn(t),l&512&&(xt||a===null||Si(a,a.return)),a!==null&&l&4&&_d(t,t.memoizedProps,a.memoizedProps);break;case 5:if(cn(i,t),hn(t),l&512&&(xt||a===null||Si(a,a.return)),t.flags&32){h=t.stateNode;try{ln(h,"")}catch(he){$e(t,t.return,he)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,_d(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Td=!0);break;case 6:if(cn(i,t),hn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){$e(t,t.return,he)}}break;case 3:if(Uc=null,h=Zn,Zn=Lc(i.containerInfo),cn(i,t),Zn=h,hn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{$a(i.containerInfo)}catch(he){$e(t,t.return,he)}Td&&(Td=!1,i_(t));break;case 4:l=Zn,Zn=Lc(t.stateNode.containerInfo),cn(i,t),hn(t),Zn=l;break;case 12:cn(i,t),hn(t);break;case 31:cn(i,t),hn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 13:cn(i,t),hn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sc=nn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,z=Ki,G=xt;if(Ki=z||h,xt=G||N,cn(i,t),xt=G,Ki=z,hn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Ki||xt||Fr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var $=N.memoizedProps.style,B=$!=null&&$.hasOwnProperty("display")?$.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(he){$e(N,N.return,he)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(he){$e(N,N.return,he)}}}else if(i.tag===18){if(a===null){N=i;try{var F=N.stateNode;h?K_(F,!0):K_(N.stateNode,!1)}catch(he){$e(N,N.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bc(t,a))));break;case 19:cn(i,t),hn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 30:break;case 21:break;default:cn(i,t),hn(t)}}function hn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Qy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=vd(t);Tc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(ln(_,""),a.flags&=-33);var b=vd(t);Tc(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,z=vd(t);Ed(t,z,N);break;default:throw Error(r(161))}}catch(G){$e(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function i_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;i_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Qi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jy(t,i.alternate,i),i=i.sibling}function Fr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Os(4,i,i.return),Fr(i);break;case 1:Si(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ky(i,i.return,a),Fr(i);break;case 27:Al(i.stateNode);case 26:case 5:Si(i,i.return),Fr(i);break;case 22:i.memoizedState===null&&Fr(i);break;case 30:Fr(i);break;default:Fr(i)}t=t.sibling}}function Xi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Xi(h,d,a),dl(4,d);break;case 1:if(Xi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){$e(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Vp(N[h],b)}catch(z){$e(l,l.return,z)}}a&&_&64&&Gy(d),ml(d,d.return);break;case 27:Xy(d);case 26:case 5:Xi(h,d,a),a&&l===null&&_&4&&Yy(d),ml(d,d.return);break;case 12:Xi(h,d,a);break;case 31:Xi(h,d,a),a&&_&4&&e_(h,d);break;case 13:Xi(h,d,a),a&&_&4&&t_(h,d);break;case 22:d.memoizedState===null&&Xi(h,d,a),ml(d,d.return);break;case 30:break;default:Xi(h,d,a)}i=i.sibling}}function bd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&el(a))}function Ad(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&el(t))}function ei(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)s_(t,i,a,l),i=i.sibling}function s_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ei(t,i,a,l),h&2048&&dl(9,i);break;case 1:ei(t,i,a,l);break;case 3:ei(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&el(t)));break;case 12:if(h&2048){ei(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){$e(i,i.return,N)}}else ei(t,i,a,l);break;case 31:ei(t,i,a,l);break;case 13:ei(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ei(t,i,a,l):gl(t,i):d._visibility&2?ei(t,i,a,l):(d._visibility|=2,ja(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&bd(_,i);break;case 24:ei(t,i,a,l),h&2048&&Ad(i.alternate,i);break;default:ei(t,i,a,l)}}function ja(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,N=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:ja(d,_,b,N,h),dl(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?ja(d,_,b,N,h):gl(d,_):(G._visibility|=2,ja(d,_,b,N,h)),h&&z&2048&&bd(_.alternate,_);break;case 24:ja(d,_,b,N,h),h&&z&2048&&Ad(_.alternate,_);break;default:ja(d,_,b,N,h)}i=i.sibling}}function gl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:gl(a,l),h&2048&&bd(l.alternate,l);break;case 24:gl(a,l),h&2048&&Ad(l.alternate,l);break;default:gl(a,l)}i=i.sibling}}var pl=8192;function za(t,i,a){if(t.subtreeFlags&pl)for(t=t.child;t!==null;)r_(t,i,a),t=t.sibling}function r_(t,i,a){switch(t.tag){case 26:za(t,i,a),t.flags&pl&&t.memoizedState!==null&&wA(a,Zn,t.memoizedState,t.memoizedProps);break;case 5:za(t,i,a);break;case 3:case 4:var l=Zn;Zn=Lc(t.stateNode.containerInfo),za(t,i,a),Zn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=pl,pl=16777216,za(t,i,a),pl=l):za(t,i,a));break;default:za(t,i,a)}}function a_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function yl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];jt=l,l_(l,t)}a_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)o_(t),t=t.sibling}function o_(t){switch(t.tag){case 0:case 11:case 15:yl(t),t.flags&2048&&Os(9,t,t.return);break;case 3:yl(t);break;case 12:yl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ac(t)):yl(t);break;default:yl(t)}}function Ac(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];jt=l,l_(l,t)}a_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Os(8,i,i.return),Ac(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(i));break;default:Ac(i)}t=t.sibling}}function l_(t,i){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:Os(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:el(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,jt=l;else e:for(a=t;jt!==null;){l=jt;var h=l.sibling,d=l.return;if(Wy(l),l===a){jt=null;break e}if(h!==null){h.return=d,jt=h;break e}jt=d}}}var z1={getCacheForType:function(t){var i=Ft(Rt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Ft(Rt).controller.signal}},B1=typeof WeakMap=="function"?WeakMap:Map,Ge=0,tt=null,De=null,Me=0,Xe=0,Sn=null,Ms=!1,Ba=!1,Sd=!1,$i=0,dt=0,Vs=0,Gr=0,wd=0,wn=0,qa=0,_l=null,fn=null,Rd=!1,Sc=0,u_=0,wc=1/0,Rc=null,ks=null,kt=0,Ls=null,Ha=null,Ji=0,Cd=0,Id=null,c_=null,vl=0,xd=null;function Rn(){return(Ge&2)!==0&&Me!==0?Me&-Me:H.T!==null?kd():Cu()}function h_(){if(wn===0)if((Me&536870912)===0||Ue){var t=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),wn=t}else wn=536870912;return t=bn.current,t!==null&&(t.flags|=32),wn}function dn(t,i,a){(t===tt&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(Fa(t,0),Ps(t,Me,wn,!1)),vr(t,a),((Ge&2)===0||t!==tt)&&(t===tt&&((Ge&2)===0&&(Gr|=a),dt===4&&Ps(t,Me,wn,!1)),wi(t))}function f_(t,i,a){if((Ge&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Fn(t,i),h=l?F1(t,i):Dd(t,i,!0),d=l;do{if(h===0){Ba&&!l&&Ps(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!q1(a)){h=Dd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=_l;var N=b.current.memoizedState.isDehydrated;if(N&&(Fa(b,_).flags|=256),_=Dd(b,_,!1),_!==2){if(Sd&&!N){b.errorRecoveryDisabledLanes|=d,Gr|=d,h=4;break e}d=fn,fn=h,d!==null&&(fn===null?fn=d:fn.push.apply(fn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Fa(t,0),Ps(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ps(l,i,wn,!Ms);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=Sc+300-nn(),10<h)){if(Ps(l,i,wn,!Ms),oi(l,0,!0)!==0)break e;Ji=i,l.timeoutHandle=H_(d_.bind(null,l,a,fn,Rc,Rd,i,wn,Gr,qa,Ms,d,"Throttled",-0,0),h);break e}d_(l,a,fn,Rc,Rd,i,wn,Gr,qa,Ms,d,null,-0,0)}}break}while(!0);wi(t)}function d_(t,i,a,l,h,d,_,b,N,z,G,$,B,F){if(t.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},r_(i,d,$);var he=(d&62914560)===d?Sc-nn():(d&4194048)===d?u_-nn():0;if(he=RA($,he),he!==null){Ji=d,t.cancelPendingCommit=he(T_.bind(null,t,i,d,a,l,h,_,b,N,G,$,null,B,F)),Ps(t,d,_,!z);return}}T_(t,i,d,a,l,h,_,b,N)}function q1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!En(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ps(t,i,a,l){i&=~wd,i&=~Gr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-gt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&Er(t,a,i)}function Cc(){return(Ge&6)===0?(El(0),!1):!0}function Nd(){if(De!==null){if(Xe===0)var t=De.return;else t=De,zi=Lr=null,Kf(t),Va=null,nl=0,t=De;for(;t!==null;)Fy(t.alternate,t),t=t.return;De=null}}function Fa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,lA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ji=0,Nd(),tt=t,De=a=Ui(t.current,null),Me=i,Xe=0,Sn=null,Ms=!1,Ba=Fn(t,i),Sd=!1,qa=wn=wd=Gr=Vs=dt=0,fn=_l=null,Rd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-gt(l),d=1<<h;i|=t[h],l&=~d}return $i=i,Qu(),a}function m_(t,i){Re=null,H.H=cl,i===Ma||i===nc?(i=Np(),Xe=3):i===Vf?(i=Np(),Xe=4):Xe=i===ld?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sn=i,De===null&&(dt=1,pc(t,Vn(i,t.current)))}function g_(){var t=bn.current;return t===null?!0:(Me&4194048)===Me?Un===null:(Me&62914560)===Me||(Me&536870912)!==0?t===Un:!1}function p_(){var t=H.H;return H.H=cl,t===null?cl:t}function y_(){var t=H.A;return H.A=z1,t}function Ic(){dt=4,Ms||(Me&4194048)!==Me&&bn.current!==null||(Ba=!0),(Vs&134217727)===0&&(Gr&134217727)===0||tt===null||Ps(tt,Me,wn,!1)}function Dd(t,i,a){var l=Ge;Ge|=2;var h=p_(),d=y_();(tt!==t||Me!==i)&&(Rc=null,Fa(t,i)),i=!1;var _=dt;e:do try{if(Xe!==0&&De!==null){var b=De,N=Sn;switch(Xe){case 8:Nd(),_=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(i=!0);var z=Xe;if(Xe=0,Sn=null,Ga(t,b,N,z),a&&Ba){_=0;break e}break;default:z=Xe,Xe=0,Sn=null,Ga(t,b,N,z)}}H1(),_=dt;break}catch(G){m_(t,G)}while(!0);return i&&t.shellSuspendCounter++,zi=Lr=null,Ge=l,H.H=h,H.A=d,De===null&&(tt=null,Me=0,Qu()),_}function H1(){for(;De!==null;)__(De)}function F1(t,i){var a=Ge;Ge|=2;var l=p_(),h=y_();tt!==t||Me!==i?(Rc=null,wc=nn()+500,Fa(t,i)):Ba=Fn(t,i);e:do try{if(Xe!==0&&De!==null){i=De;var d=Sn;t:switch(Xe){case 1:Xe=0,Sn=null,Ga(t,i,d,1);break;case 2:case 9:if(Ip(d)){Xe=0,Sn=null,v_(i);break}i=function(){Xe!==2&&Xe!==9||tt!==t||(Xe=7),wi(t)},d.then(i,i);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Ip(d)?(Xe=0,Sn=null,v_(i)):(Xe=0,Sn=null,Ga(t,i,d,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var b=De;if(_?sv(_):b.stateNode.complete){Xe=0,Sn=null;var N=b.sibling;if(N!==null)De=N;else{var z=b.return;z!==null?(De=z,xc(z)):De=null}break t}}Xe=0,Sn=null,Ga(t,i,d,5);break;case 6:Xe=0,Sn=null,Ga(t,i,d,6);break;case 8:Nd(),dt=6;break e;default:throw Error(r(462))}}G1();break}catch(G){m_(t,G)}while(!0);return zi=Lr=null,H.H=l,H.A=h,Ge=a,De!==null?0:(tt=null,Me=0,Qu(),dt)}function G1(){for(;De!==null&&!of();)__(De)}function __(t){var i=qy(t.alternate,t,$i);t.memoizedProps=t.pendingProps,i===null?xc(t):De=i}function v_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Ly(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=Ly(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:Kf(i);default:Fy(a,i),i=De=yp(i,$i),i=qy(a,i,$i)}t.memoizedProps=t.pendingProps,i===null?xc(t):De=i}function Ga(t,i,a,l){zi=Lr=null,Kf(i),Va=null,nl=0;var h=i.return;try{if(M1(t,h,i,a,Me)){dt=1,pc(t,Vn(a,t.current)),De=null;return}}catch(d){if(h!==null)throw De=h,d;dt=1,pc(t,Vn(a,t.current)),De=null;return}i.flags&32768?(Ue||l===1?t=!0:Ba||(Me&536870912)!==0?t=!1:(Ms=t=!0,(l===2||l===9||l===3||l===6)&&(l=bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),E_(i,t)):xc(i)}function xc(t){var i=t;do{if((i.flags&32768)!==0){E_(i,Ms);return}t=i.return;var a=L1(i.alternate,i,$i);if(a!==null){De=a;return}if(i=i.sibling,i!==null){De=i;return}De=i=t}while(i!==null);dt===0&&(dt=5)}function E_(t,i){do{var a=P1(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);dt=6,De=null}function T_(t,i,a,l,h,d,_,b,N){t.cancelPendingCommit=null;do Nc();while(kt!==0);if((Ge&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=vf,cf(t,a,d,_,b,N),t===tt&&(De=tt=null,Me=0),Ha=i,Ls=t,Ji=a,Cd=d,Id=h,c_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,X1(ds,function(){return R_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,h=ne.p,ne.p=2,_=Ge,Ge|=4;try{U1(t,i,a)}finally{Ge=_,ne.p=h,H.T=l}}kt=1,b_(),A_(),S_()}}function b_(){if(kt===1){kt=0;var t=Ls,i=Ha,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=ne.p;ne.p=2;var h=Ge;Ge|=4;try{n_(i,t);var d=Hd,_=lp(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&op(b.ownerDocument.documentElement,b)){if(N!==null&&mf(b)){var z=N.start,G=N.end;if(G===void 0&&(G=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min(G,b.value.length);else{var $=b.ownerDocument||document,B=$&&$.defaultView||window;if(B.getSelection){var F=B.getSelection(),he=b.textContent.length,ye=Math.min(N.start,he),et=N.end===void 0?ye:Math.min(N.end,he);!F.extend&&ye>et&&(_=et,et=ye,ye=_);var k=ap(b,ye),O=ap(b,et);if(k&&O&&(F.rangeCount!==1||F.anchorNode!==k.node||F.anchorOffset!==k.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var j=$.createRange();j.setStart(k.node,k.offset),F.removeAllRanges(),ye>et?(F.addRange(j),F.extend(O.node,O.offset)):(j.setEnd(O.node,O.offset),F.addRange(j))}}}}for($=[],F=b;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<$.length;b++){var Q=$[b];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}qc=!!qd,Hd=qd=null}finally{Ge=h,ne.p=l,H.T=a}}t.current=i,kt=2}}function A_(){if(kt===2){kt=0;var t=Ls,i=Ha,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=ne.p;ne.p=2;var h=Ge;Ge|=4;try{Jy(t,i.alternate,i)}finally{Ge=h,ne.p=l,H.T=a}}kt=3}}function S_(){if(kt===4||kt===3){kt=0,Eu();var t=Ls,i=Ha,a=Ji,l=c_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?kt=5:(kt=0,Ha=Ls=null,w_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ks=null),Vi(a),i=i.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Hn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,h=ne.p,ne.p=2,H.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{H.T=i,ne.p=h}}(Ji&3)!==0&&Nc(),wi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===xd?vl++:(vl=0,xd=t):vl=0,El(0)}}function w_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,el(i)))}function Nc(){return b_(),A_(),S_(),R_()}function R_(){if(kt!==5)return!1;var t=Ls,i=Cd;Cd=0;var a=Vi(Ji),l=H.T,h=ne.p;try{ne.p=32>a?32:a,H.T=null,a=Id,Id=null;var d=Ls,_=Ji;if(kt=0,Ha=Ls=null,Ji=0,(Ge&6)!==0)throw Error(r(331));var b=Ge;if(Ge|=4,o_(d.current),s_(d,d.current,_,a),Ge=b,El(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Hn,d)}catch{}return!0}finally{ne.p=h,H.T=l,w_(t,i)}}function C_(t,i,a){i=Vn(a,i),i=od(t.stateNode,i,2),t=xs(t,i,2),t!==null&&(vr(t,2),wi(t))}function $e(t,i,a){if(t.tag===3)C_(t,t,a);else for(;i!==null;){if(i.tag===3){C_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ks===null||!ks.has(l))){t=Vn(a,t),a=Iy(2),l=xs(i,a,2),l!==null&&(xy(a,l,i,t),vr(l,2),wi(l));break}}i=i.return}}function Od(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new B1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Sd=!0,h.add(a),t=K1.bind(null,t,i,a),i.then(t,t))}function K1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Me&a)===a&&(dt===4||dt===3&&(Me&62914560)===Me&&300>nn()-Sc?(Ge&2)===0&&Fa(t,0):wd|=a,qa===Me&&(qa=0)),wi(t)}function I_(t,i){i===0&&(i=Ru()),t=Mr(t,i),t!==null&&(vr(t,i),wi(t))}function Y1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),I_(t,a)}function Q1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),I_(t,a)}function X1(t,i){return Vt(t,i)}var Dc=null,Ka=null,Md=!1,Oc=!1,Vd=!1,Us=0;function wi(t){t!==Ka&&t.next===null&&(Ka===null?Dc=Ka=t:Ka=Ka.next=t),Oc=!0,Md||(Md=!0,J1())}function El(t,i){if(!Vd&&Oc){Vd=!0;do for(var a=!1,l=Dc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-gt(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,O_(l,d))}else d=Me,d=oi(l,l===tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Fn(l,d)||(a=!0,O_(l,d));l=l.next}while(a);Vd=!1}}function $1(){x_()}function x_(){Oc=Md=!1;var t=0;Us!==0&&oA()&&(t=Us);for(var i=nn(),a=null,l=Dc;l!==null;){var h=l.next,d=N_(l,i);d===0?(l.next=null,a===null?Dc=h:a.next=h,h===null&&(Ka=a)):(a=l,(t!==0||(d&3)!==0)&&(Oc=!0)),l=h}kt!==0&&kt!==5||El(t),Us!==0&&(Us=0)}function N_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-gt(d),b=1<<_,N=h[_];N===-1?((b&a)===0||(b&l)!==0)&&(h[_]=uf(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=tt,a=Me,a=oi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Fn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&fs(l),Vi(a)){case 2:case 8:a=No;break;case 32:a=ds;break;case 268435456:a=Tu;break;default:a=ds}return l=D_.bind(null,t),a=Vt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&fs(l),t.callbackPriority=2,t.callbackNode=null,2}function D_(t,i){if(kt!==0&&kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Nc()&&t.callbackNode!==a)return null;var l=Me;return l=oi(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(f_(t,l,i),N_(t,nn()),t.callbackNode!=null&&t.callbackNode===a?D_.bind(null,t):null)}function O_(t,i){if(Nc())return null;f_(t,i,!0)}function J1(){uA(function(){(Ge&6)!==0?Vt(xo,$1):x_()})}function kd(){if(Us===0){var t=Da;t===0&&(t=ri,ri<<=1,(ri&261888)===0&&(ri=256)),Us=t}return Us}function M_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pa(""+t)}function V_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function W1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=M_((h[Pt]||null).action),_=l.submitter;_&&(i=(i=_[Pt]||null)?M_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new _i("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Us!==0){var N=_?V_(h,_):new FormData(h);td(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?V_(h,_):new FormData(h),td(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Ld=0;Ld<_f.length;Ld++){var Pd=_f[Ld],Z1=Pd.toLowerCase(),eA=Pd[0].toUpperCase()+Pd.slice(1);Wn(Z1,"on"+eA)}Wn(hp,"onAnimationEnd"),Wn(fp,"onAnimationIteration"),Wn(dp,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(p1,"onTransitionRun"),Wn(y1,"onTransitionStart"),Wn(_1,"onTransitionCancel"),Wn(mp,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function k_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,z=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch(G){Yu(G)}h.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,z=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch(G){Yu(G)}h.currentTarget=null,d=N}}}}function Oe(t,i){var a=i[ha];a===void 0&&(a=i[ha]=new Set);var l=t+"__bubble";a.has(l)||(L_(i,t,2,!1),a.add(l))}function Ud(t,i,a){var l=0;i&&(l|=4),L_(a,t,l,i)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function jd(t){if(!t[Mc]){t[Mc]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(tA.has(a)||Ud(a,!1,t),Ud(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Mc]||(i[Mc]=!0,Ud("selectionchange",!1,i))}}function L_(t,i,a,l){switch(hv(i)){case 2:var h=xA;break;case 8:h=NA;break;default:h=em}a=h.bind(null,i,a,t),h=void 0,!wr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function zd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=hi(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}vs(function(){var z=d,G=Nn(a),$=[];e:{var B=gp.get(t);if(B!==void 0){var F=_i,he=t;switch(t){case"keypress":if(Cr(a)===0)break e;case"keydown":case"keyup":F=Fu;break;case"focusin":he="focus",F=xr;break;case"focusout":he="blur",F=xr;break;case"beforeblur":case"afterblur":F=xr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=g;break;case hp:case fp:case dp:F=Pu;break;case mp:F=A;break;case"scroll":case"scrollend":F=Go;break;case"wheel":F=q;break;case"copy":case"cut":case"paste":F=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Pi;break;case"toggle":case"beforetoggle":F=we}var ye=(i&4)!==0,et=!ye&&(t==="scroll"||t==="scrollend"),k=ye?B!==null?B+"Capture":null:B;ye=[];for(var O=z,j;O!==null;){var Q=O;if(j=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||j===null||k===null||(Q=Qn(O,k),Q!=null&&ye.push(bl(O,Q,j))),et)break;O=O.return}0<ye.length&&(B=new F(B,he,null,a,G),$.push({event:B,listeners:ye}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",B&&a!==qo&&(he=a.relatedTarget||a.fromElement)&&(hi(he)||he[ui]))break e;if((F||B)&&(B=G.window===G?G:(B=G.ownerDocument)?B.defaultView||B.parentWindow:window,F?(he=a.relatedTarget||a.toElement,F=z,he=he?hi(he):null,he!==null&&(et=u(he),ye=he.tag,he!==et||ye!==5&&ye!==27&&ye!==6)&&(he=null)):(F=null,he=z),F!==he)){if(ye=Ko,Q="onMouseLeave",k="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ye=Pi,Q="onPointerLeave",k="onPointerEnter",O="pointer"),et=F==null?B:_n(F),j=he==null?B:_n(he),B=new ye(Q,O+"leave",F,a,G),B.target=et,B.relatedTarget=j,Q=null,hi(G)===z&&(ye=new ye(k,O+"enter",he,a,G),ye.target=j,ye.relatedTarget=et,Q=ye),et=Q,F&&he)t:{for(ye=nA,k=F,O=he,j=0,Q=k;Q;Q=ye(Q))j++;Q=0;for(var de=O;de;de=ye(de))Q++;for(;0<j-Q;)k=ye(k),j--;for(;0<Q-j;)O=ye(O),Q--;for(;j--;){if(k===O||O!==null&&k===O.alternate){ye=k;break t}k=ye(k),O=ye(O)}ye=null}else ye=null;F!==null&&P_($,B,F,ye,!1),he!==null&&et!==null&&P_($,et,he,ye,!0)}}e:{if(B=z?_n(z):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var qe=ep;else if(Wg(B))if(tp)qe=d1;else{qe=h1;var fe=c1}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&ga(z.elementType)&&(qe=ep):qe=f1;if(qe&&(qe=qe(t,z))){Zg($,qe,a,G);break e}fe&&fe(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&jo(B,"number",B.value)}switch(fe=z?_n(z):window,t){case"focusin":(Wg(fe)||fe.contentEditable==="true")&&(Aa=fe,gf=z,Jo=null);break;case"focusout":Jo=gf=Aa=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,up($,a,G);break;case"selectionchange":if(g1)break;case"keydown":case"keyup":up($,a,G)}var xe;if(Fe)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ba?Nr(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(Ti&&a.locale!=="ko"&&(ba||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ba&&(xe=Fo()):(yi=G,Ho="value"in yi?yi.value:yi.textContent,ba=!0)),fe=Vc(z,Ve),0<fe.length&&(Ve=new Ei(Ve,t,null,a,G),$.push({event:Ve,listeners:fe}),xe?Ve.data=xe:(xe=Ta(a),xe!==null&&(Ve.data=xe)))),(xe=On?a1(t,a):o1(t,a))&&(Ve=Vc(z,"onBeforeInput"),0<Ve.length&&(fe=new Ei("onBeforeInput","beforeinput",null,a,G),$.push({event:fe,listeners:Ve}),fe.data=xe)),W1($,t,z,a,G)}k_($,i)})}function bl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Vc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Qn(t,a),h!=null&&l.unshift(bl(t,h,d)),h=Qn(t,i),h!=null&&l.push(bl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function nA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function P_(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,z=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||z===null||(N=z,h?(z=Qn(a,d),z!=null&&_.unshift(bl(a,z,N))):h||(z=Qn(a,d),z!=null&&_.push(bl(a,z,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var iA=/\r\n?/g,sA=/\u0000|\uFFFD/g;function U_(t){return(typeof t=="string"?t:""+t).replace(iA,`
`).replace(sA,"")}function j_(t,i){return i=U_(i),U_(t)===i}function Ze(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ln(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ln(t,""+l);break;case"className":vn(t,"class",l);break;case"tabIndex":vn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(t,a,l);break;case"style":Bo(t,l,d);break;case"data":if(i!=="object"){vn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Ze(t,i,"name",h.name,h,null),Ze(t,i,"formEncType",h.formEncType,h,null),Ze(t,i,"formMethod",h.formMethod,h,null),Ze(t,i,"formTarget",h.formTarget,h,null)):(Ze(t,i,"encType",h.encType,h,null),Ze(t,i,"method",h.method,h,null),Ze(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Yn);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),da(t,"popover",l);break;case"xlinkActuate":wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":wt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":wt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":wt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":wt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":da(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vu.get(a)||a,da(t,a,l))}}function Bd(t,i,a,l,h,d){switch(a){case"style":Bo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?ln(t,l):(typeof l=="number"||typeof l=="bigint")&&ln(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Pt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):da(t,a,l)}}}function Kt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(t,i,d,_,a,null)}}h&&Ze(t,i,"srcSet",a.srcSet,a,null),l&&Ze(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var b=d=_=h=null,N=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":_=G;break;case"checked":N=G;break;case"defaultChecked":z=G;break;case"value":d=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Ze(t,i,l,G,a,null)}}Du(t,d,b,N,z,_,h,!1);return;case"select":Oe("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:Ze(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!l,i!=null?gs(t,!!l,i,!1):a!=null&&gs(t,!!l,a,!0);return;case"textarea":Oe("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Ze(t,i,_,b,a,null)}ps(t,l,h,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,i,N,l,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<Tl.length;l++)Oe(Tl[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(t,i,z,l,a,null)}return;default:if(ga(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Bd(t,i,G,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&Ze(t,i,b,l,a,null))}function rA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,N=null,z=null,G=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":N=$;default:l.hasOwnProperty(F)||Ze(t,i,F,null,l,$)}}for(var B in l){var F=l[B];if($=a[B],l.hasOwnProperty(B)&&(F!=null||$!=null))switch(B){case"type":d=F;break;case"name":h=F;break;case"checked":z=F;break;case"defaultChecked":G=F;break;case"value":_=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==$&&Ze(t,i,B,F,l,$)}}ma(t,_,b,N,z,G,d,h);return;case"select":F=_=b=B=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":F=N;default:l.hasOwnProperty(d)||Ze(t,i,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":B=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&Ze(t,i,h,d,l,N)}i=b,a=_,l=F,B!=null?gs(t,!!a,B,!1):!!l!=!!a&&(i!=null?gs(t,!!a,i,!0):gs(t,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ze(t,i,b,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Ze(t,i,_,h,l,d)}Ou(t,B,F);return;case"option":for(var he in a)if(B=a[he],a.hasOwnProperty(he)&&B!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:Ze(t,i,he,null,l,B)}for(N in l)if(B=l[N],F=a[N],l.hasOwnProperty(N)&&B!==F&&(B!=null||F!=null))switch(N){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Ze(t,i,N,B,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in a)B=a[ye],a.hasOwnProperty(ye)&&B!=null&&!l.hasOwnProperty(ye)&&Ze(t,i,ye,null,l,B);for(z in l)if(B=l[z],F=a[z],l.hasOwnProperty(z)&&B!==F&&(B!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:Ze(t,i,z,B,l,F)}return;default:if(ga(i)){for(var et in a)B=a[et],a.hasOwnProperty(et)&&B!==void 0&&!l.hasOwnProperty(et)&&Bd(t,i,et,void 0,l,B);for(G in l)B=l[G],F=a[G],!l.hasOwnProperty(G)||B===F||B===void 0&&F===void 0||Bd(t,i,G,B,l,F);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!l.hasOwnProperty(k)&&Ze(t,i,k,null,l,B);for($ in l)B=l[$],F=a[$],!l.hasOwnProperty($)||B===F||B==null&&F==null||Ze(t,i,$,B,l,F)}function z_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&z_(_)){for(_=0,b=h.responseEnd,l+=1;l<a.length;l++){var N=a[l],z=N.startTime;if(z>b)break;var G=N.transferSize,$=N.initiatorType;G&&z_($)&&(N=N.responseEnd,_+=G*(N<b?1:(b-z)/(N-z)))}if(--l,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qd=null,Hd=null;function kc(t){return t.nodeType===9?t:t.ownerDocument}function B_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Fd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gd=null;function oA(){var t=window.event;return t&&t.type==="popstate"?t===Gd?!1:(Gd=t,!0):(Gd=null,!1)}var H_=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,F_=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof F_<"u"?function(t){return F_.resolve(null).then(t).catch(cA)}:H_;function cA(t){setTimeout(function(){throw t})}function js(t){return t==="head"}function G_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),$a(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Al(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Al(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[ci]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Al(t.ownerDocument.body);a=h}while(a);$a(i)}function K_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Kd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kd(a),fa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function hA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ci])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=jn(t.nextSibling),t===null)break}return null}function fA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=jn(t.nextSibling),t===null))return null;return t}function Y_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=jn(t.nextSibling),t===null))return null;return t}function Yd(t){return t.data==="$?"||t.data==="$~"}function Qd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function dA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function jn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Xd=null;function Q_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return jn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function X_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function $_(t,i,a){switch(i=kc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Al(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fa(t)}var zn=new Map,J_=new Set;function Lc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Wi=ne.d;ne.d={f:mA,r:gA,D:pA,C:yA,L:_A,m:vA,X:TA,S:EA,M:bA};function mA(){var t=Wi.f(),i=Cc();return t||i}function gA(t){var i=xn(t);i!==null&&i.tag===5&&i.type==="form"?my(i):Wi.r(t)}var Ya=typeof document>"u"?null:document;function W_(t,i,a){var l=Ya;if(l&&typeof i=="string"&&i){var h=on(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),J_.has(h)||(J_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Kt(i,"link",t),St(i),l.head.appendChild(i)))}}function pA(t){Wi.D(t),W_("dns-prefetch",t,null)}function yA(t,i){Wi.C(t,i),W_("preconnect",t,i)}function _A(t,i,a){Wi.L(t,i,a);var l=Ya;if(l&&t&&i){var h='link[rel="preload"][as="'+on(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+on(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+on(a.imageSizes)+'"]')):h+='[href="'+on(t)+'"]';var d=h;switch(i){case"style":d=Qa(t);break;case"script":d=Xa(t)}zn.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),zn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Sl(d))||i==="script"&&l.querySelector(wl(d))||(i=l.createElement("link"),Kt(i,"link",t),St(i),l.head.appendChild(i)))}}function vA(t,i){Wi.m(t,i);var a=Ya;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+on(l)+'"][href="'+on(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Xa(t)}if(!zn.has(d)&&(t=S({rel:"modulepreload",href:t},i),zn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(d)))return}l=a.createElement("link"),Kt(l,"link",t),St(l),a.head.appendChild(l)}}}function EA(t,i,a){Wi.S(t,i,a);var l=Ya;if(l&&t){var h=fi(l).hoistableStyles,d=Qa(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Sl(d)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=zn.get(d))&&$d(t,a);var N=_=l.createElement("link");St(N),Kt(N,"link",t),N._p=new Promise(function(z,G){N.onload=z,N.onerror=G}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Pc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function TA(t,i){Wi.X(t,i);var a=Ya;if(a&&t){var l=fi(a).hoistableScripts,h=Xa(t),d=l.get(h);d||(d=a.querySelector(wl(h)),d||(t=S({src:t,async:!0},i),(i=zn.get(h))&&Jd(t,i),d=a.createElement("script"),St(d),Kt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function bA(t,i){Wi.M(t,i);var a=Ya;if(a&&t){var l=fi(a).hoistableScripts,h=Xa(t),d=l.get(h);d||(d=a.querySelector(wl(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=zn.get(h))&&Jd(t,i),d=a.createElement("script"),St(d),Kt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Z_(t,i,a,l){var h=(h=Ie.current)?Lc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Qa(a.href),a=fi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Qa(a.href);var d=fi(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Sl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zn.set(t,a),d||AA(h,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Xa(a),a=fi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Qa(t){return'href="'+on(t)+'"'}function Sl(t){return'link[rel="stylesheet"]['+t+"]"}function ev(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function AA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Kt(i,"link",a),St(i),t.head.appendChild(i))}function Xa(t){return'[src="'+on(t)+'"]'}function wl(t){return"script[async]"+t}function tv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+on(a.href)+'"]');if(l)return i.instance=l,St(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Kt(l,"style",h),Pc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Qa(a.href);var d=t.querySelector(Sl(h));if(d)return i.state.loading|=4,i.instance=d,St(d),d;l=ev(a),(h=zn.get(h))&&$d(l,h),d=(t.ownerDocument||t).createElement("link"),St(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Kt(d,"link",l),i.state.loading|=4,Pc(d,a.precedence,t),i.instance=d;case"script":return d=Xa(a.src),(h=t.querySelector(wl(d)))?(i.instance=h,St(h),h):(l=a,(h=zn.get(d))&&(l=S({},a),Jd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),St(h),Kt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Pc(l,a.precedence,t));return i.instance}function Pc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function $d(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Uc=null;function nv(t,i,a){if(Uc===null){var l=new Map,h=Uc=new Map;h.set(a,l)}else h=Uc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ci]||d[At]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function iv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function SA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function wA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Qa(l.href),d=i.querySelector(Sl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=jc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,St(d);return}d=i.ownerDocument||i,l=ev(l),(h=zn.get(h))&&$d(l,h),d=d.createElement("link"),St(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Kt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=jc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Wd=0;function RA(t,i){return t.stylesheets&&t.count===0&&Bc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Bc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Wd===0&&(Wd=62500*aA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Wd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zc=null;function Bc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zc=new Map,i.forEach(CA,t),zc=null,jc.call(t))}function CA(t,i){if(!(i.state.loading&4)){var a=zc.get(t);if(a)var l=a.get(null);else{a=new Map,zc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=jc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Rl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function IA(t,i,a,l,h,d,_,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.hiddenUpdates=li(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function rv(t,i,a,l,h,d,_,b,N,z,G,$){return t=new IA(t,i,a,_,N,z,G,$,b),i=1,d===!0&&(i|=24),d=Tn(3,null,null,i),t.current=d,d.stateNode=t,i=Df(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},kf(d),t}function av(t){return t?(t=Ra,t):Ra}function ov(t,i,a,l,h,d){h=av(h),l.context===null?l.context=h:l.pendingContext=h,l=Is(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=xs(t,l,i),a!==null&&(dn(a,t,i),sl(a,t,i))}function lv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Zd(t,i){lv(t,i),(t=t.alternate)&&lv(t,i)}function uv(t){if(t.tag===13||t.tag===31){var i=Mr(t,67108864);i!==null&&dn(i,t,67108864),Zd(t,67108864)}}function cv(t){if(t.tag===13||t.tag===31){var i=Rn();i=Tr(i);var a=Mr(t,i);a!==null&&dn(a,t,i),Zd(t,i)}}var qc=!0;function xA(t,i,a,l){var h=H.T;H.T=null;var d=ne.p;try{ne.p=2,em(t,i,a,l)}finally{ne.p=d,H.T=h}}function NA(t,i,a,l){var h=H.T;H.T=null;var d=ne.p;try{ne.p=8,em(t,i,a,l)}finally{ne.p=d,H.T=h}}function em(t,i,a,l){if(qc){var h=tm(l);if(h===null)zd(t,i,l,Hc,a),fv(t,l);else if(OA(h,t,i,a,l))l.stopPropagation();else if(fv(t,l),i&4&&-1<DA.indexOf(t)){for(;h!==null;){var d=xn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ai(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-gt(_);b.entanglements[1]|=N,_&=~N}wi(d),(Ge&6)===0&&(wc=nn()+500,El(0))}}break;case 31:case 13:b=Mr(d,2),b!==null&&dn(b,d,2),Cc(),Zd(d,2)}if(d=tm(l),d===null&&zd(t,i,l,Hc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else zd(t,i,l,null,a)}}function tm(t){return t=Nn(t),nm(t)}var Hc=null;function nm(t){if(Hc=null,t=hi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Hc=t,null}function hv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yr()){case xo:return 2;case No:return 8;case ds:case lf:return 32;case Tu:return 268435456;default:return 32}default:return 32}}var im=!1,zs=null,Bs=null,qs=null,Cl=new Map,Il=new Map,Hs=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fv(t,i){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Cl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(i.pointerId)}}function xl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=xn(i),i!==null&&uv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function OA(t,i,a,l,h){switch(i){case"focusin":return zs=xl(zs,t,i,a,l,h),!0;case"dragenter":return Bs=xl(Bs,t,i,a,l,h),!0;case"mouseover":return qs=xl(qs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Cl.set(d,xl(Cl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Il.set(d,xl(Il.get(d)||null,t,i,a,l,h)),!0}return!1}function dv(t){var i=hi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Gn(t.priority,function(){cv(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Gn(t.priority,function(){cv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=tm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);qo=l,a.target.dispatchEvent(l),qo=null}else return i=xn(a),i!==null&&uv(i),t.blockedOn=a,!1;i.shift()}return!0}function mv(t,i,a){Fc(t)&&a.delete(i)}function MA(){im=!1,zs!==null&&Fc(zs)&&(zs=null),Bs!==null&&Fc(Bs)&&(Bs=null),qs!==null&&Fc(qs)&&(qs=null),Cl.forEach(mv),Il.forEach(mv)}function Gc(t,i){t.blockedOn===i&&(t.blockedOn=null,im||(im=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,MA)))}var Kc=null;function gv(t){Kc!==t&&(Kc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Kc===t&&(Kc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(nm(l||a)===null)continue;break}var d=xn(a);d!==null&&(t.splice(i,3),i-=3,td(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function $a(t){function i(N){return Gc(N,t)}zs!==null&&Gc(zs,t),Bs!==null&&Gc(Bs,t),qs!==null&&Gc(qs,t),Cl.forEach(i),Il.forEach(i);for(var a=0;a<Hs.length;a++){var l=Hs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Hs.length&&(a=Hs[0],a.blockedOn===null);)dv(a),a.blockedOn===null&&Hs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Pt]||null;if(typeof d=="function")_||gv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Pt]||null)b=_.formAction;else if(nm(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),gv(a)}}}function pv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function sm(t){this._internalRoot=t}Yc.prototype.render=sm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Rn();ov(a,l,t,i,null,null)},Yc.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ov(t.current,2,null,t,null,null),Cc(),i[ui]=null}};function Yc(t){this._internalRoot=t}Yc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Cu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Hs.length&&i!==0&&i<Hs[a].priority;a++);Hs.splice(a,0,t),a===0&&dv(t)}};var yv=e.version;if(yv!=="19.2.3")throw Error(r(527,yv,"19.2.3"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var VA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Hn=Qc.inject(VA),Bt=Qc}catch{}}return Dl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=Sy,d=wy,_=Ry;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=rv(t,1,!1,null,null,a,l,null,h,d,_,pv),t[ui]=i.current,jd(t),new sm(i)},Dl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=Sy,_=wy,b=Ry,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=rv(t,1,!0,i,a??null,l,h,N,d,_,b,pv),i.context=av(null),a=i.current,l=Rn(),l=Tr(l),h=Is(l),h.callback=null,xs(a,h,l),a=l,i.current.lanes=a,vr(i,a),wi(i),t[ui]=i.current,jd(t),new Yc(i)},Dl.version="19.2.3",Dl}var Cv;function GA(){if(Cv)return om.exports;Cv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),om.exports=FA(),om.exports}var KA=GA();const YA=wE(KA),QA=()=>{};var Iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},XA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],m=s[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,m=f?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,T=u>>2,S=(u&3)<<4|m>>4;let C=(m&15)<<2|y>>6,P=y&63;p||(P=64,f||(C=64)),r.push(n[T],n[S],n[C],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(RE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):XA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||S==null)throw new $A;const C=u<<2|m>>4;if(r.push(C),y!==64){const P=m<<4&240|y>>2;if(r.push(P),S!==64){const K=y<<6&192|S;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class $A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JA=function(s){const e=RE(s);return CE.encodeByteArray(e,!0)},ph=function(s){return JA(s).replace(/\./g,"")},IE=function(s){try{return CE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=()=>WA().__FIREBASE_DEFAULTS__,eS=()=>{if(typeof process>"u"||typeof Iv>"u")return;const s=Iv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},tS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&IE(s[1]);return e&&JSON.parse(e)},Ph=()=>{try{return QA()||ZA()||eS()||tS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},xE=s=>{var e,n;return(n=(e=Ph())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},nS=s=>{const e=xE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NE=()=>{var s;return(s=Ph())==null?void 0:s.config},DE=s=>{var e;return(e=Ph())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ph(JSON.stringify(n)),ph(JSON.stringify(f)),""].join(".")}const jl={};function rS(){const s={prod:[],emulator:[]};for(const e of Object.keys(jl))jl[e]?s.emulator.push(e):s.prod.push(e);return s}function aS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let xv=!1;function ME(s,e){if(typeof window>"u"||typeof document>"u"||!_o(window.location.host)||jl[s]===e||jl[s]||xv)return;jl[s]=e;function n(C){return`__firebase__banner__${C}`}const r="__firebase__banner",u=rS().prod.length>0;function f(){const C=document.getElementById(r);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,P){C.setAttribute("width","24"),C.setAttribute("id",P),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{xv=!0,f()},C}function T(C,P){C.setAttribute("id",P),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function S(){const C=aS(r),P=n("text"),K=document.getElementById(P)||document.createElement("span"),Y=n("learnmore"),J=document.getElementById(Y)||document.createElement("a"),re=n("preprendIcon"),ae=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ee=C.element;m(ee),T(J,Y);const pe=y();p(ae,re),ee.append(ae,K,J,pe),document.body.appendChild(ee)}u?(K.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function lS(){var e;const s=(e=Ph())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function hS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fS(){const s=tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function dS(){return!lS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mS(){try{return typeof indexedDB=="object"}catch{return!1}}function gS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="FirebaseError";class cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pS,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?yS(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new cs(o,m,r)}}function yS(s,e){return s.replace(_S,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const _S=/\{\$([^}]+)}/g;function vS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ss(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(Nv(u)&&Nv(f)){if(!ss(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Nv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Vl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function ES(s,e){const n=new TS(s,e);return n.subscribe.bind(n)}class TS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=hm),o.error===void 0&&(o.error=hm),o.complete===void 0&&(o.complete=hm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function hm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(s){return s&&s._delegate?s._delegate:s}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wS(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SS(s){return s===Yr?void 0:s}function wS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const CS={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},IS=ke.INFO,xS={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},NS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=xS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=IS,this._logHandler=NS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const DS=(s,e)=>e.some(n=>s instanceof n);let Dv,Ov;function OS(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MS(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,Rm=new WeakMap,kE=new WeakMap,fm=new WeakMap,eg=new WeakMap;function VS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(Zs(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,s)}).catch(()=>{}),eg.set(e,s),e}function kS(s){if(Rm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Rm.set(s,e)}let Cm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Rm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||kE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zs(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function LS(s){Cm=s(Cm)}function PS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(dm(this),e,...n);return kE.set(r,e.sort?e.sort():[e]),Zs(r)}:MS().includes(s)?function(...e){return s.apply(dm(this),e),Zs(VE.get(this))}:function(...e){return Zs(s.apply(dm(this),e))}}function US(s){return typeof s=="function"?PS(s):(s instanceof IDBTransaction&&kS(s),DS(s,OS())?new Proxy(s,Cm):s)}function Zs(s){if(s instanceof IDBRequest)return VS(s);if(fm.has(s))return fm.get(s);const e=US(s);return e!==s&&(fm.set(s,e),eg.set(e,s)),e}const dm=s=>eg.get(s);function jS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),m=Zs(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Zs(f.result),p.oldVersion,p.newVersion,Zs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const zS=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],mm=new Map;function Mv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(mm.get(e))return mm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=BS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||zS.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return mm.set(e,u),u}LS(s=>({...s,get:(e,n,r)=>Mv(e,n)||s.get(e,n,r),has:(e,n)=>!!Mv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Im="@firebase/app",Vv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Zm("@firebase/app"),FS="@firebase/app-compat",GS="@firebase/analytics-compat",KS="@firebase/analytics",YS="@firebase/app-check-compat",QS="@firebase/app-check",XS="@firebase/auth",$S="@firebase/auth-compat",JS="@firebase/database",WS="@firebase/data-connect",ZS="@firebase/database-compat",ew="@firebase/functions",tw="@firebase/functions-compat",nw="@firebase/installations",iw="@firebase/installations-compat",sw="@firebase/messaging",rw="@firebase/messaging-compat",aw="@firebase/performance",ow="@firebase/performance-compat",lw="@firebase/remote-config",uw="@firebase/remote-config-compat",cw="@firebase/storage",hw="@firebase/storage-compat",fw="@firebase/firestore",dw="@firebase/ai",mw="@firebase/firestore-compat",gw="firebase",pw="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="[DEFAULT]",yw={[Im]:"fire-core",[FS]:"fire-core-compat",[KS]:"fire-analytics",[GS]:"fire-analytics-compat",[QS]:"fire-app-check",[YS]:"fire-app-check-compat",[XS]:"fire-auth",[$S]:"fire-auth-compat",[JS]:"fire-rtdb",[WS]:"fire-data-connect",[ZS]:"fire-rtdb-compat",[ew]:"fire-fn",[tw]:"fire-fn-compat",[nw]:"fire-iid",[iw]:"fire-iid-compat",[sw]:"fire-fcm",[rw]:"fire-fcm-compat",[aw]:"fire-perf",[ow]:"fire-perf-compat",[lw]:"fire-rc",[uw]:"fire-rc-compat",[cw]:"fire-gcs",[hw]:"fire-gcs-compat",[fw]:"fire-fst",[mw]:"fire-fst-compat",[dw]:"fire-vertex","fire-js":"fire-js",[gw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,_w=new Map,Nm=new Map;function kv(s,e){try{s.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function lo(s){const e=s.name;if(Nm.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,s);for(const n of yh.values())kv(n,s);for(const n of _w.values())kv(n,s);return!0}function tg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Bn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new nu("app","Firebase",vw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=pw;function LE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:xm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw er.create("bad-app-name",{appName:String(o)});if(n||(n=NE()),!n)throw er.create("no-options");const u=yh.get(o);if(u){if(ss(n,u.options)&&ss(r,u.config))return u;throw er.create("duplicate-app",{appName:o})}const f=new RS(o);for(const p of Nm.values())f.addComponent(p);const m=new Ew(n,r,f);return yh.set(o,m),m}function PE(s=xm){const e=yh.get(s);if(!e&&s===xm&&NE())return LE();if(!e)throw er.create("no-app",{appName:s});return e}function tr(s,e,n){let r=yw[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(f.join(" "));return}lo(new Jr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebase-heartbeat-database",bw=1,Kl="firebase-heartbeat-store";let gm=null;function UE(){return gm||(gm=jS(Tw,bw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Kl)}catch(n){console.warn(n)}}}}).catch(s=>{throw er.create("idb-open",{originalErrorMessage:s.message})})),gm}async function Aw(s){try{const n=(await UE()).transaction(Kl),r=await n.objectStore(Kl).get(jE(s));return await n.done,r}catch(e){if(e instanceof cs)rs.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(n.message)}}}async function Lv(s,e){try{const r=(await UE()).transaction(Kl,"readwrite");await r.objectStore(Kl).put(e,jE(s)),await r.done}catch(n){if(n instanceof cs)rs.warn(n.message);else{const r=er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rs.warn(r.message)}}}function jE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=1024,ww=30;class Rw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Iw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Pv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>ww){const f=xw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pv(),{heartbeatsToSend:r,unsentEntries:o}=Cw(this._heartbeatsCache.heartbeats),u=ph(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return rs.warn(n),""}}}function Pv(){return new Date().toISOString().substring(0,10)}function Cw(s,e=Sw){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Uv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Uv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Iw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mS()?gS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Aw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Uv(s){return ph(JSON.stringify({version:2,heartbeats:s})).length}function xw(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(s){lo(new Jr("platform-logger",e=>new qS(e),"PRIVATE")),lo(new Jr("heartbeat",e=>new Rw(e),"PRIVATE")),tr(Im,Vv,s),tr(Im,Vv,"esm2020"),tr("fire-js","")}Nw("");var jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,zE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function x(){}x.prototype=R.prototype,I.F=R.prototype,I.prototype=new x,I.prototype.constructor=I,I.D=function(V,D,L){for(var w=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)w[Se-2]=arguments[Se];return R.prototype[D].apply(V,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,x){x||(x=0);const V=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)V[D]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(D=0;D<16;++D)V[D]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=I.g[0],x=I.g[1],D=I.g[2];let L=I.g[3],w;w=R+(L^x&(D^L))+V[0]+3614090360&4294967295,R=x+(w<<7&4294967295|w>>>25),w=L+(D^R&(x^D))+V[1]+3905402710&4294967295,L=R+(w<<12&4294967295|w>>>20),w=D+(x^L&(R^x))+V[2]+606105819&4294967295,D=L+(w<<17&4294967295|w>>>15),w=x+(R^D&(L^R))+V[3]+3250441966&4294967295,x=D+(w<<22&4294967295|w>>>10),w=R+(L^x&(D^L))+V[4]+4118548399&4294967295,R=x+(w<<7&4294967295|w>>>25),w=L+(D^R&(x^D))+V[5]+1200080426&4294967295,L=R+(w<<12&4294967295|w>>>20),w=D+(x^L&(R^x))+V[6]+2821735955&4294967295,D=L+(w<<17&4294967295|w>>>15),w=x+(R^D&(L^R))+V[7]+4249261313&4294967295,x=D+(w<<22&4294967295|w>>>10),w=R+(L^x&(D^L))+V[8]+1770035416&4294967295,R=x+(w<<7&4294967295|w>>>25),w=L+(D^R&(x^D))+V[9]+2336552879&4294967295,L=R+(w<<12&4294967295|w>>>20),w=D+(x^L&(R^x))+V[10]+4294925233&4294967295,D=L+(w<<17&4294967295|w>>>15),w=x+(R^D&(L^R))+V[11]+2304563134&4294967295,x=D+(w<<22&4294967295|w>>>10),w=R+(L^x&(D^L))+V[12]+1804603682&4294967295,R=x+(w<<7&4294967295|w>>>25),w=L+(D^R&(x^D))+V[13]+4254626195&4294967295,L=R+(w<<12&4294967295|w>>>20),w=D+(x^L&(R^x))+V[14]+2792965006&4294967295,D=L+(w<<17&4294967295|w>>>15),w=x+(R^D&(L^R))+V[15]+1236535329&4294967295,x=D+(w<<22&4294967295|w>>>10),w=R+(D^L&(x^D))+V[1]+4129170786&4294967295,R=x+(w<<5&4294967295|w>>>27),w=L+(x^D&(R^x))+V[6]+3225465664&4294967295,L=R+(w<<9&4294967295|w>>>23),w=D+(R^x&(L^R))+V[11]+643717713&4294967295,D=L+(w<<14&4294967295|w>>>18),w=x+(L^R&(D^L))+V[0]+3921069994&4294967295,x=D+(w<<20&4294967295|w>>>12),w=R+(D^L&(x^D))+V[5]+3593408605&4294967295,R=x+(w<<5&4294967295|w>>>27),w=L+(x^D&(R^x))+V[10]+38016083&4294967295,L=R+(w<<9&4294967295|w>>>23),w=D+(R^x&(L^R))+V[15]+3634488961&4294967295,D=L+(w<<14&4294967295|w>>>18),w=x+(L^R&(D^L))+V[4]+3889429448&4294967295,x=D+(w<<20&4294967295|w>>>12),w=R+(D^L&(x^D))+V[9]+568446438&4294967295,R=x+(w<<5&4294967295|w>>>27),w=L+(x^D&(R^x))+V[14]+3275163606&4294967295,L=R+(w<<9&4294967295|w>>>23),w=D+(R^x&(L^R))+V[3]+4107603335&4294967295,D=L+(w<<14&4294967295|w>>>18),w=x+(L^R&(D^L))+V[8]+1163531501&4294967295,x=D+(w<<20&4294967295|w>>>12),w=R+(D^L&(x^D))+V[13]+2850285829&4294967295,R=x+(w<<5&4294967295|w>>>27),w=L+(x^D&(R^x))+V[2]+4243563512&4294967295,L=R+(w<<9&4294967295|w>>>23),w=D+(R^x&(L^R))+V[7]+1735328473&4294967295,D=L+(w<<14&4294967295|w>>>18),w=x+(L^R&(D^L))+V[12]+2368359562&4294967295,x=D+(w<<20&4294967295|w>>>12),w=R+(x^D^L)+V[5]+4294588738&4294967295,R=x+(w<<4&4294967295|w>>>28),w=L+(R^x^D)+V[8]+2272392833&4294967295,L=R+(w<<11&4294967295|w>>>21),w=D+(L^R^x)+V[11]+1839030562&4294967295,D=L+(w<<16&4294967295|w>>>16),w=x+(D^L^R)+V[14]+4259657740&4294967295,x=D+(w<<23&4294967295|w>>>9),w=R+(x^D^L)+V[1]+2763975236&4294967295,R=x+(w<<4&4294967295|w>>>28),w=L+(R^x^D)+V[4]+1272893353&4294967295,L=R+(w<<11&4294967295|w>>>21),w=D+(L^R^x)+V[7]+4139469664&4294967295,D=L+(w<<16&4294967295|w>>>16),w=x+(D^L^R)+V[10]+3200236656&4294967295,x=D+(w<<23&4294967295|w>>>9),w=R+(x^D^L)+V[13]+681279174&4294967295,R=x+(w<<4&4294967295|w>>>28),w=L+(R^x^D)+V[0]+3936430074&4294967295,L=R+(w<<11&4294967295|w>>>21),w=D+(L^R^x)+V[3]+3572445317&4294967295,D=L+(w<<16&4294967295|w>>>16),w=x+(D^L^R)+V[6]+76029189&4294967295,x=D+(w<<23&4294967295|w>>>9),w=R+(x^D^L)+V[9]+3654602809&4294967295,R=x+(w<<4&4294967295|w>>>28),w=L+(R^x^D)+V[12]+3873151461&4294967295,L=R+(w<<11&4294967295|w>>>21),w=D+(L^R^x)+V[15]+530742520&4294967295,D=L+(w<<16&4294967295|w>>>16),w=x+(D^L^R)+V[2]+3299628645&4294967295,x=D+(w<<23&4294967295|w>>>9),w=R+(D^(x|~L))+V[0]+4096336452&4294967295,R=x+(w<<6&4294967295|w>>>26),w=L+(x^(R|~D))+V[7]+1126891415&4294967295,L=R+(w<<10&4294967295|w>>>22),w=D+(R^(L|~x))+V[14]+2878612391&4294967295,D=L+(w<<15&4294967295|w>>>17),w=x+(L^(D|~R))+V[5]+4237533241&4294967295,x=D+(w<<21&4294967295|w>>>11),w=R+(D^(x|~L))+V[12]+1700485571&4294967295,R=x+(w<<6&4294967295|w>>>26),w=L+(x^(R|~D))+V[3]+2399980690&4294967295,L=R+(w<<10&4294967295|w>>>22),w=D+(R^(L|~x))+V[10]+4293915773&4294967295,D=L+(w<<15&4294967295|w>>>17),w=x+(L^(D|~R))+V[1]+2240044497&4294967295,x=D+(w<<21&4294967295|w>>>11),w=R+(D^(x|~L))+V[8]+1873313359&4294967295,R=x+(w<<6&4294967295|w>>>26),w=L+(x^(R|~D))+V[15]+4264355552&4294967295,L=R+(w<<10&4294967295|w>>>22),w=D+(R^(L|~x))+V[6]+2734768916&4294967295,D=L+(w<<15&4294967295|w>>>17),w=x+(L^(D|~R))+V[13]+1309151649&4294967295,x=D+(w<<21&4294967295|w>>>11),w=R+(D^(x|~L))+V[4]+4149444226&4294967295,R=x+(w<<6&4294967295|w>>>26),w=L+(x^(R|~D))+V[11]+3174756917&4294967295,L=R+(w<<10&4294967295|w>>>22),w=D+(R^(L|~x))+V[2]+718787259&4294967295,D=L+(w<<15&4294967295|w>>>17),w=x+(L^(D|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const x=R-this.blockSize,V=this.C;let D=this.h,L=0;for(;L<R;){if(D==0)for(;L<=x;)o(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<R;)if(V[D++]=I.charCodeAt(L++),D==this.blockSize){o(this,V),D=0;break}}else for(;L<R;)if(V[D++]=I[L++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var x=I.length-8;x<I.length;++x)I[x]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,x=0;x<4;++x)for(let V=0;V<32;V+=8)I[R++]=this.g[x]>>>V&255;return I};function u(I,R){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=R(I)}function f(I,R){this.h=R;const x=[];let V=!0;for(let D=I.length-1;D>=0;D--){const L=I[D]|0;V&&L==R||(x[D]=L,V=!1)}this.g=x}var m={};function p(I){return-128<=I&&I<128?u(I,function(R){return new f([R|0],R<0?-1:0)}):new f([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return S;if(I<0)return J(y(-I));const R=[];let x=1;for(let V=0;I>=x;V++)R[V]=I/x|0,x*=4294967296;return new f(R,0)}function T(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return J(T(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=y(Math.pow(R,8));let V=S;for(let L=0;L<I.length;L+=8){var D=Math.min(8,I.length-L);const w=parseInt(I.substring(L,L+D),R);D<8?(D=y(Math.pow(R,D)),V=V.j(D).add(y(w))):(V=V.j(x),V=V.add(y(w)))}return V}var S=p(0),C=p(1),P=p(16777216);s=f.prototype,s.m=function(){if(Y(this))return-J(this).m();let I=0,R=1;for(let x=0;x<this.g.length;x++){const V=this.i(x);I+=(V>=0?V:4294967296+V)*R,R*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(K(this))return"0";if(Y(this))return"-"+J(this).toString(I);const R=y(Math.pow(I,6));var x=this;let V="";for(;;){const D=pe(x,R).g;x=re(x,D.j(R));let L=((x.g.length>0?x.g[0]:x.h)>>>0).toString(I);if(x=D,K(x))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function K(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function Y(I){return I.h==-1}s.l=function(I){return I=re(this,I),Y(I)?-1:K(I)?0:1};function J(I){const R=I.g.length,x=[];for(let V=0;V<R;V++)x[V]=~I.g[V];return new f(x,~I.h).add(C)}s.abs=function(){return Y(this)?J(this):this},s.add=function(I){const R=Math.max(this.g.length,I.g.length),x=[];let V=0;for(let D=0;D<=R;D++){let L=V+(this.i(D)&65535)+(I.i(D)&65535),w=(L>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);V=w>>>16,L&=65535,w&=65535,x[D]=w<<16|L}return new f(x,x[x.length-1]&-2147483648?-1:0)};function re(I,R){return I.add(J(R))}s.j=function(I){if(K(this)||K(I))return S;if(Y(this))return Y(I)?J(this).j(J(I)):J(J(this).j(I));if(Y(I))return J(this.j(J(I)));if(this.l(P)<0&&I.l(P)<0)return y(this.m()*I.m());const R=this.g.length+I.g.length,x=[];for(var V=0;V<2*R;V++)x[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<I.g.length;D++){const L=this.i(V)>>>16,w=this.i(V)&65535,Se=I.i(D)>>>16,Ne=I.i(D)&65535;x[2*V+2*D]+=w*Ne,ae(x,2*V+2*D),x[2*V+2*D+1]+=L*Ne,ae(x,2*V+2*D+1),x[2*V+2*D+1]+=w*Se,ae(x,2*V+2*D+1),x[2*V+2*D+2]+=L*Se,ae(x,2*V+2*D+2)}for(I=0;I<R;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=R;I<2*R;I++)x[I]=0;return new f(x,0)};function ae(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function ee(I,R){this.g=I,this.h=R}function pe(I,R){if(K(R))throw Error("division by zero");if(K(I))return new ee(S,S);if(Y(I))return R=pe(J(I),R),new ee(J(R.g),J(R.h));if(Y(R))return R=pe(I,J(R)),new ee(J(R.g),R.h);if(I.g.length>30){if(Y(I)||Y(R))throw Error("slowDivide_ only works with positive integers.");for(var x=C,V=R;V.l(I)<=0;)x=Ce(x),V=Ce(V);var D=ue(x,1),L=ue(V,1);for(V=ue(V,2),x=ue(x,2);!K(V);){var w=L.add(V);w.l(I)<=0&&(D=D.add(x),L=w),V=ue(V,1),x=ue(x,1)}return R=re(I,D.j(R)),new ee(D,R)}for(D=S;I.l(R)>=0;){for(x=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(x)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=y(x),w=L.j(R);Y(w)||w.l(I)>0;)x-=V,L=y(x),w=L.j(R);K(L)&&(L=C),D=D.add(L),I=re(I,w)}return new ee(D,I)}s.B=function(I){return pe(this,I).h},s.and=function(I){const R=Math.max(this.g.length,I.g.length),x=[];for(let V=0;V<R;V++)x[V]=this.i(V)&I.i(V);return new f(x,this.h&I.h)},s.or=function(I){const R=Math.max(this.g.length,I.g.length),x=[];for(let V=0;V<R;V++)x[V]=this.i(V)|I.i(V);return new f(x,this.h|I.h)},s.xor=function(I){const R=Math.max(this.g.length,I.g.length),x=[];for(let V=0;V<R;V++)x[V]=this.i(V)^I.i(V);return new f(x,this.h^I.h)};function Ce(I){const R=I.g.length+1,x=[];for(let V=0;V<R;V++)x[V]=I.i(V)<<1|I.i(V-1)>>>31;return new f(x,I.h)}function ue(I,R){const x=R>>5;R%=32;const V=I.g.length-x,D=[];for(let L=0;L<V;L++)D[L]=R>0?I.i(L+x)>>>R|I.i(L+x+1)<<32-R:I.i(L+x);return new f(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,nr=f}).apply(typeof jv<"u"?jv:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,kl,qE,rh,Dm,HE,FE,GE;(function(){var s,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,g){if(g)e:{var v=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in v))break e;v=v[U]}c=c[c.length-1],A=v[c],g=g(A),g!=A&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function p(c,g,v){return c.call.apply(c.bind,arguments)}function y(c,g,v){return y=p,y.apply(null,arguments)}function T(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,g){function v(){}v.prototype=g.prototype,c.Z=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,U,q){for(var te=Array(arguments.length-2),we=2;we<arguments.length;we++)te[we-2]=arguments[we];return g.prototype[U].apply(A,te)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const g=c.length;if(g>0){const v=Array(g);for(let A=0;A<g;A++)v[A]=c[A];return v}return[]}function K(c,g){for(let A=1;A<arguments.length;A++){const U=arguments[A];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const q=U.length||0;c.length=v+q;for(let te=0;te<q;te++)c[v+te]=U[te]}else c.push(U)}}class Y{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function J(c){f.setTimeout(()=>{throw c},0)}function re(){var c=I;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ae{constructor(){this.h=this.g=null}add(g,v){const A=ee.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ee=new Y(()=>new pe,c=>c.reset());class pe{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,ue=!1,I=new ae,R=()=>{const c=Promise.resolve(void 0);Ce=()=>{c.then(x)}};function x(){for(var c;c=re();){try{c.h.call(c.g)}catch(v){J(v)}var g=ee;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}ue=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function Se(c,g){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}S(Se,D),Se.prototype.init=function(c,g){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),H=0;function ne(c,g,v,A,U){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=U,this.key=++H,this.da=this.fa=!1}function ge(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Be(c,g,v){for(const A in c)g.call(v,c[A],A,c)}function Ye(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function M(c){const g={};for(const v in c)g[v]=c[v];return g}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(c,g){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)c[v]=A[v];for(let q=0;q<W.length;q++)v=W[q],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,g,v,A,U){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const te=Ie(c,g,A,U);return te>-1?(g=c[te],v||(g.fa=!1)):(g=new ne(g,this.src,q,!!A,U),g.fa=v,c.push(g)),g};function Ee(c,g){const v=g.type;if(v in c.g){var A=c.g[v],U=Array.prototype.indexOf.call(A,g,void 0),q;(q=U>=0)&&Array.prototype.splice.call(A,U,1),q&&(ge(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ie(c,g,v,A){for(let U=0;U<c.length;++U){const q=c[U];if(!q.da&&q.listener==g&&q.capture==!!v&&q.ha==A)return U}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Mt={};function ot(c,g,v,A,U){if(Array.isArray(g)){for(let q=0;q<g.length;q++)ot(c,g[q],v,A,U);return null}return v=Io(v),c&&c[Ne]?c.J(g,v,m(A)?!!A.capture:!1,U):gr(c,g,v,!1,A,U)}function gr(c,g,v,A,U,q){if(!g)throw Error("Invalid event type");const te=m(U)?!!U.capture:!!U;let we=pr(c);if(we||(c[je]=we=new ce(c)),v=we.add(g,v,A,te,q),v.proxy)return v;if(A=oa(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)L||(U=te),U===void 0&&(U=!1),c.addEventListener(g.toString(),A,U);else if(c.attachEvent)c.attachEvent(si(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function oa(){function c(v){return g.call(c.src,c.listener,v)}const g=Ro;return c}function la(c,g,v,A,U){if(Array.isArray(g))for(var q=0;q<g.length;q++)la(c,g[q],v,A,U);else A=m(A)?!!A.capture:!!A,v=Io(v),c&&c[Ne]?(c=c.i,q=String(g).toString(),q in c.g&&(g=c.g[q],v=Ie(g,v,A,U),v>-1&&(ge(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete c.g[q],c.h--)))):c&&(c=pr(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Ie(g,v,A,U)),(v=c>-1?g[c]:null)&&ua(v))}function ua(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ne])Ee(g.i,c);else{var v=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(v,A,c.capture):g.detachEvent?g.detachEvent(si(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=pr(g))?(Ee(v,c),v.h==0&&(v.src=null,g[je]=null)):ge(c)}}}function si(c){return c in Mt?Mt[c]:Mt[c]="on"+c}function Ro(c,g){if(c.da)c=!0;else{g=new Se(g,this);const v=c.listener,A=c.ha||c.src;c.fa&&ua(c),c=v.call(A,g)}return c}function pr(c){return c=c[je],c instanceof ce?c:null}var Co="__closure_events_fn_"+(Math.random()*1e9>>>0);function Io(c){return typeof c=="function"?c:(c[Co]||(c[Co]=function(g){return c.handleEvent(g)}),c[Co])}function Tt(){V.call(this),this.i=new ce(this),this.M=this,this.G=null}S(Tt,V),Tt.prototype[Ne]=!0,Tt.prototype.removeEventListener=function(c,g,v,A){la(this,c,g,v,A)};function Vt(c,g){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new D(g,c);else if(g instanceof D)g.target=g.target||c;else{var U=g;g=new D(A,c),ie(g,U)}U=!0;let q,te;if(v)for(te=v.length-1;te>=0;te--)q=g.g=v[te],U=fs(q,A,!0,g)&&U;if(q=g.g=c,U=fs(q,A,!0,g)&&U,U=fs(q,A,!1,g)&&U,v)for(te=0;te<v.length;te++)q=g.g=v[te],U=fs(q,A,!1,g)&&U}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const v=c.g[g];for(let A=0;A<v.length;A++)ge(v[A]);delete c.g[g],c.h--}}this.G=null},Tt.prototype.J=function(c,g,v,A){return this.i.add(String(c),g,!1,v,A)},Tt.prototype.K=function(c,g,v,A){return this.i.add(String(c),g,!0,v,A)};function fs(c,g,v,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let q=0;q<g.length;++q){const te=g[q];if(te&&!te.da&&te.capture==v){const we=te.listener,pt=te.ha||te.src;te.fa&&Ee(c.i,te),U=we.call(pt,A)!==!1&&U}}return U&&!A.defaultPrevented}function of(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(c,g||0)}function Eu(c){c.g=of(()=>{c.g=null,c.i&&(c.i=!1,Eu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class nn extends V{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Eu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(c){V.call(this),this.h=c,this.g={}}S(yr,V);var xo=[];function No(c){Be(c.g,function(g,v){this.g.hasOwnProperty(v)&&ua(g)},c),c.g={}}yr.prototype.N=function(){yr.Z.N.call(this),No(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=f.JSON.stringify,lf=f.JSON.parse,Tu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function bu(){}function Au(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bt(){D.call(this,"d")}S(Bt,D);function In(){D.call(this,"c")}S(In,D);var gt={},Su=null;function ca(){return Su=Su||new Tt}gt.Ia="serverreachability";function wu(c){D.call(this,gt.Ia,c)}S(wu,D);function ri(c){const g=ca();Vt(g,new wu(g))}gt.STAT_EVENT="statevent";function _r(c,g){D.call(this,gt.STAT_EVENT,c),this.stat=g}S(_r,D);function bt(c){const g=ca();Vt(g,new _r(g,c))}gt.Ja="timingevent";function ai(c,g){D.call(this,gt.Ja,c),this.size=g}S(ai,D);function oi(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},g)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function uf(c,g,v,A,U,q){c.info(function(){if(c.g)if(q){var te="",we=q.split("&");for(let Fe=0;Fe<we.length;Fe++){var pt=we[Fe].split("=");if(pt.length>1){const lt=pt[0];pt=pt[1];const On=lt.split("_");te=On.length>=2&&On[1]=="type"?te+(lt+"="+pt+"&"):te+(lt+"=redacted&")}}}else te=null;else te=q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+g+`
`+v+`
`+te})}function Ru(c,g,v,A,U,q,te){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+g+`
`+v+`
`+q+" "+te})}function li(c,g,v,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+cf(c,v)+(A?" "+A:"")})}function vr(c,g){c.info(function(){return"TIMEOUT: "+g})}Fn.prototype.info=function(){};function cf(c,g){if(!c.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var v=q[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return ds(q)}catch{return g}}var Er={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Do={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oo;function Tr(){}S(Tr,bu),Tr.prototype.g=function(){return new XMLHttpRequest},Oo=new Tr;function Vi(c){return encodeURIComponent(String(c))}function Cu(c){var g=1;c=c.split(":");const v=[];for(;g>0&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function Gn(c,g,v,A){this.j=c,this.i=g,this.l=v,this.S=A||1,this.V=new yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var At={},Pt={};function ui(c,g,v){c.M=1,c.A=br(wt(g)),c.u=v,c.R=!0,ha(c,null)}function ha(c,g){c.F=Date.now(),ci(c),c.B=wt(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),ga(v.i,"t",A),c.C=0,v=c.j.L,c.h=new Kn,c.g=qu(c.j,v?g:null,!c.u),c.P>0&&(c.O=new nn(y(c.Y,c,c.g),c.P)),g=c.V,v=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(xo[0]=U.toString()),U=xo);for(let q=0;q<U.length;q++){const te=ot(v,U[q],A||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),ri(),uf(c.i,c.v,c.B,c.l,c.S,c.u)}Gn.prototype.ba=function(c){c=c.target;const g=this.O;g&&Xn(c)==3?g.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)e:{const we=Xn(this.g),pt=this.g.ya(),Fe=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||qt(this.g)))){this.K||we!=4||pt==7||(pt==8||Fe<=0?ri(3):ri(2)),hi(this);var g=this.g.ca();this.X=g;var v=hf(this);if(this.o=g==200,Ru(this.i,this.v,this.B,this.l,this.S,we,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(A)){var q=A;break t}}q=null}if(c=q)li(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fi(this,c);else{this.o=!1,this.m=3,bt(12),_n(this),xn(this);break e}}if(this.R){c=!0;let lt;for(;!this.K&&this.C<v.length;)if(lt=xu(this,v),lt==Pt){we==4&&(this.m=4,bt(14),c=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==At){this.m=4,bt(15),li(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else li(this.i,this.l,lt,null),fi(this,lt);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||v.length!=0||this.h.h||(this.m=1,bt(16),c=!1),this.o=this.o&&c,!c)li(this.i,this.l,v,"[Invalid Chunked Response]"),_n(this),xn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Yo(te),te.P=!0,bt(11))}}else li(this.i,this.l,v,null),fi(this,v);we==4&&_n(this),this.o&&!this.K&&(we==4?Uu(this.j,this):(this.o=!1,ci(this)))}else Li(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),_n(this),xn(this)}}}catch{}finally{}};function hf(c){if(!Iu(c))return c.g.la();const g=qt(c.g);if(g==="")return"";let v="";const A=g.length,U=Xn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return _n(c),xn(c),"";c.h.i=new f.TextDecoder}for(let q=0;q<A;q++)c.h.h=!0,v+=c.h.i.decode(g[q],{stream:!(U&&q==A-1)});return g.length=0,c.h.g+=v,c.C=0,c.h.g}function Iu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function xu(c,g){var v=c.C,A=g.indexOf(`
`,v);return A==-1?Pt:(v=Number(g.substring(v,A)),isNaN(v)?At:(A+=1,A+v>g.length?Pt:(g=g.slice(A,A+v),c.C=A+v,g)))}Gn.prototype.cancel=function(){this.K=!0,_n(this)};function ci(c){c.T=Date.now()+c.H,fa(c,c.H)}function fa(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=oi(y(c.aa,c),g)}function hi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Gn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(vr(this.i,this.B),this.M!=2&&(ri(),bt(17)),_n(this),this.m=2,xn(this)):fa(this,this.T-c)};function xn(c){c.j.I==0||c.K||Uu(c.j,c)}function _n(c){hi(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,No(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function fi(c,g){try{var v=c.j;if(v.I!=0&&(v.g==c||mi(v.h,c))){if(!c.L&&mi(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Ea(v),Ts(v);else break e;xr(v),bt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=oi(y(v.Va,v),6e3));di(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ei(v,11)}else if((c.L||v.g==c)&&Ea(v),!w(g))for(U=v.Ba.g.parse(g),g=0;g<U.length;g++){let Fe=U[g];const lt=Fe[0];if(!(lt<=v.K))if(v.K=lt,Fe=Fe[1],v.I==2)if(Fe[0]=="c"){v.M=Fe[1],v.ba=Fe[2];const On=Fe[3];On!=null&&(v.ka=On,v.j.info("VER="+v.ka));const Ti=Fe[4];Ti!=null&&(v.za=Ti,v.j.info("SVER="+v.za));const $n=Fe[5];$n!=null&&typeof $n=="number"&&$n>0&&(A=1.5*$n,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Jn=c.g;if(Jn){const Nr=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var q=A.h;q.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ko(q,q.h),q.h=null))}if(A.G){const Ta=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ta&&(A.wa=Ta,Qe(A.J,A.G,Ta))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var te=c;if(A.na=Bu(A,A.L?A.ba:null,A.W),te.L){Lo(A.h,te);var we=te,pt=A.O;pt&&(we.H=pt),we.D&&(hi(we),ci(we)),A.g=te}else Lu(A);v.i.length>0&&vi(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Ei(v,7);else v.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ei(v,7):Go(v):Fe[0]!="noop"&&v.l&&v.l.qa(Fe),v.A=0)}}ri(4)}catch{}}var St=class{constructor(c,g){this.g=c,this.map=g}};function Mo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function di(c){return c.h?1:c.g?c.g.size:0}function mi(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ko(c,g){c.g?c.g.add(g):c.h=g}function Lo(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Mo.prototype.cancel=function(){if(this.i=Po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Po(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.G);return g}return P(c.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function da(c,g){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let U,q=null;A>=0?(U=c[v].substring(0,A),q=c[v].substring(A+1)):U=c[v],g(U,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function vn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof vn?(this.l=c.l,Ut(this,c.j),this.o=c.o,this.g=c.g,ms(this,c.u),this.h=c.h,Uo(this,Vu(c.i)),this.m=c.m):c&&(g=String(c).match(Nu))?(this.l=!1,Ut(this,g[1]||"",!0),this.o=gi(g[2]||""),this.g=gi(g[3]||"",!0),ms(this,g[4]),this.h=gi(g[5]||"",!0),Uo(this,g[6]||"",!0),this.m=gi(g[7]||"")):(this.l=!1,this.i=new ps(null,this.l))}vn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(Ar(g,ma,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Ar(g,ma,!0),"@"),c.push(Vi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ar(v,v.charAt(0)=="/"?jo:Du,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ar(v,Ou)),c.join("")},vn.prototype.resolve=function(c){const g=wt(this);let v=!!c.j;v?Ut(g,c.j):v=!!c.o,v?g.o=c.o:v=!!c.g,v?g.g=c.g:v=c.u!=null;var A=c.h;if(v)ms(g,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=g.h.lastIndexOf("/");U!=-1&&(A=g.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const q=[];for(let te=0;te<U.length;){const we=U[te++];we=="."?A&&te==U.length&&q.push(""):we==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),A&&te==U.length&&q.push("")):(q.push(we),A=!0)}A=q.join("/")}else A=U}return v?g.h=A:v=c.i.toString()!=="",v?Uo(g,Vu(c.i)):v=!!c.m,v&&(g.m=c.m),g};function wt(c){return new vn(c)}function Ut(c,g,v){c.j=v?gi(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ms(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function Uo(c,g,v){g instanceof ps?(c.i=g,pa(c.i,c.l)):(v||(g=Ar(g,gs)),c.i=new ps(g,c.l))}function Qe(c,g,v){c.i.set(g,v)}function br(c){return Qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function gi(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ar(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,on),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function on(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ma=/[#\/\?@]/g,Du=/[#\?:]/g,jo=/[#\?]/g,gs=/[#\?@]/g,Ou=/#/g;function ps(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function ln(c){c.g||(c.g=new Map,c.h=0,c.i&&da(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=ps.prototype,s.add=function(c,g){ln(this),this.i=null,c=ys(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function Mu(c,g){ln(c),g=ys(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function zo(c,g){return ln(c),g=ys(c,g),c.g.has(g)}s.forEach=function(c,g){ln(this),this.g.forEach(function(v,A){v.forEach(function(U){c.call(g,U,A,this)},this)},this)};function Bo(c,g){ln(c);let v=[];if(typeof g=="string")zo(c,g)&&(v=v.concat(c.g.get(ys(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)v=v.concat(c[g]);return v}s.set=function(c,g){return ln(this),this.i=null,c=ys(this,c),zo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=Bo(this,c),c.length>0?String(c[0]):g):g};function ga(c,g,v){Mu(c,g),v.length>0&&(c.i=null,c.g.set(ys(c,g),P(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];const U=Vi(v);v=Bo(this,v);for(let q=0;q<v.length;q++){let te=U;v[q]!==""&&(te+="="+Vi(v[q])),c.push(te)}}return this.i=c.join("&")};function Vu(c){const g=new ps;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function ys(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function pa(c,g){g&&!c.j&&(ln(c),c.i=null,c.g.forEach(function(v,A){const U=A.toLowerCase();A!=U&&(Mu(this,A),ga(this,U,v))},c)),c.j=g}function Yn(c,g){const v=new Fn;if(f.Image){const A=new Image;A.onload=T(Nn,v,"TestLoadImage: loaded",!0,g,A),A.onerror=T(Nn,v,"TestLoadImage: error",!1,g,A),A.onabort=T(Nn,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=T(Nn,v,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function qo(c,g){const v=new Fn,A=new AbortController,U=setTimeout(()=>{A.abort(),Nn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(q=>{clearTimeout(U),q.ok?Nn(v,"TestPingServer: ok",!0,g):Nn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Nn(v,"TestPingServer: error",!1,g)})}function Nn(c,g,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function _s(){this.g=new Tu}function pi(c){this.i=c.Sb||null,this.h=c.ab||!1}S(pi,bu),pi.prototype.g=function(){return new Sr(this.i,this.h)};function Sr(c,g){Tt.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Sr,Tt),s=Sr.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Qn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ya(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ya(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?vs(this):Qn(this),this.readyState==3&&ya(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,vs(this))},s.Na=function(c){this.g&&(this.response=c,vs(this))},s.ga=function(){this.g&&vs(this)};function vs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Qn(c)}s.setRequestHeader=function(c,g){this.A.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Qn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Dn(c){let g="";return Be(c,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function wr(c,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Dn(v),typeof c=="string"?v!=null&&Vi(v):Qe(c,g,v))}function Je(c){Tt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Je,Tt);var yi=/^https?$/i,Ho=["POST","PUT"];s=Je.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oo.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(q){Rr(this,q);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())v.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Ho,g,void 0)>=0)||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of v)this.g.setRequestHeader(q,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){Rr(this,q)}};function Rr(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,Fo(c),ki(c)}function Fo(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Vt(this,"complete"),Vt(this,"abort"),ki(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),Je.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Cr(this):this.Xa())},s.Xa=function(){Cr(this)};function Cr(c){if(c.h&&typeof u<"u"){if(c.v&&Xn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Vt(c,"readystatechange"),Xn(c)==4){c.h=!1;try{const q=c.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=q===0){let te=String(c.D).match(Nu)[1]||null;!te&&f.self&&f.self.location&&(te=f.self.location.protocol.slice(0,-1)),A=!yi.test(te?te.toLowerCase():"")}v=A}if(v)Vt(c,"complete"),Vt(c,"success");else{c.o=6;try{var U=Xn(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Fo(c)}}finally{ki(c)}}}}function ki(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,g||Vt(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Xn(c){return c.g?c.g.readyState:0}s.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),lf(g)}};function qt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Li(c){const g={};c=(c.g&&Xn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(w(c[A]))continue;var v=Cu(c[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=g[U]||[];g[U]=q,q.push(v)}Ye(g,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Es(c){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,c),this.Za=_i("retryDelaySeedMs",1e4,c),this.Ta=_i("forwardChannelMaxRetries",2,c),this.va=_i("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Mo(c&&c.concurrentRequestLimit),this.Ba=new _s,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Es.prototype,s.ka=8,s.I=1,s.connect=function(c,g,v,A){bt(0),this.W=c,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Bu(this,null,this.W),vi(this)};function Go(c){if(_a(c),c.I==3){var g=c.V++,v=wt(c.J);if(Qe(v,"SID",c.M),Qe(v,"RID",g),Qe(v,"TYPE","terminate"),Ir(c,v),g=new Gn(c,c.j,g),g.M=2,g.A=br(wt(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=qu(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ci(g)}zu(c)}function Ts(c){c.g&&(Yo(c),c.g.cancel(),c.g=null)}function _a(c){Ts(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ea(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function vi(c){if(!Vo(c.h)&&!c.m){c.m=!0;var g=c.Ea;Ce||R(),ue||(Ce(),ue=!0),I.add(g,c),c.D=0}}function va(c,g){return di(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=oi(y(c.Ea,c,g),ju(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Gn(this,this.j,c);let q=this.o;if(this.U&&(q?(q=M(q),ie(q,this.U)):q=this.U),this.u!==null||this.R||(U.J=q,q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ku(this,U,g),v=wt(this.J),Qe(v,"RID",c),Qe(v,"CVER",22),this.G&&Qe(v,"X-HTTP-Session-Id",this.G),Ir(this,v),q&&(this.R?g="headers="+Vi(Dn(q))+"&"+g:this.u&&wr(v,this.u,q)),ko(this.h,U),this.Ra&&Qe(v,"TYPE","init"),this.S?(Qe(v,"$req",g),Qe(v,"SID","null"),U.U=!0,ui(U,v,null)):ui(U,v,g),this.I=2}}else this.I==3&&(c?Ko(this,c):this.i.length==0||Vo(this.h)||Ko(this))};function Ko(c,g){var v;g?v=g.l:v=c.V++;const A=wt(c.J);Qe(A,"SID",c.M),Qe(A,"RID",v),Qe(A,"AID",c.K),Ir(c,A),c.u&&c.o&&wr(A,c.u,c.o),v=new Gn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),g&&(c.i=g.G.concat(c.i)),g=ku(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ko(c.h,v),ui(v,A,g)}function Ir(c,g){c.H&&Be(c.H,function(v,A){Qe(g,A,v)}),c.l&&Be({},function(v,A){Qe(g,A,v)})}function ku(c,g,v){v=Math.min(c.i.length,v);const A=c.l?y(c.l.Ka,c.l,c):null;e:{var U=c.i;let we=-1;for(;;){const pt=["count="+v];we==-1?v>0?(we=U[0].g,pt.push("ofs="+we)):we=0:pt.push("ofs="+we);let Fe=!0;for(let lt=0;lt<v;lt++){var q=U[lt].g;const On=U[lt].map;if(q-=we,q<0)we=Math.max(0,U[lt].g-100),Fe=!1;else try{q="req"+q+"_"||"";try{var te=On instanceof Map?On:Object.entries(On);for(const[Ti,$n]of te){let Jn=$n;m($n)&&(Jn=ds($n)),pt.push(q+Ti+"="+encodeURIComponent(Jn))}}catch(Ti){throw pt.push(q+"type="+encodeURIComponent("_badmap")),Ti}}catch{A&&A(On)}}if(Fe){te=pt.join("&");break e}}te=void 0}return c=c.i.splice(0,v),g.G=c,te}function Lu(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;Ce||R(),ue||(Ce(),ue=!0),I.add(g,c),c.A=0}}function xr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=oi(y(c.Da,c),ju(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=oi(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Ts(this),Pu(this))};function Yo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Pu(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=wt(c.na);Qe(g,"RID","rpc"),Qe(g,"SID",c.M),Qe(g,"AID",c.K),Qe(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&Qe(g,"TO",c.ia),Qe(g,"TYPE","xmlhttp"),Ir(c,g),c.u&&c.o&&wr(g,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=br(wt(g)),v.u=null,v.R=!0,ha(v,c)}s.Va=function(){this.C!=null&&(this.C=null,Ts(this),xr(this),bt(19))};function Ea(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Uu(c,g){var v=null;if(c.g==g){Ea(c),Yo(c),c.g=null;var A=2}else if(mi(c.h,g))v=g.G,Lo(c.h,g),A=1;else return;if(c.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var U=c.D;A=ca(),Vt(A,new ai(A,v)),vi(c)}else Lu(c);else if(U=g.m,U==3||U==0&&g.X>0||!(A==1&&va(c,g)||A==2&&xr(c)))switch(v&&v.length>0&&(g=c.h,g.i=g.i.concat(v)),U){case 1:Ei(c,5);break;case 4:Ei(c,10);break;case 3:Ei(c,6);break;default:Ei(c,2)}}}function ju(c,g){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*g}function Ei(c,g){if(c.j.info("Error code "+g),g==2){var v=y(c.bb,c),A=c.Ua;const U=!A;A=new vn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ut(A,"https"),br(A),U?Yn(A.toString(),v):qo(A.toString(),v)}else bt(2);c.I=0,c.l&&c.l.pa(g),zu(c),_a(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function zu(c){if(c.I=0,c.ja=[],c.l){const g=Po(c.h);(g.length!=0||c.i.length!=0)&&(K(c.ja,g),K(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function Bu(c,g,v){var A=v instanceof vn?wt(v):new vn(v);if(A.g!="")g&&(A.g=g+"."+A.g),ms(A,A.u);else{var U=f.location;A=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const q=new vn(null);A&&Ut(q,A),g&&(q.g=g),U&&ms(q,U),v&&(q.h=v),A=q}return v=c.G,g=c.wa,v&&g&&Qe(A,v,g),Qe(A,"VER",c.ka),Ir(c,A),A}function qu(c,g,v){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new Je(new pi({ab:v})):new Je(c.ma),g.Fa(c.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}s=Hu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function bs(){}bs.prototype.g=function(c,g){return new sn(c,g)};function sn(c,g){Tt.call(this),this.g=new Es(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!w(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Pi(this)}S(sn,Tt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Go(this.g)},sn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=ds(c),c=v);g.i.push(new St(g.Ya++,c)),g.I==3&&vi(g)},sn.prototype.N=function(){this.g.l=null,delete this.j,Go(this.g),delete this.g,sn.Z.N.call(this)};function Fu(c){Bt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}S(Fu,Bt);function Gu(){In.call(this),this.status=1}S(Gu,In);function Pi(c){this.g=c}S(Pi,Hu),Pi.prototype.ra=function(){Vt(this.g,"a")},Pi.prototype.qa=function(c){Vt(this.g,new Fu(c))},Pi.prototype.pa=function(c){Vt(this.g,new Gu)},Pi.prototype.oa=function(){Vt(this.g,"b")},bs.prototype.createWebChannel=bs.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,GE=function(){return new bs},FE=function(){return ca()},HE=gt,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,rh=Er,Do.COMPLETE="complete",qE=Do,Au.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,kl=Au,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,BE=Je}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore",Bv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Zm("@firebase/firestore");function Za(){return Wr.logLevel}function le(s,...e){if(Wr.logLevel<=ke.DEBUG){const n=e.map(ng);Wr.debug(`Firestore (${Eo}): ${s}`,...n)}}function as(s,...e){if(Wr.logLevel<=ke.ERROR){const n=e.map(ng);Wr.error(`Firestore (${Eo}): ${s}`,...n)}}function uo(s,...e){if(Wr.logLevel<=ke.WARN){const n=e.map(ng);Wr.warn(`Firestore (${Eo}): ${s}`,...n)}}function ng(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KE(s,r,n)}function KE(s,e,n){let r=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw as(r),new Error(r)}function Ke(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||KE(e,o,r)}function Ae(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wt.UNAUTHENTICATED)))}shutdown(){}}class Ow{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Mw{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ns,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ns)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new YE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class Vw{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kw{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Vw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=u=>{u.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,le("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Pw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Le(s,e){return s<e?-1:s>e?1:0}function Om(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return pm(o)===pm(u)?Le(o,u):pm(o)?1:-1}return Le(s.length,e.length)}const Uw=55296,jw=57343;function pm(s){const e=s.charCodeAt(0);return e>=Uw&&e<=jw}function co(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__name__";class Ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Ri.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const r=Ri.isNumericId(e),o=Ri.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ri.extractNumericId(e).compare(Ri.extractNumericId(n)):Om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}}class nt extends Ri{construct(e,n,r){return new nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new nt(n)}static emptyPath(){return new nt([])}}const zw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ri{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return zw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hv}static keyField(){return new Qt([Hv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new se(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new se(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(nt.fromString(e))}static fromName(e){return new me(nt.fromString(e).popFirst(5))}static empty(){return new me(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(s,e,n){if(!n)throw new se(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Bw(s,e,n,r){if(e===!0&&r===!0)throw new se(X.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Fv(s){if(!me.isDocumentKey(s))throw new se(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Gv(s){if(me.isDocumentKey(s))throw new se(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function XE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Uh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ve(12329,{type:typeof s})}function pn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uh(s);throw new se(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(s,e){const n={typeString:s};return e&&(n.value=e),n}function su(s,e){if(!XE(s))throw new se(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new se(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=-62135596800,Yv=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Yv);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Kv)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yv}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Ot("string",rt._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new rt(0,0))}static max(){return new Te(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=-1;function qw(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new rr(o,me.empty(),e)}function Hw(s){return new rr(s.readTime,s.key,Yl)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(Te.min(),me.empty(),Yl)}static max(){return new rr(Te.max(),me.empty(),Yl)}}function Fw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:Le(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==Gw)throw s;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,r)=>{n(e)}))}static reject(e){return new Z(((n,r)=>{r(e)}))}static waitFor(e){return new Z(((n,r)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>r(p)))})),f=!0,u===o&&n()}))}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next((o=>o?Z.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new Z(((r,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((T=>{f[y]=T,++m,m===u&&r(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new Z(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function Yw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function zh(s){return s==null}function _h(s){return s===0&&1/s==-1/0}function Qw(s){return typeof s=="number"&&Number.isInteger(s)&&!_h(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="";function Xw(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Qv(e)),e=$w(s.get(n),e);return Qv(e)}function $w(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case $E:n+="";break;default:n+=u}}return n}function Qv(s){return s+$E+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function hr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function JE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $c(this.root,e,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $c(this.root,e,this.comparator,!0)}}class $c{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Yt.RED,this.left=o??Yt.EMPTY,this.right=u??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Yt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class $v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Lt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new WE("Invalid base64 string: "+u):u}})(e);return new Xt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const Jw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=Jw.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(s.seconds),nanos:vt(s.nanos)}}function vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function or(s){return typeof s=="string"?Xt.fromBase64String(s):Xt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",eT="__type__",tT="__previous_value__",nT="__local_write_time__";function rg(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[eT])==null?void 0:r.stringValue)===ZE}function Bh(s){const e=s.mapValue.fields[tT];return rg(e)?Bh(e):e}function Ql(s){const e=ar(s.mapValue.fields[nT].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n,r,o,u,f,m,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const vh="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||vh}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="__type__",Zw="__max__",Jc={mapValue:{}},sT="__vector__",Eh="value";function lr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?rg(s)?4:tR(s)?9007199254740991:eR(s)?10:11:ve(28295,{value:s})}function Mi(s,e){if(s===e)return!0;const n=lr(s);if(n!==lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ql(s).isEqual(Ql(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ar(o.timestampValue),m=ar(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return or(o.bytesValue).isEqual(or(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return vt(o.geoPointValue.latitude)===vt(u.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return vt(o.integerValue)===vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=vt(o.doubleValue),m=vt(u.doubleValue);return f===m?_h(f)===_h(m):isNaN(f)&&isNaN(m)}return!1})(s,e);case 9:return co(s.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Xv(f)!==Xv(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Mi(f[p],m[p])))return!1;return!0})(s,e);default:return ve(52216,{left:s})}}function $l(s,e){return(s.values||[]).find((n=>Mi(n,e)))!==void 0}function ho(s,e){if(s===e)return 0;const n=lr(s),r=lr(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=vt(u.integerValue||u.doubleValue),p=vt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(s,e);case 3:return Jv(s.timestampValue,e.timestampValue);case 4:return Jv(Ql(s),Ql(e));case 5:return Om(s.stringValue,e.stringValue);case 6:return(function(u,f){const m=or(u),p=or(f);return m.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const T=Le(m[y],p[y]);if(T!==0)return T}return Le(m.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Le(vt(u.latitude),vt(f.latitude));return m!==0?m:Le(vt(u.longitude),vt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Wv(s.arrayValue,e.arrayValue);case 10:return(function(u,f){var C,P,K,Y;const m=u.fields||{},p=f.fields||{},y=(C=m[Eh])==null?void 0:C.arrayValue,T=(P=p[Eh])==null?void 0:P.arrayValue,S=Le(((K=y==null?void 0:y.values)==null?void 0:K.length)||0,((Y=T==null?void 0:T.values)==null?void 0:Y.length)||0);return S!==0?S:Wv(y,T)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Jc.mapValue&&f===Jc.mapValue)return 0;if(u===Jc.mapValue)return 1;if(f===Jc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let S=0;S<p.length&&S<T.length;++S){const C=Om(p[S],T[S]);if(C!==0)return C;const P=ho(m[p[S]],y[T[S]]);if(P!==0)return P}return Le(p.length,T.length)})(s.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function Jv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Le(s,e);const n=ar(s),r=ar(e),o=Le(n.seconds,r.seconds);return o!==0?o:Le(n.nanos,r.nanos)}function Wv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=ho(n[o],r[o]);if(u)return u}return Le(n.length,r.length)}function fo(s){return Mm(s)}function Mm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return or(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Mm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Mm(n.fields[f])}`;return o+"}"})(s.mapValue):ve(61005,{value:s})}function ah(s){switch(lr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(s);return e?16+ah(e):16;case 5:return 2*s.stringValue.length;case 6:return or(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+ah(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return hr(r.fields,((u,f)=>{o+=u.length+ah(f)})),o})(s.mapValue);default:throw ve(13486,{value:s})}}function Zv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Vm(s){return!!s&&"integerValue"in s}function ag(s){return!!s&&"arrayValue"in s}function e0(s){return!!s&&"nullValue"in s}function t0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function oh(s){return!!s&&"mapValue"in s}function eR(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[iT])==null?void 0:r.stringValue)===sT}function zl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return hr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=zl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zl(s.arrayValue.values[n]);return e}return{...s}}function tR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Zw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(n)}setAll(e){let n=Qt.emptyPath(),r={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=zl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){hr(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new gn(zl(this.value))}}function rT(s){const e=[];return hr(s.fields,((n,r)=>{const o=new Qt([n]);if(oh(r)){const u=rT(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r,o,u,f,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Zt(e,0,Te.min(),Te.min(),Te.min(),gn.empty(),0)}static newFoundDocument(e,n,r,o){return new Zt(e,1,n,Te.min(),r,o,0)}static newNoDocument(e,n){return new Zt(e,2,n,Te.min(),Te.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Te.min(),Te.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.position=e,this.inclusive=n}}function n0(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=me.comparator(me.fromName(f.referenceValue),n.key):r=ho(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function i0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Mi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function nR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{}class Dt extends aT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sR(e,n,r):n==="array-contains"?new oR(e,r):n==="in"?new lR(e,r):n==="not-in"?new uR(e,r):n==="array-contains-any"?new cR(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rR(e,r):new aR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ho(n,this.value)):n!==null&&lr(this.value)===lr(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends aT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ni(e,n)}matches(e){return oT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oT(s){return s.op==="and"}function lT(s){return iR(s)&&oT(s)}function iR(s){for(const e of s.filters)if(e instanceof ni)return!1;return!0}function km(s){if(s instanceof Dt)return s.field.canonicalString()+s.op.toString()+fo(s.value);if(lT(s))return s.filters.map((e=>km(e))).join(",");{const e=s.filters.map((n=>km(n))).join(",");return`${s.op}(${e})`}}function uT(s,e){return s instanceof Dt?(function(r,o){return o instanceof Dt&&r.op===o.op&&r.field.isEqual(o.field)&&Mi(r.value,o.value)})(s,e):s instanceof ni?(function(r,o){return o instanceof ni&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,m)=>u&&uT(f,o.filters[m])),!0):!1})(s,e):void ve(19439)}function cT(s){return s instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`})(s):s instanceof ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(cT).join(" ,")+"}"})(s):"Filter"}class sR extends Dt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class rR extends Dt{constructor(e,n){super(e,"in",n),this.keys=hT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class aR extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=hT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function hT(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>me.fromName(r.referenceValue)))}class oR extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&$l(n.arrayValue,this.value)}}class lR extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$l(this.value.arrayValue,n)}}class uR extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$l(this.value.arrayValue,n)}}class cR extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>$l(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n=null,r=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function s0(s,e=null,n=[],r=[],o=null,u=null,f=null){return new hR(s,e,n,r,o,u,f)}function og(s){const e=Ae(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>km(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>fo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>fo(r))).join(",")),e.Te=n}return e.Te}function lg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!nR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!uT(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!i0(s.startAt,e.startAt)&&i0(s.endAt,e.endAt)}function Lm(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n=null,r=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fR(s,e,n,r,o,u,f,m){return new Ao(s,e,n,r,o,u,f,m)}function qh(s){return new Ao(s)}function r0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function fT(s){return s.collectionGroup!==null}function Bl(s){const e=Ae(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Lt(Qt.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Jl(u,r))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new Jl(Qt.keyField(),r))}return e.Ie}function Ci(s){const e=Ae(s);return e.Ee||(e.Ee=dR(e,Bl(s))),e.Ee}function dR(s,e){if(s.limitType==="F")return s0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Jl(o.field,u)}));const n=s.endAt?new Th(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Th(s.startAt.position,s.startAt.inclusive):null;return s0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Pm(s,e){const n=s.filters.concat([e]);return new Ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function bh(s,e,n){return new Ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Hh(s,e){return lg(Ci(s),Ci(e))&&s.limitType===e.limitType}function dT(s){return`${og(Ci(s))}|lt:${s.limitType}`}function eo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>cT(o))).join(", ")}]`),zh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>fo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>fo(o))).join(",")),`Target(${r})`})(Ci(s))}; limitType=${s.limitType})`}function Fh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):me.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Bl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(f,m,p){const y=n0(f,m,p);return f.inclusive?y<=0:y<0})(r.startAt,Bl(r),o)||r.endAt&&!(function(f,m,p){const y=n0(f,m,p);return f.inclusive?y>=0:y>0})(r.endAt,Bl(r),o))})(s,e)}function mR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function mT(s){return(e,n)=>{let r=!1;for(const o of Bl(s)){const u=gR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function gR(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?ho(p,y):ve(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hr(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new ht(me.comparator);function os(){return pR}const gT=new ht(me.comparator);function Ll(...s){let e=gT;for(const n of s)e=e.insert(n.key,n);return e}function pT(s){let e=gT;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Qr(){return ql()}function yT(){return ql()}function ql(){return new ia((s=>s.toString()),((s,e)=>s.isEqual(e)))}const yR=new ht(me.comparator),_R=new Lt(me.comparator);function Pe(...s){let e=_R;for(const n of s)e=e.add(n);return e}const vR=new Lt(Le);function ER(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function _T(s){return{integerValue:""+s}}function TR(s,e){return Qw(e)?_T(e):ug(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function bR(s,e,n){return s instanceof Ah?(function(o,u){const f={fields:{[eT]:{stringValue:ZE},[nT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&rg(u)&&(u=Bh(u)),u&&(f.fields[tT]=u),{mapValue:f}})(n,e):s instanceof mo?ET(s,e):s instanceof go?TT(s,e):(function(o,u){const f=vT(o,u),m=a0(f)+a0(o.Ae);return Vm(f)&&Vm(o.Ae)?_T(m):ug(o.serializer,m)})(s,e)}function AR(s,e,n){return s instanceof mo?ET(s,e):s instanceof go?TT(s,e):n}function vT(s,e){return s instanceof Sh?(function(r){return Vm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Ah extends Gh{}class mo extends Gh{constructor(e){super(),this.elements=e}}function ET(s,e){const n=bT(e);for(const r of s.elements)n.some((o=>Mi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class go extends Gh{constructor(e){super(),this.elements=e}}function TT(s,e){let n=bT(e);for(const r of s.elements)n=n.filter((o=>!Mi(o,r)));return{arrayValue:{values:n}}}class Sh extends Gh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function a0(s){return vt(s.integerValue||s.doubleValue)}function bT(s){return ag(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.field=e,this.transform=n}}function SR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof mo&&o instanceof mo||r instanceof go&&o instanceof go?co(r.elements,o.elements,Mi):r instanceof Sh&&o instanceof Sh?Mi(r.Ae,o.Ae):r instanceof Ah&&o instanceof Ah})(s.transform,e.transform)}class wR{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Kh{}function ST(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new cg(s.key,yn.none()):new ru(s.key,s.data,yn.none());{const n=s.data,r=gn.empty();let o=new Lt(Qt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new fr(s.key,r,new Cn(o.toArray()),yn.none())}}function RR(s,e,n){s instanceof ru?(function(o,u,f){const m=o.value.clone(),p=l0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,e,n):s instanceof fr?(function(o,u,f){if(!lh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=l0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(wT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Hl(s,e,n,r){return s instanceof ru?(function(u,f,m,p){if(!lh(u.precondition,f))return m;const y=u.value.clone(),T=u0(u.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof fr?(function(u,f,m,p){if(!lh(u.precondition,f))return m;const y=u0(u.fieldTransforms,p,f),T=f.data;return T.setAll(wT(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(u,f,m){return lh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(s,e,n)}function CR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=vT(r.transform,o||null);u!=null&&(n===null&&(n=gn.empty()),n.set(r.field,u))}return n||null}function o0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&co(r,o,((u,f)=>SR(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ru extends Kh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fr extends Kh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function wT(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function l0(s,e,n){const r=new Map;Ke(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,m=e.data.field(u.field);r.set(u.field,AR(f,m,n[o]))}return r}function u0(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,bR(u,f,e))}return r}class cg extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IR extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&RR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yT();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=ST(f,m);p!==null&&r.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,((n,r)=>o0(n,r)))&&co(this.baseMutations,e.baseMutations,((n,r)=>o0(n,r)))}}class hg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return yR})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new hg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,ze;function OR(s){switch(s){case X.OK:return ve(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ve(15467,{code:s})}}function RT(s){if(s===void 0)return as("GRPC error has no .code"),X.UNKNOWN;switch(s){case Nt.OK:return X.OK;case Nt.CANCELLED:return X.CANCELLED;case Nt.UNKNOWN:return X.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return X.INTERNAL;case Nt.UNAVAILABLE:return X.UNAVAILABLE;case Nt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Nt.NOT_FOUND:return X.NOT_FOUND;case Nt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Nt.ABORTED:return X.ABORTED;case Nt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Nt.DATA_LOSS:return X.DATA_LOSS;default:return ve(39323,{code:s})}}(ze=Nt||(Nt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new nr([4294967295,4294967295],0);function c0(s){const e=MR().encode(s),n=new zE;return n.update(e),new Uint8Array(n.digest())}function h0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new nr([n,r],0),new nr([o,u],0)]}class fg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(nr.fromNumber(r)));return o.compare(VR)===1&&(o=new nr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=c0(e),[r,o]=h0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new fg(u,o,n);return r.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=c0(e),[r,o]=h0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yh(Te.min(),o,new ht(Le),os(),Pe())}}class au{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new au(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class CT{constructor(e,n){this.targetId=e,this.Ce=n}}class IT{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class f0{constructor(){this.ve=0,this.Fe=d0(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),r=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:ve(38017,{changeType:u})}})),new au(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=d0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kR{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=Wc(),this.He=Wc(),this.Ye=new ht(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Lm(u))if(r===0){const f=new me(u.path);this.et(n,f,Zt.newNoDocument(f,Te.min()))}else Ke(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=or(r).toUint8Array()}catch(p){if(p instanceof WE)return uo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new fg(f,o,u)}catch(p){return uo(p instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Lm(m.target)){const p=new me(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Zt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=Pe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Yh(e,n,this.Ye,this.je,r);return this.je=os(),this.Je=Wc(),this.He=Wc(),this.Ye=new ht(Le),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new f0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Lt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Lt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new f0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wc(){return new ht(me.comparator)}function d0(){return new ht(me.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},PR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class jR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Um(s,e){return s.useProto3Json||zh(e)?e:{value:e}}function wh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function zR(s,e){return wh(s,e.toTimestamp())}function Ii(s){return Ke(!!s,49232),Te.fromTimestamp((function(n){const r=ar(n);return new rt(r.seconds,r.nanos)})(s))}function dg(s,e){return jm(s,e).canonicalString()}function jm(s,e){const n=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function NT(s){const e=nt.fromString(s);return Ke(kT(e),10190,{key:e.toString()}),e}function zm(s,e){return dg(s.databaseId,e.path)}function ym(s,e){const n=NT(e);if(n.get(1)!==s.databaseId.projectId)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(OT(n))}function DT(s,e){return dg(s.databaseId,e)}function BR(s){const e=NT(s);return e.length===4?nt.emptyPath():OT(e)}function Bm(s){return new nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function OT(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function m0(s,e,n){return{name:zm(s,e),fields:n.value.mapValue.fields}}function qR(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ve(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(Ke(T===void 0||typeof T=="string",58123),Xt.fromBase64String(T||"")):(Ke(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Xt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const T=y.code===void 0?X.UNKNOWN:RT(y.code);return new se(T,y.message||"")})(f);n=new IT(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=ym(s,r.document.name),u=Ii(r.document.updateTime),f=r.document.createTime?Ii(r.document.createTime):Te.min(),m=new gn({mapValue:{fields:r.document.fields}}),p=Zt.newFoundDocument(o,u,f,m),y=r.targetIds||[],T=r.removedTargetIds||[];n=new uh(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=ym(s,r.document),u=r.readTime?Ii(r.readTime):Te.min(),f=Zt.newNoDocument(o,u),m=r.removedTargetIds||[];n=new uh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=ym(s,r.document),u=r.removedTargetIds||[];n=new uh([],u,o,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new DR(o,u),m=r.targetId;n=new CT(m,f)}}return n}function HR(s,e){let n;if(e instanceof ru)n={update:m0(s,e.key,e.value)};else if(e instanceof cg)n={delete:zm(s,e.key)};else if(e instanceof fr)n={update:m0(s,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof IR))return ve(16599,{Vt:e.type});n={verify:zm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const m=f.transform;if(m instanceof Ah)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof mo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof go)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Sh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw ve(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:zR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ve(27497)})(s,e.precondition)),n}function FR(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,u){let f=o.updateTime?Ii(o.updateTime):Ii(u);return f.isEqual(Te.min())&&(f=Ii(u)),new wR(f,o.transformResults||[])})(n,e)))):[]}function GR(s,e){return{documents:[DT(s,e.path)]}}function KR(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DT(s,o);const u=(function(y){if(y.length!==0)return VT(ni.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((T=>(function(C){return{field:to(C.field),direction:XR(C.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Um(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function YR(s){let e=BR(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ke(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(S){const C=MT(S);return C instanceof ni&&lT(C)?C.getFilters():[C]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((C=>(function(K){return new Jl(no(K.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(C)))})(n.orderBy));let m=null;n.limit&&(m=(function(S){let C;return C=typeof S=="object"?S.value:S,zh(C)?null:C})(n.limit));let p=null;n.startAt&&(p=(function(S){const C=!!S.before,P=S.values||[];return new Th(P,C)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const C=!S.before,P=S.values||[];return new Th(P,C)})(n.endAt)),fR(e,o,f,u,m,"F",p,y)}function QR(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MT(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=no(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=no(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=no(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=no(n.unaryFilter.field);return Dt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Dt.create(no(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ni.create(n.compositeFilter.filters.map((r=>MT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(n.compositeFilter.op))})(s):ve(30097,{filter:s})}function XR(s){return LR[s]}function $R(s){return PR[s]}function JR(s){return UR[s]}function to(s){return{fieldPath:s.canonicalString()}}function no(s){return Qt.fromServerFormat(s.fieldPath)}function VT(s){return s instanceof Dt?(function(n){if(n.op==="=="){if(t0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NAN"}};if(e0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NAN"}};if(e0(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(n.field),op:$R(n.op),value:n.value}}})(s):s instanceof ni?(function(n){const r=n.getFilters().map((o=>VT(o)));return r.length===1?r[0]:{compositeFilter:{op:JR(n.op),filters:r}}})(s):ve(54877,{filter:s})}function WR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,r,o,u=Te.min(),f=Te.min(),m=Xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.yt=e}}function eC(s){const e=YR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.Cn=new nC}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(rr.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class nC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Lt(nt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Lt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(LT,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new po(0)}static cr(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="LruGarbageCollector",iC=1048576;function y0([s,e],[n,r]){const o=Le(s,n);return o===0?Le(e,r):o}class sC{constructor(e){this.Ir=e,this.buffer=new Lt(y0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();y0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(p0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?le(p0,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Vr(3e5)}))}}class aC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(jh.ce);const r=new sC(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(g0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,f,m,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,m=Date.now(),this.removeTargets(e,r,n)))).next((S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),Za()<=ke.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function oC(s,e){return new aC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.changes=new ia((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Hl(r.mutation,o,Cn.empty(),rt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Pe()){const o=Qr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let f=Ll();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=Qr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Pe())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,r,o){let u=os();const f=ql(),m=(function(){return ql()})();return n.forEach(((p,y)=>{const T=r.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof fr)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Hl(T.mutation,y,T.mutation.getFieldMask(),rt.now())):f.set(y.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>m.set(y,new uC(T,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const r=ql();let o=new ht(((f,m)=>f-m)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=r.get(p)||Cn.empty();T=m.applyToLocalView(y,T),r.set(p,T);const S=(o.get(m.batchId)||Pe()).add(p);o=o.insert(m.batchId,S)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,T=p.value,S=yT();T.forEach((C=>{if(!u.has(C)){const P=ST(n.get(C),r.get(C));P!==null&&S.set(C,P),u=u.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return Z.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):Z.resolve(Qr());let m=Yl,p=u;return f.next((y=>Z.forEach(y,((T,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((C=>{p=p.insert(T,C)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Pe()))).next((T=>({batchId:m,changes:pT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let o=Ll();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(e,u).next((m=>Z.forEach(m,(p=>{const y=(function(S,C){return new Ao(C,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((T=>{T.forEach(((S,C)=>{f=f.insert(S,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((f=>{u.forEach(((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,Zt.newInvalidDocument(T)))}));let m=Ll();return f.forEach(((p,y)=>{const T=u.get(p);T!==void 0&&Hl(T.mutation,y,Cn.empty(),rt.now()),Fh(n,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:eC(o.bundledQuery),readTime:Ii(o.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.overlays=new ht(me.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qr();return Z.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.St(e,n,u)})),Z.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const o=Qr(),u=n.length+1,f=new me(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ht(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=u.get(y.largestBatchId);T===null&&(T=Qr(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Qr(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return Z.resolve(m)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new NR(n,r));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Qr=new Lt(zt.$r),this.Ur=new Lt(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new zt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new nt([])),r=new zt(n,e),o=new zt(n,e+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new nt([])),r=new zt(n,e),o=new zt(n,e+1);let u=Pe();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new zt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(zt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new xR(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new zt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?sg:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),o=new zt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Le);return n.forEach((o=>{const u=new zt(o,0),f=new zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{r=r.add(m.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;me.isDocumentKey(u)||(u=u.child(""));const f=new zt(new me(u),0);let m=new Lt(Le);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),f),Z.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,(o=>{const u=new zt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new zt(n,0),o=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.ri=e,this.docs=(function(){return new ht(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=os();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Zt.newInvalidDocument(o))})),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=os();const f=n.path,m=new me(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||Fw(Hw(T),r)<=0||(o.has(T.key)||Fh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(e,n,r,o){ve(9500)}ii(e,n){return Z.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pC(this)}getSize(e){return Z.resolve(this.size)}}class pC extends lC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.persistence=e,this.si=new ia((n=>og(n)),lg),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new mg,this.targetCount=0,this.ai=po.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new po(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),Z.waitFor(u).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),Z.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.ui={},this.overlays={},this.ci=new jh(0),this.li=!1,this.li=!0,this.hi=new dC,this.referenceDelegate=e(this),this.Pi=new yC(this),this.indexManager=new tC,this.remoteDocumentCache=(function(o){return new gC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ZR(n),this.Ii=new hC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new mC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const o=new _C(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class _C extends Kw{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new mg,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const o=me.fromPath(r);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rh{constructor(e,n){this.persistence=e,this.pi=new ia((r=>Xw(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=oC(this,n)}static mi(e,n){return new Rh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?Z.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(r++,u.removeEntry(f,Te.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new pg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dS()?8:Yw(tn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new vC;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(Za()<=ke.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Za()<=ke.DEBUG&&le("QueryEngine","Query:",eo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Za()<=ke.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(n))):Z.resolve())}ys(e,n){if(r0(n))return Z.resolve(null);let r=Ci(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=bh(n,null,"F"),r=Ci(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=Pe(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,f,p.readTime)?this.ys(e,bh(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,r,o){return r0(n)||o.isEqual(Te.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,o)?Z.resolve(null):(Za()<=ke.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(n)),this.vs(e,f,n,qw(o,Yl)).next((m=>m)))}))}Ds(e,n){let r=new Lt(mT(e));return n.forEach(((o,u)=>{Fh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return Za()<=ke.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",eo(n)),this.ps.getDocumentsMatchingQuery(e,n,rr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",TC=3e8;class bC{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ht(Le),this.xs=new ia((u=>og(u)),lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function AC(s,e,n,r){return new bC(s,e,n,r)}async function UT(s,e){const n=Ae(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],m=[];let p=Pe();for(const y of o){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(r,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function SC(s,e){const n=Ae(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,T){const S=y.batch,C=S.keys();let P=Z.resolve();return C.forEach((K=>{P=P.next((()=>T.getEntry(p,K))).next((Y=>{const J=y.docVersions.get(K);Ke(J!==null,48541),Y.version.compareTo(J)<0&&(S.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),T.addEntry(Y)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(p,S)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Pe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function jT(s){const e=Ae(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function wC(s,e){const n=Ae(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,S)=>{const C=o.get(S);if(!C)return;m.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,S))));let P=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(Xt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),o=o.insert(S,P),(function(Y,J,re){return Y.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=TC?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(C,P,T)&&m.push(n.Pi.updateTargetData(u,P))}));let p=os(),y=Pe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(RC(u,f,e.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!r.isEqual(Te.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return Z.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function RC(s,e,n){let r=Pe(),o=Pe();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=os();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):le(yg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function CC(s,e){const n=Ae(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=sg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function IC(s,e){const n=Ae(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((u=>u?(o=u,Z.resolve(o)):n.Pi.allocateTargetId(r).next((f=>(o=new Ws(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function qm(s,e,n){const r=Ae(s),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!bo(f))throw f;le(yg,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function _0(s,e,n){const r=Ae(s);let o=Te.min(),u=Pe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,T){const S=Ae(p),C=S.xs.get(T);return C!==void 0?Z.resolve(S.Ms.get(C)):S.Pi.getTargetData(y,T)})(r,f,Ci(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Te.min(),n?u:Pe()))).next((m=>(xC(r,mR(e),m),{documents:m,Qs:u})))))}function xC(s,e,n){let r=s.Os.get(e)||Te.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class v0{constructor(){this.activeTargetIds=ER()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NC{constructor(){this.Mo=new v0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new v0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="ConnectivityMonitor";class T0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(E0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(E0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function Hm(){return Zc===null?Zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="RestConnection",OC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===vh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const f=Hm(),m=this.zo(e,n.toUriEncodedString());le(_m,`Sending RPC '${e}' ${f}:`,m,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),T=_o(y);return this.Jo(e,m,p,r,T).then((S=>(le(_m,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw uo(_m,`RPC '${e}' ${f} failed with error: `,S,"url: ",m,"request:",r),S}))}Ho(e,n,r,o,u,f){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Eo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const r=OC[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class kC extends MC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=Hm();return new Promise(((m,p)=>{const y=new BE;y.setWithCredentials(!0),y.listenOnce(qE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case rh.NO_ERROR:const S=y.getResponseJson();le(Jt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),m(S);break;case rh.TIMEOUT:le(Jt,`RPC '${e}' ${f} timed out`),p(new se(X.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const C=y.getStatus();if(le(Jt,`RPC '${e}' ${f} failed with status:`,C,"response text:",y.getResponseText()),C>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const K=P==null?void 0:P.error;if(K&&K.status&&K.message){const Y=(function(re){const ae=re.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ae)>=0?ae:X.UNKNOWN})(K.status);p(new se(Y,K.message))}else p(new se(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new se(X.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{le(Jt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);le(Jt,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=Hm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=GE(),m=FE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const T=u.join("");le(Jt,`Creating RPC '${e}' stream ${o}: ${T}`,p);const S=f.createWebChannel(T,p);this.I_(S);let C=!1,P=!1;const K=new VC({Yo:J=>{P?le(Jt,`Not sending because RPC '${e}' stream ${o} is closed:`,J):(C||(le(Jt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),C=!0),le(Jt,`RPC '${e}' stream ${o} sending:`,J),S.send(J))},Zo:()=>S.close()}),Y=(J,re,ae)=>{J.listen(re,(ee=>{try{ae(ee)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return Y(S,kl.EventType.OPEN,(()=>{P||(le(Jt,`RPC '${e}' stream ${o} transport opened.`),K.o_())})),Y(S,kl.EventType.CLOSE,(()=>{P||(P=!0,le(Jt,`RPC '${e}' stream ${o} transport closed`),K.a_(),this.E_(S))})),Y(S,kl.EventType.ERROR,(J=>{P||(P=!0,uo(Jt,`RPC '${e}' stream ${o} transport errored. Name:`,J.name,"Message:",J.message),K.a_(new se(X.UNAVAILABLE,"The operation could not be completed")))})),Y(S,kl.EventType.MESSAGE,(J=>{var re;if(!P){const ae=J.data[0];Ke(!!ae,16349);const ee=ae,pe=(ee==null?void 0:ee.error)||((re=ee[0])==null?void 0:re.error);if(pe){le(Jt,`RPC '${e}' stream ${o} received error:`,pe);const Ce=pe.status;let ue=(function(x){const V=Nt[x];if(V!==void 0)return RT(V)})(Ce),I=pe.message;ue===void 0&&(ue=X.INTERNAL,I="Unknown error status: "+Ce+" with message "+pe.message),P=!0,K.a_(new se(ue,I)),S.close()}else le(Jt,`RPC '${e}' stream ${o} received:`,ae),K.u_(ae)}})),Y(m,HE.STAT_EVENT,(J=>{J.stat===Dm.PROXY?le(Jt,`RPC '${e}' stream ${o} detected buffering proxy`):J.stat===Dm.NOPROXY&&le(Jt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(s){return new jR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="PersistentStream";class BT{constructor(e,n,r,o,u,f,m,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(as(n.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new se(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(b0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(le(b0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LC extends BT{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Te.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Te.min():f.readTime?Ii(f.readTime):Te.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bm(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=Lm(p)?{documents:GR(u,p)}:{query:KR(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=xT(u,f.resumeToken);const y=Um(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Te.min())>0){m.readTime=wh(u,f.snapshotVersion.toTimestamp());const y=Um(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=QR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.q_(n)}}class PC extends BT{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FR(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>HR(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{}class jC extends UC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,jm(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new se(X.UNKNOWN,u.toString())}))}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,jm(n,r),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new se(X.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(as(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="RemoteStore";class BC{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{sa(this)&&(le(Zr,"Restarting streams for network reachability change."),await(async function(p){const y=Ae(p);y.Ea.add(4),await ou(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Xh(y)})(this))}))})),this.Ra=new zC(r,o)}}async function Xh(s){if(sa(s))for(const e of s.da)await e(!0)}async function ou(s){for(const e of s.da)await e(!1)}function qT(s,e){const n=Ae(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Tg(n)?Eg(n):So(n).O_()&&vg(n,e))}function _g(s,e){const n=Ae(s),r=So(n);n.Ia.delete(e),r.O_()&&HT(n,e),n.Ia.size===0&&(r.O_()?r.L_():sa(n)&&n.Ra.set("Unknown"))}function vg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(s).Y_(e)}function HT(s,e){s.Va.Ue(e),So(s).Z_(e)}function Eg(s){s.Va=new kR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),So(s).start(),s.Ra.ua()}function Tg(s){return sa(s)&&!So(s).x_()&&s.Ia.size>0}function sa(s){return Ae(s).Ea.size===0}function FT(s){s.Va=void 0}async function qC(s){s.Ra.set("Online")}async function HC(s){s.Ia.forEach(((e,n)=>{vg(s,e)}))}async function FC(s,e){FT(s),Tg(s)?(s.Ra.ha(e),Eg(s)):s.Ra.set("Unknown")}async function GC(s,e,n){if(s.Ra.set("Online"),e instanceof IT&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){le(Zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ch(s,r)}else if(e instanceof uh?s.Va.Ze(e):e instanceof CT?s.Va.st(e):s.Va.tt(e),!n.isEqual(Te.min()))try{const r=await jT(s.localStore);n.compareTo(r)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,y)=>{const T=u.Ia.get(p);if(!T)return;u.Ia.set(p,T.withResumeToken(Xt.EMPTY_BYTE_STRING,T.snapshotVersion)),HT(u,p);const S=new Ws(T.target,p,y,T.sequenceNumber);vg(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){le(Zr,"Failed to raise snapshot:",r),await Ch(s,r)}}async function Ch(s,e,n){if(!bo(e))throw e;s.Ea.add(1),await ou(s),s.Ra.set("Offline"),n||(n=()=>jT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{le(Zr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Xh(s)}))}function GT(s,e){return e().catch((n=>Ch(s,n,e)))}async function $h(s){const e=Ae(s),n=ur(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sg;for(;KC(e);)try{const o=await CC(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,YC(e,o)}catch(o){await Ch(e,o)}KT(e)&&YT(e)}function KC(s){return sa(s)&&s.Ta.length<10}function YC(s,e){s.Ta.push(e);const n=ur(s);n.O_()&&n.X_&&n.ea(e.mutations)}function KT(s){return sa(s)&&!ur(s).x_()&&s.Ta.length>0}function YT(s){ur(s).start()}async function QC(s){ur(s).ra()}async function XC(s){const e=ur(s);for(const n of s.Ta)e.ea(n.mutations)}async function $C(s,e,n){const r=s.Ta.shift(),o=hg.from(r,e,n);await GT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await $h(s)}async function JC(s,e){e&&ur(s).X_&&await(async function(r,o){if((function(f){return OR(f)&&f!==X.ABORTED})(o.code)){const u=r.Ta.shift();ur(r).B_(),await GT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await $h(r)}})(s,e),KT(s)&&YT(s)}async function A0(s,e){const n=Ae(s);n.asyncQueue.verifyOperationInProgress(),le(Zr,"RemoteStore received new credentials");const r=sa(n);n.Ea.add(3),await ou(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xh(n)}async function WC(s,e){const n=Ae(s);e?(n.Ea.delete(2),await Xh(n)):e||(n.Ea.add(2),await ou(n),n.Ra.set("Unknown"))}function So(s){return s.ma||(s.ma=(function(n,r,o){const u=Ae(n);return u.sa(),new LC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:qC.bind(null,s),t_:HC.bind(null,s),r_:FC.bind(null,s),H_:GC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Tg(s)?Eg(s):s.Ra.set("Unknown")):(await s.ma.stop(),FT(s))}))),s.ma}function ur(s){return s.fa||(s.fa=(function(n,r,o){const u=Ae(n);return u.sa(),new PC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:QC.bind(null,s),r_:JC.bind(null,s),ta:XC.bind(null,s),na:$C.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await $h(s)):(await s.fa.stop(),s.Ta.length>0&&(le(Zr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,m=new bg(e,n,f,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(s,e){if(as("AsyncQueue",`${e}: ${s}`),bo(s))return new se(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Ll(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new so;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.ga=new ht(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class yo{constructor(e,n,r,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new yo(e,n,so.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eI{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ae(n),u=o.queries;o.queries=w0(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(r)}))})(this,new se(X.ABORTED,"Firestore shutting down"))}}function w0(){return new ia((s=>dT(s)),Hh)}async function Sg(s,e){const n=Ae(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new ZC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Ag(f,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Rg(n)}async function wg(s,e){const n=Ae(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tI(s,e){const n=Ae(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(r=!0);f.wa=o}}r&&Rg(n)}function nI(s,e,n){const r=Ae(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function Rg(s){s.Ca.forEach((e=>{e.next()}))}var Fm,R0;(R0=Fm||(Fm={})).Ma="default",R0.Cache="cache";class Cg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class iI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=mT(e),this.tu=new so(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new S0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const C=o.get(T),P=Fh(this.query,S)?S:null,K=!!C&&this.mutatedKeys.has(C.key),Y=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let J=!1;C&&P?C.data.isEqual(P.data)?K!==Y&&(r.track({type:3,doc:P}),J=!0):this.su(C,P)||(r.track({type:2,doc:P}),J=!0,(p&&this.eu(P,p)>0||y&&this.eu(P,y)<0)&&(m=!0)):!C&&P?(r.track({type:0,doc:P}),J=!0):C&&!P&&(r.track({type:1,doc:C}),J=!0,(p||y)&&(m=!0)),J&&(P?(f=f.add(P),u=Y?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,S)=>(function(P,K){const Y=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:J})}};return Y(P)-Y(K)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new yo(this.query,e.tu,u,f,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new XT(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new QT(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ig="SyncEngine";class sI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rI{constructor(e){this.key=e,this.hu=!1}}class aI{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ia((m=>dT(m)),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new ht(me.comparator),this.Au=new Map,this.Ru=new mg,this.Vu={},this.mu=new Map,this.fu=po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oI(s,e,n=!0){const r=tb(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await $T(r,e,n,!0),o}async function lI(s,e){const n=tb(s);await $T(n,e,!0,!1)}async function $T(s,e,n,r){const o=await IC(s.localStore,Ci(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await uI(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&qT(s.remoteStore,o),m}async function uI(s,e,n,r,o){s.pu=(S,C,P)=>(async function(Y,J,re,ae){let ee=J.view.ru(re);ee.Cs&&(ee=await _0(Y.localStore,J.query,!1).then((({documents:I})=>J.view.ru(I,ee))));const pe=ae&&ae.targetChanges.get(J.targetId),Ce=ae&&ae.targetMismatches.get(J.targetId)!=null,ue=J.view.applyChanges(ee,Y.isPrimaryClient,pe,Ce);return I0(Y,J.targetId,ue.au),ue.snapshot})(s,S,C,P);const u=await _0(s.localStore,e,!0),f=new iI(e,u.Qs),m=f.ru(u.documents),p=au.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(m,s.isPrimaryClient,p);I0(s,n,y.au);const T=new sI(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function cI(s,e,n){const r=Ae(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Hh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await qm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&_g(r.remoteStore,o.targetId),Gm(r,o.targetId)})).catch(To)):(Gm(r,o.targetId),await qm(r.localStore,o.targetId,!0))}async function hI(s,e){const n=Ae(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_g(n.remoteStore,r.targetId))}async function fI(s,e,n){const r=vI(s);try{const o=await(function(f,m){const p=Ae(f),y=rt.now(),T=m.reduce(((P,K)=>P.add(K.key)),Pe());let S,C;return p.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let K=os(),Y=Pe();return p.Ns.getEntries(P,T).next((J=>{K=J,K.forEach(((re,ae)=>{ae.isValidDocument()||(Y=Y.add(re))}))})).next((()=>p.localDocuments.getOverlayedDocuments(P,K))).next((J=>{S=J;const re=[];for(const ae of m){const ee=CR(ae,S.get(ae.key).overlayedDocument);ee!=null&&re.push(new fr(ae.key,ee,rT(ee.value.mapValue),yn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,re,m)})).next((J=>{C=J;const re=J.applyToLocalDocumentSet(S,Y);return p.documentOverlayCache.saveOverlays(P,J.batchId,re)}))})).then((()=>({batchId:C.batchId,changes:pT(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new ht(Le)),y=y.insert(m,p),f.Vu[f.currentUser.toKey()]=y})(r,o.batchId,n),await lu(r,o.changes),await $h(r.remoteStore)}catch(o){const u=Ag(o,"Failed to persist write");n.reject(u)}}async function JT(s,e){const n=Ae(s);try{const r=await wC(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ke(f.hu,14607):o.removedDocuments.size>0&&(Ke(f.hu,42227),f.hu=!1))})),await lu(n,r,e)}catch(r){await To(r)}}function C0(s,e,n){const r=Ae(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=Ae(f);p.onlineState=m;let y=!1;p.queries.forEach(((T,S)=>{for(const C of S.Sa)C.va(m)&&(y=!0)})),y&&Rg(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dI(s,e,n){const r=Ae(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new ht(me.comparator);f=f.insert(u,Zt.newNoDocument(u,Te.min()));const m=Pe().add(u),p=new Yh(Te.min(),new Map,new ht(Le),f,m);await JT(r,p),r.du=r.du.remove(u),r.Au.delete(e),xg(r)}else await qm(r.localStore,e,!1).then((()=>Gm(r,e,n))).catch(To)}async function mI(s,e){const n=Ae(s),r=e.batch.batchId;try{const o=await SC(n.localStore,e);ZT(n,r,null),WT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lu(n,o)}catch(o){await To(o)}}async function gI(s,e,n){const r=Ae(s);try{const o=await(function(f,m){const p=Ae(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,m).next((S=>(Ke(S!==null,37113),T=S.keys(),p.mutationQueue.removeMutationBatch(y,S)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(r.localStore,e);ZT(r,e,n),WT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lu(r,o)}catch(o){await To(o)}}function WT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function ZT(s,e,n){const r=Ae(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Gm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||eb(s,r)}))}function eb(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(_g(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),xg(s))}function I0(s,e,n){for(const r of n)r instanceof QT?(s.Ru.addReference(r.key,e),pI(s,r)):r instanceof XT?(le(Ig,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||eb(s,r.key)):ve(19791,{wu:r})}function pI(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(le(Ig,"New document in limbo: "+n),s.Eu.add(r),xg(s))}function xg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(nt.fromString(e)),r=s.fu.next();s.Au.set(r,new rI(n)),s.du=s.du.insert(n,r),qT(s.remoteStore,new Ws(Ci(qh(n.path)),r,"TargetPurposeLimboResolution",jh.ce))}}async function lu(s,e,n){const r=Ae(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{f.push(r.pu(p,e,n).then((y=>{var T;if((y||n)&&r.isPrimaryClient){const S=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(y){o.push(y);const S=pg.As(p.targetId,y);u.push(S)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(p,y){const T=Ae(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Z.forEach(y,(C=>Z.forEach(C.Es,(P=>T.persistence.referenceDelegate.addReference(S,C.targetId,P))).next((()=>Z.forEach(C.ds,(P=>T.persistence.referenceDelegate.removeReference(S,C.targetId,P)))))))))}catch(S){if(!bo(S))throw S;le(yg,"Failed to update sequence numbers: "+S)}for(const S of y){const C=S.targetId;if(!S.fromCache){const P=T.Ms.get(C),K=P.snapshotVersion,Y=P.withLastLimboFreeSnapshotVersion(K);T.Ms=T.Ms.insert(C,Y)}}})(r.localStore,u))}async function yI(s,e){const n=Ae(s);if(!n.currentUser.isEqual(e)){le(Ig,"User change. New user:",e.toKey());const r=await UT(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new se(X.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lu(n,r.Ls)}}function _I(s,e){const n=Ae(s),r=n.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function tb(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=JT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_I.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dI.bind(null,e),e.Pu.H_=tI.bind(null,e.eventManager),e.Pu.yu=nI.bind(null,e.eventManager),e}function vI(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gI.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return AC(this.persistence,new EC,e.initialUser,this.serializer)}Cu(e){return new PT(gg.mi,this.serializer)}Du(e){return new NC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class EI extends Ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof Rh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new rC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new PT((r=>Rh.mi(r,n)),this.serializer)}}class Km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>C0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yI.bind(null,this.syncEngine),await WC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eI})()}createDatastore(e){const n=Qh(e.databaseInfo.databaseId),r=(function(u){return new kC(u)})(e.databaseInfo);return(function(u,f,m,p){return new jC(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,f,m){return new BC(r,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>C0(this.syncEngine,n,0)),(function(){return T0.v()?new T0:new DC})())}createSyncEngine(e,n){return(function(o,u,f,m,p,y,T){const S=new aI(o,u,f,m,p,y);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ae(o);le(Zr,"RemoteStore shutting down."),u.Ea.add(5),await ou(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="FirestoreClient";class TI{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{le(cr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(le(cr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ag(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Em(s,e){s.asyncQueue.verifyOperationInProgress(),le(cr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await UT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function x0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await bI(s);le(cr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>A0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>A0(e.remoteStore,o))),s._onlineComponents=e}async function bI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){le(cr,"Using user provided OfflineComponentProvider");try{await Em(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await Em(s,new Ih)}}else le(cr,"Using default OfflineComponentProvider"),await Em(s,new EI(void 0));return s._offlineComponents}async function nb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(le(cr,"Using user provided OnlineComponentProvider"),await x0(s,s._uninitializedComponentsProvider._online)):(le(cr,"Using default OnlineComponentProvider"),await x0(s,new Km))),s._onlineComponents}function AI(s){return nb(s).then((e=>e.syncEngine))}async function xh(s){const e=await nb(s),n=e.eventManager;return n.onListen=oI.bind(null,e.syncEngine),n.onUnlisten=cI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hI.bind(null,e.syncEngine),n}function SI(s,e,n={}){const r=new ns;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const T=new Ng({next:C=>{T.Nu(),f.enqueueAndForget((()=>wg(u,S)));const P=C.docs.has(m);!P&&C.fromCache?y.reject(new se(X.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&C.fromCache&&p&&p.source==="server"?y.reject(new se(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),S=new Cg(qh(m.path),T,{includeMetadataChanges:!0,qa:!0});return Sg(u,S)})(await xh(s),s.asyncQueue,e,n,r))),r.promise}function wI(s,e,n={}){const r=new ns;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const T=new Ng({next:C=>{T.Nu(),f.enqueueAndForget((()=>wg(u,S))),C.fromCache&&p.source==="server"?y.reject(new se(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),S=new Cg(m,T,{includeMetadataChanges:!0,qa:!0});return Sg(u,S)})(await xh(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firestore.googleapis.com",D0=!0;class O0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sb,this.ssl=D0}else this.host=e.host,this.ssl=e.ssl??D0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iC)throw new se(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Dw;switch(r.type){case"firstParty":return new kw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=N0.get(n);r&&(le("ComponentProvider","Removing Datastore"),N0.delete(n),r.terminate())})(this),Promise.resolve()}}function RI(s,e,n,r={}){var y;s=pn(s,Jh);const o=_o(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;o&&(OE(`https://${m}`),ME("Firestore",!0)),u.host!==sb&&u.host!==m&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:r};if(!ss(p,f)&&(s._setSettings(p),r.mockUserToken)){let T,S;if(typeof r.mockUserToken=="string")T=r.mockUserToken,S=Wt.MOCK_USER;else{T=sS(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new se(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Wt(C)}s._authCredentials=new Ow(new YE(T,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(su(n,mt._jsonSchema))return new mt(e,r||null,new me(nt.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Ot("string",mt._jsonSchemaVersion),referencePath:Ot("string")};class ir extends hs{constructor(e,n,r){super(e,n,qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new me(e))}withConverter(e){return new ir(this.firestore,e,this._path)}}function Gs(s,e,...n){if(s=Et(s),QE("collection","path",e),s instanceof Jh){const r=nt.fromString(e,...n);return Gv(r),new ir(s,null,r)}{if(!(s instanceof mt||s instanceof ir))throw new se(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(nt.fromString(e,...n));return Gv(r),new ir(s.firestore,null,r)}}function an(s,e,...n){if(s=Et(s),arguments.length===1&&(e=ig.newId()),QE("doc","path",e),s instanceof Jh){const r=nt.fromString(e,...n);return Fv(r),new mt(s,null,new me(r))}{if(!(s instanceof mt||s instanceof ir))throw new se(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(nt.fromString(e,...n));return Fv(r),new mt(s.firestore,s instanceof ir?s.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="AsyncQueue";class V0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zT(this,"async_queue_retry"),this._c=()=>{const r=vm();r&&le(M0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ns;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;le(M0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,as("INTERNAL UNHANDLED ERROR: ",k0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=bg.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ve(47125,{Pc:k0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function k0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class ls extends Jh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new V0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V0(e),this._firestoreClient=void 0,await e}}}function CI(s,e){const n=typeof s=="object"?s:PE(),r=typeof s=="string"?s:vh,o=tg(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=nS("firestore");u&&RI(o,...u)}return o}function uu(s){if(s._terminated)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||II(s),s._firestoreClient}function II(s){var r,o,u;const e=s._freezeSettings(),n=(function(m,p,y,T){return new Ww(m,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,ib(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new TI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Xt.fromBase64String(e))}catch(n){throw new se(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Ot("string",qn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xi._jsonSchemaVersion}}static fromJSON(e){if(su(e,xi._jsonSchema))return new xi(e.latitude,e.longitude)}}xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:Ot("string",xi._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ni(e.vectorValues);throw new se(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Ot("string",Ni._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=/^__.*__$/;class NI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}class rb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ab(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:s})}}class Wh{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ab(this.Ac)&&xI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qh(e)}Cc(e,n,r,o=!1){return new Wh({Ac:e,methodName:n,Dc:r,path:Qt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fu(s){const e=s._freezeSettings(),n=Qh(s._databaseId);return new DI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Dg(s,e,n,r,o,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);Vg("Data must be an object, but it was:",f,r);const m=cb(r,f);let p,y;if(u.merge)p=new Cn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const C=Ym(e,S,n);if(!f.contains(C))throw new se(X.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);fb(T,C)||T.push(C)}p=new Cn(T),y=f.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,y=f.fieldTransforms;return new NI(new gn(m),p,y)}class Zh extends hu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zh}}function ob(s,e,n){return new Wh({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Og extends hu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=ob(this,e,!0),r=this.vc.map((u=>ra(u,n))),o=new mo(r);return new AT(e.path,o)}isEqual(e){return e instanceof Og&&ss(this.vc,e.vc)}}class Mg extends hu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=ob(this,e,!0),r=this.vc.map((u=>ra(u,n))),o=new go(r);return new AT(e.path,o)}isEqual(e){return e instanceof Mg&&ss(this.vc,e.vc)}}function lb(s,e,n,r){const o=s.Cc(1,e,n);Vg("Data must be an object, but it was:",o,r);const u=[],f=gn.empty();hr(r,((p,y)=>{const T=kg(e,p,n);y=Et(y);const S=o.yc(T);if(y instanceof Zh)u.push(T);else{const C=ra(y,S);C!=null&&(u.push(T),f.set(T,C))}}));const m=new Cn(u);return new rb(f,m,o.fieldTransforms)}function ub(s,e,n,r,o,u){const f=s.Cc(1,e,n),m=[Ym(e,r,n)],p=[o];if(u.length%2!=0)throw new se(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)m.push(Ym(e,u[C])),p.push(u[C+1]);const y=[],T=gn.empty();for(let C=m.length-1;C>=0;--C)if(!fb(y,m[C])){const P=m[C];let K=p[C];K=Et(K);const Y=f.yc(P);if(K instanceof Zh)y.push(P);else{const J=ra(K,Y);J!=null&&(y.push(P),T.set(P,J))}}const S=new Cn(y);return new rb(T,S,f.fieldTransforms)}function OI(s,e,n,r=!1){return ra(n,s.Cc(r?4:3,e))}function ra(s,e){if(hb(s=Et(s)))return Vg("Unsupported field value:",e,s),cb(s,e);if(s instanceof hu)return(function(r,o){if(!ab(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const m of r){let p=ra(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=rt.fromDate(r);return{timestampValue:wh(o.serializer,u)}}if(r instanceof rt){const u=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wh(o.serializer,u)}}if(r instanceof xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:xT(o.serializer,r._byteString)};if(r instanceof mt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:dg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ni)return(function(f,m){return{mapValue:{fields:{[iT]:{stringValue:sT},[Eh]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return ug(m.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Uh(r)}`)})(s,e)}function cb(s,e){const n={};return JE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hr(s,((r,o)=>{const u=ra(o,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function hb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof rt||s instanceof xi||s instanceof qn||s instanceof mt||s instanceof hu||s instanceof Ni)}function Vg(s,e,n){if(!hb(n)||!XE(n)){const r=Uh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Ym(s,e,n){if((e=Et(e))instanceof cu)return e._internalPath;if(typeof e=="string")return kg(s,e);throw Nh("Field path arguments must be of type string or ",s,!1,void 0,n)}const MI=new RegExp("[~\\*/\\[\\]]");function kg(s,e,n){if(e.search(MI)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new cu(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Nh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${o}`),p+=")"),new se(X.INVALID_ARGUMENT,m+s+p)}function fb(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ef("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VI extends db{data(){return super.data()}}function ef(s,e){return typeof e=="string"?kg(s,e):e instanceof cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class Pg extends Lg{}function Ja(s,e,...n){let r=[];e instanceof Lg&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((p=>p instanceof Ug)).length,m=u.filter((p=>p instanceof tf)).length;if(f>1||f>0&&m>0)throw new se(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class tf extends Pg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tf(e,n,r)}_apply(e){const n=this._parse(e);return gb(e._query,n),new hs(e.firestore,e.converter,Pm(e._query,n))}_parse(e){const n=fu(e.firestore);return(function(u,f,m,p,y,T,S){let C;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new se(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){j0(S,T);const K=[];for(const Y of S)K.push(U0(p,u,Y));C={arrayValue:{values:K}}}else C=U0(p,u,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||j0(S,T),C=OI(m,f,S,T==="in"||T==="not-in");return Dt.create(y,T,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kr(s,e,n){const r=e,o=ef("where",s);return tf._create(o,r,n)}class Ug extends Lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ug(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)gb(f,p),f=Pm(f,p)})(e._query,n),new hs(e.firestore,e.converter,Pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jg extends Pg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new se(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jl(u,f)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Ao(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function kI(s,e="asc"){const n=e,r=ef("orderBy",s);return jg._create(r,n)}class zg extends Pg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zg(e,n,r)}_apply(e){return new hs(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}}function P0(s){return zg._create("limit",s,"F")}function U0(s,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new se(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fT(e)&&n.indexOf("/")!==-1)throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nt.fromString(n));if(!me.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zv(s,new me(r))}if(n instanceof mt)return Zv(s,n._key);throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(n)}.`)}function j0(s,e){if(!Array.isArray(s)||s.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gb(s,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LI{convertValue(e,n="none"){switch(lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hr(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[Eh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>vt(f.doubleValue)));return new Ni(n)}convertGeoPoint(e){return new xi(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=ar(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nt.fromString(e);Ke(kT(r),9688,{name:e});const o=new Xl(r.get(1),r.get(3)),u=new me(r.popFirst(5));return o.isEqual(n)||as(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xr extends db{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ef("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xr._jsonSchema={type:Ot("string",Xr._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class ch extends Xr{data(e={}){return super.data(e)}}class $r{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ul(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ch(this._firestore,this._userDataWriter,r.key,r,new Ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ul(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ul(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:PI(m.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(s){s=pn(s,mt);const e=pn(s.firestore,ls);return SI(uu(e),s._key).then((n=>pb(e,s,n)))}$r._jsonSchemaVersion="firestore/querySnapshot/1.0",$r._jsonSchema={type:Ot("string",$r._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class qg extends LI{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function Tm(s){s=pn(s,hs);const e=pn(s.firestore,ls),n=uu(e),r=new qg(e);return mb(s._query),wI(n,s._query).then((o=>new $r(e,r,s,o)))}function UI(s,e,n){s=pn(s,mt);const r=pn(s.firestore,ls),o=Bg(s.converter,e,n);return nf(r,[Dg(fu(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,yn.none())])}function Zi(s,e,n,...r){s=pn(s,mt);const o=pn(s.firestore,ls),u=fu(o);let f;return f=typeof(e=Et(e))=="string"||e instanceof cu?ub(u,"updateDoc",s._key,e,n,r):lb(u,"updateDoc",s._key,e),nf(o,[f.toMutation(s._key,yn.exists(!0))])}function z0(s,e){const n=pn(s.firestore,ls),r=an(s),o=Bg(s.converter,e);return nf(n,[Dg(fu(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then((()=>r))}function th(s,...e){var p,y,T;s=Et(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||L0(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(L0(e[r])){const S=e[r];e[r]=(p=S.next)==null?void 0:p.bind(S),e[r+1]=(y=S.error)==null?void 0:y.bind(S),e[r+2]=(T=S.complete)==null?void 0:T.bind(S)}let u,f,m;if(s instanceof mt)f=pn(s.firestore,ls),m=qh(s._key.path),u={next:S=>{e[r]&&e[r](pb(f,s,S))},error:e[r+1],complete:e[r+2]};else{const S=pn(s,hs);f=pn(S.firestore,ls),m=S._query;const C=new qg(f);u={next:P=>{e[r]&&e[r](new $r(f,C,S,P))},error:e[r+1],complete:e[r+2]},mb(s._query)}return(function(C,P,K,Y){const J=new Ng(Y),re=new Cg(P,J,K);return C.asyncQueue.enqueueAndForget((async()=>Sg(await xh(C),re))),()=>{J.Nu(),C.asyncQueue.enqueueAndForget((async()=>wg(await xh(C),re)))}})(uu(f),m,o,u)}function nf(s,e){return(function(r,o){const u=new ns;return r.asyncQueue.enqueueAndForget((async()=>fI(await AI(r),o,u))),u.promise})(uu(s),e)}function pb(s,e,n){const r=n.docs.get(e._key),o=new qg(s);return new Xr(s,o,e._key,r,new Ul(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=fu(e)}set(e,n,r){this._verifyNotCommitted();const o=bm(e,this._firestore),u=Bg(o.converter,n,r),f=Dg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,yn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const u=bm(e,this._firestore);let f;return f=typeof(n=Et(n))=="string"||n instanceof cu?ub(this._dataReader,"WriteBatch.update",u._key,n,r,o):lb(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=bm(e,this._firestore);return this._mutations=this._mutations.concat(new cg(n._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bm(s,e){if((s=Et(s)).firestore!==e)throw new se(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Ol(...s){return new Og("arrayUnion",s)}function nh(...s){return new Mg("arrayRemove",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(s){return uu(s=pn(s,ls)),new jI(s,(e=>nf(s,e)))}(function(e,n=!0){(function(o){Eo=o})(vo),lo(new Jr("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new ls(new Mw(r.getProvider("auth-internal")),new Lw(f,r.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new se(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(y.options.projectId,T)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),tr(zv,Bv,e),tr(zv,Bv,"esm2020")})();function yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BI=yb,_b=new nu("auth","Firebase",yb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Zm("@firebase/auth");function qI(s,...e){Dh.logLevel<=ke.WARN&&Dh.warn(`Auth (${vo}): ${s}`,...e)}function hh(s,...e){Dh.logLevel<=ke.ERROR&&Dh.error(`Auth (${vo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(s,...e){throw Hg(s,...e)}function Di(s,...e){return Hg(s,...e)}function vb(s,e,n){const r={...BI(),[e]:n};return new nu("auth","Firebase",r).create(e,{appName:s.name})}function is(s){return vb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hg(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return _b.create(s,...e)}function _e(s,e,...n){if(!s)throw Hg(e,...n)}function es(s){const e="INTERNAL ASSERTION FAILED: "+s;throw hh(e),new Error(e)}function us(s,e){s||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function HI(){return B0()==="http:"||B0()==="https:"}function B0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HI()||cS()||"connection"in navigator)?navigator.onLine:!0}function GI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,us(n>e,"Short delay should be less than long delay!"),this.isMobile=oS()||hS()}get(){return FI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(s,e){us(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QI=new du(3e4,6e4);function dr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function mr(s,e,n,r,o={}){return Tb(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const m=iu({key:s.config.apiKey,...f}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...u};return uS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&_o(s.emulatorConfig.host)&&(y.credentials="include"),Eb.fetch()(await bb(s,s.config.apiHost,n,m),y)})}async function Tb(s,e,n){s._canInitEmulator=!1;const r={...KI,...e};try{const o=new $I(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw ih(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw ih(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw ih(s,"user-disabled",f);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw vb(s,T,y);ii(s,T)}}catch(o){if(o instanceof cs)throw o;ii(s,"network-request-failed",{message:String(o)})}}async function mu(s,e,n,r,o={}){const u=await mr(s,e,n,r,o);return"mfaPendingCredential"in u&&ii(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function bb(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Fg(s.config,o):`${s.config.apiScheme}://${o}`;return YI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function XI(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $I{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Di(this.auth,"network-request-failed")),QI.get())})}}function ih(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Di(s,e,r);return o.customData._tokenResponse=n,o}function q0(s){return s!==void 0&&s.enterprise!==void 0}class JI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WI(s,e){return mr(s,"GET","/v2/recaptchaConfig",dr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(s,e){return mr(s,"POST","/v1/accounts:delete",e)}async function Oh(s,e){return mr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ex(s,e=!1){const n=Et(s),r=await n.getIdToken(e),o=Gg(r);_e(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Fl(Am(o.auth_time)),issuedAtTime:Fl(Am(o.iat)),expirationTime:Fl(Am(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Am(s){return Number(s)*1e3}function Gg(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=IE(n);return o?JSON.parse(o):(hh("Failed to decode base64 JWT payload"),null)}catch(o){return hh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function H0(s){const e=Gg(s);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cs&&tx(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function tx({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(s){var S;const e=s.auth,n=await s.getIdToken(),r=await Wl(s,Oh(e,{idToken:n}));_e(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(S=o.providerUserInfo)!=null&&S.length?Ab(o.providerUserInfo):[],f=sx(s.providerData,u),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),y=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Xm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,T)}async function ix(s){const e=Et(s);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sx(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Ab(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(s,e){const n=await Tb(s,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await bb(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return s.emulatorConfig&&_o(s.emulatorConfig.host)&&(p.credentials="include"),Eb.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ax(s,e){return mr(s,"POST","/v2/accounts:revokeToken",dr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=H0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await rx(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new ro;return r&&(_e(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(_e(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(_e(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(s,e){_e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new nx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ex(this,e)}reload(){return ix(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Wl(this,ZI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:C,isAnonymous:P,providerData:K,stsTokenManager:Y}=n;_e(S&&Y,e,"internal-error");const J=ro.fromJSON(this.name,Y);_e(typeof S=="string",e,"internal-error"),Ks(r,e.name),Ks(o,e.name),_e(typeof C=="boolean",e,"internal-error"),_e(typeof P=="boolean",e,"internal-error"),Ks(u,e.name),Ks(f,e.name),Ks(m,e.name),Ks(p,e.name),Ks(y,e.name),Ks(T,e.name);const re=new ti({uid:S,auth:e,email:o,emailVerified:C,displayName:r,isAnonymous:P,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:J,createdAt:y,lastLoginAt:T});return K&&Array.isArray(K)&&(re.providerData=K.map(ae=>({...ae}))),p&&(re._redirectEventId=p),re}static async _fromIdTokenResponse(e,n,r=!1){const o=new ro;o.updateFromServerResponse(n);const u=new ti({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Mh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];_e(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Ab(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new ro;m.updateFromIdToken(r);const p=new ti({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Xm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=new Map;function ts(s){us(s instanceof Function,"Expected a class definition");let e=F0.get(s);return e?(us(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,F0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sb.type="NONE";const G0=Sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s,e,n){return`firebase:${s}:${e}:${n}`}class ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=fh(this.userKey,o.apiKey,u),this.fullPersistenceKey=fh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oh(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ao(ts(G0),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||ts(G0);const f=fh(r,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(f);if(T){let S;if(typeof T=="string"){const C=await Oh(e,{idToken:T}).catch(()=>{});if(!C)break;S=await ti._fromGetAccountInfoResponse(e,C,T)}else S=ti._fromJSON(e,T);y!==u&&(m=S),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new ao(u,e,r):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new ao(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ib(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nb(e))return"Blackberry";if(Db(e))return"Webos";if(Rb(e))return"Safari";if((e.includes("chrome/")||Cb(e))&&!e.includes("edge/"))return"Chrome";if(xb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wb(s=tn()){return/firefox\//i.test(s)}function Rb(s=tn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cb(s=tn()){return/crios\//i.test(s)}function Ib(s=tn()){return/iemobile/i.test(s)}function xb(s=tn()){return/android/i.test(s)}function Nb(s=tn()){return/blackberry/i.test(s)}function Db(s=tn()){return/webos/i.test(s)}function Kg(s=tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function ox(s=tn()){var e;return Kg(s)&&!!((e=window.navigator)!=null&&e.standalone)}function lx(){return fS()&&document.documentMode===10}function Ob(s=tn()){return Kg(s)||xb(s)||Db(s)||Nb(s)||/windows phone/i.test(s)||Ib(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(s,e=[]){let n;switch(s){case"Browser":n=K0(tn());break;case"Worker":n=`${K0(tn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(s,e={}){return mr(s,"GET","/v2/passwordPolicy",dr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=6;class fx{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y0(this),this.idTokenSubscription=new Y0(this),this.beforeStateQueue=new ux(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ts(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oh(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Bn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(is(this));const n=e?Et(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cx(this),n=new fx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ax(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ts(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&qI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function aa(s){return Et(s)}class Y0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ES(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mx(s){sf=s}function Vb(s){return sf.loadJS(s)}function gx(){return sf.recaptchaEnterpriseScript}function px(){return sf.gapiScript}function yx(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class _x{constructor(){this.enterprise=new vx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ex="recaptcha-enterprise",kb="NO_RECAPTCHA";class Tx{constructor(e){this.type=Ex,this.auth=aa(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{WI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new JI(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;q0(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(kb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _x().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!n&&q0(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=gx();p.length!==0&&(p+=m),Vb(p).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function Q0(s,e,n,r=!1,o=!1){const u=new Tx(s);let f;if(o)f=kb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function $m(s,e,n,r,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Q0(s,e,n,n==="getOobCode");return r(s,f)}else return r(s,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Q0(s,e,n,n==="getOobCode");return r(s,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(s,e){const n=tg(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ss(u,e??{}))return o;ii(o,"already-initialized")}return n.initialize({options:e})}function Ax(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ts);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Sx(s,e,n){const r=aa(s);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Lb(e),{host:f,port:m}=wx(e),p=m===null?"":`:${m}`,y={url:`${u}//${f}${p}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(ss(y,r.config.emulator)&&ss(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,_o(f)?(OE(`${u}//${f}${p}`),ME("Auth",!0)):Rx()}function Lb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function wx(s){const e=Lb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:X0(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:X0(f)}}}function X0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Rx(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,n){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function Cx(s,e){return mr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(s,e){return mu(s,"POST","/v1/accounts:signInWithPassword",dr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(s,e){return mu(s,"POST","/v1/accounts:signInWithEmailLink",dr(s,e))}async function Nx(s,e){return mu(s,"POST","/v1/accounts:signInWithEmailLink",dr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Yg{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Zl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,n,"signInWithPassword",Ix);case"emailLink":return xx(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,r,"signUpPassword",Cx);case"emailLink":return Nx(e,{idToken:n,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(s,e){return mu(s,"POST","/v1/accounts:signInWithIdp",dr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="http://localhost";class ea extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new ea(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return oo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oo(e,n)}buildRequest(){const e={requestUri:Dx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mx(s){const e=Ml(Vl(s)).link,n=e?Ml(Vl(e)).deep_link_id:null,r=Ml(Vl(s)).deep_link_id;return(r?Ml(Vl(r)).link:null)||r||n||e||s}class Qg{constructor(e){const n=Ml(Vl(e)),r=n.apiKey??null,o=n.oobCode??null,u=Ox(n.mode??null);_e(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Mx(e);try{return new Qg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(e,n){return Zl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qg.parseLink(n);return _e(r,"argument-error"),Zl._fromEmailAndCode(e,r.code,r.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Pb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends gu{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xs.credential(n,r)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends gu{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends gu{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(s,e){return mu(s,"POST","/v1/accounts:signUp",dr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await ti._fromIdTokenResponse(e,r,o),f=$0(r);return new ta({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=$0(r);return new ta({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function $0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends cs{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Vh(e,n,r,o)}}function Ub(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(s,u,e,r):u})}async function kx(s,e,n=!1){const r=await Wl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ta._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(s,e,n=!1){const{auth:r}=s;if(Bn(r.app))return Promise.reject(is(r));const o="reauthenticate";try{const u=await Wl(s,Ub(r,o,e,s),n);_e(u.idToken,r,"internal-error");const f=Gg(u.idToken);_e(f,r,"internal-error");const{sub:m}=f;return _e(s.uid===m,r,"user-mismatch"),ta._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ii(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(s,e,n=!1){if(Bn(s.app))return Promise.reject(is(s));const r="signIn",o=await Ub(s,r,e),u=await ta._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function Px(s,e){return jb(aa(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(s){const e=aa(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ux(s,e,n){if(Bn(s.app))return Promise.reject(is(s));const r=aa(s),f=await $m(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&zb(s),p}),m=await ta._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function jx(s,e,n){return Bn(s.app)?Promise.reject(is(s)):Px(Et(s),wo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zb(s),r})}function zx(s,e,n,r){return Et(s).onIdTokenChanged(e,n,r)}function Bx(s,e,n){return Et(s).beforeAuthStateChanged(e,n)}function qx(s,e,n,r){return Et(s).onAuthStateChanged(e,n,r)}function Hx(s){return Et(s).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=1e3,Gx=10;class qb extends Bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ob(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);lx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Gx):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Fx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qb.type="LOCAL";const Kx=qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Hb.type="SESSION";const Fb=Hb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await Yx(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=Xg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const C=S;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(C.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function Xx(s){Oi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function $x(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jx(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function Wx(){return Gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firebaseLocalStorageDb",Zx=1,Lh="firebaseLocalStorage",Yb="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function af(s,e){return s.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function e2(){const s=indexedDB.deleteDatabase(Kb);return new pu(s).toPromise()}function Jm(){const s=indexedDB.open(Kb,Zx);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Lh,{keyPath:Yb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await e2(),e(await Jm()))})})}async function J0(s,e,n){const r=af(s,!0).put({[Yb]:e,value:n});return new pu(r).toPromise()}async function t2(s,e){const n=af(s,!1).get(e),r=await new pu(n).toPromise();return r===void 0?null:r.value}function W0(s,e){const n=af(s,!0).delete(e);return new pu(n).toPromise()}const n2=800,i2=3;class Qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>i2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(Wx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await $x(),!this.activeServiceWorker)return;this.sender=new Qx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jm();return await J0(e,kh,"1"),await W0(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>J0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>t2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=af(o,!1).getAll();return new pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qb.type="LOCAL";const s2=Qb;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(s,e){return e?ts(e):(_e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function a2(s){return jb(s.auth,new $g(s),s.bypassAuthState)}function o2(s){const{auth:e,user:n}=s;return _e(n,e,"internal-error"),Lx(n,new $g(s),s.bypassAuthState)}async function l2(s){const{auth:e,user:n}=s;return _e(n,e,"internal-error"),kx(n,new $g(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a2;case"linkViaPopup":case"linkViaRedirect":return l2;case"reauthViaPopup":case"reauthViaRedirect":return o2;default:ii(this.auth,"internal-error")}}resolve(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new du(2e3,1e4);class io extends Xb{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){us(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u2.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="pendingRedirect",dh=new Map;class h2 extends Xb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const r=await f2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f2(s,e){const n=g2(e),r=m2(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function d2(s,e){dh.set(s._key(),e)}function m2(s){return ts(s._redirectPersistence)}function g2(s){return fh(c2,s.config.apiKey,s.name)}async function p2(s,e,n=!1){if(Bn(s.app))return Promise.reject(is(s));const r=aa(s),o=r2(r,e),f=await new h2(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=600*1e3;class _2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$b(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Di(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function $b({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $b(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(s,e={}){return mr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b2=/^https?/;async function A2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await E2(s);for(const n of e)try{if(S2(n))return}catch{}ii(s,"unauthorized-domain")}function S2(s){const e=Qm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!b2.test(n))return!1;if(T2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new du(3e4,6e4);function eE(){const s=Oi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function R2(s){return new Promise((e,n)=>{var o,u,f;function r(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),n(Di(s,"network-request-failed"))},timeout:w2.get()})}if((u=(o=Oi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Oi().gapi)!=null&&f.load)r();else{const m=yx("iframefcb");return Oi()[m]=()=>{gapi.load?r():n(Di(s,"network-request-failed"))},Vb(`${px()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw mh=null,e})}let mh=null;function C2(s){return mh=mh||R2(s),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new du(5e3,15e3),x2="__/auth/iframe",N2="emulator/auth/iframe",D2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M2(s){const e=s.config;_e(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Fg(e,N2):`https://${s.config.authDomain}/${x2}`,r={apiKey:e.apiKey,appName:s.name,v:vo},o=O2.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${iu(r).slice(1)}`}async function V2(s){const e=await C2(s),n=Oi().gapi;return _e(n,s,"internal-error"),e.open({where:document.body,url:M2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D2,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Di(s,"network-request-failed"),m=Oi().setTimeout(()=>{u(f)},I2.get());function p(){Oi().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L2=500,P2=600,U2="_blank",j2="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z2(s,e,n,r=L2,o=P2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...k2,width:r.toString(),height:o.toString(),top:u,left:f},y=tn().toLowerCase();n&&(m=Cb(y)?U2:n),wb(y)&&(e=e||j2,p.scrollbars="yes");const T=Object.entries(p).reduce((C,[P,K])=>`${C}${P}=${K},`,"");if(ox(y)&&m!=="_self")return B2(e||"",m),new tE(null);const S=window.open(e||"",m,T);_e(S,s,"popup-blocked");try{S.focus()}catch{}return new tE(S)}function B2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="__/auth/handler",H2="emulator/auth/handler",F2=encodeURIComponent("fac");async function nE(s,e,n,r,o,u){_e(s.config.authDomain,s,"auth-domain-config-required"),_e(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:vo,eventId:o};if(e instanceof Pb){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",vS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(e instanceof gu){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await s._getAppCheckToken(),y=p?`#${F2}=${encodeURIComponent(p)}`:"";return`${G2(s)}?${iu(m).slice(1)}${y}`}function G2({config:s}){return s.emulator?Fg(s,H2):`https://${s.authDomain}/${q2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class K2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fb,this._completeRedirectFn=p2,this._overrideRedirectResult=d2}async _openPopup(e,n,r,o){var f;us((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await nE(e,n,r,Qm(),o);return z2(e,u,Xg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await nE(e,n,r,Qm(),o);return Xx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(us(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await V2(e),r=new _2(e);return n.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sm,{type:Sm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[Sm];u!==void 0&&n(!!u),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ob()||Rb()||Kg()}}const Y2=K2;var iE="@firebase/auth",sE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $2(s){lo(new Jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;_e(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mb(s)},y=new dx(r,o,u,p);return Ax(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lo(new Jr("auth-internal",e=>{const n=aa(e.getProvider("auth").getImmediate());return(r=>new Q2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(iE,sE,X2(s)),tr(iE,sE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=300,W2=DE("authIdTokenMaxAge")||J2;let rE=null;const Z2=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>W2)return;const o=n==null?void 0:n.token;rE!==o&&(rE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eN(s=PE()){const e=tg(s,"auth");if(e.isInitialized())return e.getImmediate();const n=bx(s,{popupRedirectResolver:Y2,persistence:[s2,Kx,Fb]}),r=DE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=Z2(u.toString());Bx(n,f,()=>f(n.currentUser)),zx(n,m=>f(m))}}const o=xE("auth");return o&&Sx(n,`http://${o}`),n}function tN(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}mx({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Di("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",tN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$2("Browser");var nN="firebase",iN="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(nN,iN,"app");const sN={apiKey:"AIzaSyCaFpKeQuZszdWRL1Y7pt5PYepGnc6Qo1E",authDomain:"react-chat-app-b3937.firebaseapp.com",projectId:"react-chat-app-b3937",storageBucket:"react-chat-app-b3937.firebasestorage.app",messagingSenderId:"902063613038",appId:"1:902063613038:web:2d05d4bf8238912093b27f",measurementId:"G-0EPVZ2P30R"},Jb=LE(sN),sh=eN(Jb),ct=CI(Jb);class rN{async register(e,n,r,o){try{const u=Ja(Gs(ct,"users"),Kr("phone","==",r));if(!(await Tm(u)).empty)throw new Error("Phone number already registered.");const p=(await Ux(sh,n,o)).user,y={id:p.uid,name:e,email:n,phone:r,showPhone:!0,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.uid}`,bio:"Hello, I am using Saad Social App!",language:"en",friends:[],sentRequests:[],receivedRequests:[]};return await UI(an(ct,"users",p.uid),y),y}catch(u){throw u}}async login(e,n){const r=await jx(sh,e,n),o=await eh(an(ct,"users",r.user.uid));return o.exists()?o.data():null}async logout(){await Hx(sh)}onAuthChange(e){return qx(sh,async n=>{if(n){const r=await eh(an(ct,"users",n.uid));e(r.exists()?r.data():null)}else e(null)})}async updateProfile(e,n){await Zi(an(ct,"users",e),n)}async getUser(e){const n=await eh(an(ct,"users",e));return n.exists()?n.data():null}async searchUsers(e,n){const r=await Tm(Ja(Gs(ct,"users"),P0(50))),o=[],u=n.toLowerCase();return r.forEach(f=>{const m=f.data();m.id!==e&&(!n||m.name.toLowerCase().includes(u)||m.phone.includes(u))&&o.push(m)}),o}async sendFriendRequest(e,n){await Zi(an(ct,"users",e),{sentRequests:Ol(n)}),await Zi(an(ct,"users",n),{receivedRequests:Ol(e)})}async acceptFriendRequest(e,n){await Zi(an(ct,"users",e),{receivedRequests:nh(n),friends:Ol(n)}),await Zi(an(ct,"users",n),{sentRequests:nh(e),friends:Ol(e)})}async rejectFriendRequest(e,n){await Zi(an(ct,"users",e),{receivedRequests:nh(n)}),await Zi(an(ct,"users",n),{sentRequests:nh(e)})}async createPost(e,n,r){const o=Gs(ct,"posts");await z0(o,{authorId:e.id,authorName:e.name,authorAvatar:e.avatar,text:n,image:r||null,timestamp:Date.now(),reactions:{like:[],love:[],haha:[]},comments:[]})}subscribeToFeed(e,n,r){const o=Gs(ct,"posts"),u=Ja(o,kI("timestamp","desc"),P0(50));return th(u,f=>{const m=[],p=[e,...n];f.forEach(y=>{const T=y.data();p.includes(T.authorId)&&m.push({...T,id:y.id})}),r(m)})}async addReaction(e,n,r){const o=an(ct,"posts",e),u=await eh(o);if(!u.exists())return;const m={...u.data().reactions};m[r].includes(n)?m[r]=m[r].filter(p=>p!==n):m[r].push(n),await Zi(o,{reactions:m})}async addComment(e,n,r){const o=an(ct,"posts",e),u={id:Math.random().toString(36).substr(2,9),authorId:n.id,authorName:n.name,authorAvatar:n.avatar,text:r,timestamp:Date.now()};await Zi(o,{comments:Ol(u)})}async sendMessage(e,n,r,o,u){await z0(Gs(ct,"messages"),{senderId:e,receiverId:n,text:r||null,image:o||null,audio:u||null,timestamp:Date.now(),read:!1})}async markMessagesAsRead(e,n){const r=Ja(Gs(ct,"messages"),Kr("receiverId","==",e),Kr("senderId","==",n),Kr("read","==",!1)),o=await Tm(r);if(o.empty)return;const u=zI(ct);o.forEach(f=>u.update(f.ref,{read:!0})),await u.commit()}subscribeToMessages(e,n,r){const o=Ja(Gs(ct,"messages"),Kr("senderId","in",[e,n]));return th(o,u=>{const f=[];u.forEach(m=>{const p=m.data();(p.senderId===e&&p.receiverId===n||p.senderId===n&&p.receiverId===e)&&f.push({...p,id:m.id})}),f.sort((m,p)=>m.timestamp-p.timestamp),r(f)})}subscribeToAllUnread(e,n){const r=Ja(Gs(ct,"messages"),Kr("receiverId","==",e),Kr("read","==",!1));return th(r,o=>{const u={};o.forEach(f=>{const m=f.data();u[m.senderId]=(u[m.senderId]||0)+1}),n(u)})}subscribeToUser(e,n){return th(an(ct,"users",e),r=>{r.exists()&&n(r.data())})}}const at=new rN,aE={en:{app_name:"Saad Social App",login_tagline:"Connecting you, real-time",email:"Email Address",password:"Password",full_name:"Full Name",phone_number:"Phone Number",sign_in:"Sign In",start_chatting:"Start Chatting",new_member:"New to Saad? Join the community",already_member:"Already a member? Log in",inbox:"Inbox",community:"Community",discovery:"Discovery",ai_assistant:"AI Assistant",settings:"Settings",profile:"Profile",logout:"Logout",search_convos:"Search conversations...",requests:"Requests",accept:"Accept",ignore:"Ignore",no_active_chats:"No active chats.",find_friends:"Find friends in Discovery.",what_is_on_mind:"What's on your mind?",ai_caption:"AI Caption",post:"Post",no_stories:"No stories yet",comments:"Comments",add_comment:"Add a comment...",update_identity:"Update Identity",display_name:"Display Name",phone_visibility:"Phone Visibility",bio:"Bio / About Me",language:"Language",language_desc:"Choose your preferred interface language",syncing:"Syncing...",success_profile:"Profile updated successfully!",error_profile:"Failed to update profile.",personal_archive:"Personal Archive",my_stories:"My Stories",mutual_friends:"Mutual Friends",social_score:"Social Score",local_atmosphere:"Local Atmosphere",spiritual_flow:"Spiritual Flow",next:"NEXT",ai_thinking:"Gemini is thinking",type_message:"Type your message...",summarize:"Summarize with AI",recording:"Recording Audio...",stop_send:"Stop & Send"},ar:{app_name:"  ",login_tagline:"    ",email:" ",password:" ",full_name:" ",phone_number:" ",sign_in:" ",start_chatting:" ",new_member:"    ",already_member:"   ",inbox:" ",community:"",discovery:"",ai_assistant:"  ",settings:"",profile:" ",logout:" ",search_convos:"  ...",requests:"",accept:"",ignore:"",no_active_chats:"   .",find_friends:"     .",what_is_on_mind:" ",ai_caption:"  ",post:"",no_stories:"   ",comments:"",add_comment:" ...",update_identity:" ",display_name:" ",phone_visibility:" ",bio:" ",language:"",language_desc:"    ",syncing:" ...",success_profile:"    !",error_profile:"   .",personal_archive:" ",my_stories:"",mutual_friends:" ",social_score:" ",local_atmosphere:" ",spiritual_flow:" ",next:"",ai_thinking:" ",type_message:" ...",summarize:"  ",recording:"  ...",stop_send:" "}},Wb=oe.createContext(void 0),aN=({children:s,initialLanguage:e="en"})=>{const[n,r]=oe.useState(e),o=f=>{r(f),document.documentElement.dir=f==="ar"?"rtl":"ltr",document.documentElement.lang=f};oe.useEffect(()=>{document.documentElement.dir=n==="ar"?"rtl":"ltr",document.documentElement.lang=n},[n]);const u=f=>aE[n][f]||aE.en[f]||f;return E.jsx(Wb.Provider,{value:{language:n,setLanguage:o,t:u,isRTL:n==="ar"},children:s})},yu=()=>{const s=oe.useContext(Wb);if(!s)throw new Error("useLanguage must be used within LanguageProvider");return s},oN=({onLogin:s,onRegister:e})=>{const{t:n,isRTL:r}=yu(),[o,u]=oe.useState(!1),[f,m]=oe.useState(""),[p,y]=oe.useState(""),[T,S]=oe.useState(""),[C,P]=oe.useState(""),K=Y=>{if(Y.preventDefault(),!(!f||!p))if(o){if(!T||!C)return;e(T,f,C,p)}else s(f,p)};return E.jsx("div",{className:`flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-br from-indigo-700 to-indigo-900 ${r?"font-arabic":""}`,dir:r?"rtl":"ltr",children:E.jsxs("div",{className:"w-full max-w-md p-8 bg-white rounded-2xl shadow-2xl transition-all duration-300",children:[E.jsxs("div",{className:"flex flex-col items-center mb-8",children:[E.jsx("div",{className:"p-4 bg-indigo-50 rounded-2xl mb-4 text-indigo-600 shadow-inner",children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),E.jsx("h1",{className:"text-3xl font-black text-gray-800 tracking-tight",children:n("app_name")}),E.jsx("p",{className:"text-gray-500 mt-2 font-medium",children:n("login_tagline")})]}),E.jsxs("form",{onSubmit:K,className:"space-y-4",children:[o&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:n("full_name")}),E.jsx("input",{type:"text",value:T,onChange:Y=>S(Y.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:n("phone_number")}),E.jsx("input",{type:"tel",value:C,onChange:Y=>P(Y.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"+1 234 567 890",required:!0})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:n("email")}),E.jsx("input",{type:"email",value:f,onChange:Y=>m(Y.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"name@example.com",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:n("password")}),E.jsx("input",{type:"password",value:p,onChange:Y=>y(Y.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-indigo-500 transition-all outline-none",placeholder:"",required:!0,minLength:6})]}),E.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3.5 mt-2 rounded-xl font-bold hover:bg-indigo-700 active:scale-95 transition-all shadow-lg shadow-indigo-100",children:n(o?"start_chatting":"sign_in")})]}),E.jsx("div",{className:"mt-8 text-center",children:E.jsx("button",{onClick:()=>u(!o),className:"text-indigo-600 hover:text-indigo-800 text-sm font-bold transition-colors",children:n(o?"already_member":"new_member")})})]})})},lN=({user:s,friends:e,pendingRequests:n,unreadMap:r,selectedId:o,onSelectFriend:u})=>{const{t:f,isRTL:m}=yu();return E.jsxs("div",{className:"flex flex-col h-full animate-fade-in",dir:m?"rtl":"ltr",children:[E.jsxs("div",{className:"p-6",children:[E.jsx("h2",{className:"text-xl font-bold text-gray-900 tracking-tight mb-4",children:f("inbox")}),E.jsxs("div",{className:"relative group",children:[E.jsx("input",{type:"text",placeholder:f("search_convos"),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-100 rounded-2xl focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all text-xs"}),E.jsx("svg",{className:`w-3.5 h-3.5 absolute top-3 text-gray-400 ${m?"right-4":"left-4"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 custom-scrollbar",children:[n.length>0&&E.jsxs("div",{className:"mb-6",children:[E.jsx("h3",{className:"px-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3",children:f("requests")}),E.jsx("div",{className:"space-y-2",children:n.map(p=>E.jsxs("div",{className:"p-3 bg-gray-50 rounded-2xl border border-gray-100 transition-all",children:[E.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[E.jsx("img",{src:p.avatar,className:"w-8 h-8 rounded-full",alt:""}),E.jsx("p",{className:"text-xs font-bold text-gray-900 truncate",children:p.name})]}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("button",{onClick:()=>at.acceptFriendRequest(s.id,p.id),className:"flex-1 bg-gray-900 text-white text-[10px] font-bold py-1.5 rounded-xl active:scale-95 transition-transform",children:f("accept")}),E.jsx("button",{onClick:()=>at.rejectFriendRequest(s.id,p.id),className:"flex-1 bg-white text-gray-400 text-[10px] font-bold py-1.5 rounded-xl border border-gray-100 active:scale-95 transition-transform",children:f("ignore")})]})]},p.id))})]}),E.jsx("div",{className:"space-y-1",children:e.length===0?E.jsx("div",{className:"px-4 py-12 text-center",children:E.jsx("p",{className:"text-xs text-gray-300 font-medium",children:f("no_active_chats")})}):e.map(p=>{const y=r[p.id]||0;return E.jsxs("button",{onClick:()=>u(p.id),className:`w-full p-3 flex items-center space-x-3 rounded-2xl transition-all border ${o===p.id?"bg-gray-100 border-gray-100 shadow-sm":"hover:bg-gray-50 border-transparent"}`,children:[E.jsxs("div",{className:"relative flex-shrink-0",children:[E.jsx("img",{src:p.avatar,className:"w-11 h-11 rounded-full border border-gray-50",alt:""}),E.jsx("div",{className:`absolute bottom-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full ${m?"left-0":"right-0"}`})]}),E.jsxs("div",{className:`flex-1 text-${m?"right":"left"} min-w-0`,children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("h4",{className:`text-xs font-bold truncate ${y>0?"text-gray-900":"text-gray-600"}`,children:p.name}),y>0&&E.jsx("span",{className:"flex-shrink-0 bg-indigo-600 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:y})]}),E.jsx("p",{className:"text-[11px] truncate mt-0.5 text-gray-400 font-medium",children:p.bio||"Available"})]})]},p.id)})})]})]})};var oE;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(oE||(oE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lE;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(lE||(lE={}));var uE;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(uE||(uE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=["user","model","function","system"];var hE;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(hE||(hE={}));var fE;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(fE||(fE={}));var dE;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(dE||(dE={}));var mE;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(mE||(mE={}));var Gl;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(Gl||(Gl={}));var gE;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(gE||(gE={}));var pE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(pE||(pE={}));var yE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(yE||(yE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Wa extends en{constructor(e,n){super(e),this.response=n}}class Zb extends en{constructor(e,n,r,o){super(e),this.status=n,this.statusText=r,this.errorDetails=o}}class sr extends en{}class e1 extends en{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="https://generativelanguage.googleapis.com",cN="v1beta",hN="0.24.1",fN="genai-js";var na;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(na||(na={}));class dN{constructor(e,n,r,o,u){this.model=e,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=u}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||cN;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||uN}/${r}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function mN(s){const e=[];return s!=null&&s.apiClient&&e.push(s.apiClient),e.push(`${fN}/${hN}`),e.join(" ")}async function gN(s){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",mN(s.requestOptions)),n.append("x-goog-api-key",s.apiKey);let r=(e=s.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new sr(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,u]of r.entries()){if(o==="x-goog-api-key")throw new sr(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new sr(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function pN(s,e,n,r,o,u){const f=new dN(s,e,n,r,u);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},EN(u)),{method:"POST",headers:await gN(f),body:o})}}async function _u(s,e,n,r,o,u={},f=fetch){const{url:m,fetchOptions:p}=await pN(s,e,n,r,o,u);return yN(m,p,f)}async function yN(s,e,n=fetch){let r;try{r=await n(s,e)}catch(o){_N(o,s)}return r.ok||await vN(r,s),r}function _N(s,e){let n=s;throw n.name==="AbortError"?(n=new e1(`Request aborted when fetching ${e.toString()}: ${s.message}`),n.stack=s.stack):s instanceof Zb||s instanceof sr||(n=new en(`Error fetching from ${e.toString()}: ${s.message}`),n.stack=s.stack),n}async function vN(s,e){let n="",r;try{const o=await s.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Zb(`Error fetching from ${e.toString()}: [${s.status} ${s.statusText}] ${n}`,s.status,s.statusText,r)}function EN(s){const e={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const n=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>n.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),gh(s.candidates[0]))throw new Wa(`${Ys(s)}`,s);return TN(s)}else if(s.promptFeedback)throw new Wa(`Text not available. ${Ys(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),gh(s.candidates[0]))throw new Wa(`${Ys(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),_E(s)[0]}else if(s.promptFeedback)throw new Wa(`Function call not available. ${Ys(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),gh(s.candidates[0]))throw new Wa(`${Ys(s)}`,s);return _E(s)}else if(s.promptFeedback)throw new Wa(`Function call not available. ${Ys(s)}`,s)},s}function TN(s){var e,n,r,o;const u=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.text&&u.push(f.text),f.executableCode&&u.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&u.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function _E(s){var e,n,r,o;const u=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.functionCall&&u.push(f.functionCall);if(u.length>0)return u}const bN=[Gl.RECITATION,Gl.SAFETY,Gl.LANGUAGE];function gh(s){return!!s.finishReason&&bN.includes(s.finishReason)}function Ys(s){var e,n,r;let o="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)o+="Response was blocked",!((e=s.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${s.promptFeedback.blockReason}`),!((n=s.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((r=s.candidates)===null||r===void 0)&&r[0]){const u=s.candidates[0];gh(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function eu(s){return this instanceof eu?(this.v=s,this):new eu(s)}function AN(s,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(s,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(C){r[C]&&(o[C]=function(P){return new Promise(function(K,Y){u.push([C,P,K,Y])>1||m(C,P)})})}function m(C,P){try{p(r[C](P))}catch(K){S(u[0][3],K)}}function p(C){C.value instanceof eu?Promise.resolve(C.value.v).then(y,T):S(u[0][2],C)}function y(C){m("next",C)}function T(C){m("throw",C)}function S(C,P){C(P),u.shift(),u.length&&m(u[0][0],u[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function SN(s){const e=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=CN(e),[r,o]=n.tee();return{stream:RN(r),response:wN(o)}}async function wN(s){const e=[],n=s.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return Jg(IN(e));e.push(o)}}function RN(s){return AN(this,arguments,function*(){const n=s.getReader();for(;;){const{value:r,done:o}=yield eu(n.read());if(o)break;yield yield eu(Jg(r))}})}function CN(s){const e=s.getReader();return new ReadableStream({start(r){let o="";return u();function u(){return e.read().then(({value:f,done:m})=>{if(m){if(o.trim()){r.error(new en("Failed to parse stream"));return}r.close();return}o+=f;let p=o.match(vE),y;for(;p;){try{y=JSON.parse(p[1])}catch{r.error(new en(`Error parsing JSON response: "${p[1]}"`));return}r.enqueue(y),o=o.substring(p[0].length),p=o.match(vE)}return u()}).catch(f=>{let m=f;throw m.stack=f.stack,m.name==="AbortError"?m=new e1("Request aborted when reading from the stream"):m=new en("Error reading from the stream"),m})}}})}function IN(s){const e=s[s.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of s){if(r.candidates){let o=0;for(const u of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const f={};for(const m of u.content.parts)m.text&&(f.text=m.text),m.functionCall&&(f.functionCall=m.functionCall),m.executableCode&&(f.executableCode=m.executableCode),m.codeExecutionResult&&(f.codeExecutionResult=m.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),n.candidates[o].content.parts.push(f)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(s,e,n,r){const o=await _u(e,na.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(n),r);return SN(o)}async function n1(s,e,n,r){const u=await(await _u(e,na.GENERATE_CONTENT,s,!1,JSON.stringify(n),r)).json();return{response:Jg(u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function tu(s){let e=[];if(typeof s=="string")e=[{text:s}];else for(const n of s)typeof n=="string"?e.push({text:n}):e.push(n);return xN(e)}function xN(s){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const u of s)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),r=!0);if(r&&o)throw new en("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new en("No content is provided for sending chat message.");return r?e:n}function NN(s,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=s.generateContentRequest!=null;if(s.contents){if(o)throw new sr("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=s.contents}else if(o)r=Object.assign(Object.assign({},r),s.generateContentRequest);else{const u=tu(s);r.contents=[u]}return{generateContentRequest:r}}function EE(s){let e;return s.contents?e=s:e={contents:[tu(s)]},s.systemInstruction&&(e.systemInstruction=i1(s.systemInstruction)),e}function DN(s){return typeof s=="string"||Array.isArray(s)?{content:tu(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ON={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function MN(s){let e=!1;for(const n of s){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new en(`First content should be with role 'user', got ${r}`);if(!cE.includes(r))throw new en(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(cE)}`);if(!Array.isArray(o))throw new en("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new en("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const m of o)for(const p of TE)p in m&&(u[p]+=1);const f=ON[r];for(const m of TE)if(!f.includes(m)&&u[m]>0)throw new en(`Content with role '${r}' can't contain '${m}' part`);e=!0}}function bE(s){var e;if(s.candidates===void 0||s.candidates.length===0)return!1;const n=(e=s.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="SILENT_ERROR";class VN{constructor(e,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(MN(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,o,u,f,m,p;await this._sendPromise;const y=tu(e),T={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,y]},S=Object.assign(Object.assign({},this._requestOptions),n);let C;return this._sendPromise=this._sendPromise.then(()=>n1(this._apiKey,this.model,T,S)).then(P=>{var K;if(bE(P.response)){this._history.push(y);const Y=Object.assign({parts:[],role:"model"},(K=P.response.candidates)===null||K===void 0?void 0:K[0].content);this._history.push(Y)}else{const Y=Ys(P.response);Y&&console.warn(`sendMessage() was unsuccessful. ${Y}. Inspect response object for details.`)}C=P}).catch(P=>{throw this._sendPromise=Promise.resolve(),P}),await this._sendPromise,C}async sendMessageStream(e,n={}){var r,o,u,f,m,p;await this._sendPromise;const y=tu(e),T={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(m=this.params)===null||m===void 0?void 0:m.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,y]},S=Object.assign(Object.assign({},this._requestOptions),n),C=t1(this._apiKey,this.model,T,S);return this._sendPromise=this._sendPromise.then(()=>C).catch(P=>{throw new Error(AE)}).then(P=>P.response).then(P=>{if(bE(P)){this._history.push(y);const K=Object.assign({},P.candidates[0].content);K.role||(K.role="model"),this._history.push(K)}else{const K=Ys(P);K&&console.warn(`sendMessageStream() was unsuccessful. ${K}. Inspect response object for details.`)}}).catch(P=>{P.message!==AE&&console.error(P)}),C}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(s,e,n,r){return(await _u(e,na.COUNT_TOKENS,s,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(s,e,n,r){return(await _u(e,na.EMBED_CONTENT,s,!1,JSON.stringify(n),r)).json()}async function PN(s,e,n,r){const o=n.requests.map(f=>Object.assign(Object.assign({},f),{model:e}));return(await _u(e,na.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=i1(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const o=EE(e),u=Object.assign(Object.assign({},this._requestOptions),n);return n1(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}async generateContentStream(e,n={}){var r;const o=EE(e),u=Object.assign(Object.assign({},this._requestOptions),n);return t1(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}startChat(e){var n;return new VN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=NN(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return kN(this.apiKey,this.model,r,o)}async embedContent(e,n={}){const r=DN(e),o=Object.assign(Object.assign({},this._requestOptions),n);return LN(this.apiKey,this.model,r,o)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return PN(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new en("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new SE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new sr("Cached content must contain a `name` field.");if(!e.model)throw new sr("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const f of o)if(n!=null&&n[f]&&e[f]&&(n==null?void 0:n[f])!==e[f]){if(f==="model"){const m=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,p=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(m===p)continue}throw new sr(`Different value for "${f}" specified in modelParams (${n[f]}) and cachedContent (${e[f]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new SE(this.apiKey,u,r)}}const UN=async(s,e)=>{try{const r=new vu("AIzaSyDKaZgdM-V4fvPTKJA8T5AyD4WQ0FFBDJg").getGenerativeModel({model:"gemini-1.5-flash"}),o=`
      Context of conversation: ${s}
      Last message: "${e}"
      Based on the context and the last message, suggest 3 short, friendly, and natural-sounding replies.
      Return only a JSON array of strings.
    `,m=(await(await r.generateContent(o)).response).text();try{const p=JSON.parse(m);return Array.isArray(p)?p:["Hey there!","How's it going?","Good to see you!"]}catch{return["Hey there!","How's it going?","Good to see you!"]}}catch(n){return console.error("Gemini suggestion error:",n),["Hey there!","How's it going?","Good to see you!"]}},jN=async s=>{try{const n=new vu("AIzaSyDKaZgdM-V4fvPTKJA8T5AyD4WQ0FFBDJg").getGenerativeModel({model:"gemini-1.5-flash"}),r=`Summarize the following conversation in one short sentence: 
${s.join(`
`)}`;return(await(await n.generateContent(r)).response).text()||"No summary available."}catch(e){return console.error("Gemini summary error:",e),"Could not generate summary."}},zN=({currentUser:s,targetId:e})=>{const{t:n,isRTL:r}=yu(),[o,u]=oe.useState([]),[f,m]=oe.useState(""),[p,y]=oe.useState([]),[T,S]=oe.useState(!1),[C,P]=oe.useState(null),[K,Y]=oe.useState(null),[J,re]=oe.useState(!1),[ae,ee]=oe.useState(null),pe=oe.useRef([]),Ce=oe.useRef(null),ue=oe.useRef(null);oe.useEffect(()=>{at.getUser(e).then(Y);const w=at.subscribeToMessages(s.id,e,Se=>{u(Se),at.markMessagesAsRead(s.id,e)});return at.markMessagesAsRead(s.id,e),w},[s.id,e]),oe.useEffect(()=>{const w=o[o.length-1];w&&w.senderId===e&&w.text?D(w.text):y([]),ue.current&&(ue.current.scrollTop=ue.current.scrollHeight)},[o,e]);const I=async(w,Se,Ne,H)=>{w&&w.preventDefault();const ne=Se||f;!ne.trim()&&!Ne&&!H||(await at.sendMessage(s.id,e,ne||void 0,Ne,H),m(""),y([]))},R=w=>{var Ne;const Se=(Ne=w.target.files)==null?void 0:Ne[0];if(Se){const H=new FileReader;H.onloadend=()=>I(void 0,void 0,H.result),H.readAsDataURL(Se)}},x=async()=>{try{const w=await navigator.mediaDevices.getUserMedia({audio:!0}),Se=new MediaRecorder(w);pe.current=[],Se.ondataavailable=Ne=>{Ne.data.size>0&&pe.current.push(Ne.data)},Se.onstop=async()=>{const Ne=new Blob(pe.current,{type:"audio/webm"}),H=new FileReader;H.onloadend=()=>I(void 0,void 0,void 0,H.result),H.readAsDataURL(Ne),w.getTracks().forEach(ne=>ne.stop())},Se.start(),ee(Se),re(!0)}catch{alert("Microphone access denied.")}},V=()=>{ae&&(ae.stop(),re(!1),ee(null))},D=async w=>{S(!0);const Se=o.slice(-5).filter(H=>H.text).map(H=>H.text).join(". "),Ne=await UN(Se,w);y(Ne),S(!1)},L=async()=>{const w=o.slice(-10).filter(Ne=>Ne.text).map(Ne=>`${Ne.senderId===s.id?"Me":K==null?void 0:K.name}: ${Ne.text}`);if(w.length===0)return;S(!0);const Se=await jN(w);P(Se),S(!1)};return K?E.jsxs("div",{className:"flex flex-col h-full w-full animate-fade-in bg-white",dir:r?"rtl":"ltr",children:[E.jsxs("div",{className:"px-6 py-3 border-b border-gray-50 flex items-center justify-between glass sticky top-0 z-10",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("img",{src:K.avatar,className:"w-10 h-10 rounded-full border border-gray-100",alt:""}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-sm font-bold text-gray-900 tracking-tight",children:K.name}),E.jsxs("div",{className:"flex items-center space-x-1",children:[E.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Online"})]})]})]}),E.jsx("button",{onClick:L,className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",title:n("summarize"),children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),C&&E.jsxs("div",{className:"m-4 p-4 bg-gray-900 text-white rounded-2xl flex items-center justify-between shadow-lg",children:[E.jsxs("p",{className:"text-[11px] font-medium leading-relaxed italic",children:['"',C,'"']}),E.jsx("button",{onClick:()=>P(null),className:"ml-4 p-1 hover:bg-white/10 rounded-full",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsx("div",{ref:ue,className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar bg-gray-50/30",children:o.map(w=>E.jsx("div",{className:`flex ${w.senderId===s.id?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`max-w-[75%] px-4 py-2.5 rounded-2xl text-[13px] leading-relaxed ${w.senderId===s.id?"bg-indigo-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none shadow-sm"}`,children:[w.image&&E.jsx("img",{src:w.image,className:"rounded-xl mb-2 max-h-60 object-cover",alt:""}),w.audio&&E.jsx("audio",{src:w.audio,controls:!0,className:"h-8 mb-1 scale-90"}),w.text&&E.jsx("div",{className:"font-medium",children:w.text}),E.jsx("div",{className:"text-[9px] mt-1 font-bold uppercase tracking-tighter opacity-60",children:new Date(w.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},w.id))}),E.jsxs("div",{className:"p-4 bg-white border-t border-gray-50",children:[E.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:p.map((w,Se)=>E.jsx("button",{onClick:()=>I(void 0,w),className:"px-3 py-1 bg-gray-50 border border-gray-100 rounded-full text-[10px] font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:w},Se))}),E.jsxs("form",{onSubmit:I,className:"flex items-end space-x-2",children:[E.jsx("button",{type:"button",onClick:()=>{var w;return(w=Ce.current)==null?void 0:w.click()},className:"p-2.5 text-gray-400 hover:text-indigo-600 transition-colors",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),E.jsx("input",{type:"file",ref:Ce,onChange:R,className:"hidden",accept:"image/*"}),E.jsxs("div",{className:"flex-1 relative",children:[E.jsx("input",{value:f,onChange:w=>m(w.target.value),placeholder:n("type_message"),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-full focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all text-xs"}),T&&E.jsx("div",{className:"absolute right-4 top-3 animate-spin h-3 w-3 border border-indigo-600 border-t-transparent rounded-full"})]}),E.jsx("button",{type:"button",onMouseDown:x,onMouseUp:V,className:`p-2.5 rounded-full transition-all ${J?"bg-red-50 text-red-600 animate-pulse":"text-gray-400 hover:text-indigo-600"}`,children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),E.jsx("button",{type:"submit",disabled:!f.trim(),className:"p-3 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-30 disabled:shadow-none",children:E.jsx("svg",{className:"w-4 h-4 transform rotate-45",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]}):null},BN=({currentUser:s,onAddFriend:e})=>{const[n,r]=oe.useState(""),[o,u]=oe.useState([]),[f,m]=oe.useState(!1);oe.useEffect(()=>{const T=setTimeout(()=>{p()},300);return()=>clearTimeout(T)},[n]);const p=async()=>{m(!0);const T=await at.searchUsers(s.id,n);u(T),m(!1)},y=T=>s.friends.includes(T.id)?{text:"Friends",disabled:!0,className:"bg-green-100 text-green-700 border border-green-200"}:s.sentRequests.includes(T.id)?{text:"Sent",disabled:!0,className:"bg-gray-100 text-gray-500 border border-gray-200"}:s.receivedRequests.includes(T.id)?{text:"Action Needed",disabled:!0,className:"bg-amber-100 text-amber-700 border border-amber-200"}:{text:"Connect",disabled:!1,className:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-lg"};return E.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[E.jsxs("div",{className:"p-6",children:[E.jsx("h2",{className:"text-2xl font-black text-indigo-900 tracking-tighter uppercase",children:"Discovery"}),E.jsx("p",{className:"text-xs text-gray-400 mt-1 font-bold uppercase tracking-widest",children:"Global Directory"}),E.jsxs("div",{className:"mt-6 relative",children:[E.jsx("input",{type:"text",value:n,onChange:T=>r(T.target.value),placeholder:"Name or phone number...",className:"w-full pl-11 pr-4 py-4 bg-white border border-gray-100 rounded-2xl focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm shadow-sm"}),E.jsx("div",{className:"absolute left-4 top-4.5",children:f?E.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-indigo-600 border-t-transparent rounded-full"}):E.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6 custom-scrollbar",children:E.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.length===0&&!f?E.jsxs("div",{className:"py-20 text-center text-gray-400",children:[E.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full mx-auto mb-6 flex items-center justify-center border-2 border-dashed border-gray-200",children:E.jsx("svg",{className:"w-10 h-10 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),E.jsx("p",{className:"text-sm font-bold uppercase tracking-widest opacity-50",children:"No explorers found"}),E.jsx("p",{className:"text-[10px] mt-1 italic",children:"Try searching for a phone number or full name"})]}):o.map(T=>{const S=y(T);return E.jsxs("div",{className:"p-4 bg-white rounded-3xl border border-gray-50 shadow-sm flex items-center justify-between hover:shadow-xl hover:scale-[1.02] transition-all animate-fade-in group",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("img",{src:T.avatar,className:"w-14 h-14 rounded-2xl border-2 border-indigo-50 shadow-sm transition-transform group-hover:rotate-3",alt:""}),E.jsxs("div",{className:"min-w-0",children:[E.jsx("h4",{className:"text-sm font-black text-gray-900 truncate tracking-tight",children:T.name}),E.jsx("p",{className:"text-[10px] text-indigo-500 font-black uppercase tracking-widest mt-0.5",children:T.showPhone?T.phone:"Phone Private"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-medium truncate mt-1 italic",children:T.bio||"Available"})]})]}),E.jsx("button",{disabled:S.disabled,onClick:()=>e(T.id),className:`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-sm active:scale-90 ${S.className}`,children:S.text})]},T.id)})})})]})},qN=({user:s})=>{const{t:e,setLanguage:n,language:r,isRTL:o}=yu(),[u,f]=oe.useState(s.name),[m,p]=oe.useState(s.avatar),[y,T]=oe.useState(s.bio),[S,C]=oe.useState(s.showPhone??!0),[P,K]=oe.useState(s.language||"en"),[Y,J]=oe.useState(!1),[re,ae]=oe.useState(null),ee=oe.useRef(null),pe=async ue=>{ue.preventDefault(),J(!0),ae(null);try{await at.updateProfile(s.id,{name:u,avatar:m,bio:y,showPhone:S,language:P}),n(P),ae({type:"success",text:e("success_profile")})}catch{ae({type:"error",text:e("error_profile")})}finally{J(!1)}},Ce=ue=>{var R;const I=(R=ue.target.files)==null?void 0:R[0];if(I){if(I.size>1024*1024){alert("Image is too large. Please select an image smaller than 1MB.");return}const x=new FileReader;x.onloadend=()=>{p(x.result)},x.readAsDataURL(I)}};return E.jsxs("div",{className:"flex flex-col h-full animate-fade-in",dir:o?"rtl":"ltr",children:[E.jsxs("div",{className:"p-6",children:[E.jsx("h2",{className:"text-2xl font-black text-indigo-900 tracking-tighter uppercase",children:e("settings")}),E.jsx("p",{className:"text-xs text-gray-400 mt-1 font-bold uppercase tracking-widest",children:e("language_desc")})]}),E.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:E.jsxs("div",{className:"bg-white rounded-[3rem] border border-gray-100 p-8 shadow-sm",children:[E.jsxs("div",{className:"flex flex-col items-center mb-10",children:[E.jsxs("div",{onClick:()=>{var ue;return(ue=ee.current)==null?void 0:ue.click()},className:"relative group cursor-pointer",children:[E.jsx("img",{src:m,className:"w-32 h-32 rounded-[2.5rem] border-4 border-indigo-50 shadow-xl object-cover transition-transform group-hover:scale-[1.02]",alt:"Profile"}),E.jsx("div",{className:"absolute inset-0 bg-indigo-900/40 rounded-[2.5rem] opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all backdrop-blur-[2px]",children:E.jsxs("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),E.jsx("input",{type:"file",ref:ee,onChange:Ce,className:"hidden",accept:"image/*"}),E.jsxs("div",{className:"mt-4 text-center",children:[E.jsx("p",{className:"text-sm font-black text-gray-800 tracking-tight",children:s.phone}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:s.email})]})]}),E.jsxs("form",{onSubmit:pe,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1",children:e("display_name")}),E.jsx("input",{type:"text",value:u,onChange:ue=>f(ue.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-2xl focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm font-semibold",required:!0})]}),E.jsxs("div",{className:"bg-slate-50 p-5 rounded-[2rem] border border-slate-100 flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:e("language")}),E.jsx("p",{className:"text-[11px] text-gray-500 font-medium leading-tight",children:e("language_desc")})]}),E.jsxs("div",{className:"flex bg-white rounded-xl p-1 shadow-inner border border-gray-100",children:[E.jsx("button",{type:"button",onClick:()=>K("en"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${P==="en"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-indigo-600"}`,children:"EN"}),E.jsx("button",{type:"button",onClick:()=>K("ar"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${P==="ar"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-indigo-600"}`,children:"AR"})]})]}),E.jsxs("div",{className:"bg-slate-50 p-5 rounded-[2rem] border border-slate-100 flex items-center justify-between",children:[E.jsx("div",{children:E.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:e("phone_visibility")})}),E.jsx("button",{type:"button",onClick:()=>C(!S),className:`relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${S?"bg-indigo-600":"bg-gray-200"}`,children:E.jsx("span",{className:`pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow-md ring-0 transition duration-200 ease-in-out ${S?o?"-translate-x-5":"translate-x-5":"translate-x-0"}`})})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 ml-1 text-indigo-600",children:e("bio")}),E.jsx("textarea",{rows:4,value:y,onChange:ue=>T(ue.target.value),className:"w-full px-5 py-4 bg-gray-50 border border-gray-100 rounded-[2rem] focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm font-semibold resize-none leading-relaxed"})]}),re&&E.jsx("div",{className:`p-5 rounded-[2rem] text-xs font-bold animate-fade-in flex items-center space-x-3 ${re.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:E.jsx("span",{children:re.text})}),E.jsx("button",{type:"submit",disabled:Y,className:"w-full py-4 bg-indigo-600 text-white rounded-[2rem] font-black uppercase tracking-widest text-[11px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50",children:e(Y?"syncing":"update_identity")})]})]})})]})},HN=({user:s})=>{const[e,n]=oe.useState([{role:"model",text:`Hi ${s.name}! I'm Gemini, your Saad Social Assistant. How can I help you today?`,timestamp:Date.now()}]),[r,o]=oe.useState(""),[u,f]=oe.useState(!1),m=oe.useRef(null);oe.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[e,u]);const p=async y=>{if(y.preventDefault(),!r.trim()||u)return;const T={role:"user",text:r,timestamp:Date.now()};n(S=>[...S,T]),o(""),f(!0);try{const C=new vu("AIzaSyDKaZgdM-V4fvPTKJA8T5AyD4WQ0FFBDJg").getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:"You are the helpful AI assistant for 'Saad Social Chat', a modern real-time social networking app. Help users navigate the app, suggest conversation starters, or just chat. Be friendly, concise, and use emojis."}),P=e.filter((ae,ee)=>ee>0||e[0].role==="user").map(ae=>({role:ae.role==="model"?"model":"user",parts:[{text:ae.text}]})),re=(await(await C.startChat({history:P}).sendMessage(r)).response).text()||"I'm sorry, I couldn't process that. Could you try again?";n(ae=>[...ae,{role:"model",text:re,timestamp:Date.now()}])}catch(S){console.error("AI Chat Error:",S),n(C=>[...C,{role:"model",text:"Oops! I'm having trouble connecting right now.",timestamp:Date.now()}])}finally{f(!1)}};return E.jsxs("div",{className:"flex flex-col h-full w-full bg-slate-50/30 animate-fade-in",children:[E.jsx("div",{className:"px-6 py-4 border-b border-indigo-100 flex items-center justify-between bg-white/80 backdrop-blur-md sticky top-0 z-10",children:E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:"w-11 h-11 rounded-2xl bg-gradient-to-tr from-indigo-600 to-violet-500 flex items-center justify-center shadow-lg shadow-indigo-100 ring-2 ring-white",children:E.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-base font-black text-indigo-900 tracking-tight",children:"Gemini AI Assistant"}),E.jsxs("div",{className:"flex items-center space-x-1.5",children:[E.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Always Online"})]})]})]})}),E.jsxs("div",{ref:m,className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[e.map((y,T)=>E.jsx("div",{className:`flex ${y.role==="user"?"justify-end":"justify-start"} animate-fade-in`,children:E.jsxs("div",{className:`max-w-[85%] px-5 py-3.5 rounded-3xl text-[13.5px] shadow-sm leading-relaxed ${y.role==="user"?"bg-indigo-600 text-white rounded-br-none shadow-indigo-100":"bg-white text-gray-800 border border-indigo-50 rounded-bl-none"}`,children:[y.text,E.jsx("div",{className:`text-[9px] mt-2 font-bold uppercase tracking-tighter ${y.role==="user"?"text-indigo-200":"text-gray-400"}`,children:new Date(y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},T)),u&&E.jsx("div",{className:"flex justify-start animate-pulse",children:E.jsxs("div",{className:"bg-white border border-indigo-50 px-5 py-3.5 rounded-3xl rounded-bl-none shadow-sm flex items-center space-x-2",children:[E.jsxs("div",{className:"flex space-x-1",children:[E.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"}),E.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:0.2s]"}),E.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:0.4s]"})]}),E.jsx("span",{className:"text-[10px] font-black text-indigo-300 uppercase tracking-widest",children:"Gemini is thinking"})]})})]}),E.jsx("div",{className:"p-6 bg-white border-t border-indigo-50",children:E.jsxs("form",{onSubmit:p,className:"flex space-x-3 items-end",children:[E.jsx("input",{value:r,onChange:y=>o(y.target.value),placeholder:"Ask me anything...",className:"flex-1 px-6 py-4 bg-gray-50 border border-gray-100 rounded-3xl focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all text-sm shadow-inner"}),E.jsx("button",{type:"submit",disabled:!r.trim()||u,className:"p-4 bg-indigo-600 text-white rounded-2xl hover:bg-indigo-700 shadow-xl shadow-indigo-100 disabled:opacity-50 transition-all active:scale-90",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})})]})},FN=({user:s})=>{const[e,n]=oe.useState([]),[r,o]=oe.useState(!1),[u,f]=oe.useState(""),[m,p]=oe.useState(null),[y,T]=oe.useState(!1),S=oe.useRef(null);oe.useEffect(()=>at.subscribeToFeed(s.id,s.friends,J=>{n(J)}),[s.id,s.friends]);const C=Y=>{var re;const J=(re=Y.target.files)==null?void 0:re[0];if(J){const ae=new FileReader;ae.onloadend=()=>p(ae.result),ae.readAsDataURL(J)}},P=async()=>{if(!(!u.trim()&&!m)){o(!0);try{await at.createPost(s,u,m||void 0),f(""),p(null)}finally{o(!1)}}},K=async()=>{if(!(!m&&!u)){T(!0);try{const J=new vu("AIzaSyDKaZgdM-V4fvPTKJA8T5AyD4WQ0FFBDJg").getGenerativeModel({model:"gemini-1.5-flash"}),re=m?"Look at this image and draft text: '"+u+"'. Suggest a catchy social media caption for this post.":"Draft text: '"+u+"'. Rewrite this to be more engaging for a social feed.";let ae;if(m){const pe={inlineData:{data:m.split(",")[1],mimeType:"image/jpeg"}};ae=await J.generateContent([re,pe])}else ae=await J.generateContent(re);const ee=await ae.response;f(ee.text()||u)}catch(Y){console.error("Caption generation error:",Y)}finally{T(!1)}}};return E.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50 animate-fade-in overflow-hidden",children:[E.jsxs("div",{className:"p-6 bg-white border-b border-gray-100 flex-shrink-0",children:[E.jsx("h2",{className:"text-2xl font-black text-indigo-900 tracking-tighter uppercase",children:"Community"}),E.jsx("p",{className:"text-xs text-gray-400 mt-1 font-bold uppercase tracking-widest",children:"Share with friends"})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar space-y-6",children:[E.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100 animate-fade-in",children:E.jsxs("div",{className:"flex space-x-4",children:[E.jsx("img",{src:s.avatar,className:"w-12 h-12 rounded-2xl shadow-sm",alt:""}),E.jsxs("div",{className:"flex-1",children:[E.jsx("textarea",{value:u,onChange:Y=>f(Y.target.value),placeholder:"What's on your mind?",className:"w-full bg-gray-50 rounded-2xl p-4 text-sm focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all resize-none min-h-[100px]"}),m&&E.jsxs("div",{className:"mt-4 relative group",children:[E.jsx("img",{src:m,className:"max-h-64 rounded-2xl object-cover w-full border border-gray-100",alt:"Preview"}),E.jsx("button",{onClick:()=>p(null),className:"absolute top-2 right-2 p-2 bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("button",{onClick:()=>{var Y;return(Y=S.current)==null?void 0:Y.click()},className:"p-3 text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Upload Image",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),E.jsxs("button",{onClick:K,disabled:y||!u&&!m,className:"flex items-center space-x-2 px-4 py-2 text-violet-600 hover:bg-violet-50 rounded-xl transition-all disabled:opacity-30",children:[E.jsx("svg",{className:`w-5 h-5 ${y?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"AI Caption"})]}),E.jsx("input",{type:"file",ref:S,onChange:C,className:"hidden",accept:"image/*"})]}),E.jsx("button",{onClick:P,disabled:r||!u.trim()&&!m,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase tracking-widest text-[11px] shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50",children:r?"Posting...":"Post"})]})]})]})}),E.jsx("div",{className:"space-y-6 pb-12",children:e.length===0?E.jsxs("div",{className:"py-20 text-center text-gray-300",children:[E.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"No stories yet"}),E.jsx("p",{className:"text-[10px] mt-1",children:"Be the first to post something amazing!"})]}):e.map(Y=>E.jsx(s1,{post:Y,user:s},Y.id))})]})]})},s1=({post:s,user:e})=>{const[n,r]=oe.useState(""),[o,u]=oe.useState(!1),f=async p=>{p.preventDefault(),n.trim()&&(await at.addComment(s.id,e,n),r(""))},m=p=>{const y=Date.now()-p;return y<6e4?"Just now":y<36e5?Math.floor(y/6e4)+"m ago":y<864e5?Math.floor(y/36e5)+"h ago":new Date(p).toLocaleDateString()};return E.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden animate-fade-in group hover:shadow-xl transition-all duration-500",children:E.jsxs("div",{className:"p-6",children:[E.jsx("div",{className:"flex items-center justify-between mb-4",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("img",{src:s.authorAvatar,className:"w-10 h-10 rounded-xl",alt:""}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-black text-gray-900 tracking-tight",children:s.authorName}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter",children:m(s.timestamp)})]})]})}),E.jsx("p",{className:"text-[14px] text-gray-700 leading-relaxed mb-4 whitespace-pre-wrap",children:s.text}),s.image&&E.jsx("div",{className:"rounded-2xl overflow-hidden mb-4 border border-gray-50",children:E.jsx("img",{src:s.image,className:"w-full h-auto object-cover max-h-[500px]",alt:""})}),E.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[E.jsxs("div",{className:"flex space-x-1",children:[E.jsx(wm,{type:"like",emoji:"",count:s.reactions.like.length,active:s.reactions.like.includes(e.id),onClick:()=>at.addReaction(s.id,e.id,"like")}),E.jsx(wm,{type:"love",emoji:"",count:s.reactions.love.length,active:s.reactions.love.includes(e.id),onClick:()=>at.addReaction(s.id,e.id,"love")}),E.jsx(wm,{type:"haha",emoji:"",count:s.reactions.haha.length,active:s.reactions.haha.includes(e.id),onClick:()=>at.addReaction(s.id,e.id,"haha")})]}),E.jsxs("button",{onClick:()=>u(!o),className:"flex items-center space-x-2 text-[11px] font-black text-indigo-600 uppercase tracking-widest hover:underline",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),E.jsxs("span",{children:[s.comments.length," Comments"]})]})]}),o&&E.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-50 space-y-4 animate-fade-in",children:[s.comments.map(p=>E.jsxs("div",{className:"flex space-x-3 group/comment",children:[E.jsx("img",{src:p.authorAvatar,className:"w-8 h-8 rounded-lg shadow-sm",alt:""}),E.jsxs("div",{className:"flex-1 bg-gray-50 rounded-2xl p-3",children:[E.jsxs("div",{className:"flex justify-between items-center mb-1",children:[E.jsx("span",{className:"text-[11px] font-black text-gray-900",children:p.authorName}),E.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase",children:m(p.timestamp)})]}),E.jsx("p",{className:"text-xs text-gray-600",children:p.text})]})]},p.id)),E.jsxs("form",{onSubmit:f,className:"flex items-center space-x-2 mt-4",children:[E.jsx("img",{src:e.avatar,className:"w-8 h-8 rounded-lg",alt:""}),E.jsx("input",{type:"text",value:n,onChange:p=>r(p.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-50 border-none rounded-xl px-4 py-2 text-xs focus:ring-2 focus:ring-indigo-200 transition-all"}),E.jsx("button",{type:"submit",className:"p-2 text-indigo-600 hover:scale-110 transition-transform",children:E.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})},wm=({emoji:s,count:e,active:n,onClick:r})=>E.jsxs("button",{onClick:r,className:`flex items-center space-x-1 px-3 py-1.5 rounded-full text-xs font-bold transition-all ${n?"bg-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-400 hover:bg-gray-100"}`,children:[E.jsx("span",{children:s}),e>0&&E.jsx("span",{children:e})]}),GN=({user:s})=>{const[e,n]=oe.useState(null),[r,o]=oe.useState(null),[u,f]=oe.useState("Welcome back!"),[m,p]=oe.useState(null),[y,T]=oe.useState(null),[S,C]=oe.useState([]),[P,K]=oe.useState(!0);oe.useEffect(()=>{const ee=at.subscribeToFeed(s.id,s.friends,pe=>{const Ce=pe.filter(ue=>ue.authorId===s.id);C(Ce)});return Y(),()=>{ee()}},[s.id]);const Y=()=>{if(!navigator.geolocation){K(!1);return}navigator.geolocation.getCurrentPosition(async ee=>{const{latitude:pe,longitude:Ce}=ee.coords;try{const I=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pe}&longitude=${Ce}&current_weather=true`)).json(),R=J(I.current_weather.weathercode),x=Math.round(I.current_weather.temperature);n({temp:x,condition:R});const D=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${pe}&lon=${Ce}&format=json`)).json(),L=D.address.city||D.address.town||D.address.village||"Nearby",w=D.address.country||"";o({city:L,country:w}),re(R,x,L);const H=(await(await fetch(`https://api.aladhan.com/v1/timings?latitude=${pe}&longitude=${Ce}&method=2`)).json()).data.timings;p(H),ae(H)}catch(ue){console.error("External data fetch error:",ue)}finally{K(!1)}},()=>{K(!1)})},J=ee=>ee===0?"Clear":ee<=3?"Partly Cloudy":ee>=45&&ee<=48?"Foggy":ee>=51&&ee<=67?"Rain":"Overcast",re=async(ee,pe,Ce)=>{try{const I=new vu("AIzaSyDKaZgdM-V4fvPTKJA8T5AyD4WQ0FFBDJg").getGenerativeModel({model:"gemini-1.5-flash"}),R=`I am at a personal social networking dashboard in ${Ce}. Current local weather is ${ee} at ${pe}C. Give me one very short, helpful, and friendly sentence of lifestyle advice for today. Use a warm tone and a relevant emoji.`,V=await(await I.generateContent(R)).response;f(V.text()||"Have a wonderful day!")}catch{f("Enjoy your day and stay positive! ")}},ae=ee=>{const pe=new Date,Ce=pe.getHours()*60+pe.getMinutes(),ue=["Fajr","Dhuhr","Asr","Maghrib","Isha"];for(const I of ue){const[R,x]=ee[I].split(":").map(Number);if(R*60+x>Ce){T(I);return}}T("Fajr")};return P?E.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-white",children:[E.jsx("div",{className:"w-10 h-10 border-2 border-gray-100 border-t-indigo-600 rounded-full animate-spin"}),E.jsx("p",{className:"mt-4 text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Loading Dashboard"})]}):E.jsxs("div",{className:"h-full overflow-y-auto bg-[#F5F5F7] custom-scrollbar animate-fade-in pb-20",children:[E.jsx("section",{className:"pt-12 pb-16 relative flex flex-col items-center",children:E.jsx("div",{className:"w-full max-w-5xl px-8",children:E.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("img",{src:s.avatar,className:"w-40 h-40 md:w-48 md:h-48 rounded-full border-8 border-white shadow-xl bg-white object-cover",alt:s.name}),E.jsx("div",{className:"absolute bottom-2 right-2 w-8 h-8 bg-green-500 border-4 border-white rounded-full shadow-lg"})]}),E.jsxs("div",{children:[E.jsx("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:s.name}),E.jsx("p",{className:"text-gray-500 font-medium text-sm mt-1",children:s.bio||"Digital Nomad"})]}),E.jsxs("div",{className:"flex space-x-4",children:[E.jsxs("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-sm border border-gray-100",children:[E.jsx("p",{className:"text-lg font-bold text-gray-900",children:S.length}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Stories"})]}),E.jsxs("div",{className:"bg-white px-6 py-3 rounded-2xl shadow-sm border border-gray-100",children:[E.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.friends.length}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Mutuals"})]})]})]})})}),E.jsxs("div",{className:"px-8 max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[E.jsx("div",{className:"lg:col-span-8 space-y-8",children:E.jsxs("div",{className:"space-y-6",children:[E.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-[0.2em] px-4",children:"Recent Stories"}),S.length===0?E.jsx("div",{className:"bg-white rounded-[2rem] p-12 text-center border border-gray-100 shadow-sm",children:E.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"No stories captured yet."})}):E.jsx("div",{className:"space-y-6",children:S.map(ee=>E.jsx(s1,{post:ee,user:s},ee.id))})]})}),E.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[E.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-sm border border-gray-100 group",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Local"}),E.jsx("h4",{className:"text-xl font-bold text-gray-900",children:r==null?void 0:r.city})]}),E.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[e==null?void 0:e.temp,""]})]}),E.jsxs("div",{className:"p-4 bg-gray-50 rounded-2xl border border-gray-100 text-xs text-gray-600 font-medium leading-relaxed italic",children:['"',u,'"']})]}),E.jsxs("div",{className:"bg-gray-900 rounded-[2rem] p-8 text-white shadow-lg overflow-hidden relative",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Schedule"}),y&&E.jsx("div",{className:"px-3 py-1 bg-white/10 rounded-full",children:E.jsxs("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:["Next: ",y]})})]}),E.jsx("div",{className:"space-y-1",children:m&&["Fajr","Dhuhr","Asr","Maghrib","Isha"].map(ee=>E.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl transition-all ${y===ee?"bg-white text-gray-900":"text-gray-400"}`,children:[E.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:ee}),E.jsx("span",{className:"text-xs font-mono",children:m[ee]})]},ee))})]})]})]})]})},KN=({user:s,onLogout:e})=>{const{t:n,isRTL:r}=yu(),[o,u]=oe.useState(null),[f,m]=oe.useState("profile"),[p,y]=oe.useState([]),[T,S]=oe.useState([]),[C,P]=oe.useState({});oe.useEffect(()=>{f!=="chats"&&u(null)},[f]),oe.useEffect(()=>{let J=!0;return(async()=>{try{const ae=s.friends.map(ue=>at.getUser(ue)),ee=s.receivedRequests.map(ue=>at.getUser(ue)),[pe,Ce]=await Promise.all([Promise.all(ae),Promise.all(ee)]);J&&(y(pe.filter(ue=>ue!==null)),S(Ce.filter(ue=>ue!==null)))}catch(ae){console.error("Error fetching related users:",ae)}})(),()=>{J=!1}},[s.friends,s.receivedRequests]),oe.useEffect(()=>at.subscribeToAllUnread(s.id,re=>{P(re)}),[s.id]);const K=Object.values(C).reduce((J,re)=>J+re,0),Y=({tab:J,icon:re,label:ae,badge:ee})=>E.jsxs("button",{onClick:()=>m(J),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-all duration-300 relative ${f===J?"bg-gray-900 text-white shadow-lg":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"} ${r?"flex-row-reverse space-x-reverse":""}`,children:[re,E.jsx("span",{className:"text-xs font-semibold tracking-tight hidden md:inline",children:ae}),ee?E.jsx("span",{className:`absolute -top-1 ${r?"-left-1":"-right-1"} w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white`,children:ee}):null]});return E.jsxs("div",{className:`flex flex-col h-screen bg-[#F5F5F7] ${r?"font-arabic":""}`,dir:r?"rtl":"ltr",children:[E.jsxs("header",{className:"glass sticky top-0 z-50 border-b border-gray-100 px-6 h-16 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-6",children:[E.jsxs("button",{onClick:()=>m("profile"),className:"flex items-center space-x-3 group",children:[E.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shadow-indigo-100 shadow-md group-active:scale-95 transition-transform",children:E.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),E.jsx("span",{className:"text-sm font-bold tracking-tight text-gray-900 hidden sm:inline",children:n("app_name")})]}),E.jsxs("nav",{className:"flex items-center space-x-1",children:[E.jsx(Y,{tab:"chats",label:n("inbox"),badge:K,icon:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),E.jsx(Y,{tab:"community",label:n("community"),icon:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2zM14 3v5h5M7 8h5M7 12h10M7 16h10"})})}),E.jsx(Y,{tab:"search",label:n("discovery"),icon:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),E.jsx(Y,{tab:"ai-assistant",label:n("ai_assistant"),icon:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("button",{onClick:()=>m("settings"),className:`w-9 h-9 rounded-full overflow-hidden border-2 transition-all ${f==="settings"?"border-gray-900 shadow-md ring-2 ring-gray-100":"border-transparent hover:border-gray-200"}`,children:E.jsx("img",{src:s.avatar,className:"w-full h-full object-cover",alt:"profile"})}),E.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),E.jsx("button",{onClick:e,className:"text-gray-400 hover:text-red-500 transition-colors p-2",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),E.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[f==="chats"||f==="search"||f==="settings"?E.jsx("aside",{className:`w-full md:w-80 lg:w-96 flex flex-col bg-white ${r?"border-l":"border-r"} border-gray-100 flex-shrink-0 z-40`,children:f==="chats"?E.jsx(lN,{user:s,friends:p,pendingRequests:T,unreadMap:C,selectedId:o,onSelectFriend:u}):f==="search"?E.jsx(BN,{currentUser:s,onAddFriend:J=>at.sendFriendRequest(s.id,J)}):f==="settings"?E.jsx(qN,{user:s}):null}):null,E.jsx("div",{className:"flex-1 overflow-hidden bg-white/50 relative",children:f==="profile"?E.jsx(GN,{user:s}):f==="community"?E.jsx(FN,{user:s}):f==="ai-assistant"?E.jsx(HN,{user:s}):o?E.jsx(zN,{currentUser:s,targetId:o}):E.jsxs("div",{className:"hidden md:flex flex-1 flex-col h-full items-center justify-center text-gray-300 space-y-6",children:[E.jsx("div",{className:"w-24 h-24 bg-white rounded-3xl flex items-center justify-center shadow-sm border border-gray-100",children:E.jsx("svg",{className:"w-10 h-10 text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-xl font-bold text-gray-400 tracking-tight",children:n("app_name")}),E.jsx("p",{className:"text-xs text-gray-300 mt-1 uppercase tracking-widest font-medium",children:"Select a conversation to start"})]})]})})]})]})},YN=()=>{const[s,e]=oe.useState(null),[n,r]=oe.useState(!0);oe.useEffect(()=>{const m=at.onAuthChange(p=>{e(p),r(!1)});return()=>{m()}},[]),oe.useEffect(()=>{if(!s)return;const m=at.subscribeToUser(s.id,p=>{e(p)});return()=>m()},[s==null?void 0:s.id]);const o=async(m,p)=>{r(!0);try{await at.login(m,p)}catch(y){let T=y.message;y.code==="auth/invalid-credential"&&(T="Invalid email or password. Please try again or join us!"),alert("Oops! "+T),r(!1)}},u=async(m,p,y,T)=>{r(!0);try{await at.register(m,p,y,T)}catch(S){alert("Registration failed: "+S.message),r(!1)}},f=async()=>{r(!0),await at.logout(),e(null),r(!1)};return n?E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-indigo-50/20",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-indigo-600 border-t-transparent shadow-xl"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full"})})]}),E.jsx("p",{className:"mt-6 text-indigo-900/40 font-black uppercase tracking-widest text-[10px]",children:"Saad Social App"})]}):E.jsx(aN,{initialLanguage:(s==null?void 0:s.language)||"en",children:E.jsx("div",{className:"min-h-screen font-sans selection:bg-indigo-100 overflow-hidden",children:s?E.jsx(KN,{user:s,onLogout:f}):E.jsx(oN,{onLogin:o,onRegister:u})})})},r1=document.getElementById("root");if(!r1)throw new Error("Could not find root element to mount to");const QN=YA.createRoot(r1);QN.render(E.jsx(jA.StrictMode,{children:E.jsx(YN,{})}));
